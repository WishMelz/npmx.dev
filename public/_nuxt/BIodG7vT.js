import{At as e,C as t,Dt as n,G as r,J as i,K as a,Mt as o,O as s,Q as c,S as l,_ as u,_t as d,b as f,p,w as m,x as h,yt as g,z as _}from"./BLt7TXlb.js";import{Nt as v,bt as y}from"./Cf-0F-2c.js";import{t as b}from"./CWNsAIol.js";import{t as x}from"./xh7dz5-d.js";var S=[`xmlns`],C={class:`draggable-dialog-actions`},w=b({__name:`BaseDraggableDialog`,props:{backgroundColor:{type:String},color:{type:String},headerBg:{type:String},headerColor:{type:String},fullscreenParent:{type:HTMLElement},isFullscreen:{type:Boolean,default:!1},withPadding:{type:Boolean,default:!1},forcedWidth:{type:Number,default:400},isCursorPointer:{type:Boolean,default:!1}},emits:[`close`],setup(b,{expose:w,emit:T}){let E=b,D=T,O=g(!1),k=g(!1),A=g(0),j=g(null),M=g(null),N=g(null),P=`vue-ui-draggable-dialog-${v()}`,F=`${P}-title`,I=`${P}-body`;function L(){A.value+=1}let R=d({left:window.innerWidth/2-200,top:window.innerHeight/2-120,width:E.forcedWidth,height:400,dragging:!1,resizing:!1,dragOffsetX:0,dragOffsetY:0,pointerStartX:0,pointerStartY:0,resizeStartW:0,resizeStartH:0});function z(){N.value=document.activeElement instanceof HTMLElement?document.activeElement:null,O.value=!0,_(()=>{k.value||=(R.left=Math.max(0,window.innerWidth/2-R.width/2),R.top=Math.max(0,window.innerHeight/2-R.height/2),!0);let e=M.value||j.value;e&&typeof e.focus==`function`&&e.focus()})}function B(){O.value=!1,D(`close`),N.value&&typeof N.value.focus==`function`&&N.value.focus()}w({open:z,close:B});let V=f(()=>({position:`fixed`,left:`${R.left}px`,top:`${R.top}px`,width:`${R.width}px`,height:`${R.height}px`,padding:0,border:`none`,background:E.backgroundColor,boxShadow:`0 4px 24px rgba(0,0,0,0.15)`,zIndex:9999,overflow:`visible`,borderRadius:`2px`,"--dlg-color":E.color}));function H(e){return e.touches&&e.touches.length?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function U(e){e.preventDefault?.(),L(),R.dragging=!0;let t=H(e);R.dragOffsetX=t.x-R.left,R.dragOffsetY=t.y-R.top,document.addEventListener(`mousemove`,W),document.addEventListener(`mouseup`,G),document.addEventListener(`touchmove`,W,{passive:!1}),document.addEventListener(`touchend`,G)}function W(e){if(!R.dragging)return;e.preventDefault?.();let t=H(e),n=t.x-R.dragOffsetX,r=t.y-R.dragOffsetY;n=Math.max(0,Math.min(n,window.innerWidth-R.width)),r=Math.max(0,Math.min(r,window.innerHeight-R.height)),R.left=n,R.top=r}function G(){R.dragging=!1,document.removeEventListener(`mousemove`,W),document.removeEventListener(`mouseup`,G),document.removeEventListener(`touchmove`,W),document.removeEventListener(`touchend`,G)}function K(e){e.preventDefault?.(),L(),R.resizing=!0;let t=H(e);R.pointerStartX=t.x,R.pointerStartY=t.y,R.resizeStartW=R.width,R.resizeStartH=R.height,document.addEventListener(`mousemove`,q),document.addEventListener(`mouseup`,J),document.addEventListener(`touchmove`,q,{passive:!1}),document.addEventListener(`touchend`,J)}function q(e){if(!R.resizing)return;e.preventDefault?.();let t=H(e),n=t.x-R.pointerStartX,r=t.y-R.pointerStartY;R.width=Math.max(240,R.resizeStartW+n),R.height=Math.max(400,R.resizeStartH+r)}function J(){R.resizing=!1,document.removeEventListener(`mousemove`,q),document.removeEventListener(`mouseup`,J),document.removeEventListener(`touchmove`,q),document.removeEventListener(`touchend`,J)}function Y(e){e.preventDefault?.(),L(),R.resizing=!0;let t=H(e);R.pointerStartX=t.x,R.pointerStartY=t.y,R.resizeStartW=R.width,R.resizeStartH=R.height,R.resizeStartLeft=R.left,R.resizeStartTop=R.top,document.addEventListener(`mousemove`,X),document.addEventListener(`mouseup`,Z),document.addEventListener(`touchmove`,X,{passive:!1}),document.addEventListener(`touchend`,Z)}function X(e){if(!R.resizing)return;e.preventDefault?.();let t=H(e),n=t.x-R.pointerStartX,r=Math.min(Math.max(0,R.resizeStartLeft+n),R.resizeStartLeft+R.resizeStartW-240),i=R.resizeStartW-(r-R.resizeStartLeft),a=t.y-R.pointerStartY,o=Math.max(400,R.resizeStartH+a);R.left=r,R.width=i,R.height=o}function Z(){R.resizing=!1,document.removeEventListener(`mousemove`,X),document.removeEventListener(`mouseup`,Z),document.removeEventListener(`touchmove`,X),document.removeEventListener(`touchend`,Z)}r(()=>{document.addEventListener(`keydown`,Q)});function Q(e){e.key&&e.key===`Escape`&&B()}a(()=>{G(),J(),Z(),document.removeEventListener(`keydown`,Q)});function $(e){e.key===`Tab`&&ee(e)}function ee(e){if(!j.value)return;let t=j.value.querySelectorAll(`a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex]:not([tabindex="-1"]), [contenteditable="true"]`);if(!t.length)return;let n=t[0],r=t[t.length-1];e.shiftKey?document.activeElement===n&&(e.preventDefault(),r.focus()):document.activeElement===r&&(e.preventDefault(),n.focus())}return(r,a)=>(i(),l(u,{to:b.isFullscreen?b.fullscreenParent:`body`,key:A.value},[O.value?(i(),m(`div`,{key:0,ref_key:`draggableDialog`,ref:j,class:`vue-ui-draggable-dialog`,style:o(V.value),role:`dialog`,"aria-modal":!0,"aria-labelledby":F,"aria-describedby":I,tabindex:`-1`,onClick:a[0]||=p(()=>{},[`stop`]),onKeydown:$},[h(`div`,{class:`vue-ui-draggable-dialog-header`,style:o({backgroundColor:b.headerBg,color:b.headerColor})},[h(`span`,{class:`drag-handle`,"aria-hidden":`true`,onMousedown:p(U,[`stop`,`prevent`]),onTouchstart:p(U,[`stop`,`prevent`])},[(i(),m(`svg`,{xmlns:n(y),width:`20`,height:`20`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`1`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[...a[1]||=[h(`path`,{d:`M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`},null,-1),h(`path`,{d:`M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`},null,-1),h(`path`,{d:`M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`},null,-1),h(`path`,{d:`M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`},null,-1),h(`path`,{d:`M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`},null,-1),h(`path`,{d:`M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`},null,-1)]],8,S))],32),h(`span`,{class:`vue-ui-draggable-dialog-title`,id:F},[c(r.$slots,`title`,{},void 0,!0)]),h(`div`,C,[c(r.$slots,`actions`,{},void 0,!0),h(`button`,{ref_key:`closeButtonElement`,ref:M,class:`close`,type:`button`,"aria-label":`Close dialog`,onClick:B,style:o({cursor:b.isCursorPointer?`pointer`:`default`})},[s(x,{name:`close`,stroke:b.headerColor},null,8,[`stroke`])],4)])],4),h(`div`,{id:I,role:`document`,class:e({"vue-ui-draggable-dialog-body":!b.withPadding,"vue-ui-draggable-dialog-body-pad":b.withPadding})},[c(r.$slots,`content`,{},void 0,!0)],2),h(`div`,{class:`resize-handle`,"aria-hidden":`true`,onMousedown:p(K,[`stop`,`prevent`]),onTouchstart:p(K,[`stop`,`prevent`])},null,32),h(`div`,{class:`resize-handle resize-handle-left`,"aria-hidden":`true`,onMousedown:p(Y,[`stop`,`prevent`]),onTouchstart:p(Y,[`stop`,`prevent`])},null,32)],36)):t(``,!0)],8,[`to`]))}},[[`__scopeId`,`data-v-a8eceed6`]]);export{w as default};