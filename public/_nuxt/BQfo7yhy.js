const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CbFHGlY2.js","./BLt7TXlb.js","./Cf-0F-2c.js","./B9jcbJ_P.js","./xh7dz5-d.js","./CWNsAIol.js","./ByvxprxI.js","./CRSLCJ2m.js","./8DvoFuCx.js","./CH8pva4p.js","./C0O4I1kb.js","./DdyLBgN8.js","./C66xQW7K.js","./DuIAB7Tu.js","./DHC76net.js","./BDmUravP.js","./D7-tWLRc.js","./CBD7ngdF.js","./BIodG7vT.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,D as n,Dt as r,G as a,H as o,J as s,M as c,Mt as l,Nt as u,O as d,Q as f,R as p,S as m,St as ee,T as te,Tt as ne,Z as h,_ as re,b as g,et as ie,it as ae,jt as _,k as v,lt as y,m as b,ot as oe,st as x,w as S,x as C,yt as w,z as se}from"./BLt7TXlb.js";import{t as T}from"./YZkb6lnT.js";import{At as E,F as ce,Lt as le,M as ue,Mt as D,N as de,Nt as fe,P as pe,St as me,V as he,_ as ge,_t as _e,a as ve,bt as ye,dt as be,ft as xe,h as Se,it as Ce,j as we,k as Te,m as Ee,pt as De,wt as O,x as Oe,y as ke}from"./Cf-0F-2c.js";import{n as Ae,r as je,t as Me}from"./tZv40UlZ.js";import{n as Ne,t as Pe}from"./8DvoFuCx.js";import{t as Fe}from"./Cme7ewGR.js";import{t as Ie}from"./CWNsAIol.js";import{n as Le,t as Re}from"./D4ushAer.js";import{t as ze}from"./CLl0-3D6.js";import{t as Be}from"./BwaPX4qL.js";import{t as Ve}from"./CVPJ5CxP.js";import{t as He}from"./oZ4LAWkj.js";import{t as Ue}from"./BDmUravP.js";import{t as We}from"./BIZzPpPz.js";import{t as Ge}from"./C0O4I1kb.js";import{a as Ke,n as qe}from"./D4v1zV2y.js";import{t as Je}from"./Cpd__yay.js";import{t as Ye}from"./CB2Wh4RA.js";import{t as Xe}from"./BEpjx3T_.js";import{t as Ze}from"./DMqKe8aR.js";import{t as Qe}from"./CMjlbb0z.js";var $e={userOptions:{show:!1},style:{chart:{legend:{show:!1},bars:{gradient:{show:!1}},zoom:{minimap:{show:!0}}}}},et={userOptions:{show:!1},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},legend:{show:!1,backgroundColor:`#1A1A1A`,color:`#CCCCCC`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},zoom:{color:`#4A4A4A`,highlightColor:`#9A9A9A`,minimap:{show:!0,selectedColor:`#8A8A8A`,lineColor:`#424242`,indicatorColor:`#CCCCCC`}},highlighter:{color:`#CCCCCC`},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#3A3A3A`},bars:{gradient:{show:!1},totalValues:{color:`#CCCCCC`}},grid:{frame:{stroke:`#5A5A5A`},x:{axisColor:`#5A5A5A`,linesColor:`#4A4A4A`,axisName:{color:`#CCCCCC`},timeLabels:{color:`#CCCCCC`}},y:{axisColor:`#5A5A5A`,linesColor:`#4A4A4A`,axisName:{color:`#CCCCCC`},axisLabels:{color:`#CCCCCC`}}}}}},tt={table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},legend:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},zoom:{color:`#4A4A4A`,highlightColor:`#9A9A9A`,minimap:{selectedColor:`#8A8A8A`,lineColor:`#424242`,indicatorColor:`#CCCCCC`}},highlighter:{color:`#CCCCCC`},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#5A5A5A`},bars:{totalValues:{color:`#CCCCCC`}},grid:{frame:{stroke:`#5A5A5A`},x:{axisColor:`#5A5A5A`,linesColor:`#4A4A4A`,axisName:{color:`#CCCCCC`},timeLabels:{color:`#CCCCCC`}},y:{axisColor:`#5A5A5A`,linesColor:`#4A4A4A`,axisName:{color:`#CCCCCC`},axisLabels:{color:`#CCCCCC`}}}}}},nt={table:{th:{backgroundColor:`#FFF8E1`,color:`#424242`},td:{backgroundColor:`#FFF8E1`,color:`#424242`}},style:{chart:{backgroundColor:`#FFF8E1`,color:`#424242`,title:{color:`#424242`,subtitle:{color:`#757575`}},legend:{backgroundColor:`#FFF8E1`,color:`#424242`,selectAllToggle:{backgroundColor:`#5D4037`,color:`#FFF8E1`}},zoom:{color:`#5D4037`,highlightColor:`#FF8A65`},highlighter:{color:`#424242`},tooltip:{backgroundColor:`#FFECB3`,backgroundOpacity:30,color:`#424242`,borderColor:`#FF8A65`},bars:{totalValues:{color:`#424242`}},grid:{x:{axisColor:`#5D403780`,axisName:{color:`#424242`},timeLabels:{color:`#424242`}},y:{axisColor:`#5D403780`,axisName:{color:`#424242`},axisLabels:{color:`#424242`}}}}}},rt={table:{th:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`},td:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`}},style:{chart:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}},legend:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#BDBDBD`}},zoom:{color:`#5D4037`,highlightColor:`#FF8A65`},highlighter:{color:`#FFF8E1`},tooltip:{backgroundColor:`#1E1E1E`,backgroundOpacity:30,color:`#FFF8E1`,borderColor:`#FF8A65`},bars:{totalValues:{color:`#BDBDBD`}},grid:{x:{axisColor:`#5D403740`,axisName:{color:`#BDBDBD`},timeLabels:{color:`#BDBDBD`}},y:{axisColor:`#5D4037`,axisName:{color:`#BDBDBD`},axisLabels:{color:`#BDBDBD`}}}}}},it={table:{th:{backgroundColor:`#1A1A1A`,color:`#99AA99`},td:{backgroundColor:`#1A1A1A`,color:`#AACCAA`}},style:{chart:{backgroundColor:`#1A1A1A`,color:`#99AA99`,title:{color:`#66CC66`,subtitle:{color:`#99AA99`}},legend:{backgroundColor:`#1A1A1A`,color:`#99AA99`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#99AA99`}},zoom:{color:`#5F6A5F`,highlightColor:`#66CC66`},highlighter:{color:`#66CC66`},tooltip:{backgroundColor:`#2A2F2A`,color:`#AACCAA`,borderColor:`#66CC66`},bars:{totalValues:{color:`#99AA99`}},grid:{x:{axisColor:`#5F6A5F`,axisName:{color:`#66CC66`},timeLabels:{color:`#99AA99`}},y:{axisColor:`#5F6A5F`,axisName:{color:`#66CC66`},axisLabels:{color:`#99AA99`}}}}}},at={table:{th:{backgroundColor:`#1A1A1A`,color:`#99AA99`},td:{backgroundColor:`#1A1A1A`,color:`#AACCAA`}},style:{chart:{backgroundColor:`#fbfafa`,color:`#8A9892`,title:{color:`#8A9892`,subtitle:{color:`#99AA99`}},legend:{backgroundColor:`#fbfafa`,color:`#99AA99`,selectAllToggle:{backgroundColor:`#E0CFC3`,color:`#8F837A`}},zoom:{color:`#E0CFC3`,highlightColor:`#8F837A`},highlighter:{color:`#8F837A`},tooltip:{backgroundColor:`#fbfafa`,color:`#8A9892`},bars:{borderRadius:4,totalValues:{show:!1},dataLabels:{show:!1}},grid:{x:{showAxis:!1,axisName:{color:`#8F837A`},timeLabels:{show:!1}},y:{showAxis:!1,axisName:{color:`#8F837A`},axisLabels:{show:!1}}}}}},ot={table:{th:{backgroundColor:`#f6f6fb`,color:`#50606C`},td:{backgroundColor:`#f6f6fb`,color:`#50606C`}},style:{chart:{backgroundColor:`#f6f6fb`,color:`#50606C`,title:{color:`#50606C`,subtitle:{color:`#718890`}},legend:{backgroundColor:`#f6f6fb`,color:`#61747E`,selectAllToggle:{backgroundColor:`#50606C`,color:`#f6f6fb`}},zoom:{color:`#92B0AB`,highlightColor:`#50606C`},highlighter:{color:`#7DA9B5`},tooltip:{backgroundColor:`#f6f6fb`,color:`#50606C`},bars:{totalValues:{color:`#50606C`}},grid:{x:{showHorizontalLines:!0,axisColor:`#829C98`,axisName:{color:`#50606C`},timeLabels:{color:`#61747E`}},y:{showVerticalLines:!0,axisColor:`#829C98`,axisName:{color:`#50606C`},axisLabels:{color:`#61747E`}}}}}},st={default:{},minimal:$e,minimalDark:et,dark:tt,celebration:nt,celebrationNight:rt,hack:it,zen:at,concrete:ot},ct=Object.freeze(Object.defineProperty({__proto__:null,celebration:nt,celebrationNight:rt,concrete:ot,dark:tt,default:st,hack:it,minimal:$e,minimalDark:et,zen:at},Symbol.toStringTag,{value:`Module`})),lt=[`id`],ut=[`id`],dt=[`xmlns`,`viewBox`],ft=[`x`,`y`,`width`,`height`],pt={key:1},mt=[`id`],ht=[`stop-color`],gt=[`stop-color`],_t=[`stop-color`],vt=[`x`,`y`,`width`,`height`,`stroke`,`stroke-width`,`stroke-linecap`,`stroke-linejoin`,`stroke-dasharray`],yt=[`x1`,`x2`,`y1`,`y2`,`stroke`,`stroke-width`,`stroke-dasharray`],bt=[`x1`,`x2`,`y1`,`y2`,`stroke`,`stroke-width`,`stroke-dasharray`],xt=[`x1`,`x2`,`y1`,`y2`,`stroke`,`stroke-width`,`stroke-dasharray`],St=[`x1`,`x2`,`y1`,`y2`,`stroke`,`stroke-width`,`stroke-dasharray`],Ct={key:0},wt=[`x`,`y`,`height`,`rx`,`width`,`fill`,`stroke`,`stroke-width`],Tt={key:0},Et=[`x`,`y`,`height`,`rx`,`width`,`fill`,`stroke`,`stroke-width`],Dt=[`x`,`y`,`width`,`rx`,`height`,`fill`,`stroke`,`stroke-width`],Ot={key:0},kt=[`x`,`y`,`width`,`rx`,`height`,`fill`,`stroke`,`stroke-width`],At=[`x1`,`x2`,`y1`,`y2`,`stroke`,`stroke-width`],jt=[`x1`,`x2`,`y1`,`y2`,`stroke`,`stroke-width`],Mt=[`x`,`y`,`font-size`,`fill`,`font-weight`],Nt=[`transform`,`font-size`,`fill`,`font-weight`],Pt=[`x`,`y`,`font-size`,`fill`,`font-weight`],Ft=[`x`,`y`,`font-size`,`font-weight`,`fill`],It=[`x`,`y`,`font-size`,`fill`,`font-weight`],Lt=[`x`,`y`,`font-size`,`font-weight`,`fill`],Rt=[`x1`,`x2`,`y1`,`y2`,`stroke`],zt=[`x`,`y`,`font-size`,`font-weight`,`fill`],Bt=[`x1`,`x2`,`y1`,`y2`,`stroke`],Vt=[`font-size`,`font-weight`,`fill`,`text-anchor`,`transform`],Ht={key:0},Ut={key:1},Wt=[`text-anchor`,`font-size`,`font-weight`,`fill`,`transform`,`onClick`],Gt=[`text-anchor`,`font-size`,`fill`,`transform`,`innerHTML`,`onClick`],Kt={key:0},qt={key:1},Jt=[`font-size`,`font-weight`,`fill`,`x`,`y`,`onClick`],Yt=[`font-size`,`font-weight`,`fill`,`x`,`y`,`onClick`,`innerHTML`],Xt=[`x`,`y`,`width`,`height`,`onClick`,`onMouseenter`,`onMouseleave`,`fill`],Zt=[`x`,`y`,`width`,`height`,`onClick`,`onMouseenter`,`onMouseleave`,`fill`],Qt=[`data-start`,`data-end`],$t={key:3,class:`vue-data-ui-watermark`},en=[`x`,`y`,`height`,`width`,`fill`,`stroke`],tn=[`id`],nn=[`onClick`],rn=[`innerHTML`],an=Ie({__name:`vue-ui-stackbar`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}},selectedXIndex:{type:Number,default:void 0}},emits:[`selectDatapoint`,`selectLegend`,`selectTimeLabel`,`selectX`,`copyAlt`],setup(Ie,{expose:$e,emit:et}){let tt=v(()=>T(()=>import(`./CbFHGlY2.js`),__vite__mapDeps([0,1,2]),import.meta.url)),nt=v(()=>T(()=>import(`./B9jcbJ_P.js`),__vite__mapDeps([3,4,1,5,2]),import.meta.url)),rt=v(()=>T(()=>import(`./ByvxprxI.js`),__vite__mapDeps([6,7,1,4,5,2,8]),import.meta.url)),it=v(()=>T(()=>import(`./CH8pva4p.js`),__vite__mapDeps([9,1,4,5,2,10]),import.meta.url)),at=v(()=>T(()=>import(`./DdyLBgN8.js`),__vite__mapDeps([11,1,4,5,2,12,13]),import.meta.url)),ot=v(()=>T(()=>import(`./DHC76net.js`),__vite__mapDeps([14,1,4,5,2,15,16,13]),import.meta.url)),ct=v(()=>T(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([17,1]),import.meta.url)),an=v(()=>T(()=>import(`./BIodG7vT.js`),__vite__mapDeps([18,1,4,5,2]),import.meta.url)),{vue_ui_stackbar:on}=Pe(),{isThemeValid:sn,warnInvalidTheme:cn}=Be(),ln=ae(),k=Ie,A=et,un=g({get(){return!!k.dataset&&k.dataset.length},set(e){return e}}),j=w(null),M=w(fe()),dn=w(!1),fn=w(null),pn=w(``),N=w([]),mn=w(0),hn=w(null),gn=w(null),_n=w(null),vn=w(null),yn=w(!1),P=w(null),F=w(!1),bn=w(0),xn=w(0),Sn=w(0),Cn=w(!1),wn=w(null),Tn=w(null),En=w(!1),Dn=w(!1),On=w(null),kn=w(null),I=w(null),L=w(null),An=w(null),jn=w(null),Mn=ee(null),Nn=w(!1),Pn=w(0),Fn=w(0),In=Ve({elementRef:Mn,minimumWidth:2,minimumHeight:2,stableFramesRequired:2,once:!1,onSizeAccepted:()=>{zn()}});function Ln(){Mn.value=j.value?.parentNode??null}function Rn(){return new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})})}async function zn(){let e=++Fn.value;Nn.value=!1,await se(),await Rn(),await Rn(),e===Fn.value&&(Pn.value+=1,Nn.value=!0)}let Bn=w(null);a(()=>{Cn.value=!0,Ln(),In.start(),sr()});let R=w(Xn()),z=g(()=>R.value.userOptions.useCursorPointer),Vn=g(()=>pe({defaultConfig:{userOptions:{show:!1},useCssAnimation:!1,table:{show:!1},tooltip:{show:!1},style:{chart:{backgroundColor:`#99999930`,bars:{totalValues:{show:!1},dataLabels:{show:!1}},grid:{frame:{stroke:`#6A6A6A`},scale:{scaleMin:0,scaleMax:40},x:{axisColor:`#6A6A6A`,linesColor:`#6A6A6A`,axisName:{show:!1},timeLabels:{show:!1}},y:{axisColor:`#6A6A6A`,linesColor:`#6A6A6A`,axisName:{show:!1},axisLabels:{show:!1}}},legend:{backgroundColor:`transparent`},padding:{left:24,right:24,bottom:12},zoom:{show:!1,startIndex:null,endIndex:null}}}},userConfig:R.value.skeletonConfig??{}})),{loading:B,FINAL_DATASET:Hn,manualLoading:Un}=Re({...ne(k),FINAL_CONFIG:R,prepareConfig:Xn,callback:()=>{Promise.resolve().then(async()=>{await ki()})},skeletonDataset:k.config?.skeletonDataset??[{name:``,series:[2,3,5,8,13,21],color:`#BABABA`},{name:``,series:[1,2,3,5,8,13],color:`#CACACA`}],skeletonConfig:pe({defaultConfig:R.value,userConfig:Vn.value})}),{userOptionsVisible:Wn,setUserOptionsVisibility:Gn,keepUserOptionState:Kn}=Ze({config:R.value}),{svgRef:qn}=Xe({config:R.value.style.chart.title});function Jn(){Gn(!0)}function Yn(){Gn(!1),A(`selectX`,{seriesIndex:null,datapoint:null}),P.value=null}function Xn(){let e=Ne({userConfig:k.config,defaultConfig:on}),t={},n=e.theme;if(n)if(!sn.value(e))cn(e),t=e;else{let r=Ne({userConfig:st[n]||k.config,defaultConfig:e});t={...Ne({userConfig:k.config,defaultConfig:r}),customPalette:e.customPalette.length?e.customPalette:be[n]||Ce}}else t=e;return t}let Zn=g(()=>R.value.style.chart.bars.dataLabels.hideUnderValue!=null),Qn=g(()=>R.value.style.chart.bars.dataLabels.hideUnderPercentage!=null);oe(()=>k.config,e=>{B.value||(R.value=Xn()),Wn.value=!R.value.userOptions.showOnChartHover,sr(),bn.value+=1,xn.value+=1,Sn.value+=1,V.value.dataLabels.show=R.value.style.chart.bars.dataLabels.show,V.value.showTable=R.value.table.show,V.value.showTooltip=R.value.style.chart.tooltip.show,Ln(),Sr()},{deep:!0}),oe(()=>k.dataset,e=>{Array.isArray(e)&&e.length>0&&(Un.value=!1),Ln(),Tr()},{deep:!0});let V=w({dataLabels:{show:R.value.style.chart.bars.dataLabels.show},showTable:R.value.table.show,showTooltip:R.value.style.chart.tooltip.show});oe(R,()=>{V.value={dataLabels:{show:R.value.style.chart.bars.dataLabels.show},showTable:R.value.table.show,showTooltip:R.value.style.chart.tooltip.show}},{immediate:!0});let{isPrinting:$n,isImaging:er,generatePdf:tr,generateImage:nr}=Fe({elementId:`stackbar_${M.value}`,fileName:R.value.style.chart.title.text||`vue-ui-stackbar`,options:R.value.userOptions.print}),H=w({width:R.value.style.chart.width,height:R.value.style.chart.height,paddingRatio:{top:R.value.style.chart.padding.top/R.value.style.chart.height,right:R.value.style.chart.padding.right/R.value.style.chart.width,bottom:R.value.style.chart.padding.bottom/R.value.style.chart.height,left:R.value.style.chart.padding.left/R.value.style.chart.width}}),rr=g(()=>ke(R.value.customPalette)),U=ee(null),ir=ee(null),ar=w(null),or=g(()=>!!R.value.debug);function sr(){if(he(k.dataset)?(Se({componentName:`VueUiStackbar`,type:`dataset`,debug:or.value}),Un.value=!0):k.dataset.forEach((e,t)=>{Ee({datasetObject:e,requiredAttributes:[`name`,`series`]}).forEach(e=>{un.value=!1,Se({componentName:`VueUiStackbar`,type:`datasetSerieAttribute`,property:e,index:t,debug:or.value}),Un.value=!0})}),he(k.dataset)||(Un.value=R.value.loading),setTimeout(()=>{F.value=!0},10),R.value.responsive){let e=qe(()=>{F.value=!1;let{width:e,height:t}=Ke({chart:j.value,title:R.value.style.chart.title.text?hn.value:null,legend:R.value.style.chart.legend.show?gn.value:null,slicer:R.value.style.chart.zoom.show&&K.value>6?_n.value.$el:null,source:vn.value});requestAnimationFrame(()=>{H.value.width=e,H.value.height=t-12,clearTimeout(ar.value),ar.value=setTimeout(()=>{F.value=!0},10)})});U.value&&(ir.value&&U.value.unobserve(ir.value),U.value.disconnect()),U.value=new ResizeObserver(e),ir.value=j.value.parentNode,U.value.observe(ir.value)}zn(),ki()}o(()=>{In.stop(),U.value&&(ir.value&&U.value.unobserve(ir.value),U.value.disconnect())});function cr(){let e=0;R.value.orientation===`vertical`&&I.value&&(e=Array.from(I.value.querySelectorAll(`text`)).reduce((e,t)=>{let n=t.getComputedTextLength();return n>e?n:e},0)),R.value.orientation===`horizontal`&&L.value&&(e=Array.from(L.value.querySelectorAll(`text`)).reduce((e,t)=>{let n=t.getComputedTextLength();return n>e?n:e},0));let t=kn.value?kn.value.getBoundingClientRect().width:0;return e+t+(t?24:0)}let lr=w(0),ur=w(0),dr=qe(e=>{ur.value=e+R.value.style.chart.bars.totalValues.fontSize},100);function fr(){if(R.value.orientation!==`horizontal`)return 0;let e=jn.value;if(!e)return 0;let t=Array.from(e.querySelectorAll(`text`));if(!t.length)return 0;let n=-1/0;for(let e of t)try{let t=e.getBBox(),r=t.x+t.width;r>n&&(n=r)}catch{}return Math.max(0,n-(W.value?.right??0))}x(e=>{if(R.value.orientation!==`horizontal`)return;let t=jn.value;if(!t)return;let n=()=>{dr(fr())};n();let r=new ResizeObserver(n);r.observe(t);let a=new MutationObserver(n);a.observe(t,{childList:!0,subtree:!0,characterData:!0}),e(()=>{r.disconnect(),a.disconnect()})}),o(()=>{lr.value=0,ur.value=0});let pr=w(0),mr=w(0);function hr(){let e=R.value.orientation===`vertical`?L.value:I.value;if(!e){pr.value=0;return}try{let t=e.getBBox();pr.value=Number.isFinite(t?.height)?t.height:0}catch{pr.value=0}}function gr(){mr.value&&cancelAnimationFrame(mr.value),mr.value=requestAnimationFrame(()=>{requestAnimationFrame(()=>{hr()})})}o(()=>{mr.value&&cancelAnimationFrame(mr.value)});let _r=g(()=>{let e=0;if(On.value)try{e=On.value.getBBox().height}catch{e=0}let t=R.value.style.chart.grid.x.timeLabels.show?pr.value:0;return e+t}),W=g(()=>{Pn.value;let{height:e,width:t}=H.value,{right:n}=H.value.paddingRatio,r=R.value.style.chart.bars.totalValues.show&&k.dataset&&k.dataset.length>1?R.value.style.chart.bars.totalValues.fontSize*1.3:0,a=0;R.value.style.chart.grid.y.axisLabels.show&&(a=cr());let o=R.value.style.chart.padding.top+r,s=t-t*n-ur.value,c=e-R.value.style.chart.padding.bottom-_r.value-r,l=R.value.style.chart.padding.left+a,u=t-l-t*n-ur.value,d=e-o-R.value.style.chart.padding.bottom-_r.value-r;return{chartHeight:e,chartWidth:t,top:o,right:s,bottom:c,left:l,width:Math.max(0,u),height:Math.max(0,d)}}),vr=g(()=>{let{left:e,top:t,width:n,height:r}=W.value,a=q.value.start,o=q.value.end,s=Math.max(1,o-a),c=Math.max(0,Math.min(s,(J.value.start??a)-a)),l=Math.max(0,Math.min(s,(J.value.end??o)-a)),u=Math.max(0,l-c),d={fill:R.value.style.chart.zoom.preview.fill,stroke:R.value.style.chart.zoom.preview.stroke,"stroke-width":R.value.style.chart.zoom.preview.strokeWidth,"stroke-dasharray":R.value.style.chart.zoom.preview.strokeDasharray,"stroke-linecap":`round`,"stroke-linejoin":`round`,style:{pointerEvents:`none`,transition:`none !important`,animation:`none !important`}};if(R.value.orientation===`horizontal`){let a=r/s;return{x:e,y:t+c*a,width:n,height:u*a,...d}}else{let a=n/s;return{x:e+c*a,y:t,width:u*a,height:r,...d}}}),G=g(()=>Hn.value.map((e,t)=>{let n=_e(e.color)||rr.value[t]||Ce[t]||Ce[t%Ce.length];return{...e,series:JSON.parse(JSON.stringify(e.series)).map(e=>R.value.style.chart.bars.distributed?Math.abs(e):e),signedSeries:e.series.map(e=>e>=0?1:-1),absoluteIndex:t,id:fe(),color:n}})),K=g(()=>{let e=Math.max(...G.value.filter(e=>!N.value.includes(e.id)).map(e=>e.series.length));return isFinite(e)?e:Math.max(...G.value.map(e=>e.series.length))});function yr(e){Bn.value=e}let q=w({start:0,end:Math.max(...Hn.value.map(e=>e.series.length))}),J=w({start:0,end:Math.max(...Hn.value.map(e=>e.series.length))}),br=g(()=>R.value.style.chart.zoom.preview.enable&&(J.value.start!==q.value.start||J.value.end!==q.value.end));function xr(e,t){J.value[e]=t}function Sr(){let e=K.value,t=Math.max(0,Math.min(q.value.start??0,e-1)),n=Math.max(t+1,Math.min(q.value.end??e,e));(!Number.isFinite(t)||!Number.isFinite(n)||n<=t)&&(t=0,n=e),q.value.start=t,q.value.end=n,J.value.start=t,J.value.end=n,_n.value&&(_n.value.setStartValue(t),_n.value.setEndValue(n))}let Cr=w(null);function wr(){return new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(()=>e())))}o(()=>{Cr.value&&cancelAnimationFrame(Cr.value)});async function Tr(){ki(),await se(),Cr.value&&cancelAnimationFrame(Cr.value),Cr.value=requestAnimationFrame(async()=>{await wr(),ki()})}let Y=g(()=>{let e;return e=R.value.orientation===`vertical`?W.value.width/(q.value.end-q.value.start):W.value.height/(q.value.end-q.value.start),e<=0?0:e}),Er=g(()=>Te(G.value.filter(e=>!N.value.includes(e.id))).slice(q.value.start,q.value.end)),Dr=g(()=>N.value.length===G.value.length),X=g(()=>R.value.style.chart.zoom.minimap.show?Te(G.value.map(e=>({...e,series:e.series.map(e=>e??0)})).filter(e=>Dr.value?!0:!N.value.includes(e.id))):[]),Or=g(()=>R.value.style.chart.zoom.minimap.show?[{name:``,series:X.value,color:`#000000`,isVisible:!0}]:[]),kr=g(()=>Te(G.value.filter(e=>!N.value.includes(e.id)).map(e=>({...e,series:e.series.map((t,n)=>e.signedSeries[n]===-1&&t>=0?-t:t)}))).slice(q.value.start,q.value.end)),Ar=g(()=>{let e=G.value.filter(e=>!N.value.includes(e.id));return{positive:Te(e.map(e=>({...e,series:e.series.slice(q.value.start,q.value.end).map(e=>e>=0?e:0)}))),negative:Te(e.map(e=>({...e,series:e.series.slice(q.value.start,q.value.end).map(e=>e<0?e:0)})))}}),Z=g(()=>{let e=R.value.style.chart.grid.scale.scaleMax!==null&&!R.value.style.chart.bars.distributed?R.value.style.chart.grid.scale.scaleMax:Math.max(...Ar.value.positive),t=Math.min(...Ar.value.negative),n=R.value.style.chart.grid.scale.scaleMin!==null&&!R.value.style.chart.bars.distributed?R.value.style.chart.grid.scale.scaleMin:[-1/0,1/0,NaN,void 0,null].includes(t)?0:t,r=!R.value.style.chart.bars.distributed&&(R.value.style.chart.grid.scale.scaleMax!==null||R.value.style.chart.grid.scale.scaleMin!==null)?Oe(n>0?0:n,e<0?0:e,R.value.style.chart.grid.scale.ticks):ge(n>0?0:n,e<0?0:e,R.value.style.chart.grid.scale.ticks);return r.ticks.map(e=>({zero:W.value.bottom-W.value.height*(Math.abs(r.min)/(r.max+Math.abs(r.min))),y:W.value.bottom-W.value.height*((e+Math.abs(r.min))/(r.max+Math.abs(r.min))),x:W.value.left-8,horizontal_zero:W.value.left+W.value.width*(Math.abs(r.min)/(r.max+Math.abs(r.min))),horizontal_x:W.value.left+W.value.width*((e+Math.abs(r.min))/(r.max+Math.abs(r.min))),horizontal_y:W.value.bottom-8,value:e}))}),Q=w([]),jr=w([]),Mr=0;x(()=>{let e=++Mr;(async()=>{let t=await Ae({values:R.value.style.chart.grid.x.timeLabels.values,maxDatapoints:K.value,formatter:R.value.style.chart.grid.x.timeLabels.datetimeFormatter,start:q.value.start,end:q.value.end});e===Mr&&(Q.value=t)})()});let Nr=0;x(()=>{let e=++Nr;(async()=>{let t=await Ae({values:R.value.style.chart.grid.x.timeLabels.values,maxDatapoints:K.value,formatter:R.value.style.chart.grid.x.timeLabels.datetimeFormatter,start:0,end:K.value});e===Nr&&(jr.value=t)})()});let Pr=g(()=>{let e=R.value.style.chart.grid.x.timeLabels.modulo;return Q.value.length?Math.min(e,[...new Set(Q.value.map(e=>e.text))].length):e}),Fr=g(()=>{let e=R.value.style.chart.grid.x.timeLabels,t=Q.value||[],n=jr.value||[],r=q.value.start??0,a=P.value,o=K.value,s=t.map(e=>e?.text??``),c=n.map(e=>e?.text??``);return ue(!!e.showOnlyFirstAndLast,!!e.showOnlyAtModulo,Math.max(1,Pr.value||1),s,c,r,a,o)});x(()=>{R.value.orientation,R.value.style.chart.grid.x.timeLabels.show,R.value.style.chart.grid.x.timeLabels.fontSize,R.value.style.chart.grid.x.timeLabels.rotation,R.value.style.chart.grid.x.timeLabels.offsetY,Fr.value?.map(e=>e?.text??``).join(`|`),Z.value?.map(e=>e?.value??``).join(`|`),H.value.width,H.value.height,L.value,I.value,On.value,gr()},{flush:`post`});let Ir=w({months:[],shortMonths:[],days:[],shortDays:[]}),Lr=0;x(()=>{let e=++Lr,t=R.value.style.chart.grid.x.timeLabels.datetimeFormatter;(async()=>{let n=await je(t.locale).catch(()=>je(`en`));e===Lr&&(Ir.value=n.data)})()});let Rr=g(()=>{let e=R.value.style.chart.grid.x.timeLabels.datetimeFormatter,t=Me({useUTC:e.useUTC,locale:Ir.value,januaryAsYear:e.januaryAsYear});return(e,n)=>{let r=R.value.style.chart.grid.x.timeLabels.values?.[e];return r==null?``:t.formatDate(new Date(r),n)}}),zr=g(()=>(R.value.style.chart.grid.x.timeLabels.values||[]).map((e,t)=>({text:Rr.value(t,R.value.style.chart.zoom.timeFormat),absoluteIndex:t}))),Br=g(()=>(R.value.style.chart.grid.x.timeLabels.values||[]).map((e,t)=>({text:Rr.value(t,R.value.style.chart.tooltip.timeFormat),absoluteIndex:t}))),$=g(()=>{if(!un.value&&!B.value)return[];let e=Array(K.value).fill(0),t=Array(K.value).fill(0),n=Array(K.value).fill(0),r=Array(K.value).fill(0),a=Math.max(...Ar.value.positive)||0,o=Math.min(...Ar.value.negative),s=[-1/0,1/0,NaN,void 0,null].includes(o)?0:o,{min:c,max:l}=!R.value.style.chart.bars.distributed&&(R.value.style.chart.grid.scale.scaleMax!==null||R.value.style.chart.grid.scale.scaleMin!==null)?Oe(R.value.style.chart.grid.scale.scaleMin===null?s>0?0:s:R.value.style.chart.grid.scale.scaleMin,R.value.style.chart.grid.scale.scaleMax===null?a<0?0:a:R.value.style.chart.grid.scale.scaleMax,R.value.style.chart.grid.scale.ticks):ge(R.value.style.chart.grid.scale.scaleMin===null?s>0?0:s:R.value.style.chart.grid.scale.scaleMin,R.value.style.chart.grid.scale.scaleMax===null?a<0?0:a:R.value.style.chart.grid.scale.scaleMax,R.value.style.chart.grid.scale.ticks),u=l+(c>=0?0:Math.abs(c))||1,d=W.value.height,f=W.value.width,p=Z.value[0]?Z.value[0].zero:W.value.bottom,m=Z.value[0]?Z.value[0].horizontal_zero:W.value.left,ee=Array(X.value.length).fill(0),te=Array(X.value.length).fill(0);return G.value.filter(e=>!N.value.includes(e.id)).map(a=>{let o=a.series.slice(),s=o.map((e,t)=>ee[t]),c=o.map((e,t)=>te[t]);o.forEach((e,t)=>{(Number(e)||0)>=0?ee[t]+=Number(e)||0:te[t]+=Math.abs(Number(e)||0)});let l=a.series.slice(q.value.start,q.value.end),ne=a.signedSeries.slice(q.value.start,q.value.end),h=l.map((e,t)=>W.value.left+Y.value*t+Y.value*R.value.style.chart.bars.gapRatio/4),re=(X.value||[]).filter(Number.isFinite),g=re.length?Math.max(...re):0,ie=re.length?Math.min(...re):0;function ae({minimapH:e}){let t=g>0;if(t&&ie<0){let t=Math.max(g,Math.abs(ie))||1e-9;return{pxPerUnit:e/2/t,zero:e/2}}return t?{pxPerUnit:e/Math.max(1e-9,g),zero:e}:{pxPerUnit:e/Math.max(1e-9,Math.abs(ie)),zero:0}}let _=({left:e,unitW:t})=>{let n=t*(R.value.style.chart.bars.gapRatio/4);return o.map((r,a)=>e+t*a+n)},v=l.map((e,t)=>W.value.top+Y.value*t+Y.value*R.value.style.chart.bars.gapRatio/4),y=l.map((t,r)=>{let a=R.value.style.chart.bars.distributed?(t||0)/Er.value[r]:(t||0)/u,o,s;return t>0?(s=d*a,o=p-s-e[r],e[r]+=s):(s=d*a,o=p+n[r],n[r]+=Math.abs(s)),o}),b=({minimapH:e})=>{if(R.value.style.chart.bars.distributed)return o.map((t,n)=>{let r=Math.abs(Number(t)||0),a=Math.abs(X.value?.[n]||0)||1e-9;return e-(s[n]+r)/a*e});let{pxPerUnit:t,zero:n}=ae({minimapH:e});return o.map((e,r)=>{let a=Number(e)||0;return a>=0?n-(s[r]+a)*t:n+c[r]*t})},oe=l.map((e,n)=>{let a=R.value.style.chart.bars.distributed?(e||0)/Er.value[n]:(e||0)/u,o,s;return e>0?(s=f*a,o=m+t[n],t[n]+=s):(s=f*a,o=m-Math.abs(s)-r[n],r[n]+=Math.abs(s)),o}),x=l.map((e,t)=>{let n=R.value.style.chart.bars.distributed?(e||0)/Er.value[t]:(e||0)/u;return e>0?d*n:d*Math.abs(n)}),S=({minimapH:e})=>{if(R.value.style.chart.bars.distributed)return o.map((t,n)=>Math.abs(Number(t)||0)/(Math.abs(X.value?.[n]||0)||1e-9)*e);let{pxPerUnit:t}=ae({minimapH:e});return o.map(e=>Math.abs(Number(e)||0)*t)},C=l.map((e,t)=>{let n=R.value.style.chart.bars.distributed?(e||0)/Er.value[t]:(e||0)/u;return e>0?f*n:f*Math.abs(n)}),w=l.map(e=>Math.abs(e)).reduce((e,t)=>e+t,0);return{...a,proportions:l.map((e,t)=>R.value.style.chart.bars.distributed?(e||0)/Er.value[t]:(e||0)/w),series:l,signedSeries:ne,x:h,y,height:x,horizontal_width:C,horizontal_y:v,horizontal_x:oe,xMinimap:_,yMinimap:b,heightMinimap:S}})}),Vr=g(()=>kr.value.map((e,t)=>({value:e,sign:e>=0?1:-1})));function Hr(e,t,n,r,a){let o=a===-1&&e>=0?-e:e;return O(R.value.style.chart.bars.dataLabels.formatter,o,D({p:R.value.style.chart.bars.dataLabels.prefix,v:o,s:R.value.style.chart.bars.dataLabels.suffix,r:R.value.style.chart.bars.dataLabels.rounding}),{datapoint:t,seriesIndex:n,datapointIndex:r})}function Ur(e,t,n,r){return O(R.value.style.chart.bars.dataLabels.formatter,e,D({v:isNaN(e)?0:e,s:`%`,r:R.value.style.chart.bars.dataLabels.rounding}),{datapoint:t,seriesIndex:n,datapointIndex:r})}function Wr(e){let t=JSON.parse(JSON.stringify($.value)).map(t=>({name:t.name,value:t.series[e]===0?0:t.series[e]||null,proportion:t.proportions[e]||null,color:t.color,id:t.id}));R.value.events.datapointClick&&R.value.events.datapointClick({datapoint:t,seriesIndex:e+q.value.start}),A(`selectDatapoint`,{datapoint:t,period:Q.value[e]})}function Gr(e){return JSON.parse(JSON.stringify($.value)).map(t=>({name:t.name,absoluteIndex:t.absoluteIndex,value:t.series[e]===0?0:(t.signedSeries[e]===-1&&t.series[e]>=0?-t.series[e]:t.series[e])||null,proportion:t.proportions[e]||null,color:t.color,id:t.id,timeLabel:jr.value[e]}))}function Kr(e){if(R.value.events.datapointLeave){let t=Gr(e);R.value.events.datapointLeave({datapoint:t,seriesIndex:e+q.value.start})}dn.value=null,P.value=null}let qr=g(()=>Array(K.value).fill(0).map((e,t)=>Gr(t)));oe(()=>k.selectedXIndex,e=>{if([null,void 0].includes(k.selectedXIndex)){P.value=null;return}let t=e-q.value.start;t<0||e>=q.value.end?P.value=null:P.value=t??null},{immediate:!0});function Jr(e){if(Dr.value)return;P.value=e,dn.value=!0;let t=R.value.style.chart.tooltip.customFormat,n=Gr(e);Ni({seriesIndex:e,datapoint:n}),R.value.events.datapointEnter&&R.value.events.datapointEnter({datapoint:n,seriesIndex:e+q.value.start}),fn.value={datapoint:n,seriesIndex:e,config:R.value,series:$.value};let r=n.map(e=>Math.abs(e.value)).reduce((e,t)=>e+t,0),a=n.map(e=>E(e.value)).reduce((e,t)=>e+t,0);if(ce(t)&&De(()=>t({seriesIndex:e,datapoint:n,series:$.value,config:R.value})))pn.value=t({seriesIndex:e,datapoint:n,series:$.value,config:R.value});else{let{showValue:t,showTotal:o,totalTranslation:s,showPercentage:c,borderColor:l,roundingValue:u,roundingPercentage:d}=R.value.style.chart.tooltip,f=``;(Q.value[e]&&Q.value[e].text||Br.value[e]&&Br.value[e].text&&R.value.style.chart.tooltip.showTimeLabel)&&(f+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${l};padding-bottom:6px;margin-bottom:3px;">${R.value.style.chart.tooltip.useDefaultTimeFormat?Q.value[e]?.text:Br.value[e]?.text||jr.value[e]?.text||``}</div>`),o&&(f+=`<div class="vue-data-ui-tooltip-total" style="display:flex;flex-direction:row;align-items:center;gap:4px">
                <span>${s}:</span>
                <span>
                    ${O(R.value.style.chart.bars.dataLabels.formatter,a,D({p:R.value.style.chart.bars.dataLabels.prefix,v:a,s:R.value.style.chart.bars.dataLabels.suffix,r:u}),{datapoint:{name:s,value:a}})}
                </span>
            </div>`);let p=[t&&c?`(`:``,t&&c?`)`:``];n.reverse().forEach(e=>{f+=`
                <div style="display:flex;flex-direction:row;align-items:center;gap:4px">
                    <svg viewBox="0 0 60 60" height="14" width="14"><rect rx="5" x="0" y="0" height="60" width="60" stroke="none" fill="${R.value.style.chart.bars.gradient.show?`url(#gradient_${e.id})`:e.color}"/>${ln.pattern?`<rect rx="5" x="0" y="0" height="60" width="60" stroke="none" fill="url(#pattern_${M.value}_${e.absoluteIndex})"/>`:``}</svg>
                    ${e.name}${t||c?`:`:``} ${t?O(R.value.style.chart.bars.dataLabels.formatter,e.value,D({p:R.value.style.chart.bars.dataLabels.prefix,v:e.value,s:R.value.style.chart.bars.dataLabels.suffix,r:u})):``} ${p[0]}${c?D({v:isNaN(e.value/r)?0:Math.abs(e.value)/r*100,s:`%`,r:d}):``}${p[1]}
                </div>
            `}),pn.value=`<div>${f}</div>`}}let Yr=g(()=>H.value.width),Xr=g(()=>H.value.height);He({timeLabelsEls:R.value.orientation===`vertical`?L:I,timeLabels:Q,slicer:q,configRef:R,rotationPath:[`style`,`chart`,`grid`,`x`,`timeLabels`,`rotation`],autoRotatePath:[`style`,`chart`,`grid`,`x`,`timeLabels`,`autoRotate`,`enable`],isAutoSize:!1,width:Yr,height:Xr,rotation:R.value.style.chart.grid.x.timeLabels.autoRotate.angle});function Zr(e){yn.value=e,mn.value+=1}function Qr(){V.value.showTable=!V.value.showTable}function $r(){V.value.dataLabels.show=!V.value.dataLabels.show}function ei(){V.value.showTooltip=!V.value.showTooltip}function ti(){return $.value}let ni=g(()=>{if($.value.length===0)return{head:[],body:[],config:{},columnNames:[]};let e=$.value.map(({name:e,color:t})=>({label:e,color:t})),t=[];return Q.value.forEach(e=>{let n=[R.value.style.chart.grid.x.timeLabels.values[e.absoluteIndex]?e.text:i+1];G.value.forEach(t=>{n.push(Number((t.series[e.absoluteIndex]||0).toFixed(R.value.table.td.roundingValue)))}),t.push(n)}),{head:e,body:t}});function ri(e=null){let t=[[R.value.style.chart.title.text],[R.value.style.chart.title.subtitle.text],[``]],n=[``,...ni.value.head.map(e=>e.label)],r=ni.value.body,a=ve(t.concat([n]).concat(r));e?e(a):de({csvContent:a,title:R.value.style.chart.title.text||`vue-ui-stackbar`})}let ii=g(()=>{let e=[``].concat($.value.map(e=>e.name),` <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 16v2a1 1 0 0 1 -1 1h-11l6 -7l-6 -7h11a1 1 0 0 1 1 1v2" /></svg>`),t=[];for(let e=0;e<K.value;e+=1){let n=$.value.map(t=>t.series[e]??0).reduce((e,t)=>e+t,0);t.push([R.value.style.chart.grid.x.timeLabels.values.slice(q.value.start,q.value.end)[e]?Q.value[e].text:e+1].concat($.value.map(t=>(t.series[e]??0).toFixed(R.value.table.td.roundingValue)),(n??0).toFixed(R.value.table.td.roundingValue)))}let n={th:{backgroundColor:R.value.table.th.backgroundColor,color:R.value.table.th.color,outline:R.value.table.th.outline},td:{backgroundColor:R.value.table.td.backgroundColor,color:R.value.table.td.color,outline:R.value.table.td.outline},breakpoint:R.value.table.responsiveBreakpoint},r=[R.value.table.columnNames.period].concat($.value.map(e=>e.name),R.value.table.columnNames.total);return{head:e,body:t.slice(0,q.value.end-q.value.start),config:n,colNames:r}});function ai(){N.value.length?N.value=[]:ui.value.forEach(e=>{N.value.push(e.id)})}function oi(e){if(N.value.includes(e.id))N.value=N.value.filter(t=>t!==e.id);else{if(N.value.length===G.value.length-1)return;N.value.push(e.id)}A(`selectLegend`,$.value)}function si(e){return G.value.length?G.value.find(t=>t.name===e)||(R.value.debug&&console.warn(`VueUiStackbar - Series name not found "${e}"`),null):(R.value.debug&&console.warn(`VueUiStackbar - There are no series to show.`),null)}function ci(e){let t=si(e);t!==null&&N.value.includes(t.id)&&oi({id:t.id})}function li(e){let t=si(e);t!==null&&(N.value.includes(t.id)||oi({id:t.id}))}let ui=g(()=>G.value.map((e,t)=>({...e,shape:`square`})).map(e=>({...e,opacity:N.value.includes(e.id)?.5:1,segregate:()=>oi(e),isSegregated:N.value.includes(e.id)}))),di=g(()=>({cy:`stackbar-legend`,backgroundColor:R.value.style.chart.legend.backgroundColor,color:R.value.style.chart.legend.color,fontSize:R.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:R.value.style.chart.legend.bold?`bold`:``})),fi=w(!1);function pi(){fi.value=!fi.value}function mi(e,t){A(`selectTimeLabel`,{datapoint:JSON.parse(JSON.stringify($.value)).map(e=>({name:e.name,value:e.series[t]===0?0:(e.signedSeries[t]===-1&&e.series[t]>=0?-e.series[t]:e.series[t])||null,proportion:e.proportions[t]||null,color:e.color,id:e.id})),absoluteIndex:e.absoluteIndex,label:e.text})}let hi=g(()=>Math.max(...$.value.flatMap(e=>e.series)));function gi(e,t){return R.value.style.chart.bars.showDistributedPercentage&&R.value.style.chart.bars.distributed?Qn.value?t*100>=R.value.style.chart.bars.dataLabels.hideUnderPercentage:R.value.style.chart.bars.dataLabels.hideEmptyPercentages?t>0:!0:Qn.value?(Zn.value&&or.value&&console.warn(`Vue Data UI - VueUiStackbar - You cannot set both dataLabels.hideUnderPercentage and dataLabels.hideUnderValue. Note that dataLabels.hideUnderPercentage takes precedence in this case.`),e>hi.value*R.value.style.chart.bars.dataLabels.hideUnderPercentage/100):Zn.value?Math.abs(e)>=R.value.style.chart.bars.dataLabels.hideUnderValue:R.value.style.chart.bars.dataLabels.hideEmptyValues?e!==0:!0}async function _i({scale:e=2}={}){if(!j.value)return;let{width:t,height:n}=j.value.getBoundingClientRect(),r=t/n,{imageUri:a,base64:o}=await Ue({domElement:j.value,base64:!0,img:!0,scale:e});return{imageUri:a,base64:o,title:R.value.style.chart.title.text,width:t,height:n,aspectRatio:r}}let vi=g(()=>{let e=R.value.table.useDialog&&!R.value.table.show,t=V.value.showTable;return{component:e?an:rt,title:`${R.value.style.chart.title.text}${R.value.style.chart.title.subtitle.text?`: ${R.value.style.chart.title.subtitle.text}`:``}`,props:e?{backgroundColor:R.value.table.th.backgroundColor,color:R.value.table.th.color,headerColor:R.value.table.th.color,headerBg:R.value.table.th.backgroundColor,isFullscreen:yn.value,fullscreenParent:j.value,forcedWidth:Math.min(800,window.innerWidth*.8),isCursorPointer:z.value}:{hideDetails:!0,config:{open:t,maxHeight:1e4,body:{backgroundColor:R.value.style.chart.backgroundColor,color:R.value.style.chart.color},head:{backgroundColor:R.value.style.chart.backgroundColor,color:R.value.style.chart.color}}}}});oe(()=>V.value.showTable,e=>{R.value.table.show||(e&&R.value.table.useDialog&&wn.value?wn.value.open():`close`in wn.value&&wn.value.close())});function yi(){V.value.showTable=!1,Tn.value&&Tn.value.setTableIconState(!1)}let bi=g(()=>R.value.style.chart.backgroundColor),xi=g(()=>R.value.style.chart.legend),{exportSvg:Si,getSvg:Ci}=ze({svg:qn,title:g(()=>R.value.style.chart.title),legend:xi,legendItems:ui,backgroundColor:bi});async function wi({isCb:e}){Dn.value=!0,await se();try{if(e){let{blob:e,url:t,text:n,dataUrl:r}=await Ci();await Promise.resolve(R.value.userOptions.callbacks.svg({blob:e,url:t,text:n,dataUrl:r}))}else await Promise.resolve(Si())}finally{Dn.value=!1}}function Ti(e){if(e?.stage===`start`){En.value=!0;return}if(e?.stage===`end`){En.value=!1;return}nr()}function Ei(e){let t=K.value;return e>t?t:e<0||e<q.value.start?R.value.style.chart.zoom.startIndex===null?1:q.value.start+1:e}let Di=w(!1),Oi=w(!1);function ki(){if(!Di.value){Di.value=!0;try{let{startIndex:e,endIndex:t}=R.value.style.chart.zoom,n=K.value,r=e??0,a=t==null?n:Math.min(Ei(t+1),n);Ai.value=!0,q.value.start=r,q.value.end=a,J.value.start=r,J.value.end=a,Sr(),Oi.value=!0}finally{queueMicrotask(()=>{Ai.value=!1}),Di.value=!1}}}let Ai=w(!1);function ji(e){Di.value||Ai.value||e!==q.value.start&&(q.value.start=e,J.value.start=e,Sr())}function Mi(e){if(Di.value||Ai.value)return;let t=Ei(e);t!==q.value.end&&(q.value.end=t,J.value.end=t,Sr())}function Ni({seriesIndex:e,datapoint:t}){let n=q.value.start+e;A(`selectX`,{dataset:t,index:n,indexLabel:R.value.style.chart.grid.x.timeLabels.values[n]})}function Pi(){return{y0:Z.value?.[0]?.zero??W.value.bottom}}function Fi(e){let{y0:t}=Pi(),n=R.value.style.chart.bars.totalValues,r=Math.max(2,n.fontSize*.3+n.offsetY),a=1/0,o=!1;for(let t of $.value||[]){let n=t?.series?.[e]??0,r=t?.height?.[e]??0,s=t?.y?.[e];n>0&&r>0&&Number.isFinite(s)&&(o=!0,s<a&&(a=s))}let s=(o&&Number.isFinite(a)?a:t)-r;return Math.min(Math.max(s,0),W.value.bottom)}function Ii(e){let{x0:t}=Pi(),n=Math.max(2,R.value.style.chart.bars.totalValues.fontSize*.3+R.value.style.chart.bars.totalValues.offsetX),r=-1/0,a=!1;for(let t of $.value||[]){let n=t?.series?.[e]??0,o=t?.horizontal_x?.[e],s=t?.horizontal_width?.[e],c=Number.isFinite(s)?Math.max(0,s):0;Number.isFinite(o)&&n>0&&c>0&&(a=!0,r=Math.max(r,o+c))}return(a&&Number.isFinite(r)?r:t)+n}async function Li(){if(A(`copyAlt`,{config:R.value,dataset:$.value}),!R.value.userOptions.callbacks.altCopy){console.warn("Vue Data UI - A callback must be set for `altCopy` in userOptions.");return}await Promise.resolve(R.value.userOptions.callbacks.altCopy({config:R.value,dataset:$.value}))}return $e({getData:ti,getImage:_i,generatePdf:tr,generateCsv:ri,generateImage:nr,generateSvg:wi,hideSeries:li,showSeries:ci,toggleTable:Qr,toggleLabels:$r,toggleTooltip:ei,toggleAnnotator:pi,toggleFullscreen:Zr,copyAlt:Li}),(a,o)=>(s(),S(`div`,{id:`stackbar_${M.value}`,ref_key:`stackbarChart`,ref:j,class:e({"vue-data-ui-component":!0,"vue-ui-stackbar":!0,"vue-data-ui-wrapper-fullscreen":yn.value}),style:l(`background:${R.value.style.chart.backgroundColor};color:${R.value.style.chart.color};font-family:${R.value.style.fontFamily}; position: relative; ${R.value.responsive?`height: 100%`:``}`),onMouseenter:Jn,onMouseleave:Yn},[R.value.userOptions.buttons.annotator?(s(),m(r(at),{key:0,svgRef:r(qn),backgroundColor:R.value.style.chart.backgroundColor,color:R.value.style.chart.color,active:fi.value,isCursorPointer:z.value,onClose:pi},{"annotator-action-close":y(()=>[f(a.$slots,`annotator-action-close`,{},void 0,!0)]),"annotator-action-color":y(({color:e})=>[f(a.$slots,`annotator-action-color`,_(c({color:e})),void 0,!0)]),"annotator-action-draw":y(({mode:e})=>[f(a.$slots,`annotator-action-draw`,_(c({mode:e})),void 0,!0)]),"annotator-action-undo":y(({disabled:e})=>[f(a.$slots,`annotator-action-undo`,_(c({disabled:e})),void 0,!0)]),"annotator-action-redo":y(({disabled:e})=>[f(a.$slots,`annotator-action-redo`,_(c({disabled:e})),void 0,!0)]),"annotator-action-delete":y(({disabled:e})=>[f(a.$slots,`annotator-action-delete`,_(c({disabled:e})),void 0,!0)]),_:3},8,[`svgRef`,`backgroundColor`,`color`,`active`,`isCursorPointer`])):t(``,!0),f(a.$slots,`userConfig`,{},void 0,!0),R.value.style.chart.title.text?(s(),S(`div`,{key:1,ref_key:`chartTitle`,ref:hn,style:`width:100%;background:transparent;padding-bottom:24px`},[(s(),m(We,{key:`title_${bn.value}`,config:{title:{cy:`stackbar-title`,...R.value.style.chart.title},subtitle:{cy:`stackbar-subtitle`,...R.value.style.chart.title.subtitle}}},null,8,[`config`]))],512)):t(``,!0),C(`div`,{id:`legend-top-${M.value}`},null,8,ut),R.value.userOptions.show&&un.value&&(r(Kn)||r(Wn))?(s(),m(r(ot),{ref_key:`userOptionsRef`,ref:Tn,key:`user_option_${mn.value}`,backgroundColor:R.value.style.chart.backgroundColor,color:R.value.style.chart.color,isPrinting:r($n),isImaging:r(er),uid:M.value,hasTooltip:R.value.style.chart.tooltip.show&&R.value.userOptions.buttons.tooltip,hasPdf:R.value.userOptions.buttons.pdf,hasImg:R.value.userOptions.buttons.img,hasSvg:R.value.userOptions.buttons.svg,hasXls:R.value.userOptions.buttons.csv,hasTable:R.value.userOptions.buttons.table,hasLabel:R.value.userOptions.buttons.labels,hasFullscreen:R.value.userOptions.buttons.fullscreen,hasAltCopy:R.value.userOptions.buttons.altCopy,isFullscreen:yn.value,chartElement:j.value,position:R.value.userOptions.position,isTooltip:V.value.showTooltip,titles:{...R.value.userOptions.buttonTitles},hasAnnotator:R.value.userOptions.buttons.annotator,isAnnotation:fi.value,callbacks:R.value.userOptions.callbacks,printScale:R.value.userOptions.print.scale,tableDialog:R.value.table.useDialog,isCursorPointer:z.value,onToggleFullscreen:Zr,onGeneratePdf:r(tr),onGenerateCsv:ri,onGenerateImage:Ti,onGenerateSvg:wi,onToggleTable:Qr,onToggleLabels:$r,onToggleTooltip:ei,onToggleAnnotator:pi,onCopyAlt:Li,style:l({visibility:r(Kn)?r(Wn)?`visible`:`hidden`:`visible`})},te({_:2},[a.$slots.menuIcon?{name:`menuIcon`,fn:y(({isOpen:e,color:t})=>[f(a.$slots,`menuIcon`,_(c({isOpen:e,color:t})),void 0,!0)]),key:`0`}:void 0,a.$slots.optionTooltip?{name:`optionTooltip`,fn:y(()=>[f(a.$slots,`optionTooltip`,{},void 0,!0)]),key:`1`}:void 0,a.$slots.optionPdf?{name:`optionPdf`,fn:y(()=>[f(a.$slots,`optionPdf`,{},void 0,!0)]),key:`2`}:void 0,a.$slots.optionCsv?{name:`optionCsv`,fn:y(()=>[f(a.$slots,`optionCsv`,{},void 0,!0)]),key:`3`}:void 0,a.$slots.optionImg?{name:`optionImg`,fn:y(()=>[f(a.$slots,`optionImg`,{},void 0,!0)]),key:`4`}:void 0,a.$slots.optionSvg?{name:`optionSvg`,fn:y(()=>[f(a.$slots,`optionSvg`,{},void 0,!0)]),key:`5`}:void 0,a.$slots.optionTable?{name:`optionTable`,fn:y(()=>[f(a.$slots,`optionTable`,{},void 0,!0)]),key:`6`}:void 0,a.$slots.optionLabels?{name:`optionLabels`,fn:y(()=>[f(a.$slots,`optionLabels`,{},void 0,!0)]),key:`7`}:void 0,a.$slots.optionFullscreen?{name:`optionFullscreen`,fn:y(({toggleFullscreen:e,isFullscreen:t})=>[f(a.$slots,`optionFullscreen`,_(c({toggleFullscreen:e,isFullscreen:t})),void 0,!0)]),key:`8`}:void 0,a.$slots.optionAnnotator?{name:`optionAnnotator`,fn:y(({toggleAnnotator:e,isAnnotator:t})=>[f(a.$slots,`optionAnnotator`,_(c({toggleAnnotator:e,isAnnotator:t})),void 0,!0)]),key:`9`}:void 0,a.$slots.optionAltCopy?{name:`optionAltCopy`,fn:y(({altCopy:e})=>[f(a.$slots,`optionAltCopy`,_(c({altCopy:e})),void 0,!0)]),key:`10`}:void 0]),1032,`backgroundColor.color.isPrinting.isImaging.uid.hasTooltip.hasPdf.hasImg.hasSvg.hasXls.hasTable.hasLabel.hasFullscreen.hasAltCopy.isFullscreen.chartElement.position.isTooltip.titles.hasAnnotator.isAnnotation.callbacks.printScale.tableDialog.isCursorPointer.onGeneratePdf.style`.split(`.`))):t(``,!0),(s(),S(`svg`,{ref_key:`svgRef`,ref:qn,xmlns:r(ye),viewBox:`0 0 ${W.value.chartWidth<=0?10:W.value.chartWidth} ${W.value.chartHeight<=0?10:W.value.chartHeight}`,class:e({"vue-data-ui-loading":r(B)}),style:l(`max-width:100%;overflow:visible;background:transparent;color:${R.value.style.chart.color}`)},[d(r(ct)),a.$slots[`chart-background`]?(s(),S(`foreignObject`,{key:0,x:W.value.left,y:W.value.top,width:W.value.width<=0?10:W.value.width,height:W.value.height<=0?10:W.value.height,style:{pointerEvents:`none`}},[f(a.$slots,`chart-background`,{},void 0,!0)],8,ft)):t(``,!0),R.value.style.chart.bars.gradient.show?(s(),S(`defs`,pt,[(s(!0),S(b,null,h($.value,(e,t)=>(s(),S(`linearGradient`,{id:`gradient_${e.id}`,x1:`0%`,y1:`0%`,x2:`0%`,y2:`100%`},[C(`stop`,{offset:`0%`,"stop-color":e.color},null,8,ht),C(`stop`,{offset:`61.8%`,"stop-color":r(we)(e.color,R.value.style.chart.bars.gradient.intensity/100)},null,8,gt),C(`stop`,{offset:`100%`,"stop-color":e.color},null,8,_t)],8,mt))),256))])):t(``,!0),R.value.style.chart.grid.frame.show?(s(),S(`rect`,{key:2,style:{pointerEvents:`none`,transition:`none`,animation:`none !important`},x:Math.max(0,W.value.left),y:Math.max(0,W.value.top),width:Math.max(0,W.value.width),height:Math.max(0,W.value.height),fill:`transparent`,stroke:R.value.style.chart.grid.frame.stroke,"stroke-width":R.value.style.chart.grid.frame.strokeWidth,"stroke-linecap":R.value.style.chart.grid.frame.strokeLinecap,"stroke-linejoin":R.value.style.chart.grid.frame.strokeLinejoin,"stroke-dasharray":R.value.style.chart.grid.frame.strokeDasharray},null,8,vt)):t(``,!0),R.value.style.chart.grid.x.showHorizontalLines&&R.value.orientation===`vertical`?(s(!0),S(b,{key:3},h(Z.value,(e,t)=>(s(),S(`line`,{x1:W.value.left,x2:W.value.right,y1:e.y,y2:e.y,stroke:R.value.style.chart.grid.x.linesColor,"stroke-width":R.value.style.chart.grid.x.linesThickness,"stroke-dasharray":R.value.style.chart.grid.x.linesStrokeDasharray,"stroke-linecap":`round`},null,8,yt))),256)):t(``,!0),R.value.style.chart.grid.x.showHorizontalLines&&R.value.orientation===`horizontal`?(s(!0),S(b,{key:4},h(q.value.end-q.value.start+1,(e,t)=>(s(),S(`line`,{x1:W.value.left,x2:W.value.right,y1:W.value.top+Y.value*t,y2:W.value.top+Y.value*t,stroke:R.value.style.chart.grid.x.linesColor,"stroke-width":R.value.style.chart.grid.x.linesThickness,"stroke-dasharray":R.value.style.chart.grid.x.linesStrokeDasharray,"stroke-linecap":`round`},null,8,bt))),256)):t(``,!0),R.value.style.chart.grid.y.showVerticalLines&&R.value.orientation===`vertical`?(s(!0),S(b,{key:5},h(q.value.end-q.value.start+1,(e,t)=>(s(),S(`line`,{x1:W.value.left+Y.value*t,x2:W.value.left+Y.value*t,y1:W.value.top,y2:W.value.bottom,stroke:R.value.style.chart.grid.y.linesColor,"stroke-width":R.value.style.chart.grid.y.linesThickness,"stroke-dasharray":R.value.style.chart.grid.y.linesStrokeDasharray,"stroke-linecap":`round`},null,8,xt))),256)):t(``,!0),R.value.style.chart.grid.y.showVerticalLines&&R.value.orientation===`horizontal`?(s(!0),S(b,{key:6},h(Z.value,(e,t)=>(s(),S(`line`,{x1:e.horizontal_x,x2:e.horizontal_x,y1:W.value.top,y2:W.value.bottom,stroke:R.value.style.chart.grid.y.linesColor,"stroke-width":R.value.style.chart.grid.y.linesThickness,"stroke-dasharray":R.value.style.chart.grid.y.linesStrokeDasharray,"stroke-linecap":`round`},null,8,St))),256)):t(``,!0),(s(!0),S(b,null,h($.value,(n,o)=>(s(),S(`g`,null,[a.$slots.pattern?(s(),S(`defs`,Ct,[f(a.$slots,`pattern`,p({ref_for:!0},{seriesIndex:n.absoluteIndex,patternId:`pattern_${M.value}_${n.absoluteIndex}`}),void 0,!0)])):t(``,!0),R.value.orientation===`vertical`?(s(),S(b,{key:1},[(s(!0),S(b,null,h(n.x,(t,a)=>(s(),S(`rect`,{x:t,y:r(E)(n.y[a]),height:n.height[a]<0?1e-4:n.height[a]||0,rx:R.value.style.chart.bars.borderRadius>n.height[a]/2?(n.height[a]<0?0:n.height[a])/2:R.value.style.chart.bars.borderRadius,width:Y.value*(1-R.value.style.chart.bars.gapRatio/2),fill:R.value.style.chart.bars.gradient.show?`url(#gradient_${n.id})`:n.color,stroke:R.value.style.chart.backgroundColor,"stroke-width":R.value.style.chart.bars.strokeWidth,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e({"vue-data-ui-bar-animated":R.value.useCssAnimation,"vue-data-ui-bar-transition":F.value})},null,10,wt))),256)),a.$slots.pattern?(s(),S(`g`,Tt,[(s(!0),S(b,null,h(n.x,(t,a)=>(s(),S(`rect`,{x:t,y:r(E)(n.y[a]),height:n.height[a]<0?1e-4:n.height[a]||0,rx:R.value.style.chart.bars.borderRadius>n.height[a]/2?(n.height[a]<0?0:n.height[a])/2:R.value.style.chart.bars.borderRadius,width:Y.value*(1-R.value.style.chart.bars.gapRatio/2),fill:`url(#pattern_${M.value}_${n.absoluteIndex})`,stroke:R.value.style.chart.backgroundColor,"stroke-width":R.value.style.chart.bars.strokeWidth,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e({"vue-data-ui-bar-animated":R.value.useCssAnimation,"vue-data-ui-bar-transition":F.value})},null,10,Et))),256))])):t(``,!0)],64)):(s(),S(b,{key:2},[(s(!0),S(b,null,h(n.horizontal_x,(t,a)=>(s(),S(`rect`,{x:r(E)(t,W.value.left),y:n.horizontal_y[a]<0?0:n.horizontal_y[a],width:r(E)(n.horizontal_width[a]<0?1e-4:n.horizontal_width[a]),rx:R.value.style.chart.bars.borderRadius>n.height[a]/2?(n.height[a]<0?0:n.height[a])/2:R.value.style.chart.bars.borderRadius,height:Y.value*(1-R.value.style.chart.bars.gapRatio/2),fill:R.value.style.chart.bars.gradient.show?`url(#gradient_${n.id})`:n.color,stroke:R.value.style.chart.backgroundColor,"stroke-width":R.value.style.chart.bars.strokeWidth,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e({"vue-data-ui-bar-animated":R.value.useCssAnimation,"vue-data-ui-bar-transition":F.value})},null,10,Dt))),256)),a.$slots.pattern?(s(),S(`g`,Ot,[(s(!0),S(b,null,h(n.horizontal_x,(t,a)=>(s(),S(`rect`,{x:r(E)(t,W.value.left),y:n.horizontal_y[a]<0?0:n.horizontal_y[a],width:r(E)(n.horizontal_width[a]<0?1e-4:n.horizontal_width[a]),rx:R.value.style.chart.bars.borderRadius>n.height[a]/2?(n.height[a]<0?0:n.height[a])/2:R.value.style.chart.bars.borderRadius,height:Y.value*(1-R.value.style.chart.bars.gapRatio/2),fill:`url(#pattern_${M.value}_${n.absoluteIndex})`,stroke:R.value.style.chart.backgroundColor,"stroke-width":R.value.style.chart.bars.strokeWidth,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e({"vue-data-ui-bar-animated":R.value.useCssAnimation,"vue-data-ui-bar-transition":F.value})},null,10,kt))),256))])):t(``,!0)],64))]))),256)),R.value.style.chart.grid.x.showAxis?(s(),S(`line`,{key:7,x1:W.value.left,x2:W.value.right,y1:W.value.bottom,y2:W.value.bottom,stroke:R.value.style.chart.grid.x.axisColor,"stroke-width":R.value.style.chart.grid.x.axisThickness,"stroke-linecap":`round`,"stroke-linejoin":`round`},null,8,At)):t(``,!0),R.value.style.chart.grid.y.showAxis&&!R.value.style.chart.bars.distributed?(s(),S(`line`,{key:8,x1:W.value.left,x2:W.value.left,y1:W.value.top,y2:W.value.bottom,stroke:R.value.style.chart.grid.y.axisColor,"stroke-width":R.value.style.chart.grid.y.axisThickness,"stroke-linecap":`round`,"stroke-linejoin":`round`},null,8,jt)):t(``,!0),R.value.style.chart.grid.x.axisName.show&&R.value.style.chart.grid.x.axisName.text?(s(),S(`text`,{key:9,ref_key:`xAxisLabel`,ref:On,x:W.value.left+W.value.width/2,y:W.value.chartHeight-3,"font-size":R.value.style.chart.grid.x.axisName.fontSize,fill:R.value.style.chart.grid.x.axisName.color,"font-weight":R.value.style.chart.grid.x.axisName.bold?`bold`:`normal`,"text-anchor":`middle`},u(R.value.style.chart.grid.x.axisName.text),9,Mt)):t(``,!0),R.value.style.chart.grid.y.axisName.show&&R.value.style.chart.grid.y.axisName.text?(s(),S(`text`,{key:10,ref_key:`yAxisLabel`,ref:kn,transform:`translate(${R.value.style.chart.grid.y.axisName.fontSize}, ${W.value.top+W.value.height/2}) rotate(-90)`,"font-size":R.value.style.chart.grid.y.axisName.fontSize,fill:R.value.style.chart.grid.y.axisName.color,"font-weight":R.value.style.chart.grid.y.axisName.bold?`bold`:`normal`,"text-anchor":`middle`},u(R.value.style.chart.grid.y.axisName.text),9,Nt)):t(``,!0),V.value.dataLabels.show&&R.value.orientation===`vertical`?(s(),S(b,{key:11},[(s(!0),S(b,null,h($.value,(e,n)=>(s(),S(`g`,null,[(s(!0),S(b,null,h(e.x,(a,o)=>(s(),S(b,null,[gi(e.series[o],e.proportions[o])?(s(),S(`text`,{key:0,x:a+Y.value*(1-R.value.style.chart.bars.gapRatio/2)/2,y:e.y[o]+e.height[o]/2+R.value.style.chart.bars.dataLabels.fontSize/3,"font-size":R.value.style.chart.bars.dataLabels.fontSize,fill:R.value.style.chart.bars.dataLabels.adaptColorToBackground?r(me)(e.color):R.value.style.chart.bars.dataLabels.color,"font-weight":R.value.style.chart.bars.dataLabels.bold?`bold`:`normal`,"text-anchor":`middle`},u(R.value.style.chart.bars.showDistributedPercentage&&R.value.style.chart.bars.distributed?Ur(e.proportions[o]*100,e,n,o):Hr(e.series[o],e,n,o,e.signedSeries[o])),9,Pt)):t(``,!0)],64))),256))]))),256)),R.value.style.chart.bars.totalValues.show&&$.value.length>1?(s(),S(`g`,{key:0,ref_key:`sumTop`,ref:An},[(s(!0),S(b,null,h(Vr.value,(e,n)=>(s(),S(b,null,[!R.value.style.chart.bars.dataLabels.hideEmptyValues||e.value!==0?(s(),S(`text`,{key:0,x:W.value.left+Y.value*n+Y.value/2,y:Fi(n),"text-anchor":`middle`,"font-size":R.value.style.chart.bars.totalValues.fontSize,"font-weight":R.value.style.chart.bars.totalValues.bold?`bold`:`normal`,fill:R.value.style.chart.bars.totalValues.color},u(Hr(e.value,e,n,e.sign)),9,Ft)):t(``,!0)],64))),256))],512)):t(``,!0)],64)):t(``,!0),V.value.dataLabels.show&&R.value.orientation===`horizontal`?(s(),S(b,{key:12},[(s(!0),S(b,null,h($.value,(e,n)=>(s(),S(`g`,null,[(s(!0),S(b,null,h(e.horizontal_x,(a,o)=>(s(),S(b,null,[gi(e.series[o],e.proportions[o])?(s(),S(`text`,{key:0,x:a+(e.horizontal_width[o]<0?1e-4:e.horizontal_width[o])/2,y:e.horizontal_y[o]+Y.value*(1-R.value.style.chart.bars.gapRatio/2)/2+R.value.style.chart.bars.dataLabels.fontSize/3,"font-size":R.value.style.chart.bars.dataLabels.fontSize,fill:R.value.style.chart.bars.dataLabels.adaptColorToBackground?r(me)(e.color):R.value.style.chart.bars.dataLabels.color,"font-weight":R.value.style.chart.bars.dataLabels.bold?`bold`:`normal`,"text-anchor":`middle`},u(R.value.style.chart.bars.showDistributedPercentage&&R.value.style.chart.bars.distributed?Ur(e.proportions[o]*100,e,n,o):Hr(e.series[o],e,n,o,e.signedSeries[o])),9,It)):t(``,!0)],64))),256))]))),256)),R.value.style.chart.bars.totalValues.show&&$.value.length>1?(s(),S(`g`,{key:0,ref_key:`sumRight`,ref:jn},[(s(!0),S(b,null,h(Vr.value,(e,n)=>(s(),S(b,null,[!R.value.style.chart.bars.dataLabels.hideEmptyValues||e.value!==0?(s(),S(`text`,{key:0,x:Ii(n),y:W.value.top+Y.value*n+Y.value/2+R.value.style.chart.bars.totalValues.fontSize/3,"text-anchor":`start`,"font-size":R.value.style.chart.bars.totalValues.fontSize,"font-weight":R.value.style.chart.bars.totalValues.bold?`bold`:`normal`,fill:R.value.style.chart.bars.totalValues.color},u(Hr(e.value,e,n,e.sign)),9,Lt)):t(``,!0)],64))),256))],512)):t(``,!0)],64)):t(``,!0),R.value.style.chart.grid.y.axisLabels.show&&!R.value.style.chart.bars.distributed&&R.value.orientation===`vertical`?(s(),S(`g`,{key:13,ref_key:`scaleLabels`,ref:I},[(s(!0),S(b,null,h(Z.value,(e,t)=>(s(),S(`line`,{x1:W.value.left,x2:W.value.left-6,y1:e.y,y2:e.y,stroke:R.value.style.chart.grid.x.axisColor,"stroke-width":1},null,8,Rt))),256)),(s(!0),S(b,null,h(Z.value,(e,t)=>(s(),S(`text`,{x:e.x,y:e.y+R.value.style.chart.grid.y.axisLabels.fontSize/3,"font-size":R.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":R.value.style.chart.grid.y.axisLabels.bold?`bold`:`normal`,fill:R.value.style.chart.grid.y.axisLabels.color,"text-anchor":`end`},u(r(O)(R.value.style.chart.grid.y.axisLabels.formatter,e.value,r(D)({p:R.value.style.chart.bars.dataLabels.prefix,v:e.value,s:R.value.style.chart.bars.dataLabels.suffix,r:R.value.style.chart.grid.y.axisLabels.rounding}),{datapoint:e})),9,zt))),256))],512)):t(``,!0),R.value.style.chart.grid.y.axisLabels.show&&!R.value.style.chart.bars.distributed&&R.value.orientation===`horizontal`?(s(),S(`g`,{key:14,ref_key:`scaleLabels`,ref:I},[(s(!0),S(b,null,h(Z.value,(e,t)=>(s(),S(`line`,{x1:e.horizontal_x,x2:e.horizontal_x,y1:W.value.bottom,y2:W.value.bottom+6,stroke:R.value.style.chart.grid.x.axisColor,"stroke-width":1,"stroke-linecap":`round`},null,8,Bt))),256)),(s(!0),S(b,null,h(Z.value,(e,t)=>(s(),S(`text`,{class:`vue-data-ui-time-label`,"font-size":R.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":R.value.style.chart.grid.y.axisLabels.bold?`bold`:`normal`,fill:R.value.style.chart.grid.y.axisLabels.color,"text-anchor":R.value.style.chart.grid.x.timeLabels.rotation>0?`start`:R.value.style.chart.grid.x.timeLabels.rotation<0?`end`:`middle`,transform:`translate(${e.horizontal_x}, ${W.value.bottom+R.value.style.chart.grid.x.timeLabels.fontSize*1.3+R.value.style.chart.grid.x.timeLabels.offsetY}), rotate(${R.value.style.chart.grid.x.timeLabels.rotation})`},u(r(O)(R.value.style.chart.grid.y.axisLabels.formatter,e.value,r(D)({p:R.value.style.chart.bars.dataLabels.prefix,v:e.value,s:R.value.style.chart.bars.dataLabels.suffix,r:R.value.style.chart.grid.y.axisLabels.rounding}),{datapoint:e})),9,Vt))),256))],512)):t(``,!0),R.value.style.chart.grid.x.timeLabels.show&&R.value.orientation===`vertical`?(s(),S(`g`,{key:15,ref_key:`timeLabelsEls`,ref:L},[a.$slots[`time-label`]?(s(),S(`g`,Ht,[(s(!0),S(b,null,h(Fr.value,(e,t)=>(s(),S(`g`,null,[f(a.$slots,`time-label`,p({ref_for:!0},{x:W.value.left+Y.value*t+Y.value/2,y:W.value.bottom+R.value.style.chart.grid.x.timeLabels.fontSize*1.3+R.value.style.chart.grid.x.timeLabels.offsetY,fontSize:R.value.style.chart.grid.x.timeLabels.fontSize,fill:R.value.style.chart.grid.x.timeLabels.color,transform:`translate(${W.value.left+Y.value*t+Y.value/2}, ${W.value.bottom+R.value.style.chart.grid.x.timeLabels.fontSize*1.3+R.value.style.chart.grid.x.timeLabels.offsetY}), rotate(${R.value.style.chart.grid.x.timeLabels.rotation})`,absoluteIndex:e.absoluteIndex,content:e.text,textAnchor:R.value.style.chart.grid.x.timeLabels.rotation>0?`start`:R.value.style.chart.grid.x.timeLabels.rotation<0?`end`:`middle`,show:!0}),void 0,!0)]))),256))])):(s(),S(`g`,Ut,[(s(!0),S(b,null,h(Fr.value,(e,t)=>(s(),S(`g`,null,[String(e.text).includes(`
`)?(s(),S(`text`,{key:t+`-multi`,"text-anchor":R.value.style.chart.grid.x.timeLabels.rotation>0?`start`:R.value.style.chart.grid.x.timeLabels.rotation<0?`end`:`middle`,"font-size":R.value.style.chart.grid.x.timeLabels.fontSize,fill:R.value.style.chart.grid.x.timeLabels.color,transform:`
                                    translate(
                                    ${W.value.left+Y.value*t+Y.value/2},
                                    ${W.value.bottom+R.value.style.chart.grid.x.timeLabels.fontSize*1.3+R.value.style.chart.grid.x.timeLabels.offsetY}
                                    ),
                                    rotate(${R.value.style.chart.grid.x.timeLabels.rotation})
                                `,style:l({cursor:z.value?`pointer`:`default`}),innerHTML:r(le)({content:String(e.text),fontSize:R.value.style.chart.grid.x.timeLabels.fontSize,fill:R.value.style.chart.grid.x.timeLabels.color,x:0,y:0}),onClick:()=>mi(e,t)},null,12,Gt)):(s(),S(`text`,{class:`vue-data-ui-time-label`,key:t,"text-anchor":R.value.style.chart.grid.x.timeLabels.rotation>0?`start`:R.value.style.chart.grid.x.timeLabels.rotation<0?`end`:`middle`,"font-size":R.value.style.chart.grid.x.timeLabels.fontSize,"font-weight":R.value.style.chart.grid.x.timeLabels.bold?`bold`:`normal`,fill:R.value.style.chart.grid.x.timeLabels.color,transform:`translate(${W.value.left+Y.value*t+Y.value/2}, ${W.value.bottom+R.value.style.chart.grid.x.timeLabels.fontSize*1.3+R.value.style.chart.grid.x.timeLabels.offsetY}), rotate(${R.value.style.chart.grid.x.timeLabels.rotation})`,style:l({cursor:z.value?`pointer`:`default`}),onClick:()=>mi(e,t)},u(e.text),13,Wt))]))),256))]))],512)):t(``,!0),R.value.style.chart.grid.x.timeLabels.show&&R.value.orientation===`horizontal`?(s(),S(`g`,{key:16,ref_key:`timeLabelsEls`,ref:L},[a.$slots[`time-label`]?(s(),S(`g`,Kt,[(s(!0),S(b,null,h(Q.value,(e,t)=>(s(),S(`g`,null,[f(a.$slots,`time-label`,p({ref_for:!0},{x:W.value.left-8,y:W.value.top+Y.value*t+Y.value/2+R.value.style.chart.grid.y.axisLabels.fontSize/3,fontSize:R.value.style.chart.grid.x.timeLabels.fontSize,fill:R.value.style.chart.grid.x.timeLabels.color,transform:null,absoluteIndex:e.absoluteIndex,content:e.text,textAnchor:`end`,show:!0}),void 0,!0)]))),256))])):(s(),S(`g`,qt,[(s(!0),S(b,null,h(Q.value,(e,t)=>(s(),S(`g`,null,[String(e.text).includes(`
`)?(s(),S(`text`,{key:1,"text-anchor":`end`,"font-size":R.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":R.value.style.chart.grid.y.axisLabels.bold?`bold`:`normal`,fill:R.value.style.chart.grid.y.axisLabels.color,x:W.value.left-8,y:W.value.top+Y.value*t+Y.value/2+R.value.style.chart.grid.y.axisLabels.fontSize/3,style:l({cursor:z.value?`pointer`:`default`}),onClick:()=>mi(e,t),innerHTML:r(xe)({content:String(e.text),fontSize:R.value.style.chart.grid.y.axisLabels.fontSize,fill:R.value.style.chart.grid.y.axisLabels.color,x:W.value.left-8,y:0})},null,12,Yt)):(s(),S(`text`,{key:0,"text-anchor":`end`,"font-size":R.value.style.chart.grid.y.axisLabels.fontSize,"font-weight":R.value.style.chart.grid.y.axisLabels.bold?`bold`:`normal`,fill:R.value.style.chart.grid.y.axisLabels.color,x:W.value.left-8,y:W.value.top+Y.value*t+Y.value/2+R.value.style.chart.grid.y.axisLabels.fontSize/3,style:l({cursor:z.value?`pointer`:`default`}),onClick:()=>mi(e,t)},u(e.text),13,Jt))]))),256))]))],512)):t(``,!0),V.value.showTooltip&&R.value.orientation===`vertical`?(s(!0),S(b,{key:17},h(q.value.end-q.value.start,(e,t)=>(s(),S(`rect`,{x:W.value.left+t*Y.value,y:W.value.top,width:Y.value,height:W.value.height<0?0:W.value.height,onClick:()=>Wr(t),onMouseenter:()=>Jr(t),onMouseleave:()=>Kr(t),fill:t===P.value||t===Bn.value?R.value.style.chart.highlighter.color:`transparent`,style:l({opacity:R.value.style.chart.highlighter.opacity/100})},null,44,Xt))),256)):t(``,!0),V.value.showTooltip&&R.value.orientation===`horizontal`?(s(!0),S(b,{key:18},h(q.value.end-q.value.start,(e,t)=>(s(),S(`rect`,{x:W.value.left,y:W.value.top+t*Y.value,width:W.value.width<0?0:W.value.width,height:Y.value,onClick:()=>Wr(t),onMouseenter:()=>Jr(t),onMouseleave:()=>Kr(t),fill:t===P.value||t===Bn.value?R.value.style.chart.highlighter.color:`transparent`,style:l({opacity:R.value.style.chart.highlighter.opacity/100})},null,44,Zt))),256)):t(``,!0),br.value?(s(),S(`rect`,p({key:19},vr.value,{"data-start":q.value.start,"data-end":q.value.end}),null,16,Qt)):t(``,!0),f(a.$slots,`svg`,{svg:{drawingArea:W.value,data:$.value,isPrintingImg:r($n)|r(er)|En.value,isPrintingSvg:Dn.value}},void 0,!0)],14,dt)),a.$slots.watermark?(s(),S(`div`,$t,[f(a.$slots,`watermark`,_(c({isPrinting:r($n)||r(er)||En.value||Dn.value})),void 0,!0)])):t(``,!0),R.value.style.chart.zoom.show&&un.value&&Oi.value&&K.value>6?(s(),m(Je,{key:4,ref_key:`chartSlicer`,ref:_n,allMinimaps:Or.value,background:R.value.style.chart.zoom.color,borderColor:R.value.style.chart.backgroundColor,customFormat:R.value.style.chart.zoom.customFormat,cutNullValues:!1,forceZeroCenter:!0,enableRangeHandles:R.value.style.chart.zoom.enableRangeHandles,enableSelectionDrag:R.value.style.chart.zoom.enableSelectionDrag,end:q.value.end,focusOnDrag:R.value.style.chart.zoom.focusOnDrag,focusRangeRatio:R.value.style.chart.zoom.focusRangeRatio,fontSize:R.value.style.chart.zoom.fontSize,immediate:!R.value.style.chart.zoom.preview.enable,inputColor:R.value.style.chart.zoom.color,isPreview:br.value,labelLeft:R.value.style.chart.grid.x.timeLabels.values[q.value.start]?Q.value?.[0]?.text??``:``,labelRight:R.value.style.chart.grid.x.timeLabels.values[q.value.end-1]?Q.value?.at(-1)?.text??``:``,max:Math.max(...Ie.dataset.map(e=>e.series.length)),min:0,minimap:X.value,minimapCompact:R.value.style.chart.zoom.minimap.compact,minimapFrameColor:R.value.style.chart.zoom.minimap.frameColor,minimapIndicatorColor:R.value.style.chart.zoom.minimap.indicatorColor,minimapMerged:!1,minimapSelectedColor:R.value.style.chart.zoom.minimap.selectedColor,minimapSelectedColorOpacity:R.value.style.chart.zoom.minimap.selectedColorOpacity,minimapSelectedIndex:P.value,minimapSelectionRadius:1,preciseLabels:zr.value.length?zr.value:jr.value,refreshEndPoint:R.value.style.chart.zoom.endIndex===null?Math.max(...Ie.dataset.map(e=>e.series.length)):R.value.style.chart.zoom.endIndex+1,refreshStartPoint:R.value.style.chart.zoom.startIndex===null?0:R.value.style.chart.zoom.startIndex,selectColor:R.value.style.chart.zoom.highlightColor,selectedSeries:qr.value,smoothMinimap:!1,start:q.value.start,textColor:R.value.style.chart.color,timeLabels:jr.value,usePreciseLabels:R.value.style.chart.grid.x.timeLabels.datetimeFormatter.enable&&!R.value.style.chart.zoom.useDefaultFormat,valueEnd:q.value.end,valueStart:q.value.start,verticalHandles:R.value.style.chart.zoom.minimap.verticalHandles,maxWidth:R.value.style.chart.zoom.maxWidth,isCursorPointer:z.value,additionalMinimapHeight:R.value.style.chart.zoom.minimap.additionalHeight,handleType:R.value.style.chart.zoom.minimap.handleType,handleIconColor:R.value.style.chart.zoom.minimap.handleIconColor,handleBorderWidth:R.value.style.chart.zoom.minimap.handleBorderWidth,handleBorderColor:R.value.style.chart.zoom.minimap.handleBorderColor,handleFill:R.value.style.chart.zoom.minimap.handleFill,handleWidth:R.value.style.chart.zoom.minimap.handleWidth,"onUpdate:end":Mi,"onUpdate:start":ji,onTrapMouse:yr,onReset:Tr,onFutureEnd:o[0]||=e=>xr(`end`,e),onFutureStart:o[1]||=e=>xr(`start`,e)},{"reset-action":y(({reset:e})=>[f(a.$slots,`reset-action`,_(c({reset:e})),void 0,!0)]),slotMap:y(({width:e,height:t,unitW:n})=>[(s(!0),S(b,null,h($.value,e=>(s(),S(`g`,{key:e.id},[(s(!0),S(b,null,h(e.xMinimap({left:0,unitW:n}),(r,a)=>(s(),S(`rect`,{key:a,x:a===0?r-n*(R.value.style.chart.bars.gapRatio/4):r-n/2,y:Math.max(0,Math.min(t,e.yMinimap({minimapH:t})[a])),height:e.heightMinimap({minimapH:t})[a],width:[0,K.value-1].includes(a)?n*(1-R.value.style.chart.bars.gapRatio/2)/2:n*(1-R.value.style.chart.bars.gapRatio/2),fill:R.value.style.chart.bars.gradient.show?`url(#gradient_${e.id})`:e.color,stroke:R.value.style.chart.backgroundColor,"stroke-width":.5,rx:`0`,"stroke-linecap":`round`,"stroke-linejoin":`round`,style:l({opacity:a>=J.value.start&&a<=J.value.end?1:.62})},null,12,en))),128))]))),128))]),_:3},8,`allMinimaps.background.borderColor.customFormat.enableRangeHandles.enableSelectionDrag.end.focusOnDrag.focusRangeRatio.fontSize.immediate.inputColor.isPreview.labelLeft.labelRight.max.minimap.minimapCompact.minimapFrameColor.minimapIndicatorColor.minimapSelectedColor.minimapSelectedColorOpacity.minimapSelectedIndex.preciseLabels.refreshEndPoint.refreshStartPoint.selectColor.selectedSeries.start.textColor.timeLabels.usePreciseLabels.valueEnd.valueStart.verticalHandles.maxWidth.isCursorPointer.additionalMinimapHeight.handleType.handleIconColor.handleBorderWidth.handleBorderColor.handleFill.handleWidth`.split(`.`))):t(``,!0),d(r(tt),{teleportTo:R.value.style.chart.tooltip.teleportTo,show:V.value.showTooltip&&dn.value,backgroundColor:R.value.style.chart.tooltip.backgroundColor,color:R.value.style.chart.tooltip.color,fontSize:R.value.style.chart.tooltip.fontSize,borderRadius:R.value.style.chart.tooltip.borderRadius,borderColor:R.value.style.chart.tooltip.borderColor,borderWidth:R.value.style.chart.tooltip.borderWidth,backgroundOpacity:R.value.style.chart.tooltip.backgroundOpacity,position:R.value.style.chart.tooltip.position,offsetY:R.value.style.chart.tooltip.offsetY,parent:j.value,content:pn.value,isFullscreen:yn.value,isCustom:r(ce)(R.value.style.chart.tooltip.customFormat),smooth:R.value.style.chart.tooltip.smooth,backdropFilter:R.value.style.chart.tooltip.backdropFilter,smoothForce:R.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:R.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":y(()=>[f(a.$slots,`tooltip-before`,_(c({...fn.value})),void 0,!0)]),"tooltip-after":y(()=>[f(a.$slots,`tooltip-after`,_(c({...fn.value})),void 0,!0)]),_:3},8,[`teleportTo`,`show`,`backgroundColor`,`color`,`fontSize`,`borderRadius`,`borderColor`,`borderWidth`,`backgroundOpacity`,`position`,`offsetY`,`parent`,`content`,`isFullscreen`,`isCustom`,`smooth`,`backdropFilter`,`smoothForce`,`smoothSnapThreshold`]),C(`div`,{id:`legend-bottom-${M.value}`},null,8,tn),Cn.value?(s(),m(re,{key:5,to:R.value.style.chart.legend.position===`top`?`#legend-top-${M.value}`:`#legend-bottom-${M.value}`},[C(`div`,{ref_key:`chartLegend`,ref:gn},[R.value.style.chart.legend.show?(s(),m(Qe,{key:0,legendSet:ui.value,config:di.value,isCursorPointer:z.value,onClickMarker:o[2]||=({legend:e})=>e.segregate()},te({item:y(({legend:e})=>[r(B)?t(``,!0):(s(),S(`div`,{key:0,onClick:t=>e.segregate(),style:l(`opacity:${N.value.includes(e.id)?.5:1}`)},u(e.name),13,nn))]),legendToggle:y(()=>[ui.value.length>2&&R.value.style.chart.legend.selectAllToggle.show&&!r(B)?(s(),m(Ye,{key:0,backgroundColor:R.value.style.chart.legend.selectAllToggle.backgroundColor,color:R.value.style.chart.legend.selectAllToggle.color,fontSize:R.value.style.chart.legend.fontSize,checked:N.value.length>0,isCursorPointer:z.value,onToggle:ai},null,8,[`backgroundColor`,`color`,`fontSize`,`checked`,`isCursorPointer`])):t(``,!0)]),_:2},[a.$slots.pattern?{name:`legend-pattern`,fn:y(({legend:e,index:t})=>[d(Ge,{shape:e.shape,radius:30,stroke:`none`,plot:{x:30,y:30},fill:`url(#pattern_${M.value}_${t})`},null,8,[`shape`,`fill`])]),key:`0`}:void 0]),1032,[`legendSet`,`config`,`isCursorPointer`])):f(a.$slots,`legend`,{key:1,legend:ui.value},void 0,!0)],512)],8,[`to`])):t(``,!0),a.$slots.source?(s(),S(`div`,{key:6,ref_key:`source`,ref:vn,dir:`auto`},[f(a.$slots,`source`,{},void 0,!0)],512)):t(``,!0),un.value&&R.value.userOptions.buttons.table?(s(),m(ie(vi.value.component),p({key:7},vi.value.props,{ref_key:`tableUnit`,ref:wn,onClose:yi}),te({content:y(()=>[d(r(it),{colNames:ii.value.colNames,head:ii.value.head,body:ii.value.body,config:ii.value.config,title:R.value.table.useDialog?``:vi.value.title,withCloseButton:!R.value.table.useDialog,isCursorPointer:z.value,onClose:yi},{th:y(({th:e})=>[C(`div`,{innerHTML:e},null,8,rn)]),td:y(({td:e})=>[n(u(isNaN(Number(e))?e:r(D)({p:R.value.style.chart.bars.dataLabels.prefix,v:e,s:R.value.style.chart.bars.dataLabels.suffix,r:R.value.table.td.roundingValue})),1)]),_:1},8,[`colNames`,`head`,`body`,`config`,`title`,`withCloseButton`,`isCursorPointer`])]),_:2},[R.value.table.useDialog?{name:`title`,fn:y(()=>[n(u(vi.value.title),1)]),key:`0`}:void 0,R.value.table.useDialog?{name:`actions`,fn:y(()=>[C(`button`,{tabindex:`0`,class:`vue-ui-user-options-button`,onClick:o[3]||=e=>ri(R.value.userOptions.callbacks.csv),style:l({cursor:z.value?`pointer`:`default`})},[d(r(nt),{name:`fileCsv`,stroke:vi.value.props.color},null,8,[`stroke`])],4)]),key:`1`}:void 0]),1040)):t(``,!0),f(a.$slots,`skeleton`,{},()=>[r(B)?(s(),m(Le,{key:0})):t(``,!0)],!0)],46,lt))}},[[`__scopeId`,`data-v-30e2e23e`]]),on=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:`Module`}));export{ct as a,on as b};