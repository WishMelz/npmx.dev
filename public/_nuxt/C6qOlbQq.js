const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./B9jcbJ_P.js","./xh7dz5-d.js","./BLt7TXlb.js","./CWNsAIol.js","./Cf-0F-2c.js","./ByvxprxI.js","./CRSLCJ2m.js","./8DvoFuCx.js","./DdyLBgN8.js","./C66xQW7K.js","./DuIAB7Tu.js","./DHC76net.js","./BDmUravP.js","./D7-tWLRc.js","./CBD7ngdF.js","./BIodG7vT.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,D as n,Dt as r,G as i,J as a,M as o,Mt as s,Nt as c,O as ee,Q as l,R as te,S as u,T as ne,Tt as re,Z as d,b as f,et as ie,f as ae,jt as p,k as m,lt as h,m as g,o as oe,ot as se,w as _,x as v,yt as y,z as b}from"./BLt7TXlb.js";import{t as x}from"./YZkb6lnT.js";import{H as S,Mt as C,N as ce,Nt as le,P as ue,Q as de,St as fe,V as pe,W as w,_t as me,a as he,bt as ge,dt as _e,h as ve,it as T,m as ye,rt as be,s as xe,vt as E,wt as D,y as Se}from"./Cf-0F-2c.js";import{n as Ce,t as we}from"./8DvoFuCx.js";import{t as Te}from"./Cme7ewGR.js";import{t as Ee}from"./CWNsAIol.js";import{n as De,t as Oe}from"./D4ushAer.js";import{t as ke}from"./CLl0-3D6.js";import{t as Ae}from"./BwaPX4qL.js";import{t as je}from"./BDmUravP.js";import{t as Me}from"./BEpjx3T_.js";import{t as Ne}from"./DMqKe8aR.js";import{t as Pe}from"./DCHQRohe.js";var Fe={userOptions:{show:!1},style:{chart:{layout:{branches:{useGradient:!1,underlayerColor:`#FFFFFF`},nuts:{useGradient:!1,selected:{gradientIntensity:0}},roots:{useGradient:!1}}}}},Ie={userOptions:{show:!1},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,layout:{grandTotal:{color:`#CCCCCC`},roots:{useGradient:!1,stroke:`#1A1A1A`,labels:{name:{color:`#CCCCCC`}}},verticalSeparator:{stroke:`#1A1A1A`},branches:{useGradient:!1,underlayerColor:`#1A1A1A`,labels:{color:`#CCCCCC`}},nuts:{useGradient:!1,selected:{gradientIntensity:0,labels:{dataLabels:{color:`#CCCCCC`},core:{total:{color:`#CCCCCC`},value:{color:`#CCCCCC`}}}}},legend:{color:`#CCCCCC`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}}}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},Le={style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,layout:{grandTotal:{color:`#CCCCCC`},roots:{stroke:`#1A1A1A`,labels:{name:{color:`#CCCCCC`}}},verticalSeparator:{stroke:`#1A1A1A`},branches:{labels:{color:`#CCCCCC`}},nuts:{selected:{labels:{dataLabels:{color:`#CCCCCC`},core:{total:{color:`#CCCCCC`},value:{color:`#CCCCCC`}}}}},legend:{color:`#CCCCCC`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}}}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},Re={style:{chart:{backgroundColor:`#FFF8E1`,color:`#424242`,layout:{grandTotal:{color:`#424242`},roots:{stroke:`#FFF8E1`,labels:{name:{color:`#424242`}}},verticalSeparator:{stroke:`#FFF8E1`},branches:{borderRadius:0,labels:{color:`#424242`}},nuts:{selected:{labels:{dataLabels:{color:`#424242`},core:{total:{color:`#424242`},value:{color:`#424242`}}}}},legend:{color:`#424242`},title:{color:`#424242`,subtitle:{color:`#757575`}}}}},table:{th:{backgroundColor:`#FFF8E1`,color:`#424242`},td:{backgroundColor:`#FFF8E1`,color:`#424242`}}},ze={style:{chart:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,layout:{grandTotal:{color:`#BDBDBD`},roots:{stroke:`#1E1E1E`,labels:{name:{color:`#BDBDBD`}}},verticalSeparator:{stroke:`#1E1E1E`},branches:{borderRadius:0,labels:{color:`#BDBDBD`}},nuts:{selected:{labels:{dataLabels:{color:`#BDBDBD`},core:{total:{color:`#BDBDBD`},value:{color:`#BDBDBD`}}}}},legend:{color:`#BDBDBD`},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}}}}},table:{th:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`},td:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`}}},Be={style:{chart:{backgroundColor:`#1A1A1A`,color:`#99AA99`,layout:{grandTotal:{color:`#99CC99`},roots:{stroke:`#1A1A1A`,labels:{name:{color:`#AACCAA`}}},verticalSeparator:{stroke:`#1A1A1A`},branches:{borderRadius:0,labels:{color:`#AACCAA`}},nuts:{selected:{labels:{dataLabels:{color:`#AACCAA`},core:{total:{color:`#99CC99`},value:{color:`#AACCAA`}}}}},legend:{color:`#99AA99`},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}}}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#99AA99`},td:{backgroundColor:`#1A1A1A`,color:`#AACCAA`}}},Ve={style:{chart:{backgroundColor:`#fbfafa`,color:`#8A9892`,layout:{grandTotal:{color:`#A0AC94`},roots:{stroke:`#fbfafa`,labels:{name:{color:`#A0AC94`}}},verticalSeparator:{stroke:`#fbfafa`},branches:{borderRadius:12,labels:{color:`#A0AC94`}},nuts:{selected:{labels:{dataLabels:{color:`#A0AC94`},core:{total:{color:`#8A9892`},value:{color:`#A0AC94`}}}}},legend:{color:`#99AA99`},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}}}}},table:{th:{backgroundColor:`#fbfafa`,color:`#8F837A`},td:{backgroundColor:`#fbfafa`,color:`#8F837A`}}},He={style:{chart:{backgroundColor:`#f6f6fb`,color:`#50606C`,layout:{grandTotal:{color:`#61747E`},roots:{stroke:`#f6f6fb`,labels:{name:{color:`#8A9892`}}},verticalSeparator:{stroke:`#f6f6fb`},branches:{borderRadius:0,labels:{color:`#8A9892`}},nuts:{selected:{labels:{dataLabels:{color:`#8A9892`},core:{total:{color:`#8A9892`},value:{color:`#61747E`}}}}},legend:{color:`#61747E`},title:{color:`#50606C`,subtitle:{color:`#61747E`}}}}}},Ue={default:{},minimal:Fe,minimalDark:Ie,dark:Le,celebration:Re,celebrationNight:ze,hack:Be,zen:Ve,concrete:He},We=Object.freeze(Object.defineProperty({__proto__:null,celebration:Re,celebrationNight:ze,concrete:He,dark:Le,default:Ue,hack:Be,minimal:Fe,minimalDark:Ie,zen:Ve},Symbol.toStringTag,{value:`Module`})),Ge=[`id`],Ke={key:1,ref:`noTitle`,class:`vue-data-ui-no-title-space`,style:`height:36px; width: 100%;background:transparent`},qe=[`xmlns`,`viewBox`],Je=[`width`,`height`],Ye={key:1},Xe=[`fill`,`font-weight`,`font-size`,`x`,`y`],Ze=[`fill`,`font-weight`,`font-size`,`x`,`y`],Qe=[`id`],$e=[`stop-color`],et=[`stop-color`],tt=[`id`],nt=[`stop-color`],rt=[`stop-color`],it=[`id`],at=[`stop-color`],ot=[`stop-color`],st=[`stop-color`],ct=[`id`],lt=[`stop-color`],ut=[`stop-color`],dt=[`stop-color`],ft=[`id`],pt=[`stop-color`],mt=[`stop-color`],ht=[`stop-color`],gt={key:2},_t=[`x`,`y`,`font-size`,`font-weight`,`fill`],vt=[`x`,`y`,`font-size`,`font-weight`,`fill`],yt=[`id`],bt=[`stop-color`],xt=[`stop-color`],St=[`d`,`stroke`,`fill`],Ct=[`cx`,`cy`,`r`,`fill`],wt=[`cx`,`cy`,`r`,`fill`,`stroke`,`stroke-width`,`onClick`],Tt={key:3},Et=[`x`,`y`,`font-size`,`fill`,`onClick`],Dt={key:0},Ot=[`x`,`y`,`fill`,`font-size`,`font-weight`],kt=[`x`,`y`,`height`,`width`,`fill`,`rx`,`onClick`],At=[`x`,`y`,`height`,`width`,`fill`,`rx`,`stroke`,`stroke-width`,`onClick`],jt={key:4},Mt=[`x`,`y`,`fill`,`font-size`,`onClick`],Nt=[`d`,`stroke`],Pt=[`fill`,`cx`,`cy`,`r`,`onClick`],Ft={key:5},It=[`x`,`y`,`font-size`,`font-weight`,`fill`],Lt=[`x1`,`x2`,`y1`,`y2`,`stroke`,`stroke-width`],Rt=[`y`,`height`,`width`],zt={style:{width:`100%`,height:`100%`,display:`flex`,"align-items":`center`,"justify-content":`center`,"flex-direction":`column`}},Bt={style:{display:`flex`,"align-items":`center`,"justify-content":`center`,gap:`12px`,"flex-wrap":`wrap`,"flex-direction":`row`}},Vt={viewBox:`0 0 20 20`,height:`16`,width:`16`},Ht=[`fill`],Ut={key:7},Wt=[`y`,`height`,`width`],Gt={style:{width:`100%`,height:`100%`,display:`flex`,"align-items":`center`,"justify-content":`center`,"flex-direction":`column`}},Kt={style:{display:`flex`,"align-items":`center`,"justify-content":`center`,gap:`12px`,"flex-wrap":`wrap`,"flex-direction":`row`}},qt={viewBox:`0 0 20 20`,height:`16`,width:`16`},Jt=[`fill`],Yt=[`cx`,`cy`,`fill`],Xt=[`d`,`stroke`],Zt=[`cx`,`cy`,`fill`],Qt=[`d`,`stroke`],$t=[`cx`,`cy`,`fill`],en=[`cx`,`cy`,`fill`],tn=[`x`,`y`,`fill`,`font-size`,`font-weight`],nn=[`x`,`y`,`fill`,`font-size`,`font-weight`],rn=[`x`,`text-anchor`,`y`,`fill`,`font-size`],an=[`x`,`text-anchor`,`y`,`fill`,`font-size`],on=[`x`,`text-anchor`,`y`,`fill`,`font-size`],sn=[`x`,`text-anchor`,`y`,`fill`,`font-size`],cn=[`x`,`text-anchor`,`y`,`fill`,`font-size`],ln=[`x`,`y`,`font-size`,`fill`],un=[`x`,`y`,`font-size`,`fill`],dn=[`x`,`y`,`font-size`,`fill`],fn={key:4,class:`vue-data-ui-watermark`},pn={key:5,ref:`source`,dir:`auto`},mn={class:`vue-ui-data-table`},hn={key:0},gn=[`data-cell`],_n={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},vn={key:0},yn={key:1},bn=[`data-cell`],xn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Sn={key:0},Cn={key:1},wn=[`data-cell`],Tn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},En={key:0},Dn={key:1},On=[`data-cell`],kn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},An={key:0},jn={key:1},Mn=[`data-cell`],Nn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Pn={key:0},Fn={key:1},In=[`data-cell`],Ln={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Rn={key:0},zn={key:1},Bn=[`data-cell`],Vn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Hn={key:0},Un={key:1},Wn=[`data-cell`],Gn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Kn=[`data-cell`],qn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Jn=[`data-cell`],Yn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Xn=[`data-cell`],Zn={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},Qn=[`data-cell`],$n={style:{display:`flex`,"align-items":`center`,gap:`5px`,"justify-content":`flex-end`,width:`100%`,"padding-right":`3px`}},er=Ee({__name:`vue-ui-chestnut`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:[`selectRoot`,`selectBranch`,`selectNut`,`copyAlt`],setup(Ee,{expose:Fe,emit:Ie}){oe(e=>({v02951477:e.tdo}));let Le=m(()=>x(()=>import(`./B9jcbJ_P.js`),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),Re=m(()=>x(()=>import(`./ByvxprxI.js`),__vite__mapDeps([5,6,2,1,3,4,7]),import.meta.url)),ze=m(()=>x(()=>import(`./DdyLBgN8.js`),__vite__mapDeps([8,2,1,3,4,9,10]),import.meta.url)),Be=m(()=>x(()=>import(`./DHC76net.js`),__vite__mapDeps([11,2,1,3,4,12,13,10]),import.meta.url)),Ve=m(()=>x(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([14,2]),import.meta.url)),He=m(()=>x(()=>import(`./BIodG7vT.js`),__vite__mapDeps([15,2,1,3,4]),import.meta.url)),{vue_ui_chestnut:We}=we(),{isThemeValid:er,warnInvalidTheme:tr}=Ae(),O=Ee,nr=f(()=>!!O.dataset&&O.dataset.length),k=y(le()),A=y(null),rr=y(0),j=y(null),ir=y(null),M=y(!1),N=y(!1),P=y(fr()),F=f(()=>P.value.userOptions.useCursorPointer),ar=f(()=>ue({defaultConfig:{userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:`#99999930`,layout:{grandTotal:{show:!1},roots:{stroke:`#6A6A6A`,labels:{show:!1}},verticalSeparator:{stroke:`transparent`},branches:{stroke:`#6A6A6A`,underlayerColor:`#6A6A6A90`,labels:{show:!1,dataLabels:{show:!1}}}}}}},userConfig:P.value.skeletonConfig??{}})),{loading:or,FINAL_DATASET:sr}=Oe({...re(O),FINAL_CONFIG:P,prepareConfig:fr,skeletonDataset:O.config?.skeletonDataset??[{name:`_`,color:`#969696`,branches:[{name:`_`,value:32,breakdown:[{name:`_`,value:16,color:`#CACACA`},{name:`_`,value:16,color:`#6A6A6A`}]},{name:`_`,value:16,breakdown:[{name:`_`,value:8,color:`#CACACA`},{name:`_`,value:8,color:`#6A6A6A`}]},{name:`_`,value:8,breakdown:[{name:`_`,value:4,color:`#CACACA`},{name:`_`,value:4,color:`#6A6A6A`}]},{name:`_`,value:4,breakdown:[{name:`_`,value:2,color:`#CACACA`},{name:`_`,value:2,color:`#6A6A6A`}]}]},{name:`_`,color:`#C4C4C4`,branches:[{name:`_`,value:24,breakdown:[{name:`_`,value:12,color:`#CACACA`},{name:`_`,value:12,color:`#6A6A6A`}]},{name:`_`,value:12,breakdown:[{name:`_`,value:6,color:`#CACACA`},{name:`_`,value:6,color:`#6A6A6A`}]},{name:`_`,value:6,breakdown:[{name:`_`,value:3,color:`#CACACA`},{name:`_`,value:3,color:`#6A6A6A`}]},{name:`_`,value:2,breakdown:[{name:`_`,value:1,color:`#CACACA`},{name:`_`,value:1,color:`#6A6A6A`}]}]}],skeletonConfig:ue({defaultConfig:P.value,userConfig:ar.value})}),{userOptionsVisible:cr,setUserOptionsVisibility:lr,keepUserOptionState:ur}=Ne({config:P.value}),{svgRef:dr}=Me({config:P.value.style.chart.layout.title});function fr(){let e=Ce({userConfig:O.config,defaultConfig:We}),t=e.theme;if(!t)return e;if(!er.value(e))return tr(e),e;let n=Ce({userConfig:Ue[t]||O.config,defaultConfig:e}),r=Ce({userConfig:O.config,defaultConfig:n});return{...r,customPalette:r.customPalette.length?r.customPalette:_e[t]||T}}se(()=>O.config,e=>{P.value=fr(),cr.value=!P.value.userOptions.showOnChartHover,I.value.showTable=P.value.table.show,Pr()},{deep:!0});let{isPrinting:pr,isImaging:mr,generatePdf:hr,generateImage:gr}=Te({elementId:`vue-ui-chestnut_${k.value}`,fileName:P.value.style.chart.layout.title.text||`vue-ui-chestnut`,options:P.value.userOptions.print}),_r=f(()=>P.value.userOptions.show),vr=f(()=>Se(P.value.customPalette)),I=y({showTable:P.value.table.show});se(P,()=>{I.value={showTable:P.value.table.show}},{immediate:!0});let yr=y(null),br=f(()=>P.value.table.responsiveBreakpoint),L=y({gap:6,padding:{top:102,left:12,right:12,bottom:96},width:1024,height:0,branchSize:32,branchStart:128}),R=f(()=>({left:L.value.padding.left,top:L.value.padding.top,right:L.value.width-L.value.padding.right,bottom:L.value.height-L.value.padding.bottom,width:L.value.width-(L.value.padding.left+L.value.padding.right),height:L.value.height-(L.value.padding.top+L.value.padding.bottom),seedX:L.value.padding.left+64})),z=f(()=>sr.value.flatMap(e=>(e.branches||[]).map(e=>e.value||0)).reduce((e,t)=>e+t,0)),B=f(()=>(sr.value.forEach((e,t)=>{ye({datasetObject:e,requiredAttributes:[`name`,`branches`]}).forEach(e=>{ve({componentName:`VueUiChestnut`,type:`datasetSerieAttribute`,property:e,index:t,debug:Nr.value})}),e.branches&&e.branches.forEach((e,n)=>{ye({datasetObject:e,requiredAttributes:[`name`,`value`]}).forEach(e=>{ve({componentName:`VueUiChestnut`,type:`datasetSerieAttribute`,property:e,index:`${t} - ${n}`,debug:Nr.value})}),e.breakdown&&e.breakdown.forEach((e,r)=>{ye({datasetObject:e,requiredAttributes:[`name`,`value`]}).forEach(e=>{ve({componentName:`VueUiChestnut`,type:`datasetSerieAttribute`,property:e,index:`${t} - ${n} - ${r}`,debug:Nr.value})})})})}),sr.value.map((e,t)=>{let n=(e.branches||[]).map(e=>e.value||0).reduce((e,t)=>e+t,0);return{...e,color:me(e.color)||vr.value[t]||T[t]||T[t%T.length],id:e.id||`root_${t}_${k.value}`,type:`root`,total:n,rootIndex:t,branches:(e.branches||[]).map((r,i)=>({...r,rootName:e.name,rootIndex:t,color:me(e.color)||vr.value[t]||T[t]||T[t%T.length],value:r.value>=0?r.value:0,id:r.id||`branch_${t}_${i}_${k.value}`,proportionToRoot:r.value/n,type:`branch`,breakdown:(r.breakdown||[]).map((a,o)=>({table:{rootName:e.name,rootValue:n,rootToTotal:n/z.value,branchName:r.name,branchValue:r.value,branchToTotal:r.value/z.value,branchToRoot:r.value/n,nutName:a.name,nutValue:a.value,nutToTotal:a.value/z.value,nutToRoot:a.value/n,nutToBranch:a.value/r.value},...a,type:`nut`,branchName:r.name,rootName:e.name,branchTotal:r.value>=0?r.value:0,proportionToBranch:a.value/r.value,proportionToRoot:a.value/n,proportionToTree:a.value/z.value,rootIndex:t,id:a.id||`nut_${t}_${i}_${o}_${k.value}`,color:me(a.color)||vr.value[o]||T[o]||T[o%T.length],value:a.value>=0?a.value:0}))}))}})));function xr(){return B.value}let V=Ie,Sr=f(()=>B.value.flatMap(e=>e.branches).length),Cr=f(()=>Math.max(...B.value.map(e=>e.branches.map(e=>e.value).reduce((e,t)=>e+t,0)))),wr=f(()=>Math.max(...B.value.flatMap(e=>e.branches.map(e=>e.value)))),Tr=f(()=>256+L.value.padding.left),H=f(()=>B.value.sort((e,t)=>t.total-e.total).map((e,t)=>{let n=R.value.height/B.value.length/2,r=e.total/Cr.value*(n>64?64:n);return{...e,x:R.value.seedX,y:R.value.top+R.value.height/B.value.length*(t+1)-(R.value.height/B.value.length/2+L.value.gap/2),r:r<L.value.branchSize/2?L.value.branchSize/2:r}})),Er=f(()=>P.value.style.chart.layout.branches.widthRatio<=0?.1:P.value.style.chart.layout.branches.widthRatio>1.8?1.8:P.value.style.chart.layout.branches.widthRatio),Dr=f(()=>H.value.flatMap(e=>e.branches)),U=f(()=>Dr.value.sort((e,t)=>t.value-e.value).map((e,t)=>({...e,y1:t*L.value.branchSize+R.value.top+t*L.value.gap,y2:t*L.value.branchSize+L.value.branchSize,x1:Tr.value,x2:384*e.value/wr.value*Er.value+Tr.value})));function Or(e){let t=H.value.find(t=>t.rootIndex===e.rootIndex);return{x:t.x,y:t.y,r:t.r}}let W=y(null),G=y(null),K=y(null),q=y(null);function J(){W.value=null,K.value=null,q.value=null}function Y(e){return q.value?q.value===null?!0:e.type===`root`?e.id===q.value.id:e.rootIndex===q.value.rootIndex:W.value===null&&K.value===null?!0:e.type===`nut`?W.value.id===e.id:e.type===`branch`?K.value.id===e.id:e.type===`root`?K.value&&K.value.rootIndex===e.rootIndex||W.value&&W.value.rootIndex===e.rootIndex:!1}function kr(e){J(),b(()=>{W.value=e,K.value=e,G.value=de({series:e.breakdown},e.x2+24+P.value.style.chart.layout.nuts.offsetX,e.y1+L.value.branchSize/2,80,80),V(`selectNut`,e.breakdown)})}function X(){W.value=null,G.value=null,V(`selectNut`,null)}function Ar(e){K.value&&K.value.id===e.id?(K.value=null,J(),V(`selectBranch`,null)):(J(),K.value=e,V(`selectBranch`,e))}function jr(e){q.value&&q.value.id===e.id?(J(),V(`selectRoot`,null)):(J(),q.value=e,V(`selectRoot`,e))}function Mr(){return R.value.bottom-(W.value.y1+180)<0?0:R.value.bottom}function Z(e){return e.proportion*100>P.value.style.chart.layout.nuts.selected.labels.dataLabels.hideUnderValue}i(()=>{Pr()});let Nr=f(()=>P.value.debug);function Pr(){pe(O.dataset)&&ve({componentName:`VueUiChestnut`,type:`dataset`,debug:Nr.value});let e=Sr.value*(L.value.branchSize+L.value.gap)+L.value.padding.top+L.value.padding.bottom;L.value.height=e}let Q=f(()=>({head:[P.value.table.th.translations.rootName,P.value.table.th.translations.rootValue,P.value.table.th.translations.rootToTotal,P.value.table.th.translations.branchName,P.value.table.th.translations.branchValue,P.value.table.th.translations.branchToRoot,P.value.table.th.translations.branchToTotal,P.value.table.th.translations.nutName,P.value.table.th.translations.nutValue,P.value.table.th.translations.nutToBranch,P.value.table.th.translations.nutToRoot,P.value.table.th.translations.nutToTotal],body:B.value.flatMap((e,t)=>e.branches.flatMap((e,t)=>e.breakdown.flatMap((e,t)=>e.table)))}));function Fr(e=null){b(()=>{let t=[[P.value.style.chart.layout.title.text],[P.value.style.chart.layout.title.subtitle.text],[``],[`Grand total`,z.value],[``]],n=Q.value.head,r=Q.value.body.map((e,t)=>[Q.value.body[t-1]&&Q.value.body[t-1].rootName===e.rootName?``:e.rootName,Q.value.body[t-1]&&Q.value.body[t-1].rootName===e.rootName?``:e.rootValue,Q.value.body[t-1]&&Q.value.body[t-1].rootName===e.rootName?``:e.rootToTotal,Q.value.body[t-1]&&Q.value.body[t-1].branchName===e.branchName?``:e.branchName,Q.value.body[t-1]&&Q.value.body[t-1].branchName===e.branchName?``:e.branchValue,Q.value.body[t-1]&&Q.value.body[t-1].branchName===e.branchName?``:e.branchToRoot,Q.value.body[t-1]&&Q.value.body[t-1].branchName===e.branchName?``:e.branchToTotal,e.nutName,e.nutValue,e.nutToBranch,e.nutToRoot,e.nutToTotal]),i=he(t.concat([n]).concat(r));e?e(i):ce({csvContent:i,title:P.value.style.chart.layout.title.text||`vue-ui-chestnut`})})}let $=y(!1);function Ir(e){$.value=e,rr.value+=1}function Lr(){I.value.showTable=!I.value.showTable}let Rr=y(!1);function zr(){Rr.value=!Rr.value}async function Br({scale:e=2}={}){if(!A.value)return;let{width:t,height:n}=A.value.getBoundingClientRect(),r=t/n,{imageUri:i,base64:a}=await je({domElement:A.value,base64:!0,img:!0,scale:e});return{imageUri:i,base64:a,title:P.value.style.chart.layout.title.text,width:t,height:n,aspectRatio:r}}function Vr(e){let t=Or(e),n=e.x1,r=e.y1,i=L.value.branchSize,a=t.x+t.r/2,o=t.y;return[`M ${n},${r}`,`C ${n-20},${r} ${n-20},${r} ${a},${o}`,`C ${a},${o} ${n-20},${r+i} ${n},${r+i}`,`Z`].join(` `)}let Hr=f(()=>{let e=P.value.table.useDialog&&!P.value.table.show,t=I.value.showTable;return{component:e?He:Re,title:`${P.value.style.chart.layout.title.text}${P.value.style.chart.layout.title.subtitle.text?`: ${P.value.style.chart.layout.title.subtitle.text}`:``}`,props:e?{backgroundColor:P.value.table.th.backgroundColor,color:P.value.table.th.color,headerColor:P.value.table.th.color,headerBg:P.value.table.th.backgroundColor,isFullscreen:$.value,fullscreenParent:A.value,forcedWidth:Math.min(800,window.innerWidth*.8),isCursorPointer:F.value}:{hideDetails:!0,config:{open:t,maxHeight:1e4,body:{backgroundColor:P.value.style.chart.backgroundColor,color:P.value.style.chart.color},head:{backgroundColor:P.value.style.chart.backgroundColor,color:P.value.style.chart.color}}}}});se(()=>I.value.showTable,async e=>{P.value.table.show||(e&&P.value.table.useDialog&&j.value?(await b(),j.value.open()):`close`in j.value&&j.value.close())});let{isResponsive:Ur}=Pe(yr,br);function Wr(){I.value.showTable=!1,ir.value&&ir.value.setTableIconState(!1)}let Gr=f(()=>B.value.map((e,t)=>({...e,display:`${e.name}: ${D(P.value.style.chart.layout.roots.labels.formatter,e.total,C({p:P.value.style.chart.layout.legend.prefix,v:e.total,s:P.value.style.chart.layout.legend.suffix,r:P.value.style.chart.layout.legend.roundingValue}),{datapoint:e})} (${C({v:e.total/z.value*100,s:`%`,r:P.value.style.chart.layout.legend.roundingPercentage})})`}))),Kr=f(()=>Gr.value.map(e=>({color:e.color,name:e.display,shape:`circle`}))),qr=f(()=>P.value.style.chart.backgroundColor),Jr=f(()=>({...P.value.style.chart.layout.legend,textAlign:`center`,show:!0,position:`bottom`})),{exportSvg:Yr,getSvg:Xr}=ke({svg:dr,title:f(()=>P.value.style.chart.layout.title),legend:Jr,legendItems:Kr,backgroundColor:qr,titleEmbedded:!0});async function Zr({isCb:e}){N.value=!0,await b();try{if(e){let{blob:e,url:t,text:n,dataUrl:r}=await Xr();await Promise.resolve(P.value.userOptions.callbacks.svg({blob:e,url:t,text:n,dataUrl:r}))}else await Promise.resolve(Yr())}finally{N.value=!1}}function Qr(e){if(e?.stage===`start`){M.value=!0;return}if(e?.stage===`end`){M.value=!1;return}gr()}async function $r(){if(V(`copyAlt`,{config:P.value,dataset:B.value}),!P.value.userOptions.callbacks.altCopy){console.warn("Vue Data UI - A callback must be set for `altCopy` in userOptions.");return}await Promise.resolve(P.value.userOptions.callbacks.altCopy({config:P.value,dataset:B.value}))}return Fe({getData:xr,getImage:Br,generatePdf:hr,generateCsv:Fr,generateImage:gr,generateSvg:Zr,toggleTable:Lr,toggleAnnotator:zr,toggleFullscreen:Ir,copyAlt:$r}),(i,re)=>(a(),_(`div`,{class:e(`vue-data-ui-component vue-ui-chestnut ${$.value?`vue-data-ui-wrapper-fullscreen`:``}`),ref_key:`chestnutChart`,ref:A,id:`vue-ui-chestnut_${k.value}`,style:s(`font-family:${P.value.style.fontFamily};width:100%; text-align:center;background:${P.value.style.chart.backgroundColor}`),onMouseenter:re[1]||=()=>r(lr)(!0),onMouseleave:re[2]||=()=>r(lr)(!1)},[P.value.userOptions.buttons.annotator?(a(),u(r(ze),{key:0,svgRef:r(dr),backgroundColor:P.value.style.chart.backgroundColor,color:P.value.style.chart.color,active:Rr.value,isCursorPointer:F.value,onClose:zr},{"annotator-action-close":h(()=>[l(i.$slots,`annotator-action-close`,{},void 0,!0)]),"annotator-action-color":h(({color:e})=>[l(i.$slots,`annotator-action-color`,p(o({color:e})),void 0,!0)]),"annotator-action-draw":h(({mode:e})=>[l(i.$slots,`annotator-action-draw`,p(o({mode:e})),void 0,!0)]),"annotator-action-undo":h(({disabled:e})=>[l(i.$slots,`annotator-action-undo`,p(o({disabled:e})),void 0,!0)]),"annotator-action-redo":h(({disabled:e})=>[l(i.$slots,`annotator-action-redo`,p(o({disabled:e})),void 0,!0)]),"annotator-action-delete":h(({disabled:e})=>[l(i.$slots,`annotator-action-delete`,p(o({disabled:e})),void 0,!0)]),_:3},8,[`svgRef`,`backgroundColor`,`color`,`active`,`isCursorPointer`])):t(``,!0),_r.value?(a(),_(`div`,Ke,null,512)):t(``,!0),P.value.userOptions.show&&nr.value&&(r(ur)||r(cr))?(a(),u(r(Be),{ref_key:`userOptionsRef`,ref:ir,key:`user_options_${rr.value}`,backgroundColor:P.value.style.chart.backgroundColor,color:P.value.style.chart.color,isImaging:r(mr),isPrinting:r(pr),uid:k.value,hasPdf:P.value.userOptions.buttons.pdf,hasImg:P.value.userOptions.buttons.img,hasSvg:P.value.userOptions.buttons.svg,hasXls:P.value.userOptions.buttons.csv,hasTable:P.value.userOptions.buttons.table,hasFullscreen:P.value.userOptions.buttons.fullscreen,hasAltCopy:P.value.userOptions.buttons.altCopy,isFullscreen:$.value,titles:{...P.value.userOptions.buttonTitles},chartElement:A.value,position:P.value.userOptions.position,hasAnnotator:P.value.userOptions.buttons.annotator,isAnnotation:Rr.value,callbacks:P.value.userOptions.callbacks,printScale:P.value.userOptions.print.scale,tableDialog:P.value.table.useDialog,isCursorPointer:F.value,onToggleFullscreen:Ir,onGeneratePdf:r(hr),onGenerateCsv:Fr,onGenerateImage:Qr,onGenerateSvg:Zr,onToggleTable:Lr,onToggleAnnotator:zr,onCopyAlt:$r,style:s({visibility:r(ur)?r(cr)?`visible`:`hidden`:`visible`})},ne({_:2},[i.$slots.menuIcon?{name:`menuIcon`,fn:h(({isOpen:e,color:t})=>[l(i.$slots,`menuIcon`,p(o({isOpen:e,color:t})),void 0,!0)]),key:`0`}:void 0,i.$slots.optionPdf?{name:`optionPdf`,fn:h(()=>[l(i.$slots,`optionPdf`,{},void 0,!0)]),key:`1`}:void 0,i.$slots.optionCsv?{name:`optionCsv`,fn:h(()=>[l(i.$slots,`optionCsv`,{},void 0,!0)]),key:`2`}:void 0,i.$slots.optionImg?{name:`optionImg`,fn:h(()=>[l(i.$slots,`optionImg`,{},void 0,!0)]),key:`3`}:void 0,i.$slots.optionSvg?{name:`optionSvg`,fn:h(()=>[l(i.$slots,`optionSvg`,{},void 0,!0)]),key:`4`}:void 0,i.$slots.optionTable?{name:`optionTable`,fn:h(()=>[l(i.$slots,`optionTable`,{},void 0,!0)]),key:`5`}:void 0,i.$slots.optionFullscreen?{name:`optionFullscreen`,fn:h(({toggleFullscreen:e,isFullscreen:t})=>[l(i.$slots,`optionFullscreen`,p(o({toggleFullscreen:e,isFullscreen:t})),void 0,!0)]),key:`6`}:void 0,i.$slots.optionAnnotator?{name:`optionAnnotator`,fn:h(({toggleAnnotator:e,isAnnotator:t})=>[l(i.$slots,`optionAnnotator`,p(o({toggleAnnotator:e,isAnnotator:t})),void 0,!0)]),key:`7`}:void 0,i.$slots.optionAltCopy?{name:`optionAltCopy`,fn:h(({altCopy:e})=>[l(i.$slots,`optionAltCopy`,p(o({altCopy:e})),void 0,!0)]),key:`8`}:void 0]),1032,[`backgroundColor`,`color`,`isImaging`,`isPrinting`,`uid`,`hasPdf`,`hasImg`,`hasSvg`,`hasXls`,`hasTable`,`hasFullscreen`,`hasAltCopy`,`isFullscreen`,`titles`,`chartElement`,`position`,`hasAnnotator`,`isAnnotation`,`callbacks`,`printScale`,`tableDialog`,`isCursorPointer`,`onGeneratePdf`,`style`])):t(``,!0),L.value.height>0?(a(),_(`svg`,{key:3,ref_key:`svgRef`,ref:dr,xmlns:r(ge),class:e({"vue-data-ui-fullscreen--on":$.value,"vue-data-ui-fulscreen--off":!$.value}),viewBox:`0 0 ${L.value.width<=0?10:L.value.width} ${L.value.height<=0?10:L.value.height}`,style:s(`overflow:visible;background:transparent;color:${P.value.style.chart.color}`)},[ee(r(Ve)),i.$slots[`chart-background`]?(a(),_(`foreignObject`,{key:0,x:0,y:0,width:L.value.width<=0?10:L.value.width,height:L.value.height<=0?10:L.value.height,style:{pointerEvents:`none`}},[l(i.$slots,`chart-background`,{},void 0,!0)],8,Je)):t(``,!0),W.value?t(``,!0):(a(),_(`g`,Ye,[P.value.style.chart.layout.title.text?(a(),_(`text`,{key:0,"text-anchor":`middle`,fill:P.value.style.chart.layout.title.color,"font-weight":P.value.style.chart.layout.title.bold?`bold`:`normal`,"font-size":P.value.style.chart.layout.title.fontSize,x:L.value.width/2,y:12+P.value.style.chart.layout.title.fontSize+P.value.style.chart.layout.title.offsetY,onClick:J},c(P.value.style.chart.layout.title.text),9,Xe)):t(``,!0),P.value.style.chart.layout.title.subtitle.text?(a(),_(`text`,{key:1,"text-anchor":`middle`,fill:P.value.style.chart.layout.title.subtitle.color,"font-weight":P.value.style.chart.layout.title.subtitle.bold?`bold`:`normal`,"font-size":P.value.style.chart.layout.title.subtitle.fontSize,x:L.value.width/2,y:48+P.value.style.chart.layout.title.subtitle.fontSize+P.value.style.chart.layout.title.subtitle.offsetY,onClick:J},c(P.value.style.chart.layout.title.subtitle.text),9,Ze)):t(``,!0)])),v(`defs`,null,[(a(!0),_(g,null,d(B.value,(e,t)=>(a(),_(`radialGradient`,{cx:`50%`,cy:`50%`,r:`50%`,fx:`50%`,fy:`50%`,id:`root_gradient_${k.value}_${e.rootIndex}`},[v(`stop`,{offset:`0%`,"stop-color":r(E)(r(be)(e.color,.05),100-P.value.style.chart.layout.roots.gradientIntensity)},null,8,$e),v(`stop`,{offset:`100%`,"stop-color":e.color},null,8,et)],8,Qe))),256)),(a(!0),_(g,null,d(B.value,e=>(a(),_(`linearGradient`,{x1:`0%`,y1:`0%`,x2:`100%`,y2:`0%`,id:`branch_gradient_${k.value}_${e.rootIndex}`},[v(`stop`,{offset:`0%`,"stop-color":e.color},null,8,nt),v(`stop`,{offset:`100%`,"stop-color":r(E)(r(be)(e.color,.02),100-P.value.style.chart.layout.branches.gradientIntensity)},null,8,rt)],8,tt))),256)),v(`radialGradient`,{cx:`50%`,cy:`50%`,r:`50%`,fx:`50%`,fy:`50%`,id:`nutpick_${k.value}`},[v(`stop`,{offset:`0%`,"stop-color":r(E)(`#FFFFFF`,0)},null,8,at),v(`stop`,{offset:`80%`,"stop-color":r(E)(`#FFFFFF`,P.value.style.chart.layout.nuts.selected.gradientIntensity)},null,8,ot),v(`stop`,{offset:`100%`,"stop-color":r(E)(`#FFFFFF`,0)},null,8,st)],8,it),v(`radialGradient`,{cx:`50%`,cy:`50%`,r:`50%`,fx:`50%`,fy:`50%`,id:`nut_${k.value}`},[v(`stop`,{offset:`0%`,"stop-color":r(E)(`#FFFFFF`,0)},null,8,lt),v(`stop`,{offset:`80%`,"stop-color":r(E)(`#FFFFFF`,P.value.style.chart.layout.nuts.gradientIntensity)},null,8,ut),v(`stop`,{offset:`100%`,"stop-color":r(E)(`#FFFFFF`,0)},null,8,dt)],8,ct),v(`radialGradient`,{cx:`50%`,cy:`50%`,r:`50%`,fx:`50%`,fy:`50%`,id:`nut_underlayer_${k.value}`},[v(`stop`,{offset:`0%`,"stop-color":r(E)(P.value.style.chart.backgroundColor,100)},null,8,pt),v(`stop`,{offset:`80%`,"stop-color":r(E)(P.value.style.chart.backgroundColor,60)},null,8,mt),v(`stop`,{offset:`100%`,"stop-color":r(E)(P.value.style.chart.backgroundColor,0)},null,8,ht)],8,ft)]),P.value.style.chart.layout.grandTotal.show?(a(),_(`g`,gt,[v(`text`,{x:R.value.seedX,y:32+P.value.style.chart.layout.grandTotal.offsetY,"font-size":P.value.style.chart.layout.grandTotal.fontSize,"font-weight":P.value.style.chart.layout.grandTotal.bold?`bold`:`normal`,fill:P.value.style.chart.layout.grandTotal.color,"text-anchor":`middle`,onClick:J},c(P.value.style.chart.layout.grandTotal.text),9,_t),v(`text`,{x:R.value.seedX,y:38+P.value.style.chart.layout.grandTotal.fontSize+P.value.style.chart.layout.grandTotal.offsetY,"font-size":P.value.style.chart.layout.grandTotal.fontSize,"font-weight":P.value.style.chart.layout.grandTotal.bold?`bold`:`normal`,fill:P.value.style.chart.layout.grandTotal.color,"text-anchor":`middle`,onClick:J},c(r(D)(P.value.style.chart.layout.grandTotal.formatter,z.value,r(C)({p:P.value.style.chart.layout.grandTotal.prefix,v:z.value,s:P.value.style.chart.layout.grandTotal.suffix,r:P.value.style.chart.layout.grandTotal.roundingValue}))),9,vt)])):t(``,!0),(a(!0),_(g,null,d(U.value,e=>(a(),_(`g`,null,[v(`defs`,null,[v(`linearGradient`,{id:`link_grad_${e.id}`},[v(`stop`,{offset:`0%`,"stop-color":e.color},null,8,bt),v(`stop`,{offset:`100%`,"stop-color":r(E)(e.color,P.value.style.chart.layout.links.opacity)},null,8,xt)],8,yt)]),v(`path`,{d:Vr(e),stroke:r(E)(e.color,P.value.style.chart.layout.links.opacity),fill:`url(#link_grad_${e.id})`,"stroke-linecap":`round`,"stroke-linejoin":`round`,style:s(`opacity:${Y(e)?1:0}`),onClick:J},null,12,St)]))),256)),(a(!0),_(g,null,d(H.value,e=>(a(),_(`circle`,{cx:e.x,cy:e.y,r:e.r,fill:P.value.style.chart.layout.roots.underlayerColor,stroke:`none`,style:s(`cursor:${F.value?`pointer`:`default`}; opacity:${Y(e)?1:.05}`)},null,12,Ct))),256)),(a(!0),_(g,null,d(H.value,(e,t)=>(a(),_(`circle`,{cx:e.x,cy:e.y,r:e.r,fill:P.value.style.chart.layout.roots.useGradient?`url(#root_gradient_${k.value}_${e.rootIndex})`:e.color,stroke:P.value.style.chart.layout.roots.stroke,"stroke-width":P.value.style.chart.layout.roots.strokeWidth,style:s(`cursor:${F.value?`pointer`:`default`}; opacity:${Y(e)?1:.05}`),onClick:t=>jr(e)},null,12,wt))),256)),P.value.style.chart.layout.roots.labels.show?(a(),_(`g`,Tt,[(a(!0),_(g,null,d(H.value,(e,t)=>(a(),_(`text`,{x:e.x,y:e.y+P.value.style.chart.layout.roots.labels.fontSize/2.6,"text-anchor":`middle`,"font-size":P.value.style.chart.layout.roots.labels.fontSize,fill:P.value.style.chart.layout.roots.labels.adaptColorToBackground?r(fe)(e.color):P.value.style.chart.layout.roots.labels.color,"font-weight":`bold`,style:s(`cursor:${F.value?`pointer`:`default`}; opacity:${Y(e)?1:.05}`),onClick:t=>jr(e)},c(r(D)(P.value.style.chart.layout.roots.labels.formatter,e.total,r(C)({p:P.value.style.chart.layout.roots.labels.prefix,v:e.total,s:P.value.style.chart.layout.roots.labels.suffix,r:P.value.style.chart.layout.roots.labels.roundingValue}),{datapoint:e})),13,Et))),256)),(a(!0),_(g,null,d(H.value,e=>(a(),_(`g`,null,[W.value&&e.rootIndex===W.value.rootIndex||K.value&&e.rootIndex===K.value.rootIndex||q.value&&e.rootIndex===q.value.rootIndex?(a(),_(`g`,Dt,[v(`text`,{x:e.x,y:e.y+e.r+24,"text-anchor":`middle`,fill:P.value.style.chart.layout.roots.labels.name.color,"font-size":P.value.style.chart.layout.roots.labels.name.fontSize,"font-weight":P.value.style.chart.layout.roots.labels.name.bold?`bold`:`normal`,onClick:J},c(e.name),9,Ot)])):t(``,!0)]))),256))])):t(``,!0),(a(!0),_(g,null,d(U.value,e=>(a(),_(`rect`,{x:e.x1,y:e.y1,height:L.value.branchSize,width:e.x2-e.x1,fill:P.value.style.chart.layout.branches.underlayerColor,rx:P.value.style.chart.layout.branches.borderRadius,stroke:`none`,style:s(`opacity:${Y(e)?1:.05}`),onClick:t=>Ar(e)},null,12,kt))),256)),(a(!0),_(g,null,d(U.value,(e,t)=>(a(),_(`rect`,{x:e.x1,y:e.y1,height:L.value.branchSize,width:e.x2-e.x1,fill:P.value.style.chart.layout.branches.useGradient?`url(#branch_gradient_${k.value}_${e.rootIndex})`:e.color,rx:P.value.style.chart.layout.branches.borderRadius,stroke:P.value.style.chart.layout.branches.stroke,"stroke-width":P.value.style.chart.layout.branches.strokeWidth,style:s(`cursor:${F.value?`pointer`:`default`}; opacity:${Y(e)?1:.05}`),onClick:t=>Ar(e)},null,12,At))),256)),P.value.style.chart.layout.branches.labels.dataLabels.show?(a(),_(`g`,jt,[(a(!0),_(g,null,d(U.value,e=>(a(),_(`g`,null,[e.proportionToRoot*100>P.value.style.chart.layout.branches.labels.dataLabels.hideUnderValue?(a(),_(`text`,{key:0,x:e.x1+6,y:e.y1+L.value.branchSize/1.5,"text-anchor":`start`,fill:r(fe)(e.color),"font-size":P.value.style.chart.layout.branches.labels.dataLabels.fontSize,"font-weight":`bold`,style:s(`cursor:${F.value?`pointer`:`default`}; opacity:${Y(e)?1:.05}`),onClick:t=>Ar(e)},c(r(D)(P.value.style.chart.layout.branches.labels.dataLabels.formatter,e.value,r(C)({p:P.value.style.chart.layout.branches.labels.dataLabels.prefix,v:e.value,s:P.value.style.chart.layout.branches.labels.dataLabels.suffix,r:P.value.style.chart.layout.branches.labels.dataLabels.roundingValue}),{datapoint:e})),13,Mt)):t(``,!0)]))),256))])):t(``,!0),(a(!0),_(g,null,d(U.value,(e,t)=>(a(),_(`g`,null,[(a(!0),_(g,null,d(r(de)({series:e.breakdown,base:1},e.x2+24+P.value.style.chart.layout.nuts.offsetX,e.y1+L.value.branchSize/2,L.value.branchSize/3,L.value.branchSize/3),(t,n)=>(a(),_(`path`,{d:t.path,stroke:t.color,"stroke-width":10,fill:`none`,style:s(`opacity:${Y(e)?1:.1}`)},null,12,Nt))),256)),v(`circle`,{fill:P.value.style.chart.layout.nuts.useGradient?`url(#nut_${k.value})`:`transparent`,cx:e.x2+24+P.value.style.chart.layout.nuts.offsetX,cy:e.y1+L.value.branchSize/2,r:L.value.branchSize/2+2,onClick:t=>kr(e),style:s(`cursor:${F.value?`pointer`:`default`};opacity:${Y(e)?1:.1}`)},null,12,Pt)]))),256)),P.value.style.chart.layout.branches.labels.show&&!K.value?(a(),_(`g`,Ft,[(a(!0),_(g,null,d(U.value,e=>(a(),_(`text`,{x:e.x2+L.value.branchSize+24+P.value.style.chart.layout.nuts.offsetX,y:e.y1+L.value.branchSize/2+5,"font-size":P.value.style.chart.layout.branches.labels.fontSize,"font-weight":P.value.style.chart.layout.branches.labels.bold?`bold`:`normal`,fill:P.value.style.chart.layout.branches.labels.color,"text-anchor":`start`,style:s(`opacity:${Y(e)?1:.1}`)},c(e.name),13,It))),256))])):t(``,!0),v(`line`,{x1:256+L.value.padding.left,x2:256+L.value.padding.left,y1:R.value.top,y2:R.value.bottom,stroke:P.value.style.chart.layout.verticalSeparator.stroke,"stroke-width":P.value.style.chart.layout.verticalSeparator.strokeWidth},null,8,Lt),!W.value&&!K.value?(a(),_(`foreignObject`,{key:6,x:0,y:R.value.bottom,height:L.value.height-R.value.bottom,width:L.value.width,style:{overflow:`visible`},"data-no-svg-export":``,onClick:J},[v(`div`,zt,[v(`div`,Bt,[(a(!0),_(g,null,d(H.value,e=>(a(),_(`div`,{style:s(`display:flex;align-items:center;gap:3px;flex-direction:row;font-size:${P.value.style.chart.layout.legend.fontSize}px;`)},[(a(),_(`svg`,Vt,[v(`circle`,{cx:`10`,cy:`10`,r:`10`,fill:e.color,stroke:`none`},null,8,Ht)])),r(or)?t(``,!0):(a(),_(g,{key:0},[v(`span`,null,c(e.name)+`:`,1),v(`b`,null,c(r(D)(P.value.style.chart.layout.roots.labels.formatter,e.total,r(C)({p:P.value.style.chart.layout.legend.prefix,v:e.total,s:P.value.style.chart.layout.legend.suffix,r:P.value.style.chart.layout.legend.roundingValue}),{datapoint:e})),1),n(` (`+c(r(C)({v:e.total/z.value*100,s:`%`,r:P.value.style.chart.layout.legend.roundingPercentage}))+`) `,1)],64))],4))),256))])])],8,Rt)):t(``,!0),W.value&&G.value?(a(),_(`g`,Ut,[(a(),_(`foreignObject`,{x:0,y:Mr(),height:L.value.height-R.value.bottom,width:L.value.width,style:{overflow:`visible`},onClick:J},[v(`div`,Gt,[v(`b`,null,c(W.value.name),1),v(`div`,Kt,[(a(!0),_(g,null,d(W.value.breakdown,(e,t)=>(a(),_(`div`,{style:s(`display:flex;align-items:center;gap:6px;flex-direction:row;font-size:${P.value.style.chart.layout.legend.fontSize}px;`)},[(a(),_(`svg`,qt,[v(`circle`,{cx:`10`,cy:`10`,r:`10`,fill:e.color,stroke:`none`},null,8,Jt)])),v(`span`,null,[n(c(e.name)+`: `,1),v(`b`,null,c(P.value.style.chart.layout.legend.prefix)+` `+c(e.value.toFixed(P.value.style.chart.layout.nuts.selected.labels.roundingValue))+` `+c(P.value.style.chart.layout.legend.suffix),1),n(` (`+c((e.proportionToBranch*100).toFixed(P.value.style.chart.layout.nuts.selected.labels.roundingPercentage))+`%)`,1)])],4))),256))])])],8,Wt)),v(`circle`,{cx:W.value.x2+24+P.value.style.chart.layout.nuts.offsetX,cy:W.value.y1+L.value.branchSize/2,r:256,fill:`url(#nut_underlayer_${k.value})`,onClick:X,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},null,10,Yt),(a(!0),_(g,null,d(G.value,n=>(a(),_(`g`,null,[Z(n)?(a(),_(`path`,{key:0,d:r(xe)(n,{x:W.value.x2+24+P.value.style.chart.layout.nuts.offsetX,y:W.value.y1+L.value.branchSize/2},16,16,!1,!1,64),stroke:n.color,"stroke-width":`1`,"stroke-linecap":`round`,"stroke-linejoin":`round`,fill:`none`,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},null,10,Xt)):t(``,!0)]))),256)),v(`circle`,{cx:W.value.x2+24+P.value.style.chart.layout.nuts.offsetX,cy:W.value.y1+L.value.branchSize/2,r:118,fill:P.value.style.chart.backgroundColor,onClick:X,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},null,10,Zt),(a(!0),_(g,null,d(G.value,t=>(a(),_(`path`,{d:t.path,stroke:t.color,"stroke-width":64,fill:`none`,onClick:X,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},null,10,Qt))),256)),v(`circle`,{cx:W.value.x2+24+P.value.style.chart.layout.nuts.offsetX,cy:W.value.y1+L.value.branchSize/2,r:110,fill:`url(#nutpick_${k.value})`,onClick:X,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},null,10,$t),v(`circle`,{cx:W.value.x2+24+P.value.style.chart.layout.nuts.offsetX,cy:W.value.y1+L.value.branchSize/2,r:64,fill:P.value.style.chart.backgroundColor,onClick:X,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},null,10,en),v(`text`,{x:W.value.x2+24+P.value.style.chart.layout.nuts.offsetX,y:W.value.y1+8,fill:P.value.style.chart.layout.nuts.selected.labels.core.total.color,"font-size":P.value.style.chart.layout.nuts.selected.labels.core.total.fontSize,"font-weight":P.value.style.chart.layout.nuts.selected.labels.core.total.bold?`bold`:`normal`,"text-anchor":`middle`,onClick:X,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},c(P.value.translations.total),11,tn),v(`text`,{x:W.value.x2+24+P.value.style.chart.layout.nuts.offsetX,y:W.value.y1+36,fill:P.value.style.chart.layout.nuts.selected.labels.core.value.color,"font-size":P.value.style.chart.layout.nuts.selected.labels.core.value.fontSize,"font-weight":P.value.style.chart.layout.nuts.selected.labels.core.value.bold?`bold`:`normal`,"text-anchor":`middle`,onClick:X,class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},c(r(D)(P.value.style.chart.layout.nuts.selected.labels.dataLabels.formatter,W.value.value,r(C)({p:P.value.style.chart.layout.nuts.selected.labels.core.value.prefix,v:W.value.value,s:P.value.style.chart.layout.nuts.selected.labels.core.value.suffix,r:P.value.style.chart.layout.nuts.selected.roundingValue}),{datapoint:W.value})),11,nn),(a(!0),_(g,null,d(G.value,(n,i)=>(a(),_(`g`,null,[Z(n)?(a(),_(`text`,{key:0,x:r(w)(n).x,"text-anchor":r(w)(n).anchor,y:r(S)(n)-P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize/6,fill:n.color,"font-size":P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize/2,style:s(`font-weight:${P.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?`bold`:``}`),class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},` â¬¤ `,14,rn)):t(``,!0),Z(n)?(a(),_(`text`,{key:1,x:r(w)(n,!0).x,"text-anchor":r(w)(n,!0).anchor,y:r(S)(n),fill:P.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:s(`font-weight:${P.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?`bold`:``}`),class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},c(W.value.breakdown[i].name),15,an)):t(``,!0)]))),256)),(a(!0),_(g,null,d(G.value,(n,i)=>(a(),_(`g`,null,[Z(n)?(a(),_(`text`,{key:0,x:r(w)(n,!0).x,"text-anchor":r(w)(n).anchor,y:r(S)(n)+P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,fill:P.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:s(`font-weight:${P.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?`bold`:``}`),class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},c(r(C)({v:W.value.breakdown[i].value/W.value.value*100,s:`%`,r:P.value.style.chart.layout.nuts.selected.labels.roundingPercentage}))+` `+c(P.value.translations.of)+` `+c(W.value.breakdown[i].branchName)+` `+c(r(D)(P.value.style.chart.layout.nuts.selected.labels.dataLabels.formatter,W.value.breakdown[i].value,r(C)({p:P.value.style.chart.layout.nuts.selected.labels.dataLabels.prefix,v:W.value.breakdown[i].value,s:P.value.style.chart.layout.nuts.selected.labels.dataLabels.suffix,r:P.value.style.chart.layout.nuts.selected.roundingValue}),{datapoint:G.value,seriesIndex:i})),15,on)):t(``,!0),Z(n)?(a(),_(`text`,{key:1,x:r(w)(n,!0).x,"text-anchor":r(w)(n).anchor,y:r(S)(n)+P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize*2,fill:P.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:s(`font-weight:${P.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?`bold`:``}`),class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},c(r(C)({v:W.value.breakdown[i].proportionToRoot*100,s:`%`,r:P.value.style.chart.layout.nuts.selected.labels.roundingPercentage}))+` `+c(P.value.translations.of)+` `+c(W.value.breakdown[i].rootName),15,sn)):t(``,!0),Z(n)?(a(),_(`text`,{key:2,x:r(w)(n,!0).x,"text-anchor":r(w)(n).anchor,y:r(S)(n)+P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize*3,fill:P.value.style.chart.layout.nuts.selected.labels.dataLabels.color,"font-size":P.value.style.chart.layout.nuts.selected.labels.dataLabels.fontSize,style:s(`font-weight:${P.value.style.chart.layout.nuts.selected.labels.dataLabels.bold?`bold`:``}`),class:e(P.value.style.chart.layout.nuts.selected.useMotion?`vue-ui-chestnut-animated`:``)},c(r(C)({v:W.value.breakdown[i].proportionToTree*100,s:`%`,r:P.value.style.chart.layout.nuts.selected.labels.roundingPercentage}))+` `+c(P.value.translations.proportionToTree),15,cn)):t(``,!0)]))),256))])):t(``,!0),(a(!0),_(g,null,d(U.value,e=>(a(),_(`g`,null,[K.value&&K.value.id===e.id&&!W.value?(a(),_(`text`,{key:0,x:e.x1+6,y:e.y1+L.value.branchSize+24,"font-weight":`bold`,"text-anchor":`start`,"font-size":P.value.style.chart.layout.branches.labels.dataLabels.fontSize,fill:P.value.style.chart.layout.branches.labels.color,onClick:J},c(e.name)+`: `+c(r(D)(P.value.style.chart.layout.branches.labels.dataLabels.formatter,e.value,r(C)({p:P.value.style.chart.layout.branches.labels.dataLabels.prefix,v:e.value,s:P.value.style.chart.layout.branches.labels.dataLabels.suffix,r:P.value.style.chart.layout.branches.labels.dataLabels.roundingValue}),{datapoint:e})),9,ln)):t(``,!0),K.value&&K.value.id===e.id&&!W.value?(a(),_(`text`,{key:1,x:e.x1+6,y:e.y1+L.value.branchSize+48,"text-anchor":`start`,"font-size":P.value.style.chart.layout.branches.labels.dataLabels.fontSize,fill:P.value.style.chart.layout.branches.labels.color,onClick:J},c(r(C)({v:e.proportionToRoot*100,s:`%`,r:P.value.style.chart.layout.branches.labels.dataLabels.roundingPercentage}))+` `+c(P.value.translations.of)+` `+c(e.rootName),9,un)):t(``,!0),K.value&&K.value.id===e.id&&!W.value?(a(),_(`text`,{key:2,x:e.x1+6,y:e.y1+L.value.branchSize+72,"text-anchor":`start`,"font-size":P.value.style.chart.layout.branches.labels.dataLabels.fontSize,fill:P.value.style.chart.layout.branches.labels.color,onClick:J},c(r(C)({v:e.value/z.value*100,s:`%`,r:P.value.style.chart.layout.branches.labels.dataLabels.roundingPercentage}))+` `+c(P.value.translations.proportionToTree),9,dn)):t(``,!0)]))),256)),l(i.$slots,`svg`,{svg:{...L.value,isPrintingImg:r(pr)|r(mr)|M.value,isPrintingSvg:N.value}},void 0,!0)],14,qe)):t(``,!0),i.$slots.watermark?(a(),_(`div`,fn,[l(i.$slots,`watermark`,p(o({isPrinting:r(pr)||r(mr)||M.value||N.value})),void 0,!0)])):t(``,!0),l(i.$slots,`legend`,{legend:B.value},void 0,!0),i.$slots.source?(a(),_(`div`,pn,[l(i.$slots,`source`,{},void 0,!0)],512)):t(``,!0),nr.value&&P.value.userOptions.buttons.table?(a(),u(ie(Hr.value.component),te({key:6},Hr.value.props,{ref_key:`tableUnit`,ref:j,onClose:Wr}),ne({content:h(()=>[v(`div`,{ref_key:`tableContainer`,ref:yr,class:`vue-ui-chestnut-table`,style:s(`${P.value.table.useDialog?``:`max-height: 300px;margin-top:24px`}`)},[v(`div`,{style:s(`${P.value.table.useDialog?``:`padding-top:36px;`}position: relative`)},[P.value.table.useDialog?t(``,!0):(a(),_(`div`,{key:0,role:`button`,tabindex:`0`,style:s(`width:32px; position: absolute; top: 0; left:4px; padding: 0 0px; display: flex; align-items:center;justify-content:center;height: 36px; width: 32px; cursor:${F.value?`pointer`:`default`}; background:${P.value.table.th.backgroundColor};`),onClick:Wr,onKeypress:ae(Wr,[`enter`])},[ee(r(Le),{name:`close`,stroke:P.value.table.th.color,"stroke-width":2},null,8,[`stroke`])],36)),v(`div`,{style:{width:`100%`},class:e({"vue-ui-responsive":r(Ur)})},[v(`table`,mn,[P.value.table.useDialog?t(``,!0):(a(),_(`caption`,{key:0,style:s({backgroundColor:P.value.table.th.backgroundColor,color:P.value.table.th.color,outline:P.value.table.th.outline}),class:`vue-ui-data-table__caption`},[n(c(P.value.style.chart.layout.title.text)+` `,1),P.value.style.chart.layout.title.subtitle.text?(a(),_(`span`,hn,c(P.value.style.chart.layout.title.subtitle.text),1)):t(``,!0)],4)),v(`thead`,null,[v(`tr`,{role:`row`,style:s(`background:${P.value.table.th.backgroundColor};color:${P.value.table.th.color}`)},[(a(!0),_(g,null,d(Q.value.head,e=>(a(),_(`th`,{style:s(`outline:${P.value.table.th.outline}`)},c(e),5))),256))],4)]),v(`tbody`,null,[(a(!0),_(g,null,d(Q.value.body,(t,n)=>(a(),_(`tr`,{class:e({"vue-ui-data-table__tbody__row":!0,"vue-ui-data-table__tbody__row-even":n%2==0,"vue-ui-data-table__tbody__row-odd":n%2!=0}),style:s(`background:${P.value.table.td.backgroundColor};color:${P.value.table.td.color}`)},[v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[0]},[v(`div`,_n,[Q.value.body[n-1]&&Q.value.body[n-1].rootName===t.rootName?(a(),_(`span`,vn)):(a(),_(`span`,yn,c(t.rootName),1))])],12,gn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[1]},[v(`div`,xn,[Q.value.body[n-1]&&Q.value.body[n-1].rootName===t.rootName?(a(),_(`span`,Sn)):(a(),_(`span`,Cn,c(t.rootValue.toFixed(P.value.table.td.roundingValue)),1))])],12,bn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[2]},[v(`div`,Tn,[Q.value.body[n-1]&&Q.value.body[n-1].rootName===t.rootName?(a(),_(`span`,En)):(a(),_(`span`,Dn,c((t.rootToTotal*100).toFixed(P.value.table.td.roundingPercentage))+`% `,1))])],12,wn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[3]},[v(`div`,kn,[Q.value.body[n-1]&&Q.value.body[n-1].branchName===t.branchName?(a(),_(`span`,An)):(a(),_(`span`,jn,c(t.branchName),1))])],12,On),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[4]},[v(`div`,Nn,[Q.value.body[n-1]&&Q.value.body[n-1].branchName===t.branchName?(a(),_(`span`,Pn)):(a(),_(`span`,Fn,c(t.branchValue.toFixed(P.value.table.td.roundingValue)),1))])],12,Mn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[5]},[v(`div`,Ln,[Q.value.body[n-1]&&Q.value.body[n-1].branchName===t.branchName?(a(),_(`span`,Rn)):(a(),_(`span`,zn,c((t.branchToRoot*100).toFixed(P.value.table.td.roundingPercentage))+`% `,1))])],12,In),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[6]},[v(`div`,Vn,[Q.value.body[n-1]&&Q.value.body[n-1].branchName===t.branchName?(a(),_(`span`,Hn)):(a(),_(`span`,Un,c((t.branchToTotal*100).toFixed(P.value.table.td.roundingPercentage))+`% `,1))])],12,Bn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[7]},[v(`div`,Gn,c(t.nutName),1)],12,Wn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[8]},[v(`div`,qn,c(t.nutValue.toFixed(P.value.table.td.roundingValue)),1)],12,Kn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[9]},[v(`div`,Yn,c((t.nutToBranch*100).toFixed(P.value.table.td.roundingPercentage))+`% `,1)],12,Jn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[10]},[v(`div`,Zn,c((t.nutToRoot*100).toFixed(P.value.table.td.roundingPercentage))+`% `,1)],12,Xn),v(`td`,{class:`vue-ui-data-table__tbody__td`,style:s(`outline:${P.value.table.td.outline}`),"data-cell":Q.value.head[11]},[v(`div`,$n,c((t.nutToTotal*100).toFixed(P.value.table.td.roundingPercentage))+`% `,1)],12,Qn)],6))),256))])])],2)],4)],4)]),_:2},[P.value.table.useDialog?{name:`title`,fn:h(()=>[n(c(Hr.value.title),1)]),key:`0`}:void 0,P.value.table.useDialog?{name:`actions`,fn:h(()=>[v(`button`,{tabindex:`0`,class:`vue-ui-user-options-button`,onClick:re[0]||=e=>Fr(P.value.userOptions.callbacks.csv)},[ee(r(Le),{name:`fileCsv`,stroke:Hr.value.props.color},null,8,[`stroke`])])]),key:`1`}:void 0]),1040)):t(``,!0),l(i.$slots,`skeleton`,{},()=>[r(or)?(a(),u(De,{key:0})):t(``,!0)],!0)],46,Ge))}},[[`__scopeId`,`data-v-c9973f6a`]]),tr=Object.freeze(Object.defineProperty({__proto__:null,default:er},Symbol.toStringTag,{value:`Module`}));export{We as a,tr as b};