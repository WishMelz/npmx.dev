const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CBD7ngdF.js","./BLt7TXlb.js"])))=>i.map(i=>d[i]);
import{C as e,Dt as t,G as n,J as r,Mt as i,Nt as a,O as ee,Q as o,S as te,Tt as ne,b as s,k as re,ot as c,w as l,x as u,yt as d,z as f}from"./BLt7TXlb.js";import{t as ie}from"./YZkb6lnT.js";import{Et as p,Mt as ae,Nt as oe,P as se,V as m,bt as ce,h as le,jt as ue,r as de,u as h,vt as g,wt as fe}from"./Cf-0F-2c.js";import{n as _,t as pe}from"./8DvoFuCx.js";import{t as v}from"./CWNsAIol.js";import{n as me,t as he}from"./D4ushAer.js";import{t as ge}from"./BwaPX4qL.js";import{a as _e,n as ve}from"./D4v1zV2y.js";import{t as ye}from"./BZeAYpmu.js";var y={style:{arrow:{colors:{positive:`#7FA09B`,negative:`#9D7D92`}}}},b={style:{backgroundColor:`#1A1A1A`,dataLabel:{color:`#CCCCCC`},trendLabel:{color:`#CCCCCC`},arrow:{colors:{positive:`#7FA09B`,negative:`#9D7D92`}}}},x={style:{backgroundColor:`#1A1A1A`,dataLabel:{color:`#CCCCCC`},trendLabel:{color:`#CCCCCC`}}},S={style:{backgroundColor:`#FFF8E1`,line:{smooth:!1},dataLabel:{color:`#424242`},trendLabel:{color:`#424242`}}},C={style:{backgroundColor:`#1E1E1E`,line:{smooth:!1},dataLabel:{color:`#BDBDBD`},trendLabel:{color:`#BDBDBD`}}},w={style:{backgroundColor:`#1A1A1A`,line:{stroke:`#00FF00`,smooth:!1},dataLabel:{color:`#AACCAA`},trendLabel:{color:`#99CC99`},arrow:{colors:{positive:`#66CC66`,negative:`#196619`}}}},T={style:{backgroundColor:`#fbfafa`,line:{stroke:`#B9B99D`},dataLabel:{color:`#8A9892`},trendLabel:{color:`#99CC99`},arrow:{colors:{positive:`#B9B99D`,negative:`#C09E85`,neutral:`#A5AFC1`}}}},E={style:{backgroundColor:`#f6f6fb`,line:{stroke:`#4A6A75`},dataLabel:{color:`#61747E`},trendLabel:{color:`#8A9892`},arrow:{colors:{positive:`#4A6A75`,negative:`#C09E85`,neutral:`#ABB1BC`}}}},D={default:{},minimal:y,minimalDark:b,dark:x,celebration:S,celebrationNight:C,hack:w,zen:T,concrete:E},O=Object.freeze(Object.defineProperty({__proto__:null,celebration:S,celebrationNight:C,concrete:E,dark:x,default:D,hack:w,minimal:y,minimalDark:b,zen:T},Symbol.toStringTag,{value:`Module`})),be=[`id`],xe=[`xmlns`,`viewBox`],Se=[`width`,`height`],Ce=[`id`],we=[`stop-color`],Te=[`stop-color`],Ee={key:1},De=[`d`,`fill`],Oe=[`d`,`fill`],ke=[`d`,`stroke`,`stroke-width`,`stroke-linecap`,`stroke-linejoin`],Ae=[`d`,`stroke`,`stroke-width`,`stroke-linecap`,`stroke-linejoin`],je=[`d`],Me=[`fill`,`d`],Ne=[`x`,`y`,`width`,`height`],Pe=[`x`,`y`,`fill`,`font-size`,`font-weight`],Fe=[`stroke`,`cx`,`cy`,`fill`],Ie=[`x`,`y`,`font-size`,`fill`,`font-weight`],k=v({__name:`vue-ui-spark-trend`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},setup(v){let y=re(()=>ie(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([0,1]),import.meta.url)),{vue_ui_spark_trend:b}=pe(),{isThemeValid:x,warnInvalidTheme:S}=ge(),C=v,w=d(null),T=d(null),E=d(null),O=d(null),k=d(null),A=d(!1),j=d(null),M=d(oe()),N=d(L()),Le=s(()=>se({defaultConfig:{style:{animation:{show:!1},backgroundColor:`#99999930`,line:{stroke:`#6A6A6A`,useColorTrend:!1},dataLabel:{show:!1,useColorTrend:!1,color:`#6A6A6A`}}},userConfig:N.value.skeletonConfig??{}})),{loading:P,FINAL_DATASET:F,manualLoading:I}=he({...ne(C),FINAL_CONFIG:N,prepareConfig:L,skeletonDataset:C.config?.skeletonDataset??[1,2,3,5,8,13,21,34,55,89,144,233],skeletonConfig:se({defaultConfig:N.value,userConfig:Le.value})});function L(){let e=_({userConfig:C.config,defaultConfig:b}),t=e.theme;if(!t)return e;if(!x.value(e))return S(e),e;let n=_({userConfig:D[t]||C.config,defaultConfig:e});return _({userConfig:C.config,defaultConfig:n})}let R=s(()=>p({data:F.value,threshold:N.value.downsample.threshold}));c(()=>C.config,e=>{N.value=L(),H.value=N.value.style.width,U.value=N.value.style.height,ze()},{deep:!0});function z(e){return e.map(e=>h(e))}let B=d(p({data:F.value,threshold:N.value.downsample.threshold}).map(e=>N.value.style.animation.show||[void 0,1/0,-1/0,null,NaN].includes(e)?null:e));c(R,e=>{j.value&&=(cancelAnimationFrame(j.value),null),N.value.style.animation.show?B.value=Array(e.length).fill(null):B.value=e.map(e=>![void 0,1/0,-1/0,null].includes(e)&&!Number.isNaN(e)?e:null),V(),f(()=>$(`.vue-ui-sparktrend-progress-label`,6))},{deep:!0,immediate:!0}),c(()=>JSON.stringify(C.dataset),()=>{j.value&&=(cancelAnimationFrame(j.value),null),I.value=m(C.dataset);let e=R.value;B.value=N.value.style.animation.show?Array(e.length).fill(null):e.map(e=>Number.isFinite(e)?e:null),V(),f(()=>$(`.vue-ui-sparktrend-progress-label`,6))},{deep:!1,immediate:!0});function V(){let e=1e3/N.value.style.animation.animationFrames,t=performance.now();if(!P.value&&N.value.style.animation.show&&N.value.style.animation.animationFrames&&F.value.length>1){let n=function(){A.value=!0;let i=performance.now(),a=i-t;a>e?(t=i-a%e,r<R.value.length?(B.value.push(R.value[r]),r+=1,j.value=requestAnimationFrame(n)):(cancelAnimationFrame(j.value),B.value=z(R.value),A.value=!1,$(`.vue-ui-sparktrend-progress-label`,6))):j.value=requestAnimationFrame(n)};B.value=[];let r=0;n()}}n(()=>{ze()});let Re=s(()=>N.value.debug);function ze(){if(m(C.dataset)&&(le({componentName:`VueUiSparkTrend`,type:`dataset`,debug:Re.value}),I.value=!0),m(C.dataset)||(I.value=!1),N.value.responsive){let e=ve(()=>{let{width:e,height:t}=_e({chart:w.value,source:E.value});requestAnimationFrame(()=>{H.value=e,U.value=t})});O.value&&(k.value&&O.value.unobserve(k.value),O.value.disconnect()),O.value=new ResizeObserver(e),k.value=w.value.parentNode,O.value.observe(k.value)}V(),$(`.vue-ui-sparktrend-progress-label`,6)}let H=d(N.value.style.width),U=d(N.value.style.height),W=s(()=>({height:U.value,width:H.value})),G=s(()=>({top:N.value.style.padding.top,left:N.value.style.padding.left,right:W.value.width-N.value.style.padding.right,bottom:W.value.height-N.value.style.padding.bottom,height:W.value.height-(N.value.style.padding.top+N.value.style.padding.bottom)-(N.value.style.dataLabel.show?N.value.style.dataLabel.fontSize:0),width:W.value.width-(N.value.style.padding.left+N.value.style.padding.right)})),K=s(()=>{let e=z(R.value).filter(Number.isFinite);if(!e.length)return{max:0,min:0};let t=e[0],n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i>t&&(t=i),i<n&&(n=i)}return{max:t,min:n}}),Be=s(()=>{let e=R.value,t=e.length?e[e.length-1]:`x`;return[M.value,e.length,Number.isFinite(t)?t:`x`,N.value.downsample.threshold,N.value.style.line.smooth?`s`:`l`].join(`-`)}),q=s(()=>{let e=K.value.min>=0?0:K.value.min;return Math.abs(e)}),Ve=s(()=>K.value.max+q.value);function He(e){return e/Ve.value}let Ue=s(()=>R.value.length),J=s(()=>B.value.map((e,t)=>{let n=isNaN(e)||[void 0,null,`NaN`,NaN,1/0,-1/0].includes(e)?0:e||0;return{value:h(e),absoluteValue:h(n),plotValue:h(n+q.value),toMax:He(n+q.value),x:G.value.left+h(t*(G.value.width/(Ue.value-1)))-N.value.style.padding.right,y:G.value.bottom-h(G.value.height*He(n+q.value))}})),Y=s(()=>{let e=z(R.value);return N.value.style.trendLabel.trendType===`global`?ue(e):N.value.style.trendLabel.trendType===`n-1`&&e.length>1?(e.at(-1)/e.at(-2)-1)*100:N.value.style.trendLabel.trendType===`lastToFirst`?(e.at(-1)/e[0]-1)*100:0}),X=s(()=>A.value||Y.value===0?`neutral`:Y.value>0?`positive`:`negative`),Z=s(()=>N.value.style.arrow.colors[X.value]),We=s(()=>{let e={x:J.value[0].x,y:W.value.height-6},t={x:J.value[J.value.length-1].x,y:W.value.height-6},n=[];return J.value.forEach(e=>{n.push(`${e.x},${e.y} `)}),[e.x,e.y,...n,t.x,t.y].toString()}),Ge=s(()=>{let e=[];return J.value.forEach(t=>{e.push(`${t.x},${t.y} `)}),`M ${e.toString()}`}),Q=s(()=>U.value/2-N.value.style.trendLabel.fontSize),{fitText:$}=ye({svgRef:T,unitWidth:s(()=>G.value.left*.8),fontSize:N.value.style.trendLabel.fontSize});return(n,ne)=>(r(),l(`div`,{ref_key:`sparkTrendChart`,ref:w,class:`vue-data-ui-component vue-ui-spark-trend`,id:M.value,style:i(`width:100%;font-family:${N.value.style.fontFamily};background:${N.value.style.backgroundColor}`)},[(r(),l(`svg`,{key:Be.value,ref_key:`svgRef`,ref:T,xmlns:t(ce),viewBox:`0 0 ${W.value.width} ${W.value.height}`,style:`width:100%;background:transparent;overflow:visible`},[ee(t(y)),n.$slots[`chart-background`]?(r(),l(`foreignObject`,{key:0,x:0,y:0,width:W.value.width<=0?10:W.value.width,height:W.value.height<=0?10:W.value.height,style:{pointerEvents:`none`}},[o(n.$slots,`chart-background`,{},void 0,!0)],8,Se)):e(``,!0),u(`defs`,null,[u(`linearGradient`,{x1:`0%`,y1:`0%`,x2:`0%`,y2:`100%`,id:`pill_gradient_${M.value}`},[u(`stop`,{offset:`0%`,"stop-color":t(g)(N.value.style.line.useColorTrend?Z.value:N.value.style.line.stroke,N.value.style.area.opacity)},null,8,we),u(`stop`,{offset:`100%`,"stop-color":N.value.style.backgroundColor},null,8,Te)],8,Ce)]),N.value.style.area.show&&J.value[0]?(r(),l(`g`,Ee,[N.value.style.line.smooth?(r(),l(`path`,{key:0,d:`M ${J.value[0].x},${G.value.bottom} ${t(de)(J.value)} L ${J.value.at(-1).x},${G.value.bottom} Z`,fill:N.value.style.area.useGradient?`url(#pill_gradient_${M.value})`:t(g)(N.value.style.line.useColorTrend?Z.value:N.value.style.line.stroke,N.value.style.area.opacity),stroke:`none`},null,8,De)):(r(),l(`path`,{key:1,d:`M${We.value}Z`,fill:N.value.style.area.useGradient?`url(#pill_gradient_${M.value})`:t(g)(N.value.style.line.useColorTrend?Z.value:N.value.style.line.stroke,N.value.style.area.opacity),stroke:`none`},null,8,Oe))])):e(``,!0),N.value.style.line.smooth&&J.value.length?(r(),l(`path`,{key:2,d:`M ${t(de)(J.value)}`,stroke:N.value.style.line.useColorTrend?Z.value:N.value.style.line.stroke,fill:`none`,"stroke-width":N.value.style.line.strokeWidth,"stroke-linecap":N.value.style.line.strokeLinecap,"stroke-linejoin":N.value.style.line.strokeLinejoin},null,8,ke)):e(``,!0),!N.value.style.line.smooth&&J.value.length?(r(),l(`path`,{key:3,d:Ge.value,stroke:N.value.style.line.useColorTrend?Z.value:N.value.style.line.stroke,fill:`none`,"stroke-width":N.value.style.line.strokeWidth,"stroke-linecap":N.value.style.line.strokeLinecap,"stroke-linejoin":N.value.style.line.strokeLinejoin},null,8,Ae)):e(``,!0),t(P)?(r(),l(`path`,{key:4,fill:`#6A6A6A`,d:`M ${G.value.left/2+6}, ${Q.value+7} ${G.value.left/2-7}, ${Q.value} ${G.value.left/2-7}, ${Q.value+14} Z`},null,8,je)):(r(),l(`path`,{key:5,fill:Z.value,d:X.value===`positive`?`M ${G.value.left/2}, ${Q.value} ${G.value.left/2-7}, ${Q.value+12} ${G.value.left/2+7}, ${Q.value+12} Z`:X.value===`negative`?`M ${G.value.left/2}, ${Q.value+12} ${G.value.left/2-7}, ${Q.value} ${G.value.left/2+7}, ${Q.value} Z`:`M ${G.value.left/2+6}, ${Q.value+7} ${G.value.left/2-7}, ${Q.value} ${G.value.left/2-7}, ${Q.value+14} Z`},null,8,Me)),t(P)?(r(),l(`rect`,{key:6,x:G.value.left/2-N.value.style.trendLabel.fontSize-2,y:U.value/2+N.value.style.trendLabel.fontSize-2,width:N.value.style.trendLabel.fontSize*2,height:N.value.style.trendLabel.fontSize,fill:`#6A6A6A80`,rx:`3`},null,8,Ne)):e(``,!0),!A.value&&!t(P)?(r(),l(`text`,{key:7,class:`vue-ui-sparktrend-progress-label`,x:G.value.left/2,y:U.value/2+N.value.style.trendLabel.fontSize*2,"text-anchor":`middle`,fill:N.value.style.trendLabel.useColorTrend?Z.value:N.value.style.trendLabel.color,"font-size":N.value.style.trendLabel.fontSize,"font-weight":N.value.style.trendLabel.bold?`bold`:`normal`},a(t(ae)({p:Y.value>0?`+`:``,v:Y.value,s:`%`,r:N.value.style.trendLabel.rounding})),9,Pe)):e(``,!0),J.value.length&&J.value.at(-1).x!==void 0?(r(),l(`circle`,{key:8,stroke:N.value.style.backgroundColor,"stroke-width":2,cx:J.value.at(-1).x,cy:J.value.at(-1).y,r:4,fill:t(P)?`#6A6A6A`:Z.value},null,8,Fe)):e(``,!0),J.value.length&&J.value.at(-1).x!==void 0&&N.value.style.dataLabel.show?(r(),l(`text`,{key:9,"text-anchor":`middle`,x:J.value.at(-1).x,y:J.value.at(-1).y-N.value.style.dataLabel.fontSize/1.5,"font-size":N.value.style.dataLabel.fontSize,fill:N.value.style.dataLabel.useColorTrend?Z.value:N.value.style.dataLabel.color,"font-weight":N.value.style.dataLabel.bold?`bold`:`normal`},a(t(fe)(N.value.style.dataLabel.formatter,J.value.at(-1).value,t(ae)({p:N.value.style.dataLabel.prefix,v:J.value.at(-1).value,s:N.value.style.dataLabel.suffix,r:N.value.style.dataLabel.rounding}),{datapoint:J.value.at(-1)})),9,Ie)):e(``,!0)],8,xe)),n.$slots.source?(r(),l(`div`,{key:0,ref_key:`source`,ref:E,dir:`auto`},[o(n.$slots,`source`,{},void 0,!0)],512)):e(``,!0),o(n.$slots,`skeleton`,{},()=>[t(P)?(r(),te(me,{key:0})):e(``,!0)],!0)],12,be))}},[[`__scopeId`,`data-v-4ee999e7`]]),A=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:`Module`}));export{O as a,A as b};