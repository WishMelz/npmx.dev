import{Ft as e,It as t,Lt as n,Pt as r}from"./BLt7TXlb.js";var i=Object.prototype.toString,a=e=>i.call(e)===`[object Error]`,o=new Set([`network error`,`Failed to fetch`,`NetworkError when attempting to fetch resource.`,`The Internet connection appears to be offline.`,`Network request failed`,`fetch failed`,`terminated`,` A network error occurred.`,`Network connection lost`]);function s(e){if(!(e&&a(e)&&e.name===`TypeError`&&typeof e.message==`string`))return!1;let{message:t,stack:n}=e;return t===`Load failed`?n===void 0||`__sentry_captured__`in e:t.startsWith(`error sending request for url`)?!0:o.has(t)}function c(e){if(typeof e==`number`){if(e<0)throw TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(e))throw TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(e!==void 0)throw TypeError("Expected `retries` to be a number or Infinity.")}function l(e,t,{min:n=0,allowInfinity:r=!1}={}){if(t!==void 0){if(typeof t!=`number`||Number.isNaN(t))throw TypeError(`Expected \`${e}\` to be a number${r?` or Infinity`:``}.`);if(!r&&!Number.isFinite(t))throw TypeError(`Expected \`${e}\` to be a finite number.`);if(t<n)throw TypeError(`Expected \`${e}\` to be \u2265 ${n}.`)}}var u=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name=`AbortError`,this.message=e}};function d(e,t){let n=Math.max(1,e+1),r=t.randomize?Math.random()+1:1,i=Math.round(r*t.minTimeout*t.factor**(n-1));return i=Math.min(i,t.maxTimeout),i}function f(e,t){return Number.isFinite(t)?t-(performance.now()-e):t}async function p({error:e,attemptNumber:t,retriesConsumed:n,startTime:r,options:i}){let a=e instanceof Error?e:TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(a instanceof u)throw a.originalError;let o=Number.isFinite(i.retries)?Math.max(0,i.retries-n):i.retries,c=i.maxRetryTime??1/0,l=Object.freeze({error:a,attemptNumber:t,retriesLeft:o,retriesConsumed:n});if(await i.onFailedAttempt(l),f(r,c)<=0)throw a;let p=await i.shouldConsumeRetry(l),m=f(r,c);if(m<=0||o<=0)throw a;if(a instanceof TypeError&&!s(a)){if(p)throw a;return i.signal?.throwIfAborted(),!1}if(!await i.shouldRetry(l))throw a;if(!p)return i.signal?.throwIfAborted(),!1;let h=d(n,i),g=Math.min(h,m);return i.signal?.throwIfAborted(),g>0&&await new Promise((e,t)=>{let n=()=>{clearTimeout(r),i.signal?.removeEventListener(`abort`,n),t(i.signal.reason)},r=setTimeout(()=>{i.signal?.removeEventListener(`abort`,n),e()},g);i.unref&&r.unref?.(),i.signal?.addEventListener(`abort`,n,{once:!0})}),i.signal?.throwIfAborted(),!0}async function m(e,t={}){if(t={...t},c(t.retries),Object.hasOwn(t,`forever`))throw Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");t.retries??=10,t.factor??=2,t.minTimeout??=1e3,t.maxTimeout??=1/0,t.maxRetryTime??=1/0,t.randomize??=!1,t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.shouldConsumeRetry??=()=>!0,l(`factor`,t.factor,{min:0,allowInfinity:!1}),l(`minTimeout`,t.minTimeout,{min:0,allowInfinity:!1}),l(`maxTimeout`,t.maxTimeout,{min:0,allowInfinity:!0}),l(`maxRetryTime`,t.maxRetryTime,{min:0,allowInfinity:!0}),t.factor>0||(t.factor=1),t.signal?.throwIfAborted();let n=0,r=0,i=performance.now();for(;!Number.isFinite(t.retries)||r<=t.retries;){n++;try{t.signal?.throwIfAborted();let r=await e(n);return t.signal?.throwIfAborted(),r}catch(e){await p({error:e,attemptNumber:n,retriesConsumed:r,startTime:i,options:t})&&r++}}throw Error(`Retry attempts exhausted without throwing an error.`)}var h={retries:5,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1},g={apiEndpoint:`https://npm.antfu.dev/`};async function _(e,t={}){let{apiEndpoint:n=g.apiEndpoint,fetch:r=fetch,throw:i=!0,retry:a=h}=t,o=[t.force?`force=true`:``,t.loose?`loose=true`:``,t.metadata?`metadata=true`:``,t.after?`after=${encodeURIComponent(t.after)}`:``,i?``:`throw=false`].filter(Boolean).join(`&`);o&&=`?${o}`;let s=()=>r(new URL(`/versions/${e.join(`+`)}${o}`,n)).then(e=>e.json()),c=b(await(a===!1?s():m(s,typeof a==`number`?{...h,retries:a}:a)));return i?y(c):c}async function v(e,t={}){let[n]=await _([e],t);return n}function y(e){for(let t of b(e))if(t&&`error`in t)throw Error(t.message||t.error);return e}function b(e){return Array.isArray(e)?e:[e]}var x=t({default:()=>S}),S,C=e((()=>{S=`_http_agent._http_client._http_common._http_incoming._http_outgoing._http_server._stream_duplex._stream_passthrough._stream_readable._stream_transform._stream_wrap._stream_writable._tls_common._tls_wrap.assert.assert/strict.async_hooks.buffer.child_process.cluster.console.constants.crypto.dgram.diagnostics_channel.dns.dns/promises.domain.events.fs.fs/promises.http.http2.https.inspector.inspector/promises.module.net.os.path.path/posix.path/win32.perf_hooks.process.punycode.querystring.readline.readline/promises.repl.stream.stream/consumers.stream/promises.stream/web.string_decoder.sys.timers.timers/promises.tls.trace_events.tty.url.util.util/types.v8.vm.wasi.worker_threads.zlib.node:sea.node:sqlite.node:test.node:test/reporters`.split(`.`)})),w=r(((e,t)=>{var r=(C(),n(x).default),i=RegExp(`^(?:@([^/]+?)[/])?([^/]+?)$`),a=[`node_modules`,`favicon.ico`];function o(e){var t=[],n=[];if(e===null)return n.push(`name cannot be null`),s(t,n);if(e===void 0)return n.push(`name cannot be undefined`),s(t,n);if(typeof e!=`string`)return n.push(`name must be a string`),s(t,n);if(e.length||n.push(`name length must be greater than zero`),e.startsWith(`.`)&&n.push(`name cannot start with a period`),e.startsWith(`-`)&&n.push(`name cannot start with a hyphen`),e.match(/^_/)&&n.push(`name cannot start with an underscore`),e.trim()!==e&&n.push(`name cannot contain leading or trailing spaces`),a.forEach(function(t){e.toLowerCase()===t&&n.push(t+` is not a valid package name`)}),r.includes(e.toLowerCase())&&t.push(e+` is a core module name`),e.length>214&&t.push(`name can no longer contain more than 214 characters`),e.toLowerCase()!==e&&t.push(`name can no longer contain capital letters`),/[~'!()*]/.test(e.split(`/`).slice(-1)[0])&&t.push(`name can no longer contain special characters ("~'!()*")`),encodeURIComponent(e)!==e){var o=e.match(i);if(o){var c=o[1],l=o[2];if(l.startsWith(`.`)&&n.push(`name cannot start with a period`),encodeURIComponent(c)===c&&encodeURIComponent(l)===l)return s(t,n)}n.push(`name can only contain URL-friendly characters`)}return s(t,n)}var s=function(e,t){var n={validForNewPackages:t.length===0&&e.length===0,validForOldPackages:t.length===0,warnings:e,errors:t};return n.warnings.length||delete n.warnings,n.errors.length||delete n.errors,n};t.exports=o}));w();function T(e){return e.startsWith(`@`)?`@${encodeURIComponent(e.slice(1))}`:encodeURIComponent(e)}export{_ as i,w as n,v as r,T as t};