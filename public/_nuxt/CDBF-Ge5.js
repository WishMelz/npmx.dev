const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CbFHGlY2.js","./BLt7TXlb.js","./Cf-0F-2c.js","./B9jcbJ_P.js","./xh7dz5-d.js","./CWNsAIol.js","./ByvxprxI.js","./CRSLCJ2m.js","./8DvoFuCx.js","./CH8pva4p.js","./C0O4I1kb.js","./DHC76net.js","./BDmUravP.js","./D7-tWLRc.js","./DuIAB7Tu.js","./DdyLBgN8.js","./C66xQW7K.js","./CBD7ngdF.js","./BIodG7vT.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,D as n,Dt as r,G as i,H as a,J as o,M as s,Mt as c,Nt as l,O as u,Q as d,R as f,S as p,St as ee,T as te,Tt as ne,Z as m,_ as re,b as h,d as ie,et as ae,jt as g,k as _,lt as v,m as y,ot as b,ut as oe,w as x,x as S,yt as C,z as se}from"./BLt7TXlb.js";import{t as w}from"./YZkb6lnT.js";import{D as ce,F as le,H as ue,Mt as T,N as de,Nt as fe,Ot as E,P as pe,Q as me,V as he,W as ge,_t as _e,a as ve,bt as ye,dt as be,f as xe,g as Se,h as D,it as Ce,pt as we,u as Te,vt as Ee,wt as De,y as Oe}from"./Cf-0F-2c.js";import{n as ke,t as Ae}from"./8DvoFuCx.js";import{t as je}from"./Cme7ewGR.js";import{t as Me}from"./CWNsAIol.js";import{n as Ne,t as Pe}from"./D4ushAer.js";import{t as Fe}from"./CLl0-3D6.js";import{t as Ie}from"./BwaPX4qL.js";import{t as Le}from"./BDmUravP.js";import{t as Re}from"./BIZzPpPz.js";import{a as ze,n as Be}from"./D4v1zV2y.js";import{t as Ve}from"./CB2Wh4RA.js";import{t as He}from"./BEpjx3T_.js";import{t as Ue}from"./DMqKe8aR.js";import{t as We}from"./CHaYztGl.js";import{t as Ge}from"./CMjlbb0z.js";var Ke={userOptions:{show:!1},style:{chart:{useGradient:!1,legend:{show:!1}}}},qe={userOptions:{show:!1},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,useGradient:!1,layout:{donut:{emptyFill:`#3A3A3A`},labels:{dataLabels:{color:`#CCCCCC`}}},legend:{show:!1,backgroundColor:`#1A1A1A`,color:`#CCCCCC`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#5A5A5A`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},Je={style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,layout:{donut:{emptyFill:`#3A3A3A`},labels:{dataLabels:{color:`#CCCCCC`}}},legend:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#5A5A5A`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},Ye={style:{chart:{backgroundColor:`#FFF8E1`,color:`#424242`,layout:{labels:{dataLabels:{color:`#424242`}}},legend:{backgroundColor:`#FFF8E1`,color:`#424242`,selectAllToggle:{backgroundColor:`#5D4037`,color:`#FFF8E1`}},title:{color:`#424242`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#FFECB3`,backgroundOpacity:30,color:`#424242`,borderColor:`#FF8A65`}}},table:{th:{backgroundColor:`#FFF8E1`,color:`#424242`},td:{backgroundColor:`#FFF8E1`,color:`#424242`}}},Xe={style:{chart:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,layout:{labels:{dataLabels:{color:`#BDBDBD`}}},legend:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#BDBDBD`}},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}},tooltip:{backgroundColor:`#1E1E1E`,backgroundOpacity:30,color:`#FFF8E1`,borderColor:`#FF8A65`}}},table:{th:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`},td:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`}}},Ze={style:{chart:{backgroundColor:`#1A1A1A`,color:`#99AA99`,layout:{labels:{dataLabels:{color:`#AACCAA`}}},legend:{backgroundColor:`#1A1A1A`,color:`#99AA99`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#99AA99`}},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#2A2F2A`,color:`#AACCAA`,borderColor:`#66CC66`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#99AA99`},td:{backgroundColor:`#1A1A1A`,color:`#AACCAA`}}},Qe={style:{chart:{backgroundColor:`#fbfafa`,color:`#8A9892`,layout:{labels:{dataLabels:{color:`#A0AC94`}}},legend:{backgroundColor:`#fbfafa`,color:`#99AA99`,selectAllToggle:{backgroundColor:`#E0CFC3`,color:`#8F837A`}},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#fbfafa`,color:`#8A9892`}}},table:{th:{backgroundColor:`#fbfafa`,color:`#8F837A`},td:{backgroundColor:`#fbfafa`,color:`#8F837A`}}},$e={style:{chart:{backgroundColor:`#f6f6fb`,color:`#50606C`,layout:{labels:{dataLabels:{color:`#61747E`}}},legend:{backgroundColor:`#f6f6fb`,color:`#61747E`,selectAllToggle:{backgroundColor:`#50606C`,color:`#f6f6fb`}},title:{color:`#50606C`,subtitle:{color:`#718890`}},tooltip:{backgroundColor:`#f6f6fb`,color:`#50606C`}}},table:{th:{backgroundColor:`#f6f6fb`,color:`#50606C`},td:{backgroundColor:`#f6f6fb`,color:`#50606C`}}},et={default:{},minimal:Ke,minimalDark:qe,dark:Je,celebration:Ye,celebrationNight:Xe,hack:Ze,zen:Qe,concrete:$e},tt=Object.freeze(Object.defineProperty({__proto__:null,celebration:Ye,celebrationNight:Xe,concrete:$e,dark:Je,default:et,hack:Ze,minimal:Ke,minimalDark:qe,zen:Qe},Symbol.toStringTag,{value:`Module`})),nt=[`id`],rt=[`id`],it=[`xmlns`,`viewBox`],at=[`width`,`height`],ot=[`id`],st=[`offset`,`stop-color`],ct=[`offset`,`stop-opacity`],lt=[`id`],ut=[`id`],dt=[`id`],ft=[`flood-color`],pt=[`id`,`d`],mt=[`d`,`fill`,`stroke`,`stroke-width`,`filter`],ht=[`d`,`fill`,`stroke`,`stroke-width`],gt={key:1},_t=[`d`,`fill`],vt={key:2},yt=[`font-size`,`font-weight`,`fill`,`dy`],bt=[`href`],xt=[`x`,`y`,`font-size`,`font-weight`,`fill`],St={key:3},Ct=[`filter`],wt=[`opacity`,`text-anchor`,`x`,`y`,`fill`,`font-size`,`font-weight`],Tt=[`opacity`,`text-anchor`,`x`,`y`,`fill`,`font-size`,`font-weight`],Et=[`d`,`fill`,`onMouseenter`,`onClick`,`onMouseleave`],Dt={key:4,class:`vue-data-ui-watermark`},Ot=[`id`],kt={key:0,class:`vue-ui-nested-donuts-legend-title`},At=[`onClick`],jt=[`innerHTML`],Mt=Me({__name:`vue-ui-nested-donuts`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:[`selectLegend`,`selectDatapoint`,`copyAlt`],setup(Me,{expose:Ke,emit:qe}){let Je=_(()=>w(()=>import(`./CbFHGlY2.js`),__vite__mapDeps([0,1,2]),import.meta.url)),Ye=_(()=>w(()=>import(`./B9jcbJ_P.js`),__vite__mapDeps([3,4,1,5,2]),import.meta.url)),Xe=_(()=>w(()=>import(`./ByvxprxI.js`),__vite__mapDeps([6,7,1,4,5,2,8]),import.meta.url)),Ze=_(()=>w(()=>import(`./CH8pva4p.js`),__vite__mapDeps([9,1,4,5,2,10]),import.meta.url)),Qe=_(()=>w(()=>import(`./DHC76net.js`),__vite__mapDeps([11,1,4,5,2,12,13,14]),import.meta.url)),$e=_(()=>w(()=>import(`./DdyLBgN8.js`),__vite__mapDeps([15,1,4,5,2,16,14]),import.meta.url)),tt=_(()=>w(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([17,1]),import.meta.url)),Mt=_(()=>w(()=>import(`./BIodG7vT.js`),__vite__mapDeps([18,1,4,5,2]),import.meta.url)),{vue_ui_nested_donuts:Nt}=Ae(),{isThemeValid:Pt,warnInvalidTheme:Ft}=Ie(),O=Me,It=h({get(){return!!O.dataset&&O.dataset.length},set(e){return e}}),k=C(fe()),Lt=C(!1),Rt=C(``),zt=C(null),Bt=C(0),A=C(null),Vt=C(null),Ht=C(null),Ut=C(null),Wt=C(null),Gt=C(0),Kt=C(0),qt=C(0),j=C(!0),M=C([]),N=C([]),Jt=C(!1),P=C(null),Yt=C(null),Xt=C(!1),Zt=C(!1),F=C(!1);function Qt(e){F.value=e,Bt.value+=1}let I=C(sn()),L=h(()=>I.value.userOptions.useCursorPointer),$t={name:``,series:[{name:``,values:[3],color:`#BABABA`},{name:``,values:[2],color:`#AAAAAA`},{name:``,values:[1],color:`#CACACA`}]},en=h(()=>pe({defaultConfig:{useCssAnimation:!1,table:{show:!1},startAnimation:{show:!1},userOptions:{show:!1},style:{chart:{backgroundColor:`#99999930`,layout:{labels:{dataLabels:{show:!1}}},legend:{backgroundColor:`transparent`,showValue:!1,showPercentage:!1},title:{color:`#1A1A1A`,subtitle:{color:`#5A5A5A`}}}}},userConfig:I.value.skeletonConfig??{}})),{loading:tn,FINAL_DATASET:R,manualLoading:nn}=Pe({...ne(O),FINAL_CONFIG:I,prepareConfig:sn,callback:()=>{Promise.resolve().then(async()=>{await un()})},skeletonDataset:O.config?.skeletonDataset??[$t,$t],skeletonConfig:pe({defaultConfig:I.value,userConfig:en.value})}),{userOptionsVisible:rn,setUserOptionsVisibility:an,keepUserOptionState:on}=Ue({config:I.value}),{svgRef:z}=He({config:I.value.style.chart.title});function sn(){let e=ke({userConfig:O.config,defaultConfig:Nt}),t={},n=e.theme;if(n)if(!Pt.value(e))Ft(e),t=e;else{let r=ke({userConfig:et[n]||O.config,defaultConfig:e});t={...ke({userConfig:O.config,defaultConfig:r}),customPalette:e.customPalette.length?e.customPalette:be[n]||Ce}}else t=e;return t}b(()=>O.config,e=>{tn.value||(I.value=sn()),rn.value=!I.value.userOptions.showOnChartHover,dn(),Gt.value+=1,Kt.value+=1,qt.value+=1,U.value.dataLabels.show=I.value.style.chart.layout.labels.dataLabels.show,U.value.showTable=I.value.table.show,U.value.showTooltip=I.value.style.chart.tooltip.show,W.value.width=I.value.style.chart.width,W.value.height=I.value.style.chart.height},{deep:!0});let cn=h(()=>{let{top:e,right:t,bottom:n,left:r}=I.value.style.chart.padding;return{css:`padding:${e}px ${t}px ${n}px ${r}px`,top:e,right:t,bottom:n,left:r}});function ln(e,t=1e3,n=50){return new Promise(r=>{let i=e.length;M.value=Array(i).fill(0),N.value=[];let a=0;e.forEach((e,o)=>{setTimeout(()=>{let n=performance.now();function s(c){let l=Math.min((c-n)/t,1),u=e*xe(l);M.value[o]=u,M.value=[...M.value];let d=[],f=0;O.dataset.forEach((e,t)=>{let n=Te(e.series.reduce((e,t)=>e+Te(E(t.values).reduce((e,t)=>e+t,0)),0))-Te(M.value.slice(f,f+e.series.length).reduce((e,t)=>e+t,0));n>Number.MIN_VALUE&&d.push({name:`__ghost__`,arcOf:e.name,arcOfId:`${k.value}_${t}`,id:`ghost_${k.value}_${t}`,seriesIndex:-1,datasetIndex:t,color:`transparent`,value:n,fullValue:n,absoluteValues:[],ghost:!0}),f+=e.series.length}),N.value=d,l<1?requestAnimationFrame(s):(a+=1,a===i&&r())}requestAnimationFrame(s)},o*n)})})}async function un(){if(I.value.startAnimation?.show){let e=R.value.flatMap(e=>e.series).map(e=>E(e.values).reduce((e,t)=>e+t,0));M.value=e.map(()=>0),j.value=!0,N.value=R.value.map((e,t)=>{let n=e.series.reduce((e,t)=>e+E(t.values).reduce((e,t)=>e+t,0),0);return{name:`__ghost__`,arcOf:e.name,arcOfId:`${k.value}_${t}`,id:`ghost_${k.value}_${t}`,seriesIndex:-1,datasetIndex:t,color:`transparent`,value:n,fullValue:n,absoluteValues:[],ghost:!0}}),await se(),ln(e,I.value.startAnimation.durationMs,I.value.startAnimation.staggerMs).then(()=>{j.value=!1,N.value=[]})}else j.value=!1}i(async()=>{Jt.value=!0,dn(),await un()});let B=ee(null),V=ee(null),H=h(()=>!!I.value.debug);function dn(){if(he(O.dataset)?(D({componentName:`VueUiNestedDonuts`,type:`dataset`,debug:H.value}),It.value=!1,nn.value=!0):nn.value=I.value.loading,I.value.responsive){let e=Be(()=>{let{width:e,height:t}=ze({chart:A.value,title:I.value.style.chart.title.text?Vt.value:null,legend:I.value.style.chart.legend.show?Ht.value:null,source:Ut.value,noTitle:Wt.value,padding:cn.value});requestAnimationFrame(()=>{W.value.width=e,W.value.height=t})});B.value&&(V.value&&B.value.unobserve(V.value),B.value.disconnect()),B.value=new ResizeObserver(e),V.value=A.value.parentNode,B.value.observe(V.value)}}a(()=>{B.value&&(V.value&&B.value.unobserve(V.value),B.value.disconnect())});let{isPrinting:fn,isImaging:pn,generatePdf:mn,generateImage:hn}=je({elementId:`nested_donuts_${k.value}`,fileName:I.value.style.chart.title.text||`vue-ui-nested-donuts`,options:I.value.userOptions.print}),gn=h(()=>I.value.userOptions.show&&!I.value.style.chart.title.text),_n=h(()=>Oe(I.value.customPalette)),U=C({dataLabels:{show:I.value.style.chart.layout.labels.dataLabels.show},showTable:I.value.table.show,showTooltip:I.value.style.chart.tooltip.show});b(I,()=>{U.value={dataLabels:{show:I.value.style.chart.layout.labels.dataLabels.show},showTable:I.value.table.show,showTooltip:I.value.style.chart.tooltip.show}},{immediate:!0});let W=C({width:I.value.style.chart.width,height:I.value.style.chart.height}),vn=qe;function yn({datapoint:e,index:t,seriesIndex:n}){I.value.events.datapointClick&&I.value.events.datapointClick({datapoint:e,seriesIndex:n}),vn(`selectDatapoint`,{datapoint:e,index:t})}function bn({from:e,to:t,duration:n,onUpdate:r,onDone:i,easing:a=xe}){let o=performance.now();function s(c){let l=Math.min((c-o)/n,1),u=a(l);r(e+(t-e)*u,l),l<1?requestAnimationFrame(s):(r(t,1),i&&i())}requestAnimationFrame(s)}let G=C([]),K=h(()=>{tn.value,R.value.forEach((e,t)=>{[null,void 0].includes(e.name)&&D({componentName:`VueUiNestedDonuts`,type:`datasetSerieAttribute`,property:`name`,index:t,debug:H.value}),[null,void 0].includes(e.series)?D({componentName:`VueUiNestedDonuts`,type:`datasetSerieAttribute`,property:`series`,index:t,debug:H.value}):e.series.length===0?D({componentName:`VueUiNestedDonuts`,type:`datasetAttributeEmpty`,property:`series at index ${t}`,debug:H.value}):e.series.forEach((e,t)=>{[null,void 0].includes(e.name)&&D({componentName:`VueUiNestedDonuts`,type:`datasetSerieAttribute`,property:`name`,index:t,key:`serie`,debug:H.value}),[null,void 0].includes(e.values)&&D({componentName:`VueUiNestedDonuts`,type:`datasetSerieAttribute`,property:`values`,index:t,key:`serie`,debug:H.value})})});let e=0;return R.value.map((t,n)=>({...t,total:t.series.filter(e=>!G.value.includes(e.id)).map(e=>E(e.values).reduce((e,t)=>e+t,0)).reduce((e,t)=>e+t,0),datasetIndex:n,id:`${k.value}_${n}`,series:t.series.map((r,i)=>{let a=E(r.values).reduce((e,t)=>e+t,0);return{name:r.name,arcOf:t.name,arcOfId:`${k.value}_${n}`,id:`${k.value}_${n}_${i}`,seriesIndex:i,datasetIndex:n,color:_e(r.color)||_n.value[i]||Ce[i%Ce.length],value:j.value?M.value[e++]??0:a,absoluteValues:r.values||[]}})}))});b(()=>O.dataset,e=>{Array.isArray(e)&&e.length>0&&(nn.value=!1)},{immediate:!0});let q=h(()=>Math.min(W.value.height,W.value.width)*(I.value.style.chart.layout.donut.strokeWidth/512)),xn=h(()=>[...K.value].map((e,t)=>{let n=e.series.filter(e=>!G.value.includes(e.id)).map(e=>e.value).reduce((e,t)=>e+t,0);return{...e,total:n,series:e.series.filter(e=>!G.value.includes(e.id)).map(e=>({...e,proportion:e.value/n}))}}));function Sn(e,t,n){let r=0;for(let t=0;t<e.length;t+=1)n.includes(e[t])&&(r+=1);return r<t}let J=C(xn.value);b(()=>xn.value,e=>J.value=e);function Cn(e){let t=e.map(e=>e.id);if(e.some(e=>G.value.includes(e.id))){let e=new Set(t);G.value=G.value.filter(t=>!e.has(t))}else G.value.push(...t)}function Y(e){vn(`selectLegend`,e);let t=O.dataset.flatMap((e,t)=>e.series.map((e,n)=>({value:E(e.values).reduce((e,t)=>e+t,0),id:`${k.value}_${t}_${n}`,arcOfId:`${k.value}_${t}`}))).find(t=>t.id===e.id);if(!t)return;let n=K.value.flatMap(e=>e.series).find(t=>t.id===e.id)?.value??0,r=J.value.flatMap(e=>e.series).find(t=>t.id===e.id),i=r?r.value:0,a=K.value.find(e=>e.id===t.arcOfId);if(!a)return;let o=a.series.map(e=>e.id),s=Sn(o,o.length-1,G.value);G.value.includes(e.id)?(G.value=G.value.filter(t=>t!==e.id),I.value.serieToggleAnimation.show?bn({from:i,to:n,duration:I.value.serieToggleAnimation.durationMs,onUpdate:t=>{J.value=J.value.map(n=>({...n,series:n.series.map(n=>n.id===e.id?{...n,value:t}:n)}))}}):J.value=J.value.map(t=>({...t,series:t.series.map(t=>t.id===e.id?{...t,value:n}:t)}))):s&&(I.value.serieToggleAnimation.show?bn({from:i,to:0,duration:I.value.serieToggleAnimation.durationMs,onUpdate:t=>{J.value=J.value.map(n=>({...n,series:n.series.map(n=>n.id===e.id?{...n,value:t}:n)}))},onDone:()=>{G.value.push(e.id)}}):(J.value=J.value.map(t=>({...t,series:t.series.map(t=>t.id===e.id?{...t,value:0}:t)})),G.value.push(e.id)))}function wn(e){return K.value.length?K.value.flatMap(e=>e.series).filter(t=>t.name===e)||(I.value.debug&&console.warn(`VueUiNestedDonuts - Series name not found "${e}"`),null):(I.value.debug&&console.warn(`VueUiNestedDonuts - There are no series to show.`),null)}function Tn(e){let t=wn(e);t!==null&&(Array.isArray(t)?t.forEach(e=>{G.value.includes(e.id)&&Y({id:e.id})}):G.value.includes(t.id)&&Y({id:t.id}))}function En(e){let t=wn(e);t!==null&&(Array.isArray(t)?t.forEach(e=>{G.value.includes(e.id)||Y({id:e.id})}):G.value.includes(t.id)||Y({id:t.id}))}let Dn=h(()=>q.value/K.value.length*I.value.style.chart.layout.donut.spacingRatio),On=h(()=>J.value.map((e,t)=>q.value-t*q.value/K.value.length)),X=h(()=>J.value.map((e,t)=>{let n=Math.abs(e.series.map(e=>e.value).reduce((e,t)=>e+t,0))>0,r=q.value-t*q.value/J.value.length,i=j.value?N.value.find(e=>e.datasetIndex===t):null,a=[...e.series,...i?[i]:[]].map(e=>({...e,value:e.value<1e-11?Number.MIN_VALUE:e.value})),o=me({series:[{name:`_`,color:I.value.style.chart.layout.donut.emptyFill,value:1}]},W.value.width/2,W.value.height/2,r,r,1.99999,2,1,360,105.25,Dn.value),s=`M ${W.value.width/2},${W.value.height/2+r}
            a ${r},${r} 0 1,1 0,${-2*r}
            a ${r},${r} 0 1,1 0,${2*r}`;return{...e,hasData:n,radius:r,skeleton:o,fullCirclePath:s,donut:me({series:a},W.value.width/2,W.value.height/2,r,r,1.99999,2,1,360,105.25,Dn.value)}})),kn=h(()=>[...K.value].map((e,t)=>{let n=t*q.value/K.value.length;return{sizeRatio:n,donut:me({series:[{value:1}]},W.value.width/2,W.value.height/2,q.value-n,q.value-n,1.99999,2,1,360,105.25,q.value/K.value.length*I.value.style.chart.layout.donut.spacingRatio)[0]}})),An=C(null),jn=C(null),Mn=C(null),Nn=C(null);function Pn({datapoint:e,seriesIndex:t}){I.value.events.datapointLeave&&I.value.events.datapointLeave({datapoint:e,seriesIndex:t}),Lt.value=!1,An.value=null,zt.value=null,jn.value=null,Mn.value=null}function Fn({val:e,percentage:t,showVal:n,showPercentage:r,config:i}){return We({config:i,val:e,percentage:t,showVal:n,showPercentage:r})}function In({datapoint:e,_relativeIndex:t,seriesIndex:n}){I.value.events.datapointEnter&&I.value.events.datapointEnter({datapoint:e,seriesIndex:n}),An.value=e.arcOfId,jn.value=e.id,Mn.value=n,zt.value=e.id,Nn.value={datapoint:e,seriesIndex:n,series:J.value,config:I.value};let r=I.value.style.chart.tooltip.customFormat;if(le(r)&&we(()=>r({seriesIndex:n,datapoint:e,series:J.value,config:I.value})))Rt.value=r({seriesIndex:n,datapoint:e,series:J.value,config:I.value});else{let t=``;if(I.value.style.chart.tooltip.showAllItemsAtIndex&&G.value.length===0){let r=J.value.map(e=>e.series.find(e=>e.seriesIndex===n));r.forEach((i,a)=>{if(!i)return``;t+=`
                    <div style="display:flex; flex-direction: column; justify-content:flex-start; align-items:flex-start;padding:6px 0; ${a<r.length-1?`border-bottom:1px solid ${I.value.style.chart.tooltip.borderColor}`:``}">
                        <div style="display:flex; flex-direction: row; gap: 3px; justify-content:flex-start; align-items:center;">
                            <svg viewBox="0 0 20 20" height="${I.value.style.chart.tooltip.fontSize}" width="${I.value.style.chart.tooltip.fontSize}">
                                <circle cx="10" cy="10" r="10" fill="${i.color}"/>
                            </svg>
                            <span>
                                ${i.arcOf??``} - ${i.name}
                            </span>
                        </div>
                        <span>
                            <b>
                                ${Fn({config:I.value.style.chart.tooltip,showVal:I.value.style.chart.tooltip.showValue,showPercentage:I.value.style.chart.tooltip.showPercentage,val:De(I.value.style.chart.layout.labels.dataLabels.formatter,e.value,T({p:I.value.style.chart.layout.labels.dataLabels.prefix,v:e.value,s:I.value.style.chart.layout.labels.dataLabels.suffix,r:I.value.style.chart.tooltip.roundingValue}),{datapoint:e,seriesIndex:n}),percentage:T({v:i.proportion*100,s:`%`,r:I.value.style.chart.tooltip.roundingPercentage})})}
                            </b>
                        </span>
                    </div>
                `})}else t+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${I.value.style.chart.tooltip.borderColor};padding-bottom:6px;margin-bottom:3px;">${e.arcOf??``} - ${e.name}</div>`,t+=`<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="${e.color}"/></svg>`,I.value.style.chart.tooltip.showValue&&(t+=`<b>${De(I.value.style.chart.layout.labels.dataLabels.formatter,e.value,T({p:I.value.style.chart.layout.labels.dataLabels.prefix,v:e.value,s:I.value.style.chart.layout.labels.dataLabels.suffix,r:I.value.style.chart.tooltip.roundingValue}),{datapoint:e,seriesIndex:n})}</b>`),I.value.style.chart.tooltip.showPercentage&&(I.value.style.chart.tooltip.showValue?t+=`<span>(${T({v:e.proportion*100,s:`%`,r:I.value.style.chart.tooltip.roundingPercentage})})</span></div>`:t+=`<b>${T({v:e.proportion*100,s:`%`,r:I.value.style.chart.tooltip.roundingPercentage})}</b></div>`);Rt.value=`<div style="font-size:${I.value.style.chart.tooltip.fontSize}px">${t}</div>`}Lt.value=!0}function Ln(e){return e.proportion*100>I.value.style.chart.layout.labels.dataLabels.hideUnderValue}function Rn(e,t){if(!I.value.useBlurOnHover)return``;if(I.value.style.chart.tooltip.showAllItemsAtIndex&&G.value.length===0)return[null,void 0].includes(Mn.value)||Mn.value===t?``:`url(#blur_${k.value})`;if(!I.value.style.chart.tooltip.showAllItemsAtIndex||G.value.length)return[null,void 0].includes(jn.value)||jn.value===e.id?``:`url(#blur_${k.value})`}let zn=h(()=>K.value.map((e,t)=>{let n=e.series.filter(e=>!G.value.includes(e.id)),r=j.value?n.map(e=>{let n=R.value[t].series.findIndex(t=>t.name===e.name);return E(R.value[t].series[n].values).reduce((e,t)=>e+t,0)}).reduce((e,t)=>e+t,0):n.map(e=>e.value).reduce((e,t)=>e+t,0);return e.series.map((e,n)=>{let i=E(R.value[t].series[n].values).reduce((e,t)=>e+t,0),a=j.value?i:e.value,o=Fn({val:De(I.value.style.chart.layout.labels.dataLabels.formatter,a,T({p:I.value.style.chart.layout.labels.dataLabels.prefix,v:a,s:I.value.style.chart.layout.labels.dataLabels.suffix,r:I.value.style.chart.legend.roundingValue}),{datapoint:e,seriesIndex:n}),percentage:isNaN(a/r)||G.value.includes(e.id)?`-`:T({v:a/r*100,s:`%`,r:I.value.style.chart.legend.roundingPercentage}),showVal:I.value.style.chart.legend.showValue,showPercentage:I.value.style.chart.legend.showPercentage,config:I.value.style.chart.legend}),s=`${e.name}${I.value.style.chart.legend.showPercentage||I.value.style.chart.legend.showValue?`: `:``}${o}`;return{name:e.name,color:e.color,value:a,display:s,svgDisplay:`${e.arcOf?`${e.arcOf} - `:``}${s}`,shape:`circle`,arcOf:e.arcOf,id:e.id,seriesIndex:n,datasetIndex:t,total:r,opacity:G.value.includes(e.id)?.5:1,segregate:()=>Y(e),isSegregated:G.value.includes(e.id)}})})),Bn=h(()=>({cy:`nested-donuts-legend`,backgroundColor:I.value.style.chart.legend.backgroundColor,color:I.value.style.chart.legend.color,fontSize:I.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:I.value.style.chart.legend.bold?`bold`:``})),Z=h(()=>({head:J.value.flatMap(e=>e.series.map(t=>({name:`${e.name} - ${t.name}`,color:t.color,total:e.total}))),body:J.value.flatMap(e=>e.series.map(e=>e.value))}));function Vn(e=null){se(()=>{let t=Z.value.head.map((e,t)=>[[e.name],[Z.value.body[t]],[isNaN(Z.value.body[t]/e.total)?`-`:Z.value.body[t]/e.total*100]]),n=ve([[I.value.style.chart.title.text],[I.value.style.chart.title.subtitle.text],[[``],[`val`],[`%`]]].concat(t));e?e(n):de({csvContent:n,title:I.value.style.chart.title.text||`vue-ui-nested-donuts`})})}let Hn=h(()=>{let e=[I.value.table.columnNames.series,I.value.table.columnNames.value,I.value.table.columnNames.percentage],t=Z.value.head.map((e,t)=>{let n=T({p:I.value.style.chart.layout.labels.dataLabels.prefix,v:Z.value.body[t],s:I.value.style.chart.layout.labels.dataLabels.suffix,r:I.value.table.td.roundingValue});return[{color:e.color,name:e.name},n,isNaN(Z.value.body[t]/e.total)?`-`:T({v:Z.value.body[t]/e.total*100,s:`%`,r:I.value.table.td.roundingPercentage})]}),n={th:{backgroundColor:I.value.table.th.backgroundColor,color:I.value.table.th.color,outline:I.value.table.th.outline},td:{backgroundColor:I.value.table.td.backgroundColor,color:I.value.table.td.color,outline:I.value.table.td.outline},breakpoint:I.value.table.responsiveBreakpoint};return{colNames:[I.value.table.columnNames.series,I.value.table.columnNames.value,I.value.table.columnNames.percentage],head:e,body:t,config:n}});function Un(){return K.value}function Wn(){U.value.showTable=!U.value.showTable}function Gn(){U.value.dataLabels.show=!U.value.dataLabels.show}function Kn(){U.value.showTooltip=!U.value.showTooltip}let Q=C(!1);function qn(){Q.value=!Q.value}async function Jn({scale:e=2}={}){if(!A.value)return;let{width:t,height:n}=A.value.getBoundingClientRect(),r=t/n,{imageUri:i,base64:a}=await Le({domElement:A.value,base64:!0,img:!0,scale:e});return{imageUri:i,base64:a,title:I.value.style.chart.title.text,width:t,height:n,aspectRatio:r}}let Yn=C(null);function Xn(){if(!Yn.value)return;let{x:e,y:t,width:n,height:r}=Yn.value.getBBox();z.value&&z.value.setAttribute(`viewBox`,`${e} ${t} ${n+Math.min(0,e)} ${r+Math.min(0,t)}`)}let $=h(()=>{let e=I.value.table.useDialog&&!I.value.table.show,t=U.value.showTable;return{component:e?Mt:Xe,title:`${I.value.style.chart.title.text}${I.value.style.chart.title.subtitle.text?`: ${I.value.style.chart.title.subtitle.text}`:``}`,props:e?{backgroundColor:I.value.table.th.backgroundColor,color:I.value.table.th.color,headerColor:I.value.table.th.color,headerBg:I.value.table.th.backgroundColor,isFullscreen:F.value,fullscreenParent:A.value,forcedWidth:Math.min(800,window.innerWidth*.8),isCursorPointer:L.value}:{hideDetails:!0,config:{open:t,maxHeight:1e4,body:{backgroundColor:I.value.style.chart.backgroundColor,color:I.value.style.chart.color},head:{backgroundColor:I.value.style.chart.backgroundColor,color:I.value.style.chart.color}}}}});b(()=>U.value.showTable,e=>{I.value.table.show||(e&&I.value.table.useDialog&&P.value?P.value.open():`close`in P.value&&P.value.close())});function Zn(){U.value.showTable=!1,Yt.value&&Yt.value.setTableIconState(!1)}let Qn=h(()=>I.value.style.chart.backgroundColor),$n=h(()=>I.value.style.chart.legend),{exportSvg:er,getSvg:tr}=Fe({svg:z,title:h(()=>I.value.style.chart.title),legend:$n,legendItems:h(()=>zn.value.flat().map(e=>({...e,name:e.svgDisplay}))),backgroundColor:Qn});async function nr({isCb:e}){Zt.value=!0,await se();try{if(e){let{blob:e,url:t,text:n,dataUrl:r}=await tr();await Promise.resolve(I.value.userOptions.callbacks.svg({blob:e,url:t,text:n,dataUrl:r}))}else await Promise.resolve(er())}finally{Zt.value=!1}}function rr(e){if(e?.stage===`start`){Xt.value=!0;return}if(e?.stage===`end`){Xt.value=!1;return}hn()}async function ir(){if(vn(`copyAlt`,{config:I.value,dataset:J.value}),!I.value.userOptions.callbacks.altCopy){console.warn("Vue Data UI - A callback must be set for `altCopy` in userOptions.");return}await Promise.resolve(I.value.userOptions.callbacks.altCopy({config:I.value,dataset:J.value}))}return Ke({autoSize:Xn,getData:Un,getImage:Jn,generatePdf:mn,generateCsv:Vn,generateImage:hn,generateSvg:nr,hideSeries:En,showSeries:Tn,toggleTable:Wn,toggleLabels:Gn,toggleTooltip:Kn,toggleAnnotator:qn,toggleFullscreen:Qt,copyAlt:ir}),(i,a)=>(o(),x(`div`,{ref_key:`nestedDonutsChart`,ref:A,class:e(`vue-data-ui-component vue-ui-nested-donuts ${F.value?`vue-data-ui-wrapper-fullscreen`:``} ${I.value.useCssAnimation?``:`vue-ui-dna`}`),style:c(`font-family:${I.value.style.fontFamily};width:100%; text-align:center;background:${I.value.style.chart.backgroundColor}`),id:`nested_donuts_${k.value}`,onMouseenter:a[2]||=()=>r(an)(!0),onMouseleave:a[3]||=()=>r(an)(!1)},[I.value.userOptions.buttons.annotator?(o(),p(r($e),{key:0,svgRef:r(z),backgroundColor:I.value.style.chart.backgroundColor,color:I.value.style.chart.color,active:Q.value,isCursorPointer:L.value,onClose:qn},{"annotator-action-close":v(()=>[d(i.$slots,`annotator-action-close`,{},void 0,!0)]),"annotator-action-color":v(({color:e})=>[d(i.$slots,`annotator-action-color`,g(s({color:e})),void 0,!0)]),"annotator-action-draw":v(({mode:e})=>[d(i.$slots,`annotator-action-draw`,g(s({mode:e})),void 0,!0)]),"annotator-action-undo":v(({disabled:e})=>[d(i.$slots,`annotator-action-undo`,g(s({disabled:e})),void 0,!0)]),"annotator-action-redo":v(({disabled:e})=>[d(i.$slots,`annotator-action-redo`,g(s({disabled:e})),void 0,!0)]),"annotator-action-delete":v(({disabled:e})=>[d(i.$slots,`annotator-action-delete`,g(s({disabled:e})),void 0,!0)]),_:3},8,[`svgRef`,`backgroundColor`,`color`,`active`,`isCursorPointer`])):t(``,!0),gn.value?(o(),x(`div`,{key:1,ref_key:`noTitle`,ref:Wt,class:`vue-data-ui-no-title-space`,style:`height:36px; width: 100%;background:transparent`},null,512)):t(``,!0),I.value.style.chart.title.text?(o(),x(`div`,{key:2,ref_key:`chartTitle`,ref:Vt},[(o(),p(Re,{key:`title_${Gt.value}`,config:{title:{cy:`donut-div-title`,...I.value.style.chart.title},subtitle:{cy:`donut-div-subtitle`,...I.value.style.chart.title.subtitle}}},null,8,[`config`]))],512)):t(``,!0),S(`div`,{id:`legend-top-${k.value}`},null,8,rt),I.value.userOptions.show&&It.value&&(r(on)||r(rn))?(o(),p(r(Qe),{ref_key:`userOptionsRef`,ref:Yt,key:`user_option_${Bt.value}`,backgroundColor:I.value.style.chart.backgroundColor,color:I.value.style.chart.color,isPrinting:r(fn),isImaging:r(pn),uid:k.value,hasTooltip:I.value.userOptions.buttons.tooltip&&I.value.style.chart.tooltip.show,hasPdf:I.value.userOptions.buttons.pdf,hasXls:I.value.userOptions.buttons.csv,hasImg:I.value.userOptions.buttons.img,hasSvg:I.value.userOptions.buttons.svg,hasTable:I.value.userOptions.buttons.table,hasLabel:I.value.userOptions.buttons.labels,hasFullscreen:I.value.userOptions.buttons.fullscreen,hasAltCopy:I.value.userOptions.buttons.altCopy,isFullscreen:F.value,isTooltip:U.value.showTooltip,titles:{...I.value.userOptions.buttonTitles},chartElement:A.value,position:I.value.userOptions.position,hasAnnotator:I.value.userOptions.buttons.annotator,isAnnotation:Q.value,callbacks:I.value.userOptions.callbacks,printScale:I.value.userOptions.print.scale,tableDialog:I.value.table.useDialog,isCursorPointer:L.value,onToggleFullscreen:Qt,onGeneratePdf:r(mn),onGenerateCsv:Vn,onGenerateImage:rr,onGenerateSvg:nr,onToggleTable:Wn,onToggleLabels:Gn,onToggleTooltip:Kn,onToggleAnnotator:qn,onCopyAlt:ir,style:c({visibility:r(on)?r(rn)?`visible`:`hidden`:`visible`})},te({_:2},[i.$slots.menuIcon?{name:`menuIcon`,fn:v(({isOpen:e,color:t})=>[d(i.$slots,`menuIcon`,g(s({isOpen:e,color:t})),void 0,!0)]),key:`0`}:void 0,i.$slots.optionTooltip?{name:`optionTooltip`,fn:v(()=>[d(i.$slots,`optionTooltip`,{},void 0,!0)]),key:`1`}:void 0,i.$slots.optionPdf?{name:`optionPdf`,fn:v(()=>[d(i.$slots,`optionPdf`,{},void 0,!0)]),key:`2`}:void 0,i.$slots.optionCsv?{name:`optionCsv`,fn:v(()=>[d(i.$slots,`optionCsv`,{},void 0,!0)]),key:`3`}:void 0,i.$slots.optionImg?{name:`optionImg`,fn:v(()=>[d(i.$slots,`optionImg`,{},void 0,!0)]),key:`4`}:void 0,i.$slots.optionSvg?{name:`optionSvg`,fn:v(()=>[d(i.$slots,`optionSvg`,{},void 0,!0)]),key:`5`}:void 0,i.$slots.optionTable?{name:`optionTable`,fn:v(()=>[d(i.$slots,`optionTable`,{},void 0,!0)]),key:`6`}:void 0,i.$slots.optionLabels?{name:`optionLabels`,fn:v(()=>[d(i.$slots,`optionLabels`,{},void 0,!0)]),key:`7`}:void 0,i.$slots.optionFullscreen?{name:`optionFullscreen`,fn:v(({toggleFullscreen:e,isFullscreen:t})=>[d(i.$slots,`optionFullscreen`,g(s({toggleFullscreen:e,isFullscreen:t})),void 0,!0)]),key:`8`}:void 0,i.$slots.optionAnnotator?{name:`optionAnnotator`,fn:v(({toggleAnnotator:e,isAnnotator:t})=>[d(i.$slots,`optionAnnotator`,g(s({toggleAnnotator:e,isAnnotator:t})),void 0,!0)]),key:`9`}:void 0,i.$slots.optionAltCopy?{name:`optionAltCopy`,fn:v(({altCopy:e})=>[d(i.$slots,`optionAltCopy`,g(s({altCopy:e})),void 0,!0)]),key:`10`}:void 0]),1032,`backgroundColor.color.isPrinting.isImaging.uid.hasTooltip.hasPdf.hasXls.hasImg.hasSvg.hasTable.hasLabel.hasFullscreen.hasAltCopy.isFullscreen.isTooltip.titles.chartElement.position.hasAnnotator.isAnnotation.callbacks.printScale.tableDialog.isCursorPointer.onGeneratePdf.style`.split(`.`))):t(``,!0),(o(),x(`svg`,{ref_key:`svgRef`,ref:z,xmlns:r(ye),class:e({"vue-data-ui-fullscreen--on":F.value,"vue-data-ui-fulscreen--off":!F.value,"vue-data-ui-svg":!0}),viewBox:`0 0 ${W.value.width<=0?.001:W.value.width} ${W.value.height<0?.001:W.value.height}`,style:c(`max-width:100%; overflow: visible; background:transparent;color:${I.value.style.chart.color};${cn.value.css}`)},[S(`g`,{ref_key:`G`,ref:Yn,class:`vue-data-ui-g`},[u(r(tt)),i.$slots[`chart-background`]?(o(),x(`foreignObject`,{key:0,x:0,y:0,width:W.value.width<=0?.001:W.value.width,height:W.value.height<0?.001:W.value.height,style:{pointerEvents:`none`}},[d(i.$slots,`chart-background`,{},void 0,!0)],8,at)):t(``,!0),S(`defs`,null,[(o(!0),x(y,null,m(kn.value,(e,t)=>(o(),x(`radialGradient`,{id:`radial_${k.value}_${t}`},[a[4]||=S(`stop`,{offset:`0%`,"stop-color":`#FFFFFF`,"stop-opacity":`0`},null,-1),S(`stop`,{offset:`${(1-Dn.value/On.value[t])*100}%`,"stop-color":r(Ee)(`#FFFFFF`,0),"stop-opacity":`0`},null,8,st),S(`stop`,{offset:`${(1-Dn.value/On.value[t]/2)*100}%`,"stop-color":`#FFFFFF`,"stop-opacity":I.value.style.chart.gradientIntensity/100},null,8,ct),a[5]||=S(`stop`,{offset:`100%`,"stop-color":`#FFFFFF`,"stop-opacity":`0`},null,-1)],8,ot))),256))]),S(`defs`,null,[S(`filter`,{id:`blur_${k.value}`,x:`-50%`,y:`-50%`,width:`200%`,height:`200%`},[S(`feGaussianBlur`,{in:`SourceGraphic`,stdDeviation:2,id:`blur_std_${k.value}`},null,8,ut),a[6]||=S(`feColorMatrix`,{type:`saturate`,values:`0`},null,-1)],8,lt),S(`filter`,{id:`shadow_${k.value}`,"color-interpolation-filters":`sRGB`},[S(`feDropShadow`,{dx:`0`,dy:`0`,stdDeviation:`10`,"flood-opacity":`0.5`,"flood-color":I.value.style.chart.layout.donut.shadowColor},null,8,ft)],8,dt)]),S(`defs`,null,[(o(!0),x(y,null,m(X.value,(e,t)=>(o(),x(`path`,{key:`path-full-${t}`,id:`path-full-${t}-${k.value}`,d:e.fullCirclePath,fill:`none`},null,8,pt))),128))]),(o(!0),x(y,null,m(X.value,(e,t)=>(o(),x(`g`,null,[e.hasData?(o(!0),x(y,{key:0},m(e.donut.filter(e=>!e.ghost),(e,t)=>(o(),x(`g`,null,[S(`path`,{class:`vue-ui-donut-arc-path`,d:e.arcSlice,fill:e.color,stroke:I.value.style.chart.layout.donut.borderColorAuto?I.value.style.chart.backgroundColor:I.value.style.chart.layout.donut.borderColor,"stroke-width":I.value.style.chart.layout.donut.borderWidth,filter:Rn(e,t)},null,8,mt)]))),256)):(o(!0),x(y,{key:1},m(e.skeleton,(e,t)=>(o(),x(`g`,null,[S(`path`,{class:`vue-ui-donut-arc-path`,d:e.arcSlice,fill:e.color,stroke:I.value.style.chart.layout.donut.borderColorAuto?I.value.style.chart.backgroundColor:I.value.style.chart.layout.donut.borderColor,"stroke-width":I.value.style.chart.layout.donut.borderWidth},null,8,ht)]))),256))]))),256)),I.value.style.chart.useGradient?(o(),x(`g`,gt,[(o(!0),x(y,null,m(kn.value,(e,t)=>(o(),x(`g`,null,[S(`path`,{d:e.donut.arcSlice,fill:`url(#radial_${k.value}_${t})`,stroke:`transparent`,"stroke-width":`0`},null,8,_t)]))),256))])):t(``,!0),I.value.style.chart.layout.labels.dataLabels.showDonutName?(o(),x(`g`,vt,[I.value.style.chart.layout.labels.dataLabels.curvedDonutName?(o(!0),x(y,{key:0},m(X.value,(n,i)=>(o(),x(`g`,null,[(o(!0),x(y,null,m(n.donut,(a,s)=>(o(),x(`g`,null,[s===0&&W.value.width&&W.value.height?(o(),x(`text`,{key:0,class:e({animated:I.value.useCssAnimation}),"text-anchor":`middle`,"font-size":I.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":I.value.style.chart.layout.labels.dataLabels.boldDonutName?`bold`:`normal`,fill:I.value.style.chart.layout.labels.dataLabels.color,dy:I.value.style.chart.layout.labels.dataLabels.donutNameOffsetY},[S(`textPath`,{href:`#path-full-${i}-${k.value}`,startOffset:`50%`,"text-anchor":`middle`,method:`align`,spacing:`auto`},l(I.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?r(ce)({source:n.name,length:I.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):n.name),9,bt)],10,yt)):t(``,!0)]))),256))]))),256)):(o(!0),x(y,{key:1},m(X.value,(n,i)=>(o(),x(`g`,null,[(o(!0),x(y,null,m(n.donut,(i,a)=>(o(),x(`g`,null,[a===0&&W.value.width&&W.value.height?(o(),x(`text`,{key:0,class:e({animated:I.value.useCssAnimation}),x:W.value.width/2,y:i.startY-I.value.style.chart.layout.labels.dataLabels.fontSize+I.value.style.chart.layout.labels.dataLabels.donutNameOffsetY,"text-anchor":`middle`,"font-size":I.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":I.value.style.chart.layout.labels.dataLabels.boldDonutName?`bold`:`normal`,fill:I.value.style.chart.layout.labels.dataLabels.color},l(I.value.style.chart.layout.labels.dataLabels.donutNameAbbreviation?r(ce)({source:n.name,length:I.value.style.chart.layout.labels.dataLabels.donutNameMaxAbbreviationSize}):n.name),11,xt)):t(``,!0)]))),256))]))),256))])):t(``,!0),I.value.style.chart.layout.labels.dataLabels.show?(o(),x(`g`,St,[(o(!0),x(y,null,m(X.value,(t,n)=>(o(),x(`g`,null,[(o(!0),x(y,null,m(t.donut.filter(e=>!e.ghost),(t,i)=>(o(),x(`g`,{filter:Rn(t,i)},[oe(S(`text`,{class:e({animated:I.value.useCssAnimation}),opacity:Ln(t)?1:0,"text-anchor":r(ge)(t,!0).anchor,x:r(ge)(t,!1,I.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:r(ue)(t,I.value.style.chart.layout.labels.dataLabels.offsetY,I.value.style.chart.layout.labels.dataLabels.offsetY)+(I.value.style.chart.layout.labels.dataLabels.showValueFirst&&I.value.style.chart.layout.labels.dataLabels.showValue?I.value.style.chart.layout.labels.dataLabels.fontSize:0),fill:I.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:I.value.style.chart.layout.labels.dataLabels.color,"font-size":I.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":I.value.style.chart.layout.labels.dataLabels.boldPercentage?`bold`:`normal`},l(r(Se)(r(T)({v:t.proportion*100,s:`%`,r:I.value.style.chart.layout.labels.dataLabels.roundingPercentage}),I.value.style.chart.layout.labels.dataLabels.usePercentageParens?`(`:``,I.value.style.chart.layout.labels.dataLabels.usePercentageParens?`)`:``)),11,wt),[[ie,U.value.dataLabels.show&&I.value.style.chart.layout.labels.dataLabels.showPercentage]]),oe(S(`text`,{class:e({animated:I.value.useCssAnimation}),opacity:Ln(t)?1:0,"text-anchor":r(ge)(t,!0).anchor,x:r(ge)(t,!1,I.value.style.chart.layout.labels.dataLabels.offsetX).x||0,y:r(ue)(t,I.value.style.chart.layout.labels.dataLabels.offsetY,I.value.style.chart.layout.labels.dataLabels.offsetY)+(I.value.style.chart.layout.labels.dataLabels.showValueFirst||!I.value.style.chart.layout.labels.dataLabels.showPercentage?0:I.value.style.chart.layout.labels.dataLabels.fontSize),fill:I.value.style.chart.layout.labels.dataLabels.useSerieColor?t.color:I.value.style.chart.layout.labels.dataLabels.color,"font-size":I.value.style.chart.layout.labels.dataLabels.fontSize,"font-weight":I.value.style.chart.layout.labels.dataLabels.boldValue?`bold`:`normal`},l(r(Se)(r(De)(I.value.style.chart.layout.labels.dataLabels.formatter,t.value,r(T)({p:I.value.style.chart.layout.labels.dataLabels.prefix,v:t.value,s:I.value.style.chart.layout.labels.dataLabels.suffix,r:I.value.style.chart.layout.labels.dataLabels.roundingValue}),{datapoint:t,seriesIndex:n,datapointIndex:i}),I.value.style.chart.layout.labels.dataLabels.useValueParens?`(`:``,I.value.style.chart.layout.labels.dataLabels.useValueParens?`)`:``)),11,Tt),[[ie,U.value.dataLabels.show&&I.value.style.chart.layout.labels.dataLabels.showValue]])],8,Ct))),256))]))),256))])):t(``,!0),(o(!0),x(y,null,m(X.value,(e,t)=>(o(),x(`g`,null,[(o(!0),x(y,null,m(e.donut,(e,t)=>(o(),x(`g`,null,[S(`path`,{d:e.arcSlice,fill:zt.value===e.id?I.value.style.chart.layout.donut.selectedColor:`transparent`,onMouseenter:t=>In({datapoint:e,seriesIndex:e.seriesIndex}),onClick:n=>yn({datapoint:e,index:t,seriesIndex:e.seriesIndex}),onMouseleave:t=>Pn({datapoint:e,seriesIndex:e.seriesIndex})},null,40,Et)]))),256))]))),256)),d(i.$slots,`svg`,{svg:{...W.value,isPrintingImg:r(fn)|r(pn)|Xt.value,isPrintingSvg:Zt.value}},void 0,!0)],512)],14,it)),i.$slots.watermark?(o(),x(`div`,Dt,[d(i.$slots,`watermark`,g(s({isPrinting:r(fn)||r(pn)||Xt.value||Zt.value})),void 0,!0)])):t(``,!0),u(r(Je),{teleportTo:I.value.style.chart.tooltip.teleportTo,show:U.value.showTooltip&&Lt.value,backgroundColor:I.value.style.chart.tooltip.backgroundColor,color:I.value.style.chart.tooltip.color,borderRadius:I.value.style.chart.tooltip.borderRadius,borderColor:I.value.style.chart.tooltip.borderColor,borderWidth:I.value.style.chart.tooltip.borderWidth,fontSize:I.value.style.chart.tooltip.fontSize,backgroundOpacity:I.value.style.chart.tooltip.backgroundOpacity,position:I.value.style.chart.tooltip.position,offsetY:I.value.style.chart.tooltip.offsetY,parent:A.value,content:Rt.value,isFullscreen:F.value,isCustom:r(le)(I.value.style.chart.tooltip.customFormat),smooth:I.value.style.chart.tooltip.smooth,backdropFilter:I.value.style.chart.tooltip.backdropFilter,smoothForce:I.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:I.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":v(()=>[d(i.$slots,`tooltip-before`,g(s({...Nn.value})),void 0,!0)]),"tooltip-after":v(()=>[d(i.$slots,`tooltip-after`,g(s({...Nn.value})),void 0,!0)]),_:3},8,[`teleportTo`,`show`,`backgroundColor`,`color`,`borderRadius`,`borderColor`,`borderWidth`,`fontSize`,`backgroundOpacity`,`position`,`offsetY`,`parent`,`content`,`isFullscreen`,`isCustom`,`smooth`,`backdropFilter`,`smoothForce`,`smoothSnapThreshold`]),S(`div`,{id:`legend-bottom-${k.value}`},null,8,Ot),Jt.value?(o(),p(re,{key:5,to:I.value.style.chart.legend.position===`top`?`#legend-top-${k.value}`:`#legend-bottom-${k.value}`},[I.value.style.chart.legend.show?(o(),x(`div`,{key:0,ref_key:`chartLegend`,ref:Ht,class:e({"vue-ui-nested-donuts-legend":zn.value.length>1})},[(o(!0),x(y,null,m(zn.value,(e,n)=>(o(),p(Ge,{key:`legend_${n}_${qt.value}`,legendSet:e,config:Bn.value,isCursorPointer:L.value,onClickMarker:a[0]||=({legend:e})=>Y(e)},{legendTitle:v(({titleSet:e})=>[e[0]&&e[0].arcOf?(o(),x(`div`,kt,l(e[0].arcOf),1)):t(``,!0)]),item:v(({legend:e,index:t})=>[S(`div`,{onClick:t=>Y(e),style:c(`opacity:${G.value.includes(e.id)?.5:1}`)},l(e.display),13,At)]),legendToggle:v(()=>[e.length>2&&I.value.style.chart.legend.selectAllToggle.show&&!r(tn)?(o(),p(Ve,{key:`toggle-${n}`,backgroundColor:I.value.style.chart.legend.selectAllToggle.backgroundColor,color:I.value.style.chart.legend.selectAllToggle.color,fontSize:I.value.style.chart.legend.fontSize,checked:e.some(e=>G.value.includes(e.id)),isCursorPointer:L.value,onToggle:t=>Cn(e)},null,8,[`backgroundColor`,`color`,`fontSize`,`checked`,`isCursorPointer`,`onToggle`])):t(``,!0)]),_:2},1032,[`legendSet`,`config`,`isCursorPointer`]))),128))],2)):t(``,!0)],8,[`to`])):t(``,!0),I.value.style.chart.legend.show?t(``,!0):(o(),x(`div`,{key:6,ref_key:`chartLegend`,ref:Ht},[d(i.$slots,`legend`,{legend:zn.value},void 0,!0)],512)),i.$slots.source?(o(),x(`div`,{key:7,ref_key:`source`,ref:Ut,dir:`auto`},[d(i.$slots,`source`,{},void 0,!0)],512)):t(``,!0),It.value&&I.value.userOptions.buttons.table?(o(),p(ae($.value.component),f({key:8},$.value.props,{ref_key:`tableUnit`,ref:P,onClose:Zn}),te({content:v(()=>[(o(),p(r(Ze),{key:`table_${Kt.value}`,colNames:Hn.value.colNames,head:Hn.value.head,body:Hn.value.body,config:Hn.value.config,title:I.value.table.useDialog?``:$.value.title,withCloseButton:!I.value.table.useDialog,isCursorPointer:L.value,onClose:Zn},{th:v(({th:e})=>[S(`div`,{innerHTML:e,style:{display:`flex`,"align-items":`center`}},null,8,jt)]),td:v(({td:e})=>[n(l(e.name||e),1)]),_:1},8,[`colNames`,`head`,`body`,`config`,`title`,`withCloseButton`,`isCursorPointer`]))]),_:2},[I.value.table.useDialog?{name:`title`,fn:v(()=>[n(l($.value.title),1)]),key:`0`}:void 0,I.value.table.useDialog?{name:`actions`,fn:v(()=>[S(`button`,{tabindex:`0`,class:`vue-ui-user-options-button`,onClick:a[1]||=e=>Vn(I.value.userOptions.callbacks.csv),style:c({cursor:L.value?`pointer`:`default`})},[u(r(Ye),{name:`fileCsv`,stroke:$.value.props.color},null,8,[`stroke`])],4)]),key:`1`}:void 0]),1040)):t(``,!0),d(i.$slots,`skeleton`,{},()=>[r(tn)?(o(),p(Ne,{key:0})):t(``,!0)],!0)],46,nt))}},[[`__scopeId`,`data-v-51e05a92`]]),Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:`Module`}));export{tt as a,Nt as b};