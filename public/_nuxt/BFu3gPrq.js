import{Et as e,Ot as t,_t as n,b as r}from"./BLt7TXlb.js";import{p as i,s as a}from"./CreLCcZP.js";import{g as o}from"./Cr_GQgS6.js";function s(t,s,c){let[u={},d]=typeof s==`string`?[{},s]:[s,c],f=r(()=>e(t)),p=r(()=>e(u.key)||`$f`+i([d,typeof f.value==`string`?f.value:``,...l(u)]));if(!u.baseURL&&typeof f.value==`string`&&f.value[0]===`/`&&f.value[1]===`/`)throw Error(`[nuxt] [useFetch] the request URL must not start with "//".`);let{server:m,lazy:h,default:g,transform:_,pick:v,watch:y,immediate:b,getCachedData:x,deep:S,dedupe:C,timeout:w,...T}=u,E=n({...o,...T,cache:typeof u.cache==`boolean`?void 0:u.cache}),D={server:m,lazy:h,default:g,transform:_,pick:v,immediate:b,getCachedData:x,deep:S,dedupe:C,timeout:w,watch:y===!1?[]:[...y||[],E]};return a(y===!1?p.value:p,(e,{signal:t})=>(u.$fetch||globalThis.$fetch)(f.value,{signal:t,...E}),D)}function c(e,t,n){let[r={},i]=typeof t==`string`?[{},t]:[t,n];return s(e,{...r,lazy:!0},i)}function l(r){let a=[e(r.method)?.toUpperCase()||`GET`,e(r.baseURL)];for(let t of[r.query||r.params]){let n=e(t);if(!n)continue;let r={};for(let[t,i]of Object.entries(n))r[e(t)]=e(i);a.push(r)}if(r.body){let o=e(r.body);if(!o)a.push(i(o));else if(o instanceof ArrayBuffer)a.push(i(Object.fromEntries([...new Uint8Array(o).entries()].map(([e,t])=>[e,t.toString()]))));else if(o instanceof FormData){let e={};for(let t of o.entries()){let[n,r]=t;e[n]=r instanceof File?r.name:r}a.push(i(e))}else if(t(o))a.push(i(n(o)));else try{a.push(i(o))}catch{console.warn(`[useFetch] Failed to hash body`,o)}}return a}export{c as n,s as t};