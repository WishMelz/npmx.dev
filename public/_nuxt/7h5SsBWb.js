import{$ as e,At as t,C as n,D as r,G as i,H as a,J as o,Mt as s,Nt as c,O as l,Q as u,S as d,Z as f,_ as p,b as m,lt as h,m as g,ot as _,p as v,s as y,u as b,ut as x,w as S,x as C,yt as w}from"./BLt7TXlb.js";import{t as T}from"./YZkb6lnT.js";import{Dt as E,Nt as D,P as O,lt as k}from"./Cf-0F-2c.js";import{t as ee}from"./8DvoFuCx.js";import{t as te}from"./Cme7ewGR.js";import{t as A}from"./CWNsAIol.js";import{t as j}from"./D7-tWLRc.js";import{t as M}from"./xh7dz5-d.js";import{t as N}from"./CRSLCJ2m.js";import{t as P}from"./C66xQW7K.js";function F(e){let t=t=>e.isMacLike?t.metaKey:t.ctrlKey,n=e=>{let t=e;if(!t)return!1;let n=(t.tagName||``).toLowerCase();return t.isContentEditable||n===`input`||n===`textarea`||n===`select`},r=t=>!!(!e.isSummaryOpen||n(t.target)||e.isWriting),i=()=>{e.isDeleteMode=!1,e.isMoveMode=!1,e.isResizeMode=!1,e.isSelectMode=!1,e.isDrawMode=!1,e.isTextMode=!1,e.activeShape=void 0,e.showCaret=!1},a=t=>{switch(i(),t){case`m`:e.isMoveMode=!0;break;case`r`:e.isResizeMode=!0;break;case`d`:e.isDeleteMode=!0;break;case`g`:e.isSelectMode=!0,e.setShapeTo(`group`),e.activeShape=`group`;break;case`t`:e.isTextMode=!0,e.isWriting=!1,e.showCaret=!1;break}},o=t=>{switch(t){case`c`:e.setShapeTo(`circle`);break;case`s`:e.setShapeTo(`rect`);break;case`a`:e.setShapeTo(`arrow`);break;case`l`:e.setShapeTo(`line`);break}},s=(t,n)=>{let r=e.lastSelectedShape;if(!r)return;let i=(e,t)=>{typeof r[e]==`number`&&(r[e]+=t)};switch(r.type){case`rect`:case`circle`:case`text`:i(`x`,t),i(`y`,n);break;case`arrow`:i(`x`,t),i(`y`,n),i(`endX`,t),i(`endY`,n);break}},c=()=>{let t=e.lastSelectedShape;t&&(e.shapes=e.shapes.filter(e=>e.id!==t.id),e.lastSelectedShape=void 0)},l=!1,u=null,d=()=>{l||(l=!0,e.history?.begin?.(`nudge`))},f=()=>{l&&(clearTimeout(u),u=setTimeout(()=>{l=!1,e.history?.end?.()},160))},p=()=>{clearTimeout(u),l&&e.history?.end?.(),l=!1},m=n=>{if(t(n)&&!n.shiftKey&&n.key.toLowerCase()===`z`){if(r(n))return;n.preventDefault(),e.undoLastShape?.();return}if(t(n)&&n.shiftKey&&n.key.toLowerCase()===`z`||t(n)&&n.key.toLowerCase()===`y`){if(r(n))return;n.preventDefault(),typeof e.redoLastShape==`function`?e.redoLastShape():e.history?.redo?.();return}if(r(n))return;let l=n.key.toLowerCase();if(l===`escape`){n.preventDefault(),i();return}if(l===`delete`||l===`backspace`){n.preventDefault(),c();return}if([`m`,`r`,`d`,`g`,`t`].includes(l)){n.preventDefault(),a(l);return}if([`c`,`a`,`l`,`s`].includes(l)){n.preventDefault(),o(l);return}if(n.key===`ArrowUp`||n.key===`ArrowDown`||n.key===`ArrowLeft`||n.key===`ArrowRight`){n.preventDefault(),d();let e=n.shiftKey?10:1;n.key===`ArrowUp`&&s(0,-e),n.key===`ArrowDown`&&s(0,e),n.key===`ArrowLeft`&&s(-e,0),n.key===`ArrowRight`&&s(e,0),f();return}},h=e=>{e.key.startsWith(`Arrow`)&&f()};return window.addEventListener(`keydown`,m,{passive:!1}),window.addEventListener(`keyup`,h,{passive:!0}),function(){window.removeEventListener(`keydown`,m,{passive:!1}),window.removeEventListener(`keyup`,h,{passive:!0}),p()}}var I={class:`teleport-tooltip__inner`},L=A({__name:`TeleportedTooltip`,props:{show:{type:Boolean,default:!1},x:{type:Number,required:!0},y:{type:Number,required:!0},placement:{type:String,default:`top`},styleObject:{type:Object,default(){return{}}},delay:{type:Number,default:0},delayIn:{type:Number,default:300},delayOut:{type:Number,default:0}},setup(e){let r=e,c=m(()=>r.delayIn??r.delay),l=m(()=>r.delayOut??r.delay),f=w(!1),h=null,g=null;function v(){h&&=(clearTimeout(h),null),g&&=(clearTimeout(g),null)}function y(){v();let e=Math.max(0,c.value||0);e===0?f.value=!0:h=setTimeout(()=>{f.value=!0,h=null},e)}function b(){v();let e=Math.max(0,l.value||0);e===0?f.value=!1:g=setTimeout(()=>{f.value=!1,g=null},e)}_(()=>r.show,e=>{e?y():b()},{immediate:!0}),i(()=>{r.show&&y()}),a(()=>{v()});let x=m(()=>({position:`fixed`,zIndex:2147483647,top:`${r.y}px`,left:`${r.x}px`,transform:r.placement===`bottom`?`translate(-50%, 8px)`:`translate(-50%, -100%)`,pointerEvents:`none`,...r.styleObject}));return(r,i)=>(o(),d(p,{to:`body`},[f.value?(o(),S(`div`,{key:0,class:t([`teleport-tooltip`,e.placement]),style:s(x.value),role:`tooltip`,"aria-hidden":`false`},[C(`div`,I,[u(r.$slots,`default`,{},void 0,!0)])],6)):n(``,!0)]))}},[[`__scopeId`,`data-v-430dd7ad`]]),R={props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{shapes:[],lastSelectedShape:void 0}}}},components:{Accordion:N,BaseIcon:M,ColorPicker:P,TeleportedTooltip:L},data(){return{activeShape:void 0,strokeSize:1,currentPointer:{start:{x:0,y:0},end:{x:0,end:0}},currentTarget:void 0,hoveredShapeId:void 0,isBold:!1,isBulletTextMode:!1,isDash:!1,isDeleteMode:!1,isDrawing:!1,isDrawingNewShape:!0,isDrawMode:!1,isItalic:!1,isMouseDown:!1,isMoveMode:!1,isPrinting:!1,isResizeMode:!1,isSelectMode:!1,isSummaryOpen:!1,isTextMode:!1,isUnderline:!1,isWriting:!1,lastSelectedShape:this.dataset.lastSelectedShape,pointerPosition:{x:0,y:0},preventEdit:!0,selectedGroup:[],shapes:this.dataset.shapes?this.dataset.shapes:[],shapesOrder:[],step:Math.round(Math.random())*1e5,svgHeight:1e3,svgWidth:1e3,options:{arrow:{color:`grey`,filled:!0},circle:{color:`grey`,filled:!1,radius:3,strokeWidth:2},rect:{color:`grey`,filled:!1,strokeWidth:2,height:12,width:12}},selectedColor:`#000000`,showCaret:!1,sizeRatio:1,slottedSvg:void 0,sourceWidth:1,sourceHeight:1,textAlign:`start`,textFont:20,transparency:100,transparencyCodes:k,dragOffset:null,showTooltip:!1,tooltipKey:null,tooltipPos:{x:0,y:0},tooltipAnchor:null,history:[],isMacLike:!1,_onKeydown:null,_historySize:{undo:0,redo:0},_rafId:null,_lastPointerId:null,_captureEl:null}},watch:{shapes:{handler(e){e.length===0&&(this.lastSelectedShape=void 0)}},isTextMode:{handler(e){this.showCaret=e}}},computed:{FINAL_CONFIG(){let e=ee().vue_ui_annotator;if(!Object.keys(this.config||{}).length)return e;let t=this.treeShake({defaultConfig:e,userConfig:this.config});return this.convertConfigColors(t)},isCursorPointer(){return this.FINAL_CONFIG.useCursorPointer},tooltipStyleObject(){let e=this.FINAL_CONFIG.style.tooltips;return{backgroundColor:e.backgroundColor,color:e.color,border:e.border,borderRadius:`${e.borderRadius}px`,boxShadow:e.boxShadow}},canSelect(){return this.shapes.filter(e=>![`line`,`group`].includes(e.type)).length>1},colorTransparency(){return this.transparencyCodes[this.transparency>98?98:this.transparency]},cursorClass(){switch(!0){case this.isDeleteMode:return`default`;case this.isMoveMode:return`move`;case this.isTextMode:return`text`;case this.isResizeMode:return`se-resize`;default:return``}},records(){return this.shapes},userShapes(){return this.records.map(e=>{switch(!0){case e&&e.type===`arrow`:let t=e.strokeWidth>3?5:10,n=e.strokeWidth>3?2.5:5;return{html:`
              <defs>
              <marker 
                  id="${e.id}" 
                  markerWidth="${t}" 
                  markerHeight="${t}" 
                  refX="0" 
                  refY="${n}" 
                  orient="auto"
              >
                  <polygon 
                  points="0 0,${t} ${n}, 0 ${t}" 
                  fill="${e.color}"
                  />
              </marker>
              </defs>
              ${this.includeSelectionIndicator(e)}
              <g id="${e.id}">
                  <path 
                  style="stroke-linecap: round !important; ${e.isDash?`stroke-dasharray: ${e.strokeWidth*3}`:``}" 
                  stroke="${e.color}" 
                  id="${e.id}" 
                  d="M${e.x},${e.y} ${e.endX},${e.endY}" 
                  stroke-width="${e.strokeWidth}" 
                  marker-end="url(#${e.id})"
                  />
              </g>
              <g id="${e.id}">
              <rect 
                  id="${e.id}"
                  x="${e.x-10}"
                  y="${e.y-10}"
                  height="20"
                  width="20"
                  fill="rgba(0,0,0,0.3)"
                  style="display:${this.isResizeMode||this.isMoveMode?`initial`:`none`}; rx:1 !important; ry:1 !important;"
              />
              </g>
              ${this.includeDeleteButton(e)}
              </g>
              `,id:e.id};case e&&e.type===`circle`:return{html:`
              <g id="${e.id}">
                  ${this.includeSelectionIndicator(e)}
                  <circle 
                  id="${e.id}" 
                  cx="${e.x}" 
                  cy="${e.y}" 
                  r="${e.circleRadius?e.circleRadius:Number.MIN_VALUE}"
                  fill="${e.isFilled?e.color+e.alpha:`rgba(255,255,255,0.001)`}" 
                  stroke="${e.color+e.alpha}" 
                  stroke-width="${e.strokeWidth}"
                  style="${e.isDash?`stroke-dasharray: ${e.strokeWidth*3}`:``}"
                  >
                  </circle>
              </g>
              
              ${this.includeDeleteButton(e)}`,id:e.id};case e&&e.type===`group`:return{html:`<g id="${e.id}">
                            <rect
                                id="${this.isResizeMode?``:e.id}"
                                x="${e.x}"
                                y="${e.y}"
                                fill="transparent"
                                height="${e.rectHeight}"
                                width="${e.rectWidth}"
                                stroke="grey"
                                stroke-width="1"
                                style="rx:1 !important; ry:1 !important; ${e.isDash?`stroke-dasharray: ${e.strokeWidth*3}`:``}; display:${this.isSelectMode||this.isDeleteMode||this.hoveredShapeId&&this.hoveredShapeId===e.id?`initial`:`none`};"
                            />
                <g id="${e.id}">
                ${e.content?e.content:``}
                </g>
                            ${this.includeDeleteButton(e)}
                            </g> `,id:e.id};case e&&e.type===`rect`:return{html:`<g id="${e.id}">
                            ${this.includeSelectionIndicator(e)}
                            <rect
                                id="${this.isResizeMode?``:e.id}"
                                x="${e.x}"
                                y="${e.y}"
                                fill="${e.isFilled?e.color+e.alpha:`rgba(255,255,255,0.001)`}"
                                height="${e.rectHeight}"
                                width="${e.rectWidth}"
                                stroke="${e.color+e.alpha}"
                                stroke-width="${e.strokeWidth}"
                                style="rx:1 !important; ry:1 !important; ${e.isDash?`stroke-dasharray: ${e.strokeWidth*3}`:``}"
                            />
                            <rect id="${e.id}"
                                x="${e.x+e.rectWidth}"
                                y="${e.y+e.rectHeight}"
                                height="20"
                                width="20"
                                fill="rgba(0,0,0,0.3)"
                                style="display:${this.isResizeMode?`initial`:`none`}; rx:1 !important; ry:1 !important;"
                            />
                            ${this.includeDeleteButton(e)}
                            </g> `,id:e.id};case e&&e.type===`line`:return{html:`
                    <g id="${e.id}">
                        <path 
                        id="${e.id}" 
                        d="M${e.path?e.path:``}" 
                        style="stroke:${e.color+e.alpha} !important; fill:none; stroke-width:${e.strokeWidth} !important; stroke-linecap: round !important; stroke-linejoin: round !important;"        
                        />
                ${this.includeDeleteButton(e)}
                    </g>
                    `,id:e.id};case e&&e.type===`text`:let r=e.textContent.split(`‎`),i=[];for(let t=0;t<r.length;t+=1)i.push(`
            ${e.isBulletTextMode?`<tspan x="${e.x-e.fontSize}" y="${e.y+e.fontSize*t}" id="${e.id}" font-size="${e.fontSize/2}">⬤</tspan>`:``}
                    <tspan id="${e.id}" x="${e.x}" y="${e.y+e.fontSize*t}">
                        ${r[t]}
                    </tspan>`);return{html:`
                ${this.includeSelectionIndicator(e)}
                ${this.computeTextElement(e,i,e.isBulletTextMode)}
                `,id:e.id}}})}},setup(){let e=w(D()),{isImaging:t,generateImage:n}=te({elementId:e.value,fileName:`annotations`});return{uid:e,isImaging:t,generateImage:n}},mounted(){let e=this.$refs.drawSvgContainer,t=!1;this.walkTheDOM(e,e=>{if(!t&&[`DIV`,`svg`,`section`,`canvas`].includes(e.tagName)){this.slottedSvg=e,t=!0;return}}),this.isMacLike=(()=>{if(typeof navigator>`u`)return!1;let e=navigator.userAgentData?.platform??``;if(e)return/mac|ios/i.test(e);let t=navigator.userAgent??``;return/(Mac|iPhone|iPad|iPod)/i.test(t)})();let n=this.slottedSvg.getBoundingClientRect();if(this.sizeRatio=n.height/n.width,this.svgWidth=1e3,this.svgHeight=this.sizeRatio*1e3,this.sourceWidth=n.width,this.sourceHeight=n.height,new ResizeObserver(e=>{e.forEach(e=>{this.sourceWidth=e.contentRect.width,this.sourceHeight=e.contentRect.height,this.sizeRatio=e.contentRect.height/e.contentRect.width,this.svgHeight=this.sizeRatio*1e3})}).observe(this.slottedSvg),this._onKeydown=e=>this.write(e),window.addEventListener(`keydown`,this._onKeydown),this.history=this.makeHistory(),this.history.size){let e=this.history.size();this._historySize.undo=e.undo,this._historySize.redo=e.redo}this._unregisterShortcuts=F(this)},beforeUnmount(){this.hideTooltip(),this._rafId&&cancelAnimationFrame(this._rafId),this._onKeydown&&window.removeEventListener(`keydown`,this._onKeydown)},unmounted(){this._unregisterShortcuts&&this._unregisterShortcuts()},destroyed(){window.removeEventListener(`keydown`,e=>{this.write(e)})},methods:{treeShake:O,convertConfigColors:E,_tickDraw(){if(!this.isDrawing){this._rafId=null;return}this.drawUp(),this._rafId=requestAnimationFrame(()=>this._tickDraw())},bringToFrontById(e){let t=this.shapes.findIndex(t=>t.id===e);if(t>-1&&t!==this.shapes.length-1){let[e]=this.shapes.splice(t,1);this.shapes.push(e)}},_shapeIdUnderPointer(e){let t=e=>!!e&&this.shapes.some(t=>t.id===e);if(t(e?.target?.id))return e.target.id;let n=this.$refs.mainSvg?.querySelector(`.annotator__glass`);if(!n)return null;let r=n.style.pointerEvents;n.style.pointerEvents=`none`;let i=document.elementFromPoint(e.clientX,e.clientY);return n.style.pointerEvents=r||`all`,t(i?.id)?i.id:null},makeHistory(e={}){let{maxEntries:t=200,maxBytes:n=2e6}=e,r={open:!1,before:null,undo:[],redo:[]},i={undo:0,redo:0},a=e=>typeof e==`string`?e.length*2:0,o=()=>JSON.stringify({shapes:this.copy(this.shapes),lastSelectedShape:this.copy(this.lastSelectedShape)}),s=e=>{let t=JSON.parse(e);this.shapes=t.shapes,this.lastSelectedShape=t.lastSelectedShape},c=()=>{this._historySize.undo=r.undo.length,this._historySize.redo=r.redo.length},l=(e,o)=>{let s=r[e];for(s.push(o),i[e]+=a(o);s.length>t||i[e]>n;){let t=s.shift();i[e]-=a(t)}};return{begin(){r.open||(r.open=!0,r.before=o())},end(){r.open&&(r.open=!1,o()!==r.before&&(l(`undo`,r.before),r.redo.length=0,i.redo=0),r.before=null,c())},undo(){let e=r.undo.pop();e&&(i.undo-=a(e),l(`redo`,o()),s(e),c())},redo(){let e=r.redo.pop();e&&(i.redo-=a(e),l(`undo`,o()),s(e),c())},size(){return{undo:r.undo.length,redo:r.redo.length,approxBytes:{undo:i.undo,redo:i.redo}}}}},showToolTipFor(e,t,n=`top`){this.tooltipKey=e,this.tooltipAnchor=t.currentTarget||t.target,this.updateTooltipPosition(),this.showTooltip=!0,window.addEventListener(`scroll`,this.updateTooltipPosition,!0),window.addEventListener(`resize`,this.updateTooltipPosition,{passive:!0}),this.tooltipPlacement=n},hideTooltip(){this.showTooltip=!1,this.tooltipKey=null,this.tooltipAnchor=null,window.removeEventListener(`scroll`,this.updateTooltipPosition,!0),window.removeEventListener(`resize`,this.updateTooltipPosition)},updateTooltipPosition(){if(!this.tooltipAnchor)return;let e=this.tooltipAnchor.getBoundingClientRect();this.tooltipPos={x:e.left+e.width/2,y:e.top}},initDragOffset(e){let t=e?.target&&e.target.id||this.currentTarget&&this.currentTarget.id,n=this.shapes.find(e=>e.id===t);if(!n){this.dragOffset=null;return}this.lastSelectedShape=n;let r=this.pointerPosition.x,i=this.pointerPosition.y;switch(n.type){case`rect`:case`circle`:case`text`:this.dragOffset={dx:r-n.x,dy:i-n.y};break;case`arrow`:this.dragOffset={dx:r-n.x,dy:i-n.y,endDx:r-n.endX,endDy:i-n.endY};break;case`group`:this.dragOffset={dx:r-(n.x||0),dy:i-(n.y||0)};break;default:this.dragOffset={dx:0,dy:0};break}},bringShapeTo(e){let t=this.shapes.find(e=>e.id===this.lastSelectedShape.id);switch(!0){case e===`front`:this.shapes=this.shapes.filter(e=>e.id!==t.id),this.shapes.push(t);break;case e===`back`:this.shapes=this.shapes.filter(e=>e.id!==t.id),this.shapes=[t,...this.shapes];break;default:return}},clickSvg(e){if(this.isDeleteMode)return;e.preventDefault(),e.stopPropagation(),this.deleteEmptyTextElement(),this.isTextMode?(this.isWriting=!0,this.showCaret=!0):(this.isWriting=!1,this.showCaret=!1,this.isTextMode=!1);let t=`text_${Math.random()*1e4}_${Math.random()*99999}`;if(this.isWriting){this.history?.begin(),this.shapes.push({id:t,type:`text`,lines:0,x:this.pointerPosition.x,y:this.pointerPosition.y,textContent:``,fontSize:this.copy(this.textFont),textAlign:this.copy(this.textAlign),isBold:this.copy(this.isBold),isItalic:this.copy(this.isItalic),isUnderline:this.copy(this.isUnderline),color:this.copy(this.selectedColor),isBulletTextMode:this.copy(this.isBulletTextMode)}),this.currentTarget=this.shapes.at(-1),this.lastSelectedShape=this.shapes.at(-1),this.history?.end();return}let n=()=>{this.isDash=this.shapes.find(t=>t.id===e.target.id).isDash},r=()=>{this.strokeSize=this.shapes.find(t=>t.id===e.target.id).strokeWidth};if(this.isSelectMode=!1,e.target.id.includes(`arrow`)){this.activeShape=`arrow`,n(),r();return}if(e.target.id.includes(`circle`)){this.activeShape=`circle`,this.options.circle.filled=this.shapes.find(t=>t.id===e.target.id).isFilled,n(),r();return}if(e.target.id.includes(`rect`)){this.activeShape=`rect`,this.options.rect.filled=this.shapes.find(t=>t.id===e.target.id).isFilled,n(),r();return}if(e.target.id.includes(`line`)){this.activeShape=`line`,r();return}if(e.target.id.includes(`text`)){this.isTextMode=!0,this.isWriting=!0,this.showCaret=!0;let t=this.shapes.find(t=>t.id===e.target.id);t&&t.textAlign&&(this.textAlign=this.shapes.find(t=>t.id===e.target.id).textAlign),t&&(this.isBulletTextMode=this.shapes.find(t=>t.id===e.target.id).isBulletTextMode);return}},copyPaste(){let e={...this.lastSelectedShape,id:`${this.lastSelectedShape.id}_copy`,x:this.lastSelectedShape.x-100<0?1:this.lastSelectedShape.x-100,y:this.lastSelectedShape.y-100<0?1:this.lastSelectedShape.y-100};this.shapes.push(e)},includeDeleteButton(e,t=!1){switch(!0){case e.type===`circle`:return`
                    <g id="${e.id}" style="display:${this.isDeleteMode?`initial`:`none`};">
                        <circle id="${e.id}" cx="${e.x}" cy="${e.y}" r="12" fill="red"/>
                        <line stroke="white" stroke-width="2" id="${e.id}" x1="${e.x-4}" y1="${e.y-4}" x2="${e.x+4}" y2="${e.y+4}"/>
                        <line stroke="white" stroke-width="2" id="${e.id}" x1="${e.x+4}" y1="${e.y-4}" x2="${e.x-4}" y2="${e.y+4}"/>
                    </g>
                `;case e.type===`text`:let n,r=[-8,-12,-4,-12,-4];switch(!0){case e.textAlign===`start`:n=t?[-20,-24,-16,-16,-24]:[-16,-20,-12,-12,-20];break;case e.textAlign===`middle`:n=[0,-4,4,4,-4],r=[-32,-36,-28,-36,-28];break;case e.textAlign===`end`:n=[16,20,12,12,20];break;default:n=[0,0,0];break}return`
                    <g id="${e.id}" style="display:${this.isDeleteMode?`initial`:`none`};">
                        <circle id="${e.id}" cx="${e.x+n[0]}" cy="${e.y+r[0]}" r="12" fill="red"/>
                        <line stroke="white" stroke-width="2" id="${e.id}" x1="${e.x+n[1]}" y1="${e.y+r[1]}" x2="${e.x+n[2]}" y2="${e.y+r[2]}"/>
                        <line stroke="white" stroke-width="2" id="${e.id}" x1="${e.x+n[3]}" y1="${e.y+r[3]}" x2="${e.x+n[4]}" y2="${e.y+r[4]}"/>
                    </g>
                `;default:return`
                    <g id="${e.id}" style="display:${this.isDeleteMode?`initial`:`none`};">
                        <circle id="${e.id}" cx="${e.x-4}" cy="${e.y-4}" r="12" fill="red"/>
                        <line stroke="white" stroke-width="2" id="${e.id}" x1="${e.x-8}" y1="${e.y-8}" x2="${e.x}" y2="${e.y}"/>
                        <line stroke="white" stroke-width="2" id="${e.id}" x1="${e.x}" y1="${e.y-8}" x2="${e.x-8}" y2="${e.y}"/>
                    </g>
                `}},includeSelectionIndicator(e){if(e)switch(!0){case e.type===`rect`:return`
                    <rect
                    id="${e.id}" 
                    style="stroke-dasharray: 10; display:${this.hoveredShapeId&&this.hoveredShapeId===e.id?`initial`:`none`}"
                    x="${e.x-20}"
                    y="${e.y-20}"
                    height="${e.rectHeight+40}"
                    width="${e.rectWidth+40}"
                    fill="transparent"
                    stroke="grey"
                    />
                `;case e.type===`circle`:return`
                    <rect
                    id="${e.id}" 
                    style="stroke-dasharray: 10; display:${this.hoveredShapeId&&this.hoveredShapeId===e.id?`initial`:`none`}"
                    x="${e.x-e.circleRadius-20}"
                    y="${e.y-e.circleRadius-20}"
                    height="${e.circleRadius*2+40}"
                    width="${e.circleRadius*2+40}"
                    fill="transparent"
                    stroke="grey"
                    />
                `;case e.type===`arrow`:let t=e.endX-e.x>0,n=e.endY-e.y>0;return`
                    <rect
                    id="${e.id}" 
                    style="stroke-dasharray: 10; display:${this.hoveredShapeId&&this.hoveredShapeId===e.id?`initial`:`none`}"
                    x="${t?e.x-20:e.endX-20}"
                    y="${n?e.y-20:e.endY-20}"
                    height="${n?e.endY-e.y+40:e.y-e.endY+40}"
                    width="${t?e.endX-e.x+40:e.x-e.endX+40}"
                    fill="transparent"
                    stroke="grey"
                    />
                `;case e.type===`text`:let r=this.$refs.mainSvg?Array.from(this.$refs.mainSvg.getElementsByTagName(`text`)).find(t=>t.id===e.id):null;if(!r)return;let{x:i,y:a,width:o,height:s}=r.getBBox();return`
                    <rect
                    id="${e.id}" 
                    style="stroke-dasharray: 10; display:${this.hoveredShapeId&&this.hoveredShapeId===e.id?`initial`:`none`}"
                    x="${i-20}"
                    y="${a-20}"
                    height="${s+40}"
                    width="${o+40}"
                    fill="transparent"
                    stroke="grey"
                    />
                `;default:return``}},allowEditAndHoverShapes(e){e.preventDefault(),this.preventEdit=!1,e.target&&e.target.id&&(this.hoveredShapeId=e.target.id)},setSelectedTextAlignTo(e){!this.lastSelectedShape||this.lastSelectedShape.type!==`text`||(this.lastSelectedShape.textAlign=e)},undoLastShape(){this.history?.undo?.()},redoLastShape(){this.history?.redo?.()},write(e){if(this.preventEdit)return;e.preventDefault();let t=e.keyCode;if(!this.isWriting)return;this.showCaret=!0;let n;if(n=this.lastSelectedShape.type===`text`?this.shapes.find(e=>e.id===this.lastSelectedShape.id):this.shapes.at(-1),this.currentTarget=n,n.type!==`text`)return;this.currentTarget.isBold=this.copy(this.isBold),this.currentTarget.isItalic=this.copy(this.isItalic),this.currentTarget.isUnderline=this.copy(this.isUnderline);let r=[16,17,18,20,27,33,34,35,36,37,38,39,40,45,91,112,113,114,115,116,117,118,119,120,121,122,123,221,255,`Unidentified`];switch(!0){case t===8:n.textContent=n.textContent.slice(0,-1);break;case t===9:n.textContent+=`&nbsp; &nbsp; &nbsp; &nbsp;`;break;case t===13:n.lines+=1,n.textContent+=`‎`;return;case r.includes(t):return;default:n.textContent+=e.key}},groupShapes(){if(this.selectedGroup=[],this.activeShape!==`group`){this.isSelectMode=!1,this.shapes=this.shapes.filter(e=>e.type!==`group`);return}let e=this.shapes.at(-1);if(this.shapes.forEach(t=>{if(t.type!==`group`)switch(!0){case t.type===`arrow`:let n=t.x<=t.endX&&t.y<=t.endY&&e.x<=t.x&&e.y<=t.y&&e.x+e.rectWidth>=t.endX&&e.y+e.rectHeight>=t.endY,r=t.endY<t.y&&t.x<t.endX&&e.x<=t.x&&e.y<=t.y&&e.x+e.rectWidth>=t.endX&&e.y+e.rectHeight>=t.y,i=t.x>t.endX&&t.y<t.endY&&e.x<=t.endX&&e.y<=t.endY&&e.x+e.rectWidth>=t.x&&e.y+e.rectHeight>=t.endY,a=t.x>t.endX&&t.y>t.endY&&e.x<=t.endX&&e.y<=t.endY&&e.x+e.rectWidth>=t.x&&e.y+e.rectHeight>=t.y;(n||r||i||a)&&this.selectedGroup.push(t);break;case t.type===`circle`:e.x<=t.x+t.circleRadius&&e.y<=t.y+t.circleRadius&&t.x+t.circleRadius<=e.x+e.rectWidth&&t.y+t.circleRadius<=e.y+e.rectHeight&&this.selectedGroup.push(t);break;case t.type===`rect`:e.x<=t.x&&e.y<=t.y&&t.x<=e.x+e.rectWidth&&t.y<=e.y+e.rectHeight&&t.x+t.rectWidth<=e.x+e.rectWidth&&t.y+t.rectHeight<=e.y+e.rectHeight&&t.rectWidth<=e.rectWidth&&t.rectHeight<=e.rectHeight&&this.selectedGroup.push(t);break;case t.type===`text`:e.x<=t.x&&e.y<=t.y&&this.selectedGroup.push(t);break}}),this.selectedGroup=this.selectedGroup.map(t=>({...t,id:e.id,oldId:t.id,diffX:t.x-e.x,diffY:t.y-e.y,diffEndX:t.endX?t.endX-e.x:0,diffEndY:t.endY?t.endY-e.y:0})),e.source=this.selectedGroup,this.selectedGroup.length>1){let t=this.copy(this.selectedGroup).map(e=>e.oldId);this.shapes=this.shapes.filter(e=>!t.includes(e.id)),this.selectedGroup.forEach(t=>{switch(!0){case t.type===`circle`:e.content+=`
                <circle
                id="${t.id}"
                cx="${t.x}"
                cy="${t.y}"
                r="${t.circleRadius?t.circleRadius:Number.MIN_VALUE}"
                fill="${t.isFilled?t.color+t.alpha:`rgba(255,255,255,0.001)`}"
                stroke="${t.color+t.alpha}" 
                                stroke-width="${t.strokeWidth}"
                                style="${t.isDash?`stroke-dasharray: ${t.strokeWidth*3}`:``}"
                                />
            `;break;case t.type===`rect`:e.content+=`
                <rect
                id="${this.isResizeMode?``:t.id}"
                x="${t.x}"
                y="${t.y}"
                fill="${t.isFilled?t.color+t.alpha:`rgba(255,255,255,0.001)`}"
                height="${t.rectHeight}"
                width="${t.rectWidth}"
                stroke="${t.color+t.alpha}"
                stroke-width="${t.strokeWidth}"
                style="rx:1 !important; ry:1 !important; ${t.isDash?`stroke-dasharray: ${t.strokeWidth*3}`:``}"
                            />
            `;break;case t.type===`arrow`:let n=t.strokeWidth>3?5:10,r=t.strokeWidth>3?2.5:5,i=Date.now();e.content+=`
                <g id="${t.id}">
                <defs>
                    <marker 
                    id="${i}" 
                    markerWidth="${n}" 
                    markerHeight="${n}" 
                    refX="0" 
                    refY="${r}" 
                    orient="auto"
                    >
                    <polygon 
                    points="0 0,${n} ${r}, 0 ${n}" 
                    fill="${t.color}"
                    />
                    </marker>
                </defs>

                <path 
                    style="stroke-linecap: round !important; ${t.isDash?`stroke-dasharray: ${t.strokeWidth*3}`:``}" 
                    stroke="${t.color}" 
                    id="${t.id}" 
                    d="M${t.x},${t.y} ${t.endX},${t.endY}" 
                    stroke-width="${t.strokeWidth}" 
                    marker-end="url(#${i})"
                />
                </g>
            `;break;case t.type===`text`:let a=t.textContent.split(`‎`),o=[];for(let e=0;e<a.length;e+=1)o.push(`
                ${t.isBulletTextMode?`<tspan x="${t.x-t.fontSize}" y="${t.y+t.fontSize*e}" id="${t.id}" font-size="${t.fontSize/2}">⬤</tspan>`:``}
                <tspan id="${t.id}" x="${t.x}" y="${t.y+t.fontSize*e}">
                    ${a[e]}
                </tspan>`);e.content+=`
                ${this.computeTextElement(t,o,t.isBulletTextMode)}
                `;break}})}else this.shapes=this.shapes.filter(t=>t.id!==e.id)},moveGroup(e){e.content=``;let t=e.x||0,n=e.y||0;(e.source||[]).forEach(r=>{switch(r.type){case`circle`:{let i=t+r.diffX,a=n+r.diffY;e.content+=`
              <circle
                id="${r.id}"
                cx="${i}"
                cy="${a}"
                r="${r.circleRadius?r.circleRadius:Number.MIN_VALUE}"
                fill="${r.isFilled?r.color+r.alpha:`rgba(255,255,255,0.001)`}"
                stroke="${r.color+r.alpha}"
                stroke-width="${r.strokeWidth}"
                style="${r.isDash?`stroke-dasharray: ${r.strokeWidth*3}`:``}"
              />
            `;break}case`rect`:{let i=t+r.diffX,a=n+r.diffY;e.content+=`
              <rect
                id="${this.isResizeMode?``:r.id}"
                x="${i}"
                y="${a}"
                fill="${r.isFilled?r.color+r.alpha:`rgba(255,255,255,0.001)`}"
                height="${r.rectHeight}"
                width="${r.rectWidth}"
                stroke="${r.color+r.alpha}"
                stroke-width="${r.strokeWidth}"
                style="rx:1 !important; ry:1 !important; ${r.isDash?`stroke-dasharray: ${r.strokeWidth*3}`:``}"
              />
            `;break}case`arrow`:{let i=t+r.diffX,a=n+r.diffY,o=t+r.diffEndX,s=n+r.diffEndY,c=r.strokeWidth>3?5:10,l=r.strokeWidth>3?2.5:5,u=`m_${r.id}_${Math.random().toString(36).slice(2)}`;e.content+=`
              <g id="${r.id}">
                <defs>
                  <marker 
                    id="${u}" 
                    markerWidth="${c}" 
                    markerHeight="${c}" 
                    refX="0" 
                    refY="${l}" 
                    orient="auto">
                    <polygon points="0 0,${c} ${l}, 0 ${c}" fill="${r.color}" />
                  </marker>
                </defs>
                <path
                  style="stroke-linecap: round !important; ${r.isDash?`stroke-dasharray: ${r.strokeWidth*3}`:``}"
                  stroke="${r.color}"
                  id="${r.id}"
                  d="M${i},${a} ${o},${s}"
                  stroke-width="${r.strokeWidth}"
                  marker-end="url(#${u})"
                />
              </g>
            `;break}case`text`:{let i=(r.textContent||``).split(`‎`).map((e,i)=>`
              ${r.isBulletTextMode?`<tspan x="${t+r.diffX-r.fontSize}" y="${n+r.diffY+r.fontSize*i}" id="${r.id}" font-size="${r.fontSize/2}">⬤</tspan>`:``}
              <tspan id="${r.id}" x="${t+r.diffX}" y="${n+r.diffY+r.fontSize*i}">
                ${e}
              </tspan>
            `).join(``);e.content+=`
              <g id="${r.id}">
                <text
                  style="user-select:none; height:100px;"
                  id="${r.id}"
                  x="${t+r.diffX}"
                  y="${n+r.diffY}"
                  text-anchor="${r.textAlign}"
                  font-size="${r.fontSize}"
                  fill="${r.color}"
                  font-weight="${r.isBold?`bold`:`normal`}"
                  font-style="${r.isItalic?`italic`:`normal`}"
                  text-decoration="${r.isUnderline?`underline`:`none`}">
                  ${i}
                </text>
              </g>
            `;break}}})},onPointerOut(e){let t=this.$refs.mainSvg;e.relatedTarget&&t&&t.contains(e.relatedTarget)||(this.preventEdit=!0,this.hoveredShapeId=void 0)},chooseAction(e){if(this.isDeleteMode){this.isMouseDown=!1;return}if(e.preventDefault(),e.stopPropagation(),this.isMouseDown=!0,e.pointerId!=null){try{this.$refs.mainSvg?.setPointerCapture?.(e.pointerId)}catch{}this.lastPointerId=e.pointerId}else this.lastPointerId=null;if((this.isDrawMode||this.isMoveMode||this.isResizeMode||this.isSelectMode)&&this.history?.begin?.(),this.isDrawMode){this.drawDown();return}if(this.isMoveMode){let t=this._shapeIdUnderPointer(e)||this.hoveredShapeId||this.lastSelectedShape?.id;t&&(this.bringToFrontById(t),this.currentTarget={id:t}),this.initDragOffset(e)}},chooseMove(e){this.isDeleteMode||(e.preventDefault(),e.stopPropagation(),e.target.localName!==`svg`&&(this.currentTarget=e.target),this.isMoveMode&&this.isMouseDown?this.moveDown():this.isResizeMode&&this.isMouseDown&&this.resize())},computeCaretPosition(e){switch(!0){case e.textAlign===`middle`:return`<path class="vue-ui-annotator-caret" stroke="black" stroke-width="2" d="M${e.x},${e.y-e.fontSize} ${e.x},${e.y-e.fontSize-15}" /> <path class="vue-ui-annotator-caret" stroke="black" stroke-width="2" d="M${e.x-3},${e.y-e.fontSize-5} ${e.x},${e.y-e.fontSize} ${e.x+3},${e.y-e.fontSize-5}"/>`;case e.textAlign===`start`:let t=e.isBulletTextMode?e.fontSize:0;return`<path class="vue-ui-annotator-caret" d="M${e.x-20-t},${e.y-e.fontSize/6} ${e.x-5-t},${e.y-e.fontSize/6}" stroke="black" stroke-width="2" />
                        <path class="vue-ui-annotator-caret" d="M${e.x-10-t},${e.y-e.fontSize/3} ${e.x-5-t},${e.y-e.fontSize/6} ${e.x-10-t},${e.y}" stroke="black" stroke-width="2">`;case e.textAlign===`end`:return`<path class="vue-ui-annotator-caret" d="M${e.x+20},${e.y-e.fontSize/6} ${e.x+5},${e.y-e.fontSize/6}" stroke="black" stroke-width="2" />
                        <path class="vue-ui-annotator-caret" d="M${e.x+10},${e.y-e.fontSize/3} ${e.x+5},${e.y-e.fontSize/6} ${e.x+10},${e.y}" stroke="black" stroke-width="2">`;default:return``}},computeTextElement(e,t,n=!1){switch(!0){case e.textAlign===`start`:return`
                <g id="${e.id}">
                    <rect 
                        id="${e.id}" 
                        style="display:${this.lastSelectedShape&&this.lastSelectedShape.id===e.id?`initial`:`none`};" 
                        x="${e.x}" 
                        y="${e.y-50}" 
                        height="${e.lines===0||e.lines===1?e.fontSize*4:e.fontSize*2*e.lines}"
                        width="100" 
                        fill="rgba(0,0,0,0)"
                    />
                    <text
                    style="user-select:none; height:100px;"
                    id="${e.id}"
                    x="${e.x}"
                    y="${e.y}"
                    text-anchor="${e.textAlign}"
                    font-size="${e.fontSize}"
                    fill="${e.color}"
                    font-weight="${e.isBold?`bold`:`normal`}"
                    font-style="${e.isItalic?`italic`:`normal`}"
                    text-decoration="${e.isUnderline?`underline`:`none`}"
                    >
                        ${t.join(``)}
                    </text>
                    ${this.showCaret&&this.lastSelectedShape&&this.lastSelectedShape.id===e.id?this.computeCaretPosition(e):``}
                    ${this.includeDeleteButton(e,n)}
                </g> 
                `;case e.textAlign===`middle`:return`
                    <g id="${e.id}">
                    <rect 
                        id="${e.id}" 
                        style="display:${this.lastSelectedShape&&this.lastSelectedShape.id===e.id?`initial`:`none`};" 
                        x="${e.x-50}" 
                        y="${e.y-50}" 
                        height="${e.lines===0||e.lines===1?e.fontSize*4:e.fontSize*2*e.lines}"
                        width="100" 
                        fill="rgba(0,0,0,0)"
                    />
                    <text
                    style="user-select:none; height:100px;"
                    id="${e.id}"
                    x="${e.x}"
                    y="${e.y}"
                    text-anchor="${e.textAlign}"
                    font-size="${e.fontSize}"
                    fill="${e.color}"
                    font-weight="${e.isBold?`bold`:`normal`}"
                    font-style="${e.isItalic?`italic`:`normal`}"
                    text-decoration="${e.isUnderline?`underline`:`none`}"
                    >
                        ${t.join(``)}
                    </text>
                    ${this.showCaret&&this.lastSelectedShape&&this.lastSelectedShape.id===e.id?this.computeCaretPosition(e):``}
                    ${this.includeDeleteButton(e)}
                    </g>
                `;case e.textAlign===`end`:return`
                <g id="${e.id}">
                    <rect 
                        id="${e.id}" 
                        style="display:${this.lastSelectedShape&&this.lastSelectedShape.id===e.id?`initial`:`none`};" 
                        x="${e.x-100}" 
                        y="${e.y-50}" 
                        height="${e.lines===0||e.lines===1?e.fontSize*4:e.fontSize*2*e.lines}"
                        width="100" 
                        fill="rgba(0,0,0,0)"
                    />
                    <text
                    style="user-select:none; height:100px;"
                    id="${e.id}"
                    x="${e.x}"
                    y="${e.y}"
                    text-anchor="${e.textAlign}"
                    font-size="${e.fontSize}"
                    fill="${e.color}"
                    font-weight="${e.isBold?`bold`:`normal`}"
                    font-style="${e.isItalic?`italic`:`normal`}"
                    text-decoration="${e.isUnderline?`underline`:`none`}"
                    >
                        ${t.join(``)}
                    </text>
                    ${this.showCaret&&this.lastSelectedShape&&this.lastSelectedShape.id===e.id?this.computeCaretPosition(e):``}
                    ${this.includeDeleteButton(e)}
                </g> 
                `;default:return``}},copy(e){if(e==null)return e;try{return typeof structuredClone==`function`?structuredClone(e):JSON.parse(JSON.stringify(e))}catch{return Array.isArray(e)?e.map(e=>this.copy(e)):typeof e==`object`?Object.fromEntries(Object.entries(e).map(([e,t])=>[e,this.copy(t)])):e}},clickShape(e){let t=e.target.id;if(!0===this.isDeleteMode){this.history?.begin(),this.shapes=[...this.shapes].filter(e=>e.id!==t),this.lastSelectedShape=void 0,this.history?.end();return}else this.lastSelectedShape=this.shapes.find(e=>e.id===t)},deleteEmptyTextElement(){!this.lastSelectedShape||!this.lastSelectedShape.id.includes(`text`)||this.lastSelectedShape.textContent===``&&(this.shapes=this.shapes.filter(e=>e.id!==this.lastSelectedShape.id),this.lastSelectedShape=this.shapes.at(-1))},drawUp(e=!1){if(!this.activeShape||!this.isDrawing)return;this.currentPointer.end={x:this.pointerPosition.x,y:this.pointerPosition.y};let t;this.shapes.length>0&&this.currentTarget&&(t=[...this.shapes].find(e=>e.id===this.currentTarget.id));let n,r,i;t&&(n=t.x-this.currentPointer.end.x,r=t.y-this.currentPointer.end.y,i=Math.sqrt(n*n+r*r));let a,o;switch(e?(a=Math.max(this.currentPointer.end.x,t.x),o=Math.min(this.currentPointer.end.x,t.x),Math.max(this.currentPointer.end.y,t.y),Math.min(this.currentPointer.end.y,t.y)):(a=Math.max(this.currentPointer.end.x,this.currentPointer.start.x),o=Math.min(this.currentPointer.end.x,this.currentPointer.start.x),Math.max(this.currentPointer.end.y,this.currentPointer.start.y),Math.min(this.currentPointer.end.y,this.currentPointer.start.y)),!0){case this.activeShape===`arrow`:this.shapes.at(-1).endX=this.currentPointer.end.x,this.shapes.at(-1).endY=this.currentPointer.end.y;break;case this.activeShape===`circle`:this.shapes.at(-1).circleRadius=this.isDrawingNewShape?this.copy(a-o)+20:i+20;break;case this.activeShape===`line`:this.shapes.at(-1).path+=` ${this.pointerPosition.x} ${this.pointerPosition.y} `;break;case[`rect`,`group`].includes(this.activeShape):this.shapes.at(-1).rectWidth=this.copy(this.currentPointer.end.x-this.shapes.at(-1).x)>0?this.copy(this.currentPointer.end.x-this.shapes.at(-1).x):20,this.shapes.at(-1).rectHeight=this.copy(this.currentPointer.end.y-this.shapes.at(-1).y)>0?this.copy(this.currentPointer.end.y-this.shapes.at(-1).y):20}},drawDown(){if(this.isDrawing=!0,!this.activeShape&&!this.isSelectMode||!this.isDrawing)return;this.isDrawingNewShape=!0,this.currentPointer.start={x:this.pointerPosition.x,y:this.pointerPosition.y};let e=`${this.isSelectMode?`group`:this.activeShape}_${Math.random()*1e4}_${Date.now()}`;switch(!0){case this.activeShape===`arrow`:this.shapes.push({id:e,x:this.pointerPosition.x,y:this.pointerPosition.y,endX:this.pointerPosition.x,endY:this.pointerPosition.y,type:this.activeShape,color:this.copy(this.selectedColor),strokeWidth:this.copy(Math.abs(this.strokeSize)),isDash:this.copy(this.isDash)}),this.lastSelectedShape=this.shapes.at(-1);break;case this.activeShape===`circle`:this.shapes.push({alpha:this.options.circle.filled?this.colorTransparency:``,id:e,color:this.copy(this.selectedColor),isFilled:this.copy(this.options.circle.filled),circleRadius:this.copy(this.options.circle.radius),circleStrokeWidth:this.copy(this.options.circle.strokeWidth),type:this.activeShape,x:this.pointerPosition.x,y:this.pointerPosition.y,strokeWidth:this.copy(Math.abs(this.strokeSize)),isDash:this.copy(this.isDash)}),this.lastSelectedShape=this.shapes.at(-1);break;case this.activeShape===`line`:this.shapes.push({alpha:this.copy(this.colorTransparency),id:e,x:this.pointerPosition.x,y:this.pointerPosition.y,type:this.activeShape,color:this.copy(this.selectedColor),strokeWidth:this.copy(Math.abs(this.strokeSize)),isDash:this.copy(this.isDash),path:`${this.pointerPosition.x} ${this.pointerPosition.y}`}),this.lastSelectedShape=this.shapes.at(-1);break;case this.activeShape===`rect`:this.shapes.push({alpha:this.options.rect.filled?this.colorTransparency:``,id:e,color:this.copy(this.selectedColor),isFilled:this.copy(this.options.rect.filled),rectStrokeWidth:this.copy(this.options.rect.strokeWidth),rectHeight:this.copy(this.options.rect.height),rectWidth:this.copy(this.options.rect.width),type:this.activeShape,x:this.pointerPosition.x,y:this.pointerPosition.y,strokeWidth:this.copy(Math.abs(this.strokeSize)),isDash:this.copy(this.isDash)}),this.lastSelectedShape=this.shapes.at(-1);break;case this.activeShape===`group`:this.shapes.push({alpha:1,id:`group_${Math.random()*1e4}_${Date.now()}`,x:this.pointerPosition.x,y:this.pointerPosition.y,isFilled:!1,rectHeight:this.copy(this.options.rect.height),rectWidth:this.copy(this.options.rect.width),rectStrokeWidth:1,type:`group`,color:`grey`,strokeWidth:1,isDash:!0,content:``});break}this._rafId||=requestAnimationFrame(()=>this._tickDraw())},move(e){if(!e||!e.id||e.type===`line`||!this.dragOffset&&(this.initDragOffset({target:{id:e.id}}),!this.dragOffset))return;let{dx:t,dy:n,endDx:r,endDy:i}=this.dragOffset,a=this.pointerPosition.x,o=this.pointerPosition.y;switch(this.lastSelectedShape=e,e.type){case`arrow`:e.x=a-t,e.y=o-n,e.endX=a-(r??t),e.endY=o-(i??n);break;case`circle`:e.x=a-t,e.y=o-n;break;case`rect`:e.x=a-t,e.y=o-n;break;case`text`:e.x=a-t,e.y=o-n;break;case`group`:e.x=a-t,e.y=o-n,this.moveGroup(e);break}},moveDown(){let e=this.currentTarget?.id||this.hoveredShapeId;if(!e)return;let t=this.shapes.find(t=>t.id===e);t&&this.move(t)},print(){this.isPrinting=!0,this.isDeleteMode=!1,this.isMoveMode=!1,this.isResizeMode=!1,this.isTextMode=!1,this.isWriting=!1,this.isSelectMode=!1,this.activeShape=void 0,this.showCaret=!1,this.$nextTick(async()=>{let e=this.$refs.drawSvgContainer;this.walkTheDOM(e,e=>{e&&e.nodeType===1&&(e.setAttribute(`font-family`,`Helvetica`),e.style.fontFamily=`Helvetica`)});try{let t;try{t=(await T(async()=>{let{default:e}=await import(`./D4wb-wdX.js`);return{default:e}},[],import.meta.url)).default}catch{throw Error(`jspdf is not installed. Run npm install jspdf`)}let n=await j({container:e,scale:2}),r=new Image;r.src=n,r.onload=()=>{let e={width:595.28,height:841.89},i=r.width,a=r.height,o=i/e.width*e.height,s=e.width,c=s/i*a,l=new t(``,`pt`,`a4`),u=0,d=a;if(d<o)l.addImage(n,`PNG`,0,0,s,c,``,`FAST`);else for(;d>0;)l.addImage(n,`PNG`,0,u,s,c,``,`FAST`),d-=o,u-=e.height,d>0&&l.addPage();l.save(`${new Date().toLocaleDateString()}_annotations.pdf`)}}catch(e){console.error(`Error generating image:`,e)}finally{this.isPrinting=!1,this.walkTheDOM(e,e=>{e&&e.nodeType===1&&(e.setAttribute(`font-family`,this.FINAL_CONFIG.style.fontFamily),e.style.fontFamily=this.FINAL_CONFIG.style.fontFamily)})}})},resetDraw(e){if(!this.isDeleteMode&&e&&(e.preventDefault(),e.stopPropagation()),this.isDrawing=!1,this.isMouseDown=!1,this.dragOffset=null,this.lastPointerId!=null){try{this.$refs.mainSvg?.releasePointerCapture?.(this.lastPointerId)}catch{}this.lastPointerId=null}this._rafId&&=(cancelAnimationFrame(this._rafId),null),this.isSelectMode&&this.groupShapes(),this.history?.end()},resize(){this.isDrawingNewShape=!1;let e=this.currentTarget.id;if(!e)return;this.isDrawing=!0;let t=this.shapes.find(t=>t.id===e);this.activeShape=t.type,this.shapes=this.shapes.filter(t=>t.id!==e),this.shapes.push(t),this.drawUp(!0)},setFillOfSelectedRect(){!this.lastSelectedShape||!this.lastSelectedShape.id.includes(`rect`)||(this.lastSelectedShape.isFilled=!this.lastSelectedShape.isFilled)},setFillOfSelectedCircle(){!this.lastSelectedShape||!this.lastSelectedShape.id.includes(`circle`)||(this.lastSelectedShape.isFilled=!this.lastSelectedShape.isFilled)},setColorOfSelectedShape(){this.lastSelectedShape&&(this.lastSelectedShape.color=this.copy(this.selectedColor),![`arrow`,`text`].includes(this.lastSelectedShape.id)&&(this.lastSelectedShape.alpha=this.copy(this.colorTransparency)))},setSelectedShapeToDash(){!this.lastSelectedShape||this.lastSelectedShape.type===`text`||(this.lastSelectedShape.isDash=this.copy(this.isDash))},setTransparencyOfSelectedShape(){!this.lastSelectedShape||[`arrow`,`text`].includes(this.lastSelectedShape.id)||(this.lastSelectedShape.alpha=this.copy(this.colorTransparency))},setStrokeWidthOfSelectedShape(){!this.lastSelectedShape||![`arrow`,`circle`,`rect`,`line`].includes(this.lastSelectedShape.type)||(this.lastSelectedShape.strokeWidth=this.copy(Math.abs(this.strokeSize)))},setCurrentStyleOfSelectedText(){!this.lastSelectedShape||this.lastSelectedShape.type!==`text`||(this.lastSelectedShape.isBold=this.copy(this.isBold),this.lastSelectedShape.isItalic=this.copy(this.isItalic),this.lastSelectedShape.isUnderline=this.copy(this.isUnderline),this.lastSelectedShape.fontSize=this.copy(this.textFont),this.lastSelectedShape.isBulletTextMode=this.copy(this.isBulletTextMode))},setPointer(e){e.preventDefault();let t=this.$refs.mainSvg.getBoundingClientRect(),n,r;e.touches&&e.touches.length>0?(n=e.touches[0].clientX,r=e.touches[0].clientY):(n=e.clientX,r=e.clientY),this.pointerPosition.x=(n-t.left)/t.width*this.svgWidth,this.pointerPosition.y=(r-t.top)/t.height*this.svgHeight},setShapeTo(e){if(this.showCaret=!1,this.deleteEmptyTextElement(),e===this.activeShape){this.activeShape=void 0,this.isDrawMode=!1;return}this.isDrawMode=!0,this.isDeleteMode=!1,this.isMoveMode=!1,this.isResizeMode=!1,this.isTextMode=!1,this.activeShape=e},toggleSummary(){this.isSummaryOpen=!this.isSummaryOpen,this.isSummaryOpen||(this.isMoveMode=!1,this.isResizeMode=!1,this.isTextMode=!1,this.isWriting=!1,this.activeShape=void 0,this.showCaret=!1,this.isDeleteMode=!1,this.isWriting=!1),this.$emit(`toggleOpenState`,{isOpen:this.isSummaryOpen})},walkTheDOM(e,t){for(t(e),e=e.firstChild;e;)this.walkTheDOM(e,t),e=e.nextSibling},save(){this.$emit(`saveAnnotations`,{shapes:this.shapes,lastSelectedShape:this.lastSelectedShape})}}},z={class:`vue-data-ui-component vue-ui-annotator`},B={"data-dom-to-png-ignore":``},V=[`disabled`],H=[`disabled`],U=[`disabled`],W=[`disabled`],G=[`disabled`],K=[`disabled`],q=[`disabled`],J=[`disabled`],Y=[`disabled`],X={class:`tool-selection`,style:{"margin-top":`6px`}},Z={viewBox:`0 0 12 12`,style:{width:`100%`}},Q=[`fill`],ne={key:0},re={class:`tool-input`},ie=[`checked`],ae={viewBox:`0 0 12 12`,style:{width:`100%`}},oe=[`fill`],se={key:1},ce={class:`tool-input`},le=[`checked`],ue={viewBox:`0 0 24 24`,style:{width:`100%`}},de=[`stroke`],fe={key:2},pe={style:{display:`flex`,"flex-direction":`column`,"align-items":`center`,"justify-content":`center`}},me={class:`tool-input`},he={key:3},ge={style:{display:`flex`,"flex-direction":`column`,"align-items":`center`,"justify-content":`center`}},_e={class:`tool-input`},ve={viewBox:`0 0 24 24`,height:`24`,width:`24`,style:{"margin-bottom":`-5px`,"margin-top":`-10px`}},ye=[`checked`],be={key:4},xe={style:{display:`flex`,"flex-direction":`column`,"align-items":`center`,"justify-content":`center`}},Se={class:`tool-input`},Ce={key:5},we={key:6},Te=[`disabled`],Ee={key:7},De=[`disabled`],Oe={key:8},ke={key:9},Ae={key:10},je={key:11},Me={style:{display:`flex`,"flex-direction":`column`,"align-items":`center`,"justify-content":`center`},class:`tooltip`},Ne={style:{display:`flex`,"flex-direction":`column`,"align-items":`start`,"justify-content":`center`}},Pe={class:`tool-input`,style:{"font-variant-numeric":`tabular-nums`}},$=[`id`],Fe=[`viewBox`,`width`,`height`],Ie=[`width`,`height`,`pointer-events`],Le=[`innerHTML`],Re=[`height`,`viewBox`,`width`],ze=[`cx`,`cy`];function Be(i,a,p,m,_,w){let T=e(`BaseIcon`),E=e(`TeleportedTooltip`),D=e(`ColorPicker`),O=e(`Accordion`);return o(),S(`div`,z,[C(`div`,B,[l(O,{config:{maxHeight:1e3,useCursorPointer:w.isCursorPointer,head:{backgroundColor:w.FINAL_CONFIG.style.backgroundColor,color:w.FINAL_CONFIG.style.color,iconColor:w.FINAL_CONFIG.style.color,iconSize:20,icon:_.isSummaryOpen?`close`:`annotator`,padding:`6px`},body:{backgroundColor:w.FINAL_CONFIG.style.backgroundColor,color:w.FINAL_CONFIG.style.color}},onToggle:w.toggleSummary},{title:h(({color:e})=>[C(`div`,{style:s({color:e})},c(w.FINAL_CONFIG.translations.title),5)]),content:h(({backgroundColor:e})=>[C(`div`,{class:`tool-selection`,style:s({backgroundColor:e})},[C(`button`,{disabled:_.shapes.length===0,style:s({background:_.isMoveMode?w.FINAL_CONFIG.style.buttons.controls.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:_.isMoveMode?w.FINAL_CONFIG.style.buttons.controls.selected.border:w.FINAL_CONFIG.style.buttons.controls.border,color:_.isMoveMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,"button-tool--selected":_.isMoveMode,tooltip:!0}),onClick:a[0]||=e=>{w.deleteEmptyTextElement(),_.isMoveMode=!_.isMoveMode,_.activeShape=void 0,_.isDeleteMode=!1,_.isDrawMode=!1,_.isResizeMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.showCaret=!1},onMouseenter:a[1]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`move`,e,`top`),onMouseleave:a[2]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[3]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`move`,e,`top`),onBlur:a[4]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`move`,stroke:_.isMoveMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`move`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipMove)+` `,1),a[150]||=C(`kbd`,null,`M`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],46,V),C(`button`,{disabled:_.shapes.length===0||_.activeShape===`line`,style:s({background:_.isResizeMode?w.FINAL_CONFIG.style.buttons.controls.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:_.isResizeMode?w.FINAL_CONFIG.style.buttons.controls.selected.border:w.FINAL_CONFIG.style.buttons.controls.border,color:_.isResizeMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,"button-tool--selected":_.isResizeMode,tooltip:!0}),onClick:a[5]||=e=>{w.deleteEmptyTextElement(),_.isResizeMode=!_.isResizeMode,_.isMoveMode=!1,_.isDeleteMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.activeShape=void 0,_.showCaret=!1},onMouseenter:a[6]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`resize`,e,`top`),onMouseleave:a[7]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[8]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`resize`,e,`top`),onBlur:a[9]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`resize`,stroke:_.isResizeMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`resize`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipResize)+` `,1),a[151]||=C(`kbd`,null,`R`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],46,H),C(`button`,{disabled:_.shapes.length===0,style:s({background:_.isDeleteMode?w.FINAL_CONFIG.style.buttons.controls.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:_.isDeleteMode?w.FINAL_CONFIG.style.buttons.controls.selected.border:w.FINAL_CONFIG.style.buttons.controls.border,color:_.isDeleteMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,"button-tool--selected":_.isDeleteMode,tooltip:!0}),onClick:a[10]||=e=>{w.deleteEmptyTextElement(),_.isDeleteMode=!_.isDeleteMode,_.isMoveMode=!1,_.isResizeMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.activeShape=void 0,_.showCaret=!1},onMouseenter:a[11]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`delete`,e,`top`),onMouseleave:a[12]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[13]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`delete`,e,`top`),onBlur:a[14]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`trash`,stroke:_.isDeleteMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`delete`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipDelete)+` `,1),a[152]||=C(`kbd`,null,`D`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],46,U),C(`button`,{disabled:!w.canSelect,style:s({background:_.isSelectMode?w.FINAL_CONFIG.style.buttons.controls.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:_.isSelectMode?w.FINAL_CONFIG.style.buttons.controls.selected.border:w.FINAL_CONFIG.style.buttons.controls.border,color:_.isSelectMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,"button-tool--selected":_.isSelectMode,tooltip:!0}),onClick:a[15]||=e=>{w.deleteEmptyTextElement(),w.setShapeTo(`group`),_.isSelectMode=!_.isSelectMode,_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isTextMode=!1,_.isWriting=!1,_.activeShape=`group`,_.showCaret=!1},onMouseenter:a[16]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`selectAndGroup`,e,`top`),onMouseleave:a[17]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[18]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`selectAndGroup`,e,`top`),onBlur:a[19]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`selectAndGroup`,stroke:_.isSelectMode?w.FINAL_CONFIG.style.buttons.controls.selected.color:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`selectAndGroup`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipGroup)+` `,1),a[153]||=C(`kbd`,null,`G`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],46,W),C(`button`,{disabled:_.shapes.length===0,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,tooltip:!0}),onClick:a[20]||=e=>{_.isResizeMode=!1,_.isMoveMode=!0,_.isDeleteMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.showCaret=!1,w.bringShapeTo(`front`)},onMouseenter:a[21]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`bringToFront`,e,`top`),onMouseleave:a[22]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[23]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`bringToFront`,e,`top`),onBlur:a[24]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`bringToFront`,stroke:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`bringToFront`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipBringToFront),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],44,G),C(`button`,{disabled:_.shapes.length===0,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,tooltip:!0}),onClick:a[25]||=e=>{_.isResizeMode=!1,_.isMoveMode=!0,_.isDeleteMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.showCaret=!1,w.bringShapeTo(`back`)},onMouseenter:a[26]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`bringToBack`,e,`top`),onMouseleave:a[27]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[28]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`bringToBack`,e,`top`),onBlur:a[29]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`bringToBack`,stroke:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`bringToBack`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipBringToBack),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],44,K),C(`button`,{disabled:_.shapes.length===0||_.activeShape===`line`,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,tooltip:!0}),onClick:a[30]||=e=>{w.deleteEmptyTextElement(),_.isResizeMode=!1,_.isMoveMode=!0,_.isDeleteMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.showCaret=!1,w.copyPaste()},onMouseenter:a[31]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`duplicate`,e,`top`),onMouseleave:a[32]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[33]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`duplicate`,e,`top`),onBlur:a[34]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`copy`,stroke:w.FINAL_CONFIG.style.buttons.controls.color,size:18},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`duplicate`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipDuplicate),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],44,q),C(`button`,{disabled:_._historySize.undo===0,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,"button-tool--one-shot":!0,tooltip:!0}),onClick:a[35]||=e=>{_.isResizeMode=!1,_.isMoveMode=!1,_.isDeleteMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.activeShape=void 0,_.showCaret=!1,w.undoLastShape()},onMouseenter:a[36]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`undoLast`,e,`top`),onMouseleave:a[37]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[38]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`undoLast`,e,`top`),onBlur:a[39]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`refresh`,stroke:w.FINAL_CONFIG.style.buttons.controls.color,size:20},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`undoLast`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipUndo)+` `,1),C(`kbd`,null,c(_.isMacLike?`⌘`:`Ctrl`),1),a[154]||=C(`kbd`,null,`Z`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],44,J),C(`button`,{disabled:_._historySize.redo===0,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,"button-tool--one-shot":!0,tooltip:!0}),onClick:a[40]||=e=>{_.isResizeMode=!1,_.isMoveMode=!1,_.isDeleteMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.isTextMode=!1,_.isWriting=!1,_.activeShape=void 0,_.showCaret=!1,w.redoLastShape()},onMouseenter:a[41]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`redoLast`,e,`top`),onMouseleave:a[42]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[43]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`redoLast`,e,`top`),onBlur:a[44]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`refresh`,stroke:w.FINAL_CONFIG.style.buttons.controls.color,size:20,style:{transform:`rotateX(0deg) rotateY(180deg)`}},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`redoLast`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipRedo)+` `,1),C(`kbd`,null,c(_.isMacLike?`⌘`:`Ctrl`),1),a[155]||=C(`kbd`,null,`Y`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],44,Y),w.FINAL_CONFIG.style.showPrint?(o(),S(`button`,{key:0,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,tooltip:!0}),onClick:a[45]||=(...e)=>w.print&&w.print(...e),onMouseenter:a[46]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`printPdf`,e,`top`),onMouseleave:a[47]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[48]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`printPdf`,e,`top`),onBlur:a[49]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`printer`,stroke:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`printPdf`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipPdf),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],36)):n(``,!0),w.FINAL_CONFIG.style.showImage?(o(),S(`button`,{key:1,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,tooltip:!0}),onClick:a[50]||=(...e)=>m.generateImage&&m.generateImage(...e),onMouseenter:a[51]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`printImage`,e,`top`),onMouseleave:a[52]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[53]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`printImage`,e,`top`),onBlur:a[54]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`image`,stroke:w.FINAL_CONFIG.style.buttons.controls.color,size:20},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`printImage`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipImage),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],36)):n(``,!0),w.FINAL_CONFIG.style.showSave&&i.$attrs.onSaveAnnotations?(o(),S(`button`,{key:2,style:s({background:w.FINAL_CONFIG.style.buttons.controls.backgroundColor,border:w.FINAL_CONFIG.style.buttons.controls.border,color:w.FINAL_CONFIG.style.buttons.controls.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),class:t({"button-tool":!0,tooltip:!0}),onClick:a[55]||=(...e)=>w.save&&w.save(...e),onMouseenter:a[56]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`saveAction`,e,`top`),onMouseleave:a[57]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[58]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`saveAction`,e,`top`),onBlur:a[59]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`save`,stroke:w.FINAL_CONFIG.style.buttons.controls.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`saveAction`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipSave),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],36)):n(``,!0)],4),C(`div`,X,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.activeShape===`circle`,tooltip:!0}),style:s({background:_.activeShape===`circle`?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.activeShape===`circle`?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.activeShape===`circle`?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[60]||=e=>{w.setShapeTo(`circle`),_.isSelectMode=!1},onMouseenter:a[61]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setCircle`,e,`top`),onMouseleave:a[62]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[63]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setCircle`,e,`top`),onBlur:a[64]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[(o(),S(`svg`,Z,[C(`circle`,{cx:6,cy:6,r:`4`,fill:_.options.circle.filled?(_.activeShape,_.selectedColor+w.colorTransparency):`none`,stroke:`currentColor`},null,8,Q)])),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setCircle`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeCircle)+` `,1),a[156]||=C(`kbd`,null,`C`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38),_.activeShape===`circle`?(o(),S(`div`,ne,[C(`label`,re,[r(c(w.FINAL_CONFIG.translations.filled)+` `,1),x(C(`input`,{type:`checkbox`,"onUpdate:modelValue":a[65]||=e=>_.options.circle.filled=e,onChange:a[66]||=(...e)=>w.setFillOfSelectedCircle&&w.setFillOfSelectedCircle(...e),checked:_.options.circle.filled,style:s({all:`revert`,appearance:`auto`,"-webkit-appearance":`auto`,accentColor:w.FINAL_CONFIG.style.color+` !important`})},null,44,ie),[[y,_.options.circle.filled]])])])):n(``,!0),C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.activeShape===`rect`,tooltip:!0}),style:s({background:_.activeShape===`rect`?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.activeShape===`rect`?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.activeShape===`rect`?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[67]||=e=>{w.setShapeTo(`rect`),_.isSelectMode=!1},onMouseenter:a[68]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setRect`,e,`top`),onMouseleave:a[69]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[70]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setRect`,e,`top`),onBlur:a[71]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[(o(),S(`svg`,ae,[C(`rect`,{x:`3`,y:`3`,style:{rx:`0 !important`,ry:`0 !important`},height:`6`,width:`6`,fill:_.options.rect.filled?(_.activeShape,_.selectedColor+w.colorTransparency):`none`,stroke:`currentColor`},null,8,oe)])),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setRect`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeRect)+` `,1),a[157]||=C(`kbd`,null,`S`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38),_.activeShape===`rect`?(o(),S(`div`,se,[C(`label`,ce,[r(c(w.FINAL_CONFIG.translations.filled)+` `,1),x(C(`input`,{type:`checkbox`,"onUpdate:modelValue":a[72]||=e=>_.options.rect.filled=e,onChange:a[73]||=(...e)=>w.setFillOfSelectedRect&&w.setFillOfSelectedRect(...e),checked:_.options.rect.filled,style:s({all:`revert`,appearance:`auto`,"-webkit-appearance":`auto`,accentColor:w.FINAL_CONFIG.style.color+` !important`})},null,44,le),[[y,_.options.rect.filled]])])])):n(``,!0),C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.activeShape===`arrow`,tooltip:!0}),style:s({background:_.activeShape===`arrow`?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.activeShape===`arrow`?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.activeShape===`arrow`?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[74]||=e=>{w.setShapeTo(`arrow`),_.isSelectMode=!1},onMouseenter:a[75]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setArrow`,e,`top`),onMouseleave:a[76]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[77]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setArrow`,e,`top`),onBlur:a[78]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[(o(),S(`svg`,ue,[C(`path`,{stroke:_.options.arrow.filled?_.activeShape===`arrow`?`white`:`grey`:`none`,"stroke-width":`2`,d:`M5,19 19,5 14,5 19,10.5 19,5`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},null,8,de)])),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setArrow`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeArrow)+` `,1),a[158]||=C(`kbd`,null,`A`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38),C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.activeShape===`line`,tooltip:!0}),style:s({background:_.activeShape===`line`?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.activeShape===`line`?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.activeShape===`line`?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[79]||=e=>{w.setShapeTo(`line`),_.isSelectMode=!1},onMouseenter:a[80]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setFreehand`,e,`top`),onMouseleave:a[81]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[82]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setFreehand`,e,`top`),onBlur:a[83]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[160]||=C(`svg`,{width:`80%`,viewBox:`0 0 24 24`,"stroke-width":`2`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M3 15c2 3 4 4 7 4s7 -3 7 -7s-3 -7 -6 -7s-5 1.5 -5 4s2 5 6 5s8.408 -2.453 10 -5`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setFreehand`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeFreehand)+` `,1),a[159]||=C(`kbd`,null,`L`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38),[`arrow`,`circle`,`rect`,`line`].includes(_.activeShape)?(o(),S(`div`,fe,[C(`div`,pe,[C(`label`,me,[r(c(w.FINAL_CONFIG.translations.thickness)+` `,1),x(C(`input`,{type:`number`,"onUpdate:modelValue":a[84]||=e=>_.strokeSize=e,onInput:a[85]||=(...e)=>w.setStrokeWidthOfSelectedShape&&w.setStrokeWidthOfSelectedShape(...e),min:1,style:{padding:`0 4px`,width:`40px`,border:`1px solid #dadada`,"border-radius":`3px`}},null,544),[[b,_.strokeSize]])])])])):n(``,!0),[`arrow`,`circle`,`rect`].includes(_.activeShape)?(o(),S(`div`,he,[C(`div`,ge,[C(`label`,_e,[r(c(w.FINAL_CONFIG.translations.dashedLines)+` `,1),(o(),S(`svg`,ve,[...a[161]||=[C(`line`,{x1:`0`,x2:`24`,y1:`12`,y2:`12`,"stroke-width":`2`,stroke:`black`,"stroke-dasharray":`3`},null,-1)]])),x(C(`input`,{name:`dashStyle`,type:`checkbox`,"onUpdate:modelValue":a[86]||=e=>_.isDash=e,onChange:a[87]||=(...e)=>w.setSelectedShapeToDash&&w.setSelectedShapeToDash(...e),checked:_.isDash,style:s({all:`revert`,appearance:`auto`,"-webkit-appearance":`auto`,accentColor:w.FINAL_CONFIG.style.color+` !important`})},null,44,ye),[[y,_.isDash]])])])])):n(``,!0),C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.isTextMode,tooltip:!0}),style:s({background:_.isTextMode?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.isTextMode?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.isTextMode?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[88]||=e=>{w.deleteEmptyTextElement(),_.isTextMode=!_.isTextMode,_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isSelectMode=!1,_.isDrawMode=!1,_.activeShape=void 0},onMouseenter:a[89]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setText`,e,`top`),onMouseleave:a[90]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[91]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setText`,e,`top`),onBlur:a[92]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(T,{name:`text`,stroke:_.isTextMode?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color},null,8,[`stroke`]),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setText`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeText)+` `,1),a[162]||=C(`kbd`,null,`T`,-1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38),_.isTextMode?(o(),S(`div`,be,[C(`div`,xe,[C(`label`,Se,[r(c(w.FINAL_CONFIG.translations.fontSize)+` `,1),x(C(`input`,{type:`number`,"onUpdate:modelValue":a[93]||=e=>_.textFont=e,onInput:a[94]||=(...e)=>w.setCurrentStyleOfSelectedText&&w.setCurrentStyleOfSelectedText(...e),style:{padding:`0 4px`,width:`40px`,border:`1px solid #dadada`,"border-radius":`3px`}},null,544),[[b,_.textFont]])])])])):n(``,!0),_.isTextMode?(o(),S(`div`,Ce,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.textAlign===`start`,tooltip:!0}),style:s({background:_.textAlign===`start`?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.textAlign===`start`?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.textAlign===`start`?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[95]||=e=>{_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.activeShape=void 0,_.textAlign=`start`,w.setSelectedTextAlignTo(`start`)},onMouseenter:a[96]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setAlignStart`,e,`top`),onMouseleave:a[97]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[98]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setAlignStart`,e,`top`),onBlur:a[99]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[163]||=C(`svg`,{width:`80%`,viewBox:`0 0 24 24`,"stroke-width":`2`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M4 6l16 0`}),C(`path`,{d:`M4 12l10 0`}),C(`path`,{d:`M4 18l14 0`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setAlignStart`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeTextLeft),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38)])):n(``,!0),_.isTextMode?(o(),S(`div`,we,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.textAlign===`middle`,tooltip:!0}),style:s({background:_.textAlign===`middle`?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.textAlign===`middle`?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.textAlign===`middle`?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),disabled:_.isBulletTextMode,onClick:a[100]||=e=>{_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.activeShape=void 0,_.textAlign=`middle`,w.setSelectedTextAlignTo(`middle`)},onMouseenter:a[101]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setAlignMiddle`,e,`top`),onMouseleave:a[102]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[103]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setAlignMiddle`,e,`top`),onBlur:a[104]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[164]||=C(`svg`,{width:`80%`,viewBox:`0 0 24 24`,"stroke-width":`2`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M4 6l16 0`}),C(`path`,{d:`M8 12l8 0`}),C(`path`,{d:`M6 18l12 0`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setAlignMiddle`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeTextCenter),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],46,Te)])):n(``,!0),_.isTextMode?(o(),S(`div`,Ee,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.textAlign===`end`,tooltip:!0}),style:s({background:_.textAlign===`end`?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.textAlign===`end`?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.textAlign===`end`?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),disabled:_.isBulletTextMode,onClick:a[105]||=e=>{_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.activeShape=void 0,_.textAlign=`end`,w.setSelectedTextAlignTo(`end`)},onMouseenter:a[106]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setAlignEnd`,e,`top`),onMouseleave:a[107]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[108]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setAlignEnd`,e,`top`),onBlur:a[109]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[165]||=C(`svg`,{width:`80%`,viewBox:`0 0 24 24`,"stroke-width":`2`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M4 6l16 0`}),C(`path`,{d:`M10 12l10 0`}),C(`path`,{d:`M6 18l14 0`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setAlignEnd`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeTextRight),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],46,De)])):n(``,!0),_.isTextMode?(o(),S(`div`,Oe,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.isBulletTextMode,tooltip:!0}),style:s({background:_.isBulletTextMode?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.isBulletTextMode?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.isBulletTextMode?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[110]||=e=>{_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.activeShape=void 0,_.isBulletTextMode=!_.isBulletTextMode,_.textAlign=`start`,w.setSelectedTextAlignTo(`start`),w.setCurrentStyleOfSelectedText()},onMouseenter:a[111]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setBulletMode`,e,`top`),onMouseleave:a[112]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[113]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setBulletMode`,e,`top`),onBlur:a[114]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[166]||=C(`svg`,{width:`100%`,viewBox:`0 0 24 24`,"stroke-width":`2`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M9 6l11 0`}),C(`path`,{d:`M9 12l11 0`}),C(`path`,{d:`M9 18l11 0`}),C(`path`,{d:`M5 6l0 .01`}),C(`path`,{d:`M5 12l0 .01`}),C(`path`,{d:`M5 18l0 .01`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setBulletMode`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeTextBullet),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38)])):n(``,!0),_.isTextMode?(o(),S(`div`,ke,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.isBold,tooltip:!0}),style:s({background:_.isBold?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.isBold?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.isBold?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[115]||=e=>{_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.activeShape=void 0,_.isBold=!_.isBold,w.setCurrentStyleOfSelectedText()},onMouseenter:a[116]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setBold`,e,`top`),onMouseleave:a[117]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[118]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setBold`,e,`top`),onBlur:a[119]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[167]||=C(`svg`,{width:`100%`,viewBox:`0 0 24 24`,"stroke-width":`3`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M7 5h6a3.5 3.5 0 0 1 0 7h-6z`}),C(`path`,{d:`M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setBold`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeTextBold),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38)])):n(``,!0),_.isTextMode?(o(),S(`div`,Ae,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.isItalic,tooltip:!0}),style:s({background:_.isItalic?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.isItalic?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.isItalic?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[120]||=e=>{_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.activeShape=void 0,_.isItalic=!_.isItalic,w.setCurrentStyleOfSelectedText()},onMouseenter:a[121]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setItalic`,e,`top`),onMouseleave:a[122]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[123]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setItalic`,e,`top`),onBlur:a[124]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[168]||=C(`svg`,{width:`100%`,height:`44`,viewBox:`0 0 24 24`,"stroke-width":`2`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M11 5l6 0`}),C(`path`,{d:`M7 19l6 0`}),C(`path`,{d:`M14 5l-4 14`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setItalic`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeTextItalic),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38)])):n(``,!0),_.isTextMode?(o(),S(`div`,je,[C(`button`,{class:t({"button-tool":!0,"button-tool--selected":_.isUnderline,tooltip:!0}),style:s({background:_.isUnderline?w.FINAL_CONFIG.style.buttons.shapes.selected.backgroundColor:w.FINAL_CONFIG.style.buttons.shapes.backgroundColor,border:_.isUnderline?w.FINAL_CONFIG.style.buttons.shapes.selected.border:w.FINAL_CONFIG.style.buttons.shapes.border,color:_.isUnderline?w.FINAL_CONFIG.style.buttons.shapes.selected.color:w.FINAL_CONFIG.style.buttons.shapes.color,borderRadius:`${w.FINAL_CONFIG.style.buttons.borderRadius}px`,cursor:w.isCursorPointer?`pointer`:`default`}),onClick:a[125]||=e=>{_.isDeleteMode=!1,_.isMoveMode=!1,_.isResizeMode=!1,_.isDrawMode=!1,_.isSelectMode=!1,_.activeShape=void 0,_.isUnderline=!_.isUnderline,w.setCurrentStyleOfSelectedText()},onMouseenter:a[126]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setUnderline`,e,`top`),onMouseleave:a[127]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[128]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setUnderline`,e,`top`),onBlur:a[129]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[a[169]||=C(`svg`,{width:`100%`,viewBox:`0 0 24 24`,"stroke-width":`2`,stroke:`currentColor`,fill:`none`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[C(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),C(`path`,{d:`M7 5v5a5 5 0 0 0 10 0v-5`}),C(`path`,{d:`M5 19h14`})],-1),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setUnderline`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeTextUnderline),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)],38)])):n(``,!0),C(`div`,Me,[C(`button`,{class:t({"button-tool":!0,tooltip:!0}),style:{borderRadius:`6px`},onMouseenter:a[131]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setColor`,e,`top`),onMouseleave:a[132]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e),onFocus:a[133]||=e=>w.FINAL_CONFIG.style.showTooltips&&w.showToolTipFor(`setColor`,e,`top`),onBlur:a[134]||=(...e)=>w.hideTooltip&&w.hideTooltip(...e)},[l(D,{value:_.selectedColor,"onUpdate:value":a[130]||=e=>_.selectedColor=e,backgroundColor:w.FINAL_CONFIG.style.backgroundColor,buttonBorderColor:w.FINAL_CONFIG.style.color,isCursorPointer:w.isCursorPointer,teleported:``},null,8,[`value`,`backgroundColor`,`buttonBorderColor`,`isCursorPointer`])],32),w.FINAL_CONFIG.style.showTooltips?(o(),d(E,{key:0,show:_.showTooltip&&_.tooltipKey===`setColor`,x:_.tooltipPos.x,y:_.tooltipPos.y-6,placement:`top`,styleObject:w.tooltipStyleObject},{default:h(()=>[r(c(w.FINAL_CONFIG.translations.tooltipShapeColor),1)]),_:1},8,[`show`,`x`,`y`,`styleObject`])):n(``,!0)]),C(`div`,Ne,[C(`label`,Pe,[r(c(w.FINAL_CONFIG.translations.colorAlpha)+`: `+c(_.transparency>98?100:_.transparency)+` % `,1),x(C(`input`,{name:`colorTransparency`,type:`range`,"onUpdate:modelValue":a[135]||=e=>_.transparency=e,onInput:a[136]||=(...e)=>w.setTransparencyOfSelectedShape&&w.setTransparencyOfSelectedShape(...e),min:0,max:100,style:s({width:`100%`,accentColor:w.FINAL_CONFIG.style.color+` !important`})},null,36),[[b,_.transparency]])])])])]),_:1},8,[`config`,`onToggle`])]),C(`div`,{class:`annotator annotator__wrapper`,ref:`drawSvgContainer`,style:{position:`relative`},id:m.uid,"data-annotator-content":``},[C(`div`,{class:`annotator__content-layer`,style:s(`${_.isSummaryOpen?`pointer-events: none;`:``}`)},[u(i.$slots,`default`,{},void 0,!0)],4),_.isSummaryOpen||w.FINAL_CONFIG.alwaysVisible?(o(),S(`svg`,{id:`annotatorSvg`,key:_.step,ref:`mainSvg`,class:t({annotator__overlay:!0,draw:!0,"draw--free":_.activeShape===`line`}),viewBox:`0 0 ${_.svgWidth} ${_.svgHeight}`,width:_.sourceWidth,height:_.sourceHeight,onPointerdown:a[142]||=e=>w.chooseAction(e),onPointerup:a[143]||=e=>w.resetDraw(e),onTouchend:a[144]||=e=>w.resetDraw(e),onTouchstart:a[145]||=e=>{w.setPointer(e),w.clickSvg(e)},onPointermove:a[146]||=e=>{w.setPointer(e),w.chooseMove(e)},onPointerout:a[147]||=e=>w.onPointerOut(e),onPointerover:a[148]||=e=>w.allowEditAndHoverShapes(e),onClick:a[149]||=e=>w.clickSvg(e),style:s({position:`absolute`,top:0,left:0,cursor:w.cursorClass,fontFamily:`Helvetica`,zIndex:1e8,pointerEvents:_.isSummaryOpen?`all`:`none`})},[C(`rect`,{class:`annotator__glass`,x:`0`,y:`0`,width:_.svgWidth,height:_.svgHeight,fill:`transparent`,"pointer-events":_.isSummaryOpen?`all`:`none`,style:{cursor:`inherit`},onPointerdown:a[137]||=v(e=>w.chooseAction(e),[`stop`,`prevent`]),onPointermove:a[138]||=v(e=>{w.setPointer(e),w.chooseMove(e)},[`stop`,`prevent`]),onPointerup:a[139]||=v((...e)=>w.resetDraw&&w.resetDraw(...e),[`stop`,`prevent`]),onClick:a[140]||=v(()=>{},[`stop`,`prevent`])},null,40,Ie),(o(!0),S(g,null,f(w.userShapes,e=>(o(),S(`g`,{key:e.id,innerHTML:e.html,onClick:a[141]||=e=>{w.clickShape(e),_.isMoveMode=!1}},null,8,Le))),128))],46,Fe)):n(``,!0),_.isPrinting||m.isImaging?(o(),S(`svg`,{key:1,style:{position:`absolute`,top:`0`,left:`0`},height:_.sourceHeight,viewBox:`0 0 ${_.svgWidth} ${_.svgHeight}`,width:_.sourceWidth,"data-dom-to-png-ignore":``},[C(`circle`,{class:`animated-circle-print`,cx:_.svgWidth/2,cy:_.svgHeight/2,r:`50`,stroke:`#6376DD`,"stroke-width":`10`,fill:`none`},null,8,ze)],8,Re)):n(``,!0)],8,$)])}var Ve=A(R,[[`render`,Be],[`__scopeId`,`data-v-68473b8d`]]);export{Ve as default};