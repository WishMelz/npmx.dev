import{C as e,Dt as t,G as n,H as r,J as i,M as a,Mt as o,O as s,Q as c,S as l,Z as u,_ as ee,b as d,f as te,jt as f,m as p,ot as m,p as h,st as g,ut as _,w as v,x as y,yt as b,z as x}from"./BLt7TXlb.js";import{St as S}from"./Cf-0F-2c.js";import{t as C}from"./CWNsAIol.js";import{t as w}from"./xh7dz5-d.js";import{t as T}from"./DuIAB7Tu.js";var E=[`onClick`],D={style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%,-46%)`}},O=[`value`],k=[`onClick`],A={style:{position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%,-46%)`}},ne=[`value`],j=C({__name:`ColorPicker`,props:{value:{type:String,default:`#ffffff`},size:{type:String,default:`50px`},backgroundColor:{type:String,default:`#FFFFFF`},buttonBorderColor:{type:String,default:`#FFFFFF`},teleported:{type:Boolean,default:!1},isCursorPointer:{type:Boolean,default:!1}},emits:[`update:value`],setup(C,{emit:j}){let M=C,N=j,P=b(null),F=b(null),I=b(null),L=b(!1),R=b(!1),z=b({top:0,left:0}),B=d(()=>({backgroundColor:M.value,width:`100%`,height:`100%`,cursor:M.isCursorPointer?`pointer`:`default`})),V=d(()=>S(M.value));function H(e){N(`update:value`,e),L.value=!1}function U(e){N(`update:value`,e.target.value)}function W(e){e?.stopPropagation?.(),R.value=!0,I.value?.click()}function G(){L.value=!1}function K(){!R.value&&L.value&&G()}async function q(){L.value=!L.value,L.value&&M.teleported&&(await x(),J())}function J(){if(!F.value)return;let e=F.value.getBoundingClientRect();z.value={top:e.top+36,left:e.right-48}}function Y(){L.value&&M.teleported&&J()}function X(){setTimeout(()=>R.value=!1,0)}g(e=>{let t=I.value;if(!t)return;let n=()=>X(),r=()=>X(),i=()=>{};t.addEventListener(`blur`,n),t.addEventListener(`change`,r),t.addEventListener(`input`,i),e(()=>{t.removeEventListener(`blur`,n),t.removeEventListener(`change`,r),t.removeEventListener(`input`,i)})});function Z(){X()}function Q(){document.visibilityState===`visible`&&X()}n(()=>{window.addEventListener(`scroll`,Y,{passive:!0}),window.addEventListener(`resize`,Y,{passive:!0}),window.addEventListener(`focus`,Z),document.addEventListener(`visibilitychange`,Q)}),r(()=>{window.removeEventListener(`scroll`,Y),window.removeEventListener(`resize`,Y),window.removeEventListener(`focus`,Z),document.removeEventListener(`visibilitychange`,Q)}),m(()=>M.value,e=>{I.value&&(I.value.value=e)});let $=b([`#000000`,`#FFFFFF`,`#FF5733`,`#33FF57`,`#3357FF`,`#FFC300`,`#800080`,`#FF1493`,`#00CED1`]);return(n,r)=>_((i(),v(`div`,{ref_key:`wrapperRef`,ref:P,onKeydown:te(K,[`esc`]),style:{height:`100%`,width:`100%`,position:`relative`}},[y(`button`,{ref_key:`buttonRef`,ref:F,class:`icon`,onClick:q,style:o(B.value),type:`button`},[c(n.$slots,`annotator-action-color`,f(a({color:V.value})),()=>[s(w,{name:`palette`,stroke:V.value,size:22},null,8,[`stroke`])],!0)],4),L.value&&!C.teleported?(i(),v(`div`,{key:0,tabindex:`0`,class:`vue-ui-color-picker`,style:o({backgroundColor:C.backgroundColor,position:`absolute`,left:`calc(100% + 30px)`,top:`50%`,transform:`translateY(-18%)`}),onMousedown:r[2]||=h(()=>{},[`stop`]),onClick:r[3]||=h(()=>{},[`stop`]),onTouchstart:r[4]||=h(()=>{},[`stop`])},[(i(!0),v(p,null,u($.value,e=>(i(),v(`button`,{key:e,class:`vue-ui-color-picker-option`,type:`button`,style:o({backgroundColor:e,outline:`1px solid ${C.buttonBorderColor}`,cursor:C.isCursorPointer?`pointer`:`default`}),onClick:()=>H(e)},null,12,E))),128)),y(`button`,{class:`vue-ui-color-picker-option`,type:`button`,style:o({backgroundColor:C.value,outline:`1px solid ${C.buttonBorderColor}`,cursor:C.isCursorPointer?`pointer`:`default`}),onClick:h(W,[`stop`]),onMousedown:r[0]||=h(()=>{},[`stop`]),onTouchstart:r[1]||=h(()=>{},[`stop`])},[y(`div`,D,[s(w,{name:`colorPicker`,stroke:V.value,size:22},null,8,[`stroke`])]),y(`input`,{ref_key:`colorInput`,ref:I,type:`color`,value:C.value,class:`hidden-input`,onInput:U},null,40,O)],36)],36)):e(``,!0),L.value&&C.teleported?(i(),l(ee,{key:1,to:`body`},[y(`div`,{tabindex:`0`,class:`vue-ui-color-picker`,style:o({backgroundColor:C.backgroundColor,position:`fixed`,top:z.value.top+`px`,left:z.value.left+`px`,zIndex:2147483647}),onMousedown:r[7]||=h(()=>{},[`stop`]),onClick:r[8]||=h(()=>{},[`stop`]),onTouchstart:r[9]||=h(()=>{},[`stop`])},[(i(!0),v(p,null,u($.value,e=>(i(),v(`button`,{key:e,class:`vue-ui-color-picker-option`,type:`button`,style:o({backgroundColor:e,outline:`1px solid ${C.buttonBorderColor}`,cursor:C.isCursorPointer?`pointer`:`default`}),onClick:()=>H(e)},null,12,k))),128)),y(`button`,{class:`vue-ui-color-picker-option`,type:`button`,style:o({backgroundColor:C.value,outline:`1px solid ${C.buttonBorderColor}`,cursor:C.isCursorPointer?`cursor`:`default`}),onClick:h(W,[`stop`]),onMousedown:r[5]||=h(()=>{},[`stop`]),onTouchstart:r[6]||=h(()=>{},[`stop`])},[y(`div`,A,[s(w,{name:`colorPicker`,stroke:V.value,size:22},null,8,[`stroke`])]),y(`input`,{ref_key:`colorInput`,ref:I,type:`color`,value:C.value,class:`hidden-input`,onInput:U},null,40,ne)],36)],36)])):e(``,!0)],32)),[[t(T),K]])}},[[`__scopeId`,`data-v-5fdacedc`]]);export{j as t};