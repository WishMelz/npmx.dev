import{$ as e,A as t,At as n,C as r,D as i,Dt as a,Et as o,J as s,L as c,Mt as l,Nt as u,O as d,Q as f,S as p,St as m,Z as h,at as g,b as _,ht as v,lt as y,m as b,n as x,ot as S,rt as ee,vt as C,w,x as T}from"./BLt7TXlb.js";import{B as E,b as D}from"./CreLCcZP.js";import{d as O}from"./Cr_GQgS6.js";import"./B2KNUzwv.js";import{n as k}from"./DZubR30v.js";import{a as A}from"./mPlC9-cP.js";import{o as j,t as M}from"./-B2-_an5.js";import{t as N}from"./CPwDbSjG.js";import{t as P}from"./Cend_Z8Q.js";import{t as F}from"./CdWQmgpE.js";import{t as I}from"./Bi22IuVY.js";import"./JOw9R0Rj.js";import{f as L,m as R,r as z}from"./Brdikwlz.js";import{t as B}from"./D8lKuWTY.js";import"./gZojCxWl.js";import{n as V,t as H}from"./BM5JPX0m.js";import{t as te}from"./Z_xnzAqw.js";import{t as U}from"./DQw8S1UI.js";import{S as W,_ as G,b as K,g as q,h as J,m as ne,t as re,v as Y,x as ie,y as ae}from"./DItnq-h4.js";import{n as oe,r as se,t as ce}from"./_U3EnTB4.js";import"./B_LT0yGC.js";import{t as le}from"./QmH1X8kf.js";import{t as ue}from"./HQH6yG0Z.js";import"./CAwcA5eI.js";import"./B5EGaAMl.js";const X=`__no_dependency__`,Z={DASH:`__display_dash__`,UP_TO_YOU:`__display_up_to_you__`};function de(e){let{t}=k(),{$npmRegistry:n}=O(),r=se(),i=oe(),a=ce(),s=_(()=>o(e)),c=m(new Map),l=_(()=>s.value.map(e=>c.value.get(e)??null)),u=m(`idle`),d=m(null),f=m(new Set),p=m(!1);async function h(e){if(e.length===0){u.value=`idle`;return}if(e.includes(`__no_dependency__`)&&!c.value.has(`__no_dependency__`)){let e=new Map(c.value);e.set(X,fe()),c.value=e}let t=e.filter(e=>e!==`__no_dependency__`&&!c.value.has(e));if(t.length===0){u.value=`success`;return}u.value=`pending`,d.value=null,f.value=new Set(t);try{let e=await Promise.all(t.map(async e=>{try{let{data:t}=await n(`/${U(e)}`),r=t[`dist-tags`]?.latest;if(!r)return null;let[i,a,o,s]=await Promise.all([$fetch(`https://api.npmjs.org/downloads/point/last-week/${U(e)}`).catch(()=>null),$fetch(`/api/registry/analysis/${U(e)}`).catch(()=>null),$fetch(`/api/registry/vulnerabilities/${U(e)}`).catch(()=>null),$fetch(`/api/social/likes/${U(e)}`).catch(()=>null)]),c=t.versions[r],l=c?.dist?.unpackedSize,u=W({name:t.name,bin:c?.bin,main:c?.main,module:c?.module,exports:c?.exports}),d=0,f={critical:0,high:0,moderate:0,low:0};if(o){let{total:e,...t}=o.totalCounts;d=e,f=t}return{package:{name:t.name,version:r,description:void 0},downloads:i?.downloads,packageSize:l,directDeps:c?ie(c):null,installSize:void 0,analysis:a??void 0,vulnerabilities:{count:d,severity:f},metadata:{license:typeof t.license==`object`&&`type`in t.license?t.license.type:t.license,lastUpdated:t.time?.[r],engines:a?.engines,deprecated:c?.deprecated},isBinaryOnly:u,totalLikes:s?.totalLikes}}catch{return null}})),r=new Map(c.value);for(let[n,i]of t.entries()){let t=e[n];t&&r.set(i,t)}c.value=r,f.value=new Set,u.value=`success`,p.value=!0,Promise.all(t.map(async e=>{try{let t=await $fetch(`/api/registry/install-size/${U(e)}`),n=c.value.get(e);if(n){let r=new Map(c.value);r.set(e,{...n,installSize:t}),c.value=r}}catch{}})).finally(()=>{p.value=!1})}catch(e){f.value=new Set,d.value=e,u.value=`error`}}S(s,e=>{h(e)},{immediate:!0});function g(e){return!l.value||l.value.length===0?[]:l.value.map(n=>n?me(e,n,r.value.format,i.value.format,a.format,t):null)}function v(e){return p.value?e===`installSize`||e===`totalDependencies`:!1}function y(e){let t=s.value[e];return t?f.value.has(t):!1}return{packagesData:C(l),status:C(u),error:C(d),getFacetValues:g,isFacetLoading:v,isColumnLoading:y}}function fe(){return{package:{name:X,version:``,description:void 0},isNoDependency:!0,downloads:void 0,totalLikes:void 0,packageSize:0,directDeps:0,installSize:{selfSize:0,totalSize:0,dependencyCount:0},analysis:void 0,vulnerabilities:void 0,metadata:{license:Z.DASH,lastUpdated:Z.UP_TO_YOU,engines:void 0,deprecated:void 0}}}function pe(e,t){switch(e){case Z.DASH:return{display:`–`,status:`neutral`};case Z.UP_TO_YOU:return{display:t(`compare.facets.values.up_to_you`),status:`good`};default:return null}}function me(e,t,n,r,i,a){let{isNoDependency:o}=t;switch(e){case`downloads`:return t.downloads===void 0?o?{raw:0,display:`–`,status:`neutral`}:null:{raw:t.downloads,display:r(t.downloads),status:`neutral`};case`totalLikes`:return t.totalLikes===void 0?null:{raw:t.totalLikes,display:r(t.totalLikes),status:`neutral`};case`packageSize`:return t.packageSize==null?null:{raw:t.packageSize,display:i(t.packageSize),status:t.packageSize>5*1024*1024?`warning`:`neutral`};case`installSize`:return t.installSize==null?null:{raw:t.installSize.totalSize,display:i(t.installSize.totalSize),status:t.installSize.totalSize>50*1024*1024?`warning`:`neutral`};case`moduleFormat`:{if(!t.analysis)return o?{raw:`up-to-you`,display:a(`compare.facets.values.up_to_you`),status:`good`}:null;let e=t.analysis.moduleFormat;return{raw:e,display:e===`dual`?`ESM + CJS`:e.toUpperCase(),status:e===`esm`||e===`dual`?`good`:`neutral`}}case`types`:{if(t.isBinaryOnly)return{raw:`binary`,display:`N/A`,status:`muted`,tooltip:a(`compare.facets.binary_only_tooltip`)};if(!t.analysis)return o?{raw:`up-to-you`,display:a(`compare.facets.values.up_to_you`),status:`good`}:null;let e=t.analysis.types;return{raw:e.kind,display:e.kind===`included`?a(`compare.facets.values.types_included`):e.kind===`@types`?`@types`:a(`compare.facets.values.types_none`),status:e.kind===`included`?`good`:e.kind===`@types`?`info`:`bad`}}case`engines`:{let e=t.metadata?.engines;return e?.node?{raw:e.node,display:`Node.js ${e.node}`,status:`neutral`}:o?{raw:`up-to-you`,display:a(`compare.facets.values.up_to_you`),status:`good`}:{raw:null,display:a(`compare.facets.values.any`),status:`neutral`}}case`vulnerabilities`:{if(!t.vulnerabilities)return o?{raw:`up-to-you`,display:a(`compare.facets.values.up_to_you`),status:`good`}:null;let e=t.vulnerabilities.count,n=t.vulnerabilities.severity;return{raw:e,display:e===0?a(`compare.facets.values.none`):a(`compare.facets.values.vulnerabilities_summary`,{count:e,critical:n.critical,high:n.high}),status:e===0?`good`:n.critical>0||n.high>0?`bad`:`warning`}}case`lastUpdated`:{let e=t.metadata?.lastUpdated,n=e?pe(e,a):null;if(n)return{raw:0,...n};if(!e)return null;let r=new Date(e);return{raw:r.getTime(),display:e,status:he(r)?`warning`:`neutral`,type:`date`}}case`license`:{let e=t.metadata?.license,n=e?pe(e,a):null;return n?{raw:null,...n}:e?{raw:e,display:e,status:`neutral`}:o?{raw:null,display:`–`,status:`neutral`}:{raw:null,display:a(`compare.facets.values.unknown`),status:`warning`}}case`dependencies`:{let e=t.directDeps;return e==null?null:{raw:e,display:n(e),status:e>10?`warning`:`neutral`}}case`deprecated`:{let e=!!t.metadata?.deprecated;return{raw:e,display:a(e?`compare.facets.values.deprecated`:`compare.facets.values.not_deprecated`),status:e?`bad`:`good`}}case`totalDependencies`:{if(!t.installSize)return null;let e=t.installSize.dependencyCount;return{raw:e,display:n(e),status:e>50?`warning`:`neutral`}}default:return null}}function he(e){return(new Date().getTime()-e.getTime())/(1e3*60*60*24*365)>2}var ge={class:`space-y-3`},_e={key:0,class:`flex flex-wrap gap-2`},ve={key:0,class:`text-sm text-accent italic flex items-center gap-1.5`},ye={class:`relative group flex items-center`},be={for:`package-search`,class:`sr-only`},xe={class:`text-sm text-accent italic flex items-center gap-2`},Se={class:`text-xs text-fg-muted truncate mt-0.5`},Ce={key:1,class:`px-4 py-3 text-sm text-fg-muted`},we={class:`font-mono text-sm text-fg block`},Te={key:0,class:`text-xs text-fg-muted truncate mt-0.5 w-full block`},Ee={class:`text-xs text-fg-subtle`},De={key:0},Q=5,Oe=t({__name:`PackageSelector`,props:c({max:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:[`update:modelValue`],setup(e){let t=ee(e,`modelValue`),o=e,c=_(()=>o.max??4),l=m(``),f=m(!1),C=m(-1),E=g(`listRef`),{searchProvider:D}=A(),{data:O,status:k}=le(l,D,{size:15}),j=_(()=>k.value===`pending`),F=new Set([`no dep`,`none`,`vanilla`,`diy`,`zero`,`nothing`,`0`,`don't`,`native`,`use the platform`]),I=_(()=>{if(t.value.includes(`__no_dependency__`))return!1;let e=l.value.toLowerCase().trim();return e?F.has(e):!1}),z=_(()=>O.value?.objects?O.value.objects.map(e=>({name:e.package.name,description:e.package.description})).filter(e=>!t.value.includes(e.name)):[]),B=_(()=>{let e=[];I.value&&e.push({type:`no-dependency`,name:X});for(let t of z.value)e.push({type:`package`,name:t.name});return e}),U=_(()=>I.value?1:0),W=se();function G(e){t.value.length>=c.value||t.value.includes(e)||(e===`__no_dependency__`?t.value=[...t.value,e]:t.value.includes(`__no_dependency__`)?t.value=[...t.value.filter(e=>e!==X),e,X]:t.value=[...t.value,e],l.value=``,C.value=-1)}function K(e){t.value=t.value.filter(t=>t!==e)}function q(e){let t=B.value,n=t.length;switch(e.key){case`ArrowDown`:if(e.preventDefault(),n===0)return;C.value<n-1?C.value++:C.value=0;break;case`ArrowUp`:if(e.preventDefault(),n===0)return;C.value>0?C.value--:C.value=n-1;break;case`PageDown`:if(e.preventDefault(),n===0)return;C.value===-1?C.value=Math.min(Q-1,n-1):C.value=Math.min(C.value+Q,n-1);break;case`PageUp`:if(e.preventDefault(),n===0)return;C.value=Math.max(C.value-Q,0);break;case`Enter`:{let r=l.value.trim();if(!r)return;if(e.preventDefault(),C.value>=0&&C.value<n){G(t[C.value].name);return}I.value?G(X):z.value.find(e=>e.name===r)&&G(r);break}case`Escape`:l.value=``,C.value=-1;break}}S(l,()=>{C.value=-1}),S(C,e=>{e>=0&&E.value&&E.value.querySelectorAll(`[data-navigable]`)[e]?.scrollIntoView({block:`nearest`})});let J=g(`containerRef`);return M(J,()=>{f.value=!1,C.value=-1}),(e,o)=>{let m=N,g=P,_=te,S=R;return s(),w(`div`,ge,[t.value.length>0?(s(),w(`div`,_e,[(s(!0),w(b,null,h(t.value,t=>(s(),p(_,{key:t},{default:y(()=>[t===a(`__no_dependency__`)?(s(),w(`span`,ve,[o[4]||=T(`span`,{class:`i-lucide:leaf w-3.5 h-3.5`,"aria-hidden":`true`},null,-1),i(` `+u(e.$t(`compare.no_dependency.label`)),1)])):(s(),p(m,{key:1,to:(`packageRoute`in e?e.packageRoute:a(L))(t),class:`text-sm`},{default:y(()=>[i(u(t),1)]),_:2},1032,[`to`])),d(g,{size:`small`,"aria-label":e.$t(`compare.selector.remove_package`,{package:t===a(`__no_dependency__`)?e.$t(`compare.no_dependency.label`):t}),onClick:e=>K(t),classicon:`i-lucide:x`},null,8,[`aria-label`,`onClick`])]),_:2},1024))),128))])):r(``,!0),t.value.length<a(c)?(s(),w(`div`,{key:1,ref_key:`containerRef`,ref:J,class:`relative`},[T(`div`,ye,[T(`label`,be,u(e.$t(`compare.selector.search_label`)),1),o[5]||=T(`span`,{class:`absolute inset-is-3 text-fg-subtle font-mono text-md pointer-events-none transition-colors duration-200 motion-reduce:transition-none [.group:hover:not(:focus-within)_&]:text-fg/80 group-focus-within:text-accent z-1`},` / `,-1),d(S,{id:`package-search`,modelValue:a(l),"onUpdate:modelValue":o[0]||=e=>v(l)?l.value=e:null,type:`text`,placeholder:t.value.length===0?e.$t(`compare.selector.search_first`):e.$t(`compare.selector.search_add`),"no-correct":``,size:`medium`,class:`w-full min-w-25 ps-7`,"aria-autocomplete":`list`,ref:`inputRef`,onFocus:o[1]||=e=>f.value=!0,onKeydown:q},null,8,[`modelValue`,`placeholder`])]),d(x,{"enter-active-class":`transition-opacity duration-150`,"enter-from-class":`opacity-0`,"leave-active-class":`transition-opacity duration-100`,"leave-from-class":`opacity-100`,"leave-to-class":`opacity-0`},{default:y(()=>[a(f)&&(a(B).length>0||a(j))?(s(),w(`div`,{key:0,ref_key:`listRef`,ref:E,class:`absolute top-full inset-x-0 mt-1 bg-bg-elevated border border-border rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto`},[a(I)?(s(),p(g,{key:0,"data-navigable":``,class:n([`block w-full text-start`,a(C)===0?`!bg-accent/15`:``]),"aria-label":e.$t(`compare.no_dependency.add_column`),onMouseenter:o[2]||=e=>C.value=0,onClick:o[3]||=e=>G(a(`__no_dependency__`))},{default:y(()=>[T(`span`,xe,[o[6]||=T(`span`,{class:`i-lucide:leaf w-4 h-4`,"aria-hidden":`true`},null,-1),i(` `+u(e.$t(`compare.no_dependency.typeahead_title`)),1)]),T(`span`,Se,u(e.$t(`compare.no_dependency.typeahead_description`)),1)]),_:1},8,[`class`,`aria-label`])):r(``,!0),a(j)&&a(B).length===0?(s(),w(`div`,Ce,u(e.$t(`compare.selector.searching`)),1)):r(``,!0),(s(!0),w(b,null,h(a(z),(t,i)=>(s(),p(g,{key:t.name,"data-navigable":``,class:n([`block w-full text-start`,a(C)===i+a(U)?`!bg-accent/15`:``]),onMouseenter:e=>C.value=i+a(U),onClick:e=>G(t.name)},{default:y(()=>[T(`span`,we,u(t.name),1),t.description?(s(),w(`span`,Te,u((`stripHtmlTags`in e?e.stripHtmlTags:a(V))((`decodeHtmlEntities`in e?e.decodeHtmlEntities:a(H))(t.description))),1)):r(``,!0)]),_:2},1032,[`class`,`onMouseenter`,`onClick`]))),128))],512)):r(``,!0)]),_:1})],512)):r(``,!0),T(`p`,Ee,[i(u(e.$t(`compare.selector.packages_selected`,{count:a(W).format(t.value.length),max:a(W).format(a(c))}))+` `,1),t.value.length<2?(s(),w(`span`,De,u(e.$t(`compare.selector.add_hint`)),1)):r(``,!0)])])}}}),ke=Object.assign(Oe,{__name:`ComparePackageSelector`}),Ae={class:`min-w-0 flex-1`},je={class:`font-medium`},Me={class:`text-xs mt-0.5 opacity-80`},Ne=t({__name:`ReplacementSuggestion`,props:{packageName:{},replacement:{},variant:{},showAction:{type:Boolean}},emits:[`addNoDep`],setup(e,{emit:t}){let o=e,c=t,l=_(()=>o.replacement.type!==`documented`||!o.replacement.docPath?null:`https://e18e.dev/docs/replacements/${o.replacement.docPath}.html`);return(t,o)=>{let d=P,f=N;return s(),w(`div`,{class:n([`flex items-start gap-2 px-3 py-2 rounded-lg text-sm`,e.variant===`nodep`?`bg-amber-500/10 border border-amber-600/30 text-amber-800 dark:text-amber-400`:`bg-blue-500/10 border border-blue-600/30 text-blue-700 dark:text-blue-400`])},[T(`span`,{class:n([`w-4 h-4 flex-shrink-0 mt-0.5`,e.variant===`nodep`?`i-lucide:lightbulb`:`i-lucide:info`])},null,2),T(`div`,Ae,[T(`p`,je,u(e.packageName)+`: `+u(t.$t(`package.replacement.title`)),1),T(`p`,Me,[e.replacement.type===`native`?(s(),w(b,{key:0},[i(u(t.$t(`package.replacement.native`,{replacement:e.replacement.replacement,nodeVersion:e.replacement.nodeVersion})),1)],64)):e.replacement.type===`simple`?(s(),w(b,{key:1},[i(u(t.$t(`package.replacement.simple`,{replacement:e.replacement.replacement,community:t.$t(`package.replacement.community`)})),1)],64)):e.replacement.type===`documented`?(s(),w(b,{key:2},[i(u(t.$t(`package.replacement.documented`,{community:t.$t(`package.replacement.community`)})),1)],64)):r(``,!0)])]),e.variant===`nodep`&&e.showAction!==!1?(s(),p(d,{key:0,size:`small`,"aria-label":t.$t(`compare.no_dependency.add_column`),onClick:o[0]||=e=>c(`addNoDep`)},{default:y(()=>[i(u(t.$t(`package.replacement.consider_no_dep`)),1)]),_:1},8,[`aria-label`])):a(l)?(s(),p(f,{key:1,to:a(l),variant:`button-secondary`,size:`small`},{default:y(()=>[i(u(t.$t(`package.replacement.learn_more`)),1)]),_:1},8,[`to`])):r(``,!0)],2)}}}),Pe=Object.assign(Ne,{__name:`CompareReplacementSuggestion`});function $(e=`facets`){let{t}=k(),n=_(()=>({downloads:{label:t(`compare.facets.items.downloads.label`),description:t(`compare.facets.items.downloads.description`)},totalLikes:{label:t(`compare.facets.items.totalLikes.label`),description:t(`compare.facets.items.totalLikes.description`)},packageSize:{label:t(`compare.facets.items.packageSize.label`),description:t(`compare.facets.items.packageSize.description`)},installSize:{label:t(`compare.facets.items.installSize.label`),description:t(`compare.facets.items.installSize.description`)},moduleFormat:{label:t(`compare.facets.items.moduleFormat.label`),description:t(`compare.facets.items.moduleFormat.description`)},types:{label:t(`compare.facets.items.types.label`),description:t(`compare.facets.items.types.description`)},engines:{label:t(`compare.facets.items.engines.label`),description:t(`compare.facets.items.engines.description`)},vulnerabilities:{label:t(`compare.facets.items.vulnerabilities.label`),description:t(`compare.facets.items.vulnerabilities.description`)},lastUpdated:{label:t(`compare.facets.items.lastUpdated.label`),description:t(`compare.facets.items.lastUpdated.description`)},license:{label:t(`compare.facets.items.license.label`),description:t(`compare.facets.items.license.description`)},dependencies:{label:t(`compare.facets.items.dependencies.label`),description:t(`compare.facets.items.dependencies.description`)},totalDependencies:{label:t(`compare.facets.items.totalDependencies.label`),description:t(`compare.facets.items.totalDependencies.description`)},deprecated:{label:t(`compare.facets.items.deprecated.label`),description:t(`compare.facets.items.deprecated.description`)}}));function r(e){return{id:e,...K[e],label:n.value[e].label,description:n.value[e].description}}let i=J(e,``,{mode:`replace`}),a=_({get(){if(!i.value)return Y;let e=i.value.split(`,`).map(e=>e.trim()).filter(e=>q.includes(e)&&!K[e].comingSoon);return e.length>0?e:Y},set(e){e.length===0||Fe(e,Y)?i.value=``:i.value=e.join(`,`)}}),o=_(()=>a.value.map(r));function s(e){return a.value.includes(e)}function c(e){let t=a.value;t.includes(e)?t.length>1&&(a.value=t.filter(t=>t!==e)):a.value=[...t,e]}function l(e){return q.filter(t=>{let n=K[t];return n.category===e&&!n.comingSoon})}function u(e){let t=l(e),n=a.value;a.value=[...new Set([...n,...t])]}function d(e){let t=l(e),n=a.value.filter(e=>!t.includes(e));n.length>0&&(a.value=n)}function f(){a.value=Y}function p(){a.value=[Y[0]]}let m=_(()=>a.value.length===Y.length),h=_(()=>a.value.length===1),g={performance:t(`compare.facets.categories.performance`),health:t(`compare.facets.categories.health`),compatibility:t(`compare.facets.categories.compatibility`),security:t(`compare.facets.categories.security`)};function v(e){return g[e]}return{selectedFacets:o,isFacetSelected:s,toggleFacet:c,selectCategory:u,deselectCategory:d,selectAll:f,deselectAll:p,isAllSelected:m,isNoneSelected:h,allFacets:q,getCategoryLabel:v,facetsByCategory:_(()=>{let e={};for(let t of G)e[t]=ae[t].map(r);return e}),categoryOrder:G}}function Fe(e,t){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>e===r[t])}var Ie=[`aria-label`],Le={class:`flex items-center gap-2 mb-2`},Re={class:`text-3xs text-fg-subtle uppercase tracking-wider`},ze={class:`flex items-center gap-1.5 flex-wrap`,role:`group`},Be={key:0,class:`text-4xs`},Ve=t({__name:`FacetSelector`,setup(e){let{isFacetSelected:t,toggleFacet:o,selectCategory:c,deselectCategory:l,facetsByCategory:f,categoryOrder:m,getCategoryLabel:g}=$();function _(e){let n=(f.value[e]??[]).filter(e=>!e.comingSoon);return n.length>0&&n.every(e=>t(e.id))}function v(e){let n=(f.value[e]??[]).filter(e=>!e.comingSoon);return n.length>0&&n.every(e=>!t(e.id))}return(e,x)=>{let S=P;return s(),w(`div`,{class:`space-y-3`,role:`group`,"aria-label":e.$t(`compare.facets.group_label`)},[(s(!0),w(b,null,h(a(m),m=>(s(),w(`div`,{key:m},[T(`div`,Le,[T(`span`,Re,u(a(g)(m)),1),d(S,{"aria-label":e.$t(`compare.facets.select_category`,{category:a(g)(m)}),"aria-pressed":_(m),disabled:_(m),onClick:e=>a(c)(m),size:`small`},{default:y(()=>[i(u(e.$t(`compare.facets.all`)),1)]),_:1},8,[`aria-label`,`aria-pressed`,`disabled`,`onClick`]),x[0]||=T(`span`,{class:`text-2xs text-fg-muted/40`},`/`,-1),d(S,{"aria-label":e.$t(`compare.facets.deselect_category`,{category:a(g)(m)}),"aria-pressed":v(m),disabled:v(m),onClick:e=>a(l)(m),size:`small`},{default:y(()=>[i(u(e.$t(`compare.facets.none`)),1)]),_:1},8,[`aria-label`,`aria-pressed`,`disabled`,`onClick`])]),T(`div`,ze,[(s(!0),w(b,null,h(a(f)[m],c=>(s(),p(S,{key:c.id,size:`small`,title:c.comingSoon?e.$t(`compare.facets.coming_soon`):c.description,disabled:c.comingSoon,"aria-pressed":a(t)(c.id),"aria-label":c.label,class:n([`gap-1 px-1.5 rounded transition-colors focus-visible:outline-accent/70`,c.comingSoon?`text-fg-subtle/50 bg-bg-subtle border-border-subtle cursor-not-allowed`:a(t)(c.id)?`text-fg-muted bg-bg-muted`:`text-fg-subtle bg-bg-subtle border-border-subtle hover:text-fg-muted hover:border-border`]),onClick:e=>!c.comingSoon&&a(o)(c.id),classicon:c.comingSoon?void 0:a(t)(c.id)?`i-lucide:check`:`i-lucide:plus`},{default:y(()=>[i(u(c.label)+` `,1),c.comingSoon?(s(),w(`span`,Be,`(`+u(e.$t(`compare.facets.coming_soon`))+`)`,1)):r(``,!0)]),_:2},1032,[`title`,`disabled`,`aria-pressed`,`aria-label`,`class`,`onClick`,`classicon`]))),128))])]))),128))],8,Ie)}}}),He=Object.assign(Ve,{__name:`CompareFacetSelector`}),Ue={class:`contents`},We={class:`comparison-label flex items-center gap-1.5 px-4 py-3 border-b border-border`},Ge={class:`text-xs text-fg-muted uppercase tracking-wider`},Ke={key:1,class:`i-svg-spinners:ring-resize w-4 h-4 text-fg-subtle`,"aria-hidden":`true`},qe={key:2,class:`text-fg-subtle text-sm`},Je=[`data-status`],Ye={key:1,dir:`auto`},Xe=[`data-status`],Ze={key:1,dir:`auto`},Qe=t({__name:`FacetRow`,props:{label:{},description:{},values:{},facetLoading:{type:Boolean},columnLoading:{},bar:{type:Boolean}},setup(e){let t=e,i=_(()=>t.values.every(e=>e==null||typeof e.raw==`number`)),o=_(()=>t.bar??i.value),c=_(()=>i.value?Math.max(...t.values.map(e=>typeof e?.raw==`number`?e.raw:0)):0);function d(e){return!i.value||!c.value||!e||typeof e.raw!=`number`?0:e.raw/c.value*100}function f(e,t=!1){if(t)switch(e){case`muted`:return`text-fg-subtle`;default:return`text-fg`}switch(e){case`good`:return`bg-emerald-400/20 px-3 py-0.5 rounded-xl`;case`info`:return`bg-blue-400/20 px-3 py-0.5 rounded-xl`;case`warning`:return`bg-amber-400/20 px-3 py-0.5 rounded-xl`;case`bad`:return`bg-red-400/20 px-3 py-0.5 rounded-xl`;case`muted`:return`text-fg-subtle`;default:return`text-fg`}}function m(e){switch(e){case`good`:return`bg-emerald-500/20`;case`info`:return`bg-blue-500/20`;case`warning`:return`bg-amber-500/20`;case`bad`:return`bg-red-500/20`;default:return`bg-fg/5`}}function g(e){return t.facetLoading||(t.columnLoading?.[e]??!1)}return(t,i)=>{let c=F,_=z;return s(),w(`div`,Ue,[T(`div`,We,[T(`span`,Ge,u(e.label),1),e.description?(s(),p(c,{key:0,text:e.description,position:`top`},{default:y(()=>[...i[0]||=[T(`span`,{class:`i-lucide:info w-3 h-3 text-fg-subtle cursor-help`,"aria-hidden":`true`},null,-1)]]),_:1},8,[`text`])):r(``,!0)]),(s(!0),w(b,null,h(e.values,(e,t)=>(s(),w(`div`,{key:t,class:`comparison-cell relative flex items-center justify-center px-4 py-3 border-b border-border`},[a(o)&&e&&d(e)>0?(s(),w(`div`,{key:0,class:n([`absolute inset-y-1 inset-is-1 rounded-sm transition-all duration-300`,m(e.status)]),style:l({width:`calc(${d(e)}% - 8px)`}),"aria-hidden":`true`},null,6)):r(``,!0),g(t)?(s(),w(`span`,Ke)):e?(s(),w(b,{key:3},[e.tooltip?(s(),p(c,{key:0,text:e.tooltip,position:`top`},{default:y(()=>[T(`span`,{class:n([`relative font-mono text-sm text-center tabular-nums cursor-help`,f(e.status,a(o)&&d(e)>0)]),"data-status":e.status},[e.type===`date`?(s(),p(_,{key:0,datetime:e.display,"date-style":`medium`},null,8,[`datetime`])):(s(),w(`span`,Ye,u(e.display),1))],10,Je)]),_:2},1032,[`text`])):(s(),w(`span`,{key:1,class:n([`relative font-mono text-sm text-center tabular-nums`,f(e.status,a(o)&&d(e)>0)]),"data-status":e.status},[e.type===`date`?(s(),p(_,{key:0,datetime:e.display,"date-style":`medium`},null,8,[`datetime`])):(s(),w(`span`,Ze,u(e.display),1))],10,Xe))],64)):(s(),w(`span`,qe,`-`))]))),128))])}}}),$e=Object.assign(Qe,{__name:`CompareFacetRow`}),et={class:`overflow-x-auto`},tt={class:`comparison-header`},nt={class:`inline-flex items-center gap-1.5 truncate`},rt=[`aria-label`],it={key:0,class:`comparison-cell comparison-cell-header comparison-cell-nodep`},at={class:`inline-flex items-center gap-1.5 text-sm font-medium text-accent italic truncate`},ot=[`aria-label`],st={class:`text-sm font-medium text-fg mb-1`},ct={class:`text-xs text-fg-muted`},lt=t({__name:`ComparisonGrid`,props:{columns:{},showNoDependency:{type:Boolean}},setup(t){let{t:o}=k(),c=t,m=_(()=>c.columns.length+(c.showNoDependency?1:0));function g(e){return e.replacement?[o(`package.replacement.title`),o(`package.replacement.learn_more_above`)].join(` `):``}return(c,_)=>{let v=N,x=F,S=e(`i18n-t`);return s(),w(`div`,et,[T(`div`,{class:n([`comparison-grid`,[a(m)===4?`min-w-[800px]`:`min-w-[600px]`,`columns-${a(m)}`]]),style:l({"--columns":a(m)})},[T(`div`,tt,[_[0]||=T(`div`,{class:`comparison-label`},null,-1),(s(!0),w(b,null,h(t.columns,e=>(s(),w(`div`,{key:e.name,class:`comparison-cell comparison-cell-header`},[T(`span`,nt,[d(v,{to:(`packageRoute`in c?c.packageRoute:a(L))(e.name,e.version),class:`text-sm truncate`,block:``,title:e.version?`${e.name}@${e.version}`:e.name},{default:y(()=>[i(u(e.name),1),e.version?(s(),w(b,{key:0},[i(`@`+u(e.version),1)],64)):r(``,!0)]),_:2},1032,[`to`,`title`]),e.replacement?(s(),p(x,{key:0,text:g(e),position:`bottom`},{default:y(()=>[T(`span`,{class:`i-lucide:lightbulb w-3.5 h-3.5 text-amber-500 shrink-0 cursor-help`,role:`img`,"aria-label":a(o)(`package.replacement.title`)},null,8,rt)]),_:1},8,[`text`])):r(``,!0)])]))),128)),t.showNoDependency?(s(),w(`div`,it,[T(`span`,at,[i(u(a(o)(`compare.no_dependency.label`))+` `,1),d(x,{interactive:``,position:`bottom`},{content:y(()=>[T(`p`,st,u(a(o)(`compare.no_dependency.tooltip_title`)),1),T(`p`,ct,[d(S,{keypath:`compare.no_dependency.tooltip_description`,tag:`span`},{link:y(()=>[d(v,{to:`https://e18e.dev/docs/replacements/`},{default:y(()=>[i(u(a(o)(`compare.no_dependency.e18e_community`)),1)]),_:1})]),_:1})])]),default:y(()=>[T(`span`,{class:`i-lucide:lightbulb w-3.5 h-3.5 text-amber-500 shrink-0 cursor-help`,role:`img`,"aria-label":a(o)(`compare.no_dependency.tooltip_title`)},null,8,ot)]),_:1})])])):r(``,!0)]),f(c.$slots,`default`,{},void 0,!0)],6)])}}}),ut=Object.assign(I(lt,[[`__scopeId`,`data-v-ae4b1009`]]),{__name:`CompareComparisonGrid`}),dt={class:`border border-border rounded-lg overflow-hidden`},ft={class:`flex items-center gap-1.5 px-3 py-2 bg-bg-subtle border-b border-border`},pt={class:`text-xs text-fg-muted uppercase tracking-wider font-medium`},mt=[`title`],ht={class:`divide-y divide-border`},gt=[`title`],_t={class:`relative min-w-0 text-end`},vt={key:0,class:`i-svg-spinners:ring-resize w-4 h-4 text-fg-subtle`,"aria-hidden":`true`},yt={key:1,class:`text-fg-subtle text-sm`},bt={key:1,dir:`auto`},xt=t({__name:`FacetCard`,props:{label:{},description:{},values:{},facetLoading:{type:Boolean},columnLoading:{},bar:{type:Boolean},headers:{}},setup(e){let t=e,i=_(()=>t.values.every(e=>e==null||typeof e.raw==`number`)),o=_(()=>t.bar??i.value),c=_(()=>i.value?Math.max(...t.values.map(e=>typeof e?.raw==`number`?e.raw:0)):0);function d(e){return!i.value||!c.value||!e||typeof e.raw!=`number`?0:e.raw/c.value*100}function f(e){switch(e){case`good`:return`text-emerald-400`;case`info`:return`text-blue-400`;case`warning`:return`text-amber-400`;case`bad`:return`text-red-400`;default:return`text-fg`}}function m(e){return t.facetLoading||(t.columnLoading?.[e]??!1)}function g(e){let t=e.lastIndexOf(`@`);return t>0?e.substring(0,t):e}return(t,i)=>{let c=F,_=z;return s(),w(`div`,dt,[T(`div`,ft,[T(`span`,pt,u(e.label),1),e.description?(s(),p(c,{key:0,text:e.description,position:`top`},{default:y(()=>[T(`span`,{class:`i-lucide:info w-3 h-3 text-fg-subtle`,title:e.description,"aria-hidden":`true`},null,8,mt)]),_:1},8,[`text`])):r(``,!0)]),T(`div`,ht,[(s(!0),w(b,null,h(e.values,(t,i)=>(s(),w(`div`,{key:i,class:`relative flex items-center justify-between gap-2 px-3 py-2`},[a(o)&&t&&d(t)>0?(s(),w(`div`,{key:0,class:`absolute inset-y-0 inset-is-0 bg-fg/5 transition-all duration-300`,style:l({width:`${d(t)}%`}),"aria-hidden":`true`},null,4)):r(``,!0),T(`span`,{class:`relative font-mono text-xs text-fg-muted truncate flex-shrink-0`,title:e.headers[i]},u(g(e.headers[i]??``)),9,gt),T(`span`,_t,[m(i)?(s(),w(`span`,vt)):t?(s(),w(`span`,{key:2,class:n([`font-mono text-sm tabular-nums`,f(t.status)])},[t.type===`date`?(s(),p(_,{key:0,datetime:t.display,"date-style":`medium`},null,8,[`datetime`])):(s(),w(`span`,bt,u(t.display),1))],2)):(s(),w(`span`,yt,`-`))])]))),128))])])}}}),St=Object.assign(xt,{__name:`CompareFacetCard`}),Ct={class:`font-mono`},wt=t({__name:`LineChart`,props:{packages:{}},setup(e){return(t,n)=>(s(),w(`div`,Ct,[d(re,{"package-names":e.packages,"in-modal":!1,"show-facet-selector":``},null,8,[`package-names`])]))}}),Tt=Object.assign(wt,{__name:`CompareLineChart`}),Et=[`native`,`simple`],Dt=[`documented`];function Ot(e){let t=_(()=>o(e)),n=m(new Map),r=m(!1);async function i(e){if(e.length===0)return;let t=e.filter(e=>!n.value.has(e));if(t.length!==0){r.value=!0;try{let e=await Promise.all(t.map(async e=>{try{return{name:e,replacement:await $fetch(`/api/replacements/${e}`)}}catch{return{name:e,replacement:null}}})),r=new Map(n.value);for(let{name:t,replacement:n}of e)r.set(t,n);n.value=r}finally{r.value=!1}}}S(t,e=>{i(e)},{immediate:!0});let a=_(()=>{let e=[];for(let r of t.value){let t=n.value.get(r);t&&e.push({forPackage:r,replacement:t})}return e}),s=_(()=>a.value.filter(e=>Et.includes(e.replacement.type))),c=_(()=>a.value.filter(e=>Dt.includes(e.replacement.type)));return{replacements:C(n),noDepSuggestions:C(s),infoSuggestions:C(c),loading:C(r)}}var kt={class:`container flex-1 py-12 sm:py-16 w-full`},At={class:`max-w-2xl mx-auto`},jt={class:`mb-12`},Mt={class:`flex items-baseline justify-between gap-4 mb-4`},Nt={class:`font-mono text-3xl sm:text-4xl font-medium`},Pt={class:`hidden sm:inline`},Ft={class:`text-fg-muted text-lg`},It={class:`mb-8`,"aria-labelledby":`packages-heading`},Lt={id:`packages-heading`,class:`text-xs text-fg-subtle uppercase tracking-wider mb-3`},Rt={key:0,class:`mt-3 space-y-2`},zt={key:1,class:`mt-3 space-y-2`},Bt={class:`mb-8`,"aria-labelledby":`facets-heading`},Vt={class:`flex items-center gap-2 mb-3`},Ht={id:`facets-heading`,class:`text-xs text-fg-subtle uppercase tracking-wider`},Ut={key:0,class:`mt-10`,"aria-labelledby":`comparison-heading`},Wt={id:`comparison-heading`,class:`text-xs text-fg-subtle uppercase tracking-wider`},Gt={key:1,id:`comparison-heading`,class:`text-xs text-fg-subtle uppercase tracking-wider mb-4`},Kt={key:2,class:`flex items-center justify-center py-12`},qt={key:3},Jt={class:`hidden md:block overflow-x-auto`},Yt={class:`md:hidden space-y-3`},Xt={id:`trends-comparison-heading`,class:`text-xs text-fg-subtle uppercase tracking-wider mb-4 mt-10`},Zt={key:4,class:`text-center py-12`,role:`alert`},Qt={class:`text-fg-muted`},$t={key:5,class:`flex items-center justify-center py-12`},en={key:1,class:`text-center px-1.5 py-16 border border-dashed border-border-hover rounded-lg`},tn={class:`font-mono text-lg text-fg-muted mb-2`},nn={class:`text-sm text-fg-subtle max-w-md mx-auto`},rn=t({__name:`compare`,setup(e){let{t}=k(),{locale:n}=k(),o=E(),c=B(),{copied:l,copy:f}=j({copiedDuring:2e3}),m=J(`packages`,``,{mode:`replace`}),g=_({get(){return m.value?m.value.split(`,`).map(e=>e.trim()).filter(e=>e.length>0).slice(0,4):[]},set(e){m.value=e.length>0?e.join(`,`):``}}),{selectedFacets:x,selectAll:S,deselectAll:ee,isAllSelected:C,isNoneSelected:O}=$(),{packagesData:A,status:M,getFacetValues:N,isFacetLoading:F,isColumnLoading:I}=de(g),{noDepSuggestions:L,infoSuggestions:R,replacements:z}=Ot(g),V=_(()=>g.value.includes(X)),H=_(()=>g.value.map((e,t)=>({pkg:e,originalIndex:t})).filter(({pkg:e})=>e!==X).map(({pkg:e,originalIndex:t})=>{let n=A.value?.[t];return{name:n?.package.name||e,version:n?.package.version,replacement:z.value.get(e)??null}})),te=_(()=>g.value.length<4&&!g.value.includes(`__no_dependency__`));function U(){g.value.length>=4||g.value.includes(`__no_dependency__`)||(g.value=[...g.value,X])}let W=_(()=>g.value.map((e,t)=>I(t))),G=_(()=>g.value.length>=2),K=_(()=>H.value.map(e=>e.version?`${e.name}@${e.version}`:e.name));function q(){let e=[],r=[``,...K.value,...V.value?[t(`compare.no_dependency.label`)]:[]];e.push(r);let i=r.map(e=>e.length);x.value.forEach((t,r)=>{let a=t.label,o=N(t.id);e.push([a,...o.map(e=>e?.type===`date`?new Date(e.display).toLocaleDateString(n.value,{year:`numeric`,month:`short`,day:`numeric`}):e?.display||``)]),e?.[r+1]?.forEach((e,t)=>{e.length>(i?.[t]||0)&&(i[t]=e.length)})}),f(e.reduce((e,t,n)=>(e+=`| ${t.map((e,t)=>e.padEnd(i[t]||0,` `).replace(/\|/g,`ǀ`)).join(` | `)} |`,n===0&&(e+=`
|`,i.forEach(t=>e+=` ${`-`.padEnd(t,`-`)} |`)),e+=`
`,e),``))}return D({title:()=>g.value.length>0?t(`compare.packages.meta_title`,{packages:g.value.join(` vs `)}):t(`compare.packages.meta_title_empty`),ogTitle:()=>g.value.length>0?t(`compare.packages.meta_title`,{packages:g.value.join(` vs `)}):t(`compare.packages.meta_title_empty`),twitterTitle:()=>g.value.length>0?t(`compare.packages.meta_title`,{packages:g.value.join(` vs `)}):t(`compare.packages.meta_title_empty`),description:()=>g.value.length>0?t(`compare.packages.meta_description`,{packages:g.value.join(`, `)}):t(`compare.packages.meta_description_empty`),ogDescription:()=>g.value.length>0?t(`compare.packages.meta_description`,{packages:g.value.join(`, `)}):t(`compare.packages.meta_description_empty`),twitterDescription:()=>g.value.length>0?t(`compare.packages.meta_description`,{packages:g.value.join(`, `)}):t(`compare.packages.meta_description_empty`)}),(e,n)=>{let f=ke,m=Pe,_=P,E=He,D=ne,k=ue,j=$e,I=ut,z=St,B=Tt;return s(),w(`main`,kt,[T(`div`,At,[T(`header`,jt,[T(`div`,Mt,[T(`h1`,Nt,u(a(t)(`compare.packages.title`)),1),a(c)?(s(),w(`button`,{key:0,type:`button`,class:`cursor-pointer inline-flex items-center gap-2 font-mono text-sm text-fg-muted hover:text-fg transition-colors duration-200 rounded focus-visible:outline-accent/70 shrink-0`,onClick:n[0]||=e=>a(o).back()},[n[2]||=T(`span`,{class:`i-lucide:arrow-left rtl-flip w-4 h-4`,"aria-hidden":`true`},null,-1),T(`span`,Pt,u(a(t)(`nav.back`)),1)])):r(``,!0)]),T(`p`,Ft,u(a(t)(`compare.packages.tagline`)),1)]),T(`section`,It,[T(`h2`,Lt,u(a(t)(`compare.packages.section_packages`)),1),d(f,{modelValue:a(g),"onUpdate:modelValue":n[1]||=e=>v(g)?g.value=e:null,max:4},null,8,[`modelValue`]),a(L).length>0?(s(),w(`div`,Rt,[(s(!0),w(b,null,h(a(L),e=>(s(),p(m,{key:e.forPackage,"package-name":e.forPackage,replacement:e.replacement,variant:`nodep`,"show-action":a(te),onAddNoDep:U},null,8,[`package-name`,`replacement`,`show-action`]))),128))])):r(``,!0),a(R).length>0?(s(),w(`div`,zt,[(s(!0),w(b,null,h(a(R),e=>(s(),p(m,{key:e.forPackage,"package-name":e.forPackage,replacement:e.replacement,variant:`info`},null,8,[`package-name`,`replacement`]))),128))])):r(``,!0)]),T(`section`,Bt,[T(`div`,Vt,[T(`h2`,Ht,u(a(t)(`compare.packages.section_facets`)),1),d(_,{size:`small`,"aria-pressed":a(C),disabled:a(C),"aria-label":a(t)(`compare.facets.select_all`),onClick:a(S)},{default:y(()=>[i(u(a(t)(`compare.facets.all`)),1)]),_:1},8,[`aria-pressed`,`disabled`,`aria-label`,`onClick`]),n[3]||=T(`span`,{class:`text-3xs text-fg-muted/40`,"aria-hidden":`true`},`/`,-1),d(_,{size:`small`,"aria-pressed":a(O),disabled:a(O),"aria-label":a(t)(`compare.facets.deselect_all`),onClick:a(ee)},{default:y(()=>[i(u(a(t)(`compare.facets.none`)),1)]),_:1},8,[`aria-pressed`,`disabled`,`aria-label`,`onClick`])]),d(E)]),a(G)?(s(),w(`section`,Ut,[a(A)&&a(A).some(e=>e!==null)?(s(),p(D,{key:0,copied:a(l),"copy-text":a(t)(`compare.packages.copy_as_markdown`),class:`mb-4`,"button-attrs":{class:`hidden md:inline-flex`},onClick:q},{default:y(()=>[T(`h2`,Wt,u(a(t)(`compare.packages.section_comparison`)),1)]),_:1},8,[`copied`,`copy-text`])):(s(),w(`h2`,Gt,u(a(t)(`compare.packages.section_comparison`)),1)),(a(M)===`pending`||a(M)===`idle`)&&(!a(A)||a(A).every(e=>e===null))?(s(),w(`div`,Kt,[d(k,{text:a(t)(`compare.packages.loading`)},null,8,[`text`])])):a(A)&&a(A).some(e=>e!==null)?(s(),w(`div`,qt,[T(`div`,Jt,[d(I,{columns:a(H),"show-no-dependency":a(V)},{default:y(()=>[(s(!0),w(b,null,h(a(x),e=>(s(),p(j,{key:e.id,label:e.label,description:e.description,values:a(N)(e.id),"facet-loading":a(F)(e.id),"column-loading":a(W),bar:e.id!==`lastUpdated`,headers:a(K)},null,8,[`label`,`description`,`values`,`facet-loading`,`column-loading`,`bar`,`headers`]))),128))]),_:1},8,[`columns`,`show-no-dependency`])]),T(`div`,Yt,[(s(!0),w(b,null,h(a(x),e=>(s(),p(z,{key:e.id,label:e.label,description:e.description,values:a(N)(e.id),"facet-loading":a(F)(e.id),"column-loading":a(W),bar:e.id!==`lastUpdated`,headers:a(K)},null,8,[`label`,`description`,`values`,`facet-loading`,`column-loading`,`bar`,`headers`]))),128))]),T(`h2`,Xt,u(a(t)(`compare.facets.trends.title`)),1),d(B,{packages:a(g).filter(e=>e!==a(X))},null,8,[`packages`])])):a(M)===`error`?(s(),w(`div`,Zt,[T(`p`,Qt,u(a(t)(`compare.packages.error`)),1)])):(s(),w(`div`,$t,[d(k,{text:a(t)(`compare.packages.loading`)},null,8,[`text`])]))])):(s(),w(`section`,en,[n[4]||=T(`div`,{class:`i-lucide:git-compare w-12 h-12 text-fg-subtle mx-auto mb-4`,"aria-hidden":`true`},null,-1),T(`h2`,tn,u(a(t)(`compare.packages.empty_title`)),1),T(`p`,nn,u(a(t)(`compare.packages.empty_description`)),1)]))])])}}});export{rn as default};