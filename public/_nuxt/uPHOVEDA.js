const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CbFHGlY2.js","./BLt7TXlb.js","./Cf-0F-2c.js","./DHC76net.js","./xh7dz5-d.js","./CWNsAIol.js","./BDmUravP.js","./D7-tWLRc.js","./DuIAB7Tu.js","./DdyLBgN8.js","./C66xQW7K.js","./CBD7ngdF.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,Dt as n,G as r,H as i,J as a,M as o,Mt as s,Nt as c,O as l,Q as u,R as d,S as f,T as p,Tt as m,Z as h,b as g,jt as _,k as ee,lt as v,m as y,ot as b,w as x,x as S,yt as C,z as w}from"./BLt7TXlb.js";import{t as T}from"./YZkb6lnT.js";import{F as te,Nt as ne,P as re,_t as ie,bt as ae}from"./Cf-0F-2c.js";import{n as oe,t as se}from"./8DvoFuCx.js";import{t as ce}from"./Cme7ewGR.js";import{t as le}from"./CWNsAIol.js";import{n as ue,t as de}from"./D4ushAer.js";import{t as fe}from"./CLl0-3D6.js";import{t as pe}from"./BwaPX4qL.js";import{t as me}from"./BDmUravP.js";import{t as he}from"./BIZzPpPz.js";import{a as ge,n as _e}from"./D4v1zV2y.js";import{t as ve}from"./BEpjx3T_.js";import{t as ye}from"./DMqKe8aR.js";import{t as be}from"./BbYzlGL7.js";import{t as xe}from"./jf4h7JaU.js";import{t as Se}from"./BcBm8YDr.js";var Ce={userOptions:{show:!1}},we={userOptions:{show:!1},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,controls:{backgroundColor:`#2A2A2A`,buttonColor:`#2A2A2A`,color:`#CCCCCC`,border:`1px solid #4A4A4A`},territory:{fill:`#2A2A2A`,stroke:`#5A5A5A`,hover:{fill:`#3A3A3A`,stroke:`#6A6A6A`}},points:{stroke:`#1A1A1A`,fill:`#CCCCCC`,labels:{color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#3A3A3A`}}}},Te={style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,controls:{backgroundColor:`#2A2A2A`,buttonColor:`#2A2A2A`,color:`#CCCCCC`,border:`1px solid #4A4A4A`},territory:{fill:`#2A2A2A`,stroke:`#5A5A5A`,hover:{fill:`#3A3A3A`,stroke:`#6A6A6A`}},points:{stroke:`#1A1A1A`,fill:`#CCCCCC`,labels:{color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#5A5A5A`}}}},Ee={style:{chart:{backgroundColor:`#FFF8E1`,color:`#424242`,controls:{backgroundColor:`#FFF8E1`,buttonColor:`#FFF8E1`,color:`#424242`,border:`1px solid #d9bbb2`},title:{color:`#424242`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#FFECB3`,backgroundOpacity:30,color:`#424242`,borderColor:`#FF8A65`},territory:{fill:`#e3dcc8`,stroke:`#f7c0b0`,hover:{fill:`#FFECB3`,stroke:`#FF8A65`}},points:{stroke:`#FFF8E1`,fill:`#424242`,labels:{color:`#424242`}}}}},De={style:{chart:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,controls:{backgroundColor:`#1E1E1E`,buttonColor:`#1E1E1E`,color:`#BDBDBD`,border:`1px solid #3A3A3A`},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}},tooltip:{backgroundColor:`#1E1E1E`,backgroundOpacity:30,color:`#FFF8E1`,borderColor:`#FF8A65`},territory:{fill:`#2A1E1E`,stroke:`#6e483c`,hover:{fill:`#403e39`,stroke:`#805244`}},points:{stroke:`#1E1E1E`,fill:`#BDBDBD`,labels:{color:`#BDBDBD`}}}}},Oe={style:{chart:{backgroundColor:`#fbfafa`,color:`#8A9892`,controls:{backgroundColor:`#fbfafa`,buttonColor:`#fbfafa`,color:`#99AA99`,border:`1px solid #ebded3`},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#fbfafa`,color:`#8A9892`},territory:{fill:`#e6e2df`,stroke:`#fbfafa`,hover:{fill:`#dbd5d0`,stroke:`#fbfafa`}},points:{stroke:`#fbfafa`,fill:`#8A9892`,labels:{color:`#8A9892`}}}}},E={style:{chart:{backgroundColor:`#1A1A1A`,color:`#99AA99`,controls:{backgroundColor:`#1A1A1A`,buttonColor:`#1A1A1A`,color:`#99AA99`,border:`1px solid #1e361e`},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#2A2F2A`,color:`#AACCAA`,borderColor:`#66CC66`},territory:{fill:`#1A1F1A`,stroke:`#2c5c2c`,hover:{fill:`#3A3A3A`,stroke:`#66CC66`}},points:{stroke:`#2c5c2c`,fill:`#66CC66`,labels:{color:`#99AA99`}}}}},ke={style:{chart:{backgroundColor:`#f6f6fb`,color:`#50606C`,controls:{backgroundColor:`#f6f6fb`,buttonColor:`#f6f6fb`,color:`#50606C`,border:`1px solid #98aab8`,borderRadius:`0`},title:{color:`#50606C`,subtitle:{color:`#718890`}},tooltip:{backgroundColor:`#f6f6fb`,color:`#50606C`},territory:{fill:`#cfdae3`,stroke:`#98aab8`,hover:{fill:`#bcc8d1`,stroke:`#50606C`}},points:{stroke:`#f6f6fb`,fill:`#50606C`,labels:{color:`#50606C`}}}}},Ae={default:{},minimal:Ce,minimalDark:we,dark:Te,celebration:Ee,celebrationNight:De,zen:Oe,hack:E,concrete:ke},je=Object.freeze(Object.defineProperty({__proto__:null,celebration:Ee,celebrationNight:De,concrete:ke,dark:Te,default:Ae,hack:E,minimal:Ce,minimalDark:we,zen:Oe},Symbol.toStringTag,{value:`Module`})),Me=[`id`],Ne=[`xmlns`,`viewBox`,`id`],Pe=[`transform`],Fe=[`d`,`fill`,`stroke`,`stroke-width`,`onMouseenter`,`onMouseleave`,`onClick`],Ie=[`d`,`stroke`,`stroke-width`,`onMouseenter`,`onMouseleave`,`onClick`],Le=[`cx`,`cy`,`r`,`fill`,`stroke`,`stroke-width`,`onMouseenter`],Re=[`cx`,`cy`,`r`,`fill`,`stroke`,`stroke-width`,`onMouseenter`,`onMouseleave`,`onClick`],ze=[`x`,`y`,`fill`,`font-size`],Be={key:5,class:`vue-data-ui-watermark`},Ve=1.5,He=le({__name:`vue-ui-geo`,props:{config:{type:Object,default(){return{}}},dataset:{type:[Array,Object],default(){return[]}}},emits:[`copyAlt`],setup(le,{expose:Ce,emit:we}){let Te=ee(()=>T(()=>import(`./CbFHGlY2.js`),__vite__mapDeps([0,1,2]),import.meta.url)),Ee=ee(()=>T(()=>import(`./DHC76net.js`),__vite__mapDeps([3,1,4,5,2,6,7,8]),import.meta.url)),De=ee(()=>T(()=>import(`./DdyLBgN8.js`),__vite__mapDeps([9,1,4,5,2,10,8]),import.meta.url)),Oe=ee(()=>T(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([11,1]),import.meta.url)),E=le,ke=we,{vue_ui_geo:je}=se(),{isThemeValid:He,warnInvalidTheme:Ue}=pe(),D=C(ne()),We=C(0),Ge=C(0),Ke=C(!1),O=C(!1),k=C(null),A=C(!1),j=C(null),qe=C(null),Je=C(null),Ye=C(null),M=C(null),N=C(null),Xe=C(null),Ze=C(null),P=C(!1);function Qe(e){P.value=e,We.value+=1}function $e(){let e=oe({userConfig:E.config,defaultConfig:je}),t=e.theme;if(!t)return e;if(!He.value(e))return Ue(e),e;let n=oe({userConfig:Ae[t]||E.config,defaultConfig:e});return oe({userConfig:E.config,defaultConfig:n})}let F=C($e()),I=g(()=>F.value.userOptions.useCursorPointer),{userOptionsVisible:et,keepUserOptionState:tt}=ye({config:F.value}),{svgRef:L}=ve({config:F.value.style.chart.title}),nt=g(()=>re({defaultConfig:{map:{geoJson:{type:`FeatureCollection`,features:[{type:`Feature`,properties:{name:`Island A`},geometry:{type:`Polygon`,coordinates:[[[-6,2],[-4,2],[-4,4],[-6,4],[-6,2]]]}},{type:`Feature`,properties:{name:`Island B`},geometry:{type:`Polygon`,coordinates:[[[-2,-1],[1,-1],[1,2],[-2,2],[-2,-1]]]}},{type:`Feature`,properties:{name:`Island C`},geometry:{type:`Polygon`,coordinates:[[[3,-3],[5,-3],[5,-1],[3,-1],[3,-3]]]}},{type:`Feature`,properties:{name:`Island D`},geometry:{type:`Polygon`,coordinates:[[[4,3],[7,3],[7,5],[4,5],[4,3]]]}}]}},userOptions:{show:!1},style:{chart:{backgroundColor:`#99999930`,territory:{fill:`#99999950`,stroke:`#8A8A8A`,strokeWidth:.5}}}},userConfig:F.value.skeletonConfig??{}})),{loading:rt,FINAL_DATASET:it}=de({...m(E),FINAL_CONFIG:F,prepareConfig:$e,allowEmptyDataset:!0,skeletonDataset:E.config?.skeletonDataset??[],skeletonConfig:re({defaultConfig:F.value,userConfig:nt.value})}),{isPrinting:at,isImaging:ot,generatePdf:st,generateImage:ct}=ce({elementId:`vue-ui-geo_${D.value}`,fileName:F.value.style.chart.title.text||`vue-ui-geo`,options:F.value.userOptions.print}),lt=g(()=>F.value.style.chart.controls.show?F.value.style.chart.controls.position===`top`?Xe.value?.$el??null:F.value.style.chart.controls.position===`bottom`?Ze.value?.$el??null:null:null);function ut(){M.value&&(N.value&&M.value.unobserve(N.value),M.value.disconnect(),M.value=null,N.value=null)}let R=g(()=>!!F.value.responsive&&!P.value);b(()=>P.value,async e=>{if(e){ut(),V.value=Number(F.value.style.chart.dimensions.width)||V.value,H.value=Number(F.value.style.chart.dimensions.height)||H.value,await w(),A.value=!1,requestAnimationFrame(()=>{A.value||Kt()});return}F.value.responsive&&(await w(),dt())});function dt(){if(ut(),!R.value)return;let e=_e(()=>{if(!k.value)return;let{width:e,height:t}=ge({chart:k.value,noTitle:ft.value?Je.value:null,title:F.value.style.chart.title.text?qe.value:null,legend:lt.value,source:Ye.value});requestAnimationFrame(()=>{V.value=Math.max(.1,Number(e)||.1),H.value=Math.max(.1,Number(t)||.1)-24})});M.value=new ResizeObserver(e),N.value=k.value?k.value.parentNode:null,N.value&&M.value.observe(N.value),e()}let ft=g(()=>F.value.userOptions.show&&!F.value.style.chart.title.text),z=C({showTooltip:F.value.style.chart.tooltip.show}),B=C(F.value.style.chart.zoom.active);b(()=>E.config,()=>{F.value=$e(),z.value.showTooltip=F.value.style.chart.tooltip.show,B.value=F.value.style.chart.zoom.active,V.value=F.value.style.chart.dimensions.width,H.value=F.value.style.chart.dimensions.height,dt(),Ge.value+=1,We.value+=1},{deep:!0});let{projections:pt}=Se,mt=g(()=>F.value?.projection||`equirectangular`),ht=g(()=>{let e=pt?.[mt.value];return typeof e==`function`?e:pt.equirectangular}),gt=g(()=>F.value.map.geoJson??null),_t={aitoff:{width:1e3,height:500},azimuthalEquidistant:{width:1e3,height:1e3},bonne:{width:1e3,height:1e3},equirectangular:{width:1e3,height:700},gallPeters:{width:1e3,height:800},globe:{width:1e3,height:1e3},hammer:{width:1e3,height:500},mercator:{width:1e3,height:750},mollweide:{width:1e3,height:600},robinson:{width:1e3,height:600},sinusoidal:{width:1e3,height:500},vanDerGrinten:{width:1e3,height:1e3},winkelTripel:{width:1e3,height:1e3}},V=C(F.value.style.chart.dimensions.width),H=C(F.value.style.chart.dimensions.height),vt=g(()=>{let e=_t[mt.value]||_t.equirectangular;return{width:e.width,height:e.height}}),U=g(()=>{let e=vt.value,t=V.value,n=H.value,r=Number.isFinite(t)&&t>0,i=Number.isFinite(n)&&n>0;return r&&i?{width:t,height:n}:r&&!i?{width:t,height:t*(e.height/e.width)}:!r&&i?{width:n*(e.width/e.height),height:n}:{width:e.width,height:e.height}}),yt=g(()=>{let e=F.value?.map?.center,t=[0,0];if(!Array.isArray(e)||e.length!==2)return t;let n=Number(e[0]),r=Number(e[1]);return!Number.isFinite(n)||!Number.isFinite(r)?t:[n,r]});function W([e,t]){return ht.value([e,t],vt.value.width,vt.value.height,yt.value)}function bt(e,t={}){let{defaultName:n=``,namePropertyCandidates:r=[`name`,`nom`,`admin`,`NAME`,`label`,`title`,`description`,`DESCRIPTION`,`NAME_1`,`NAME_2`,`NAME_3`,`NAME_EN`,`name:en`,`name_en`,`localname`,`local_name`],includeNullGeometries:i=!1}=t,a={type:`FeatureCollection`,features:[]};function o(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}function s(e){return!o(e)||typeof e.type!=`string`?!1:e.type===`GeometryCollection`?Array.isArray(e.geometries):Object.hasOwn(e,`coordinates`)}function c(e){if(!o(e))return``;for(let t of r){let n=e[t];if(typeof n==`string`&&n.trim())return n.trim()}return``}function l({geometry:e,properties:t,fallbackName:r,featureIndex:i}){let a=o(t)?{...t}:{},s=c(a),l=n?`${n} ${i+1}`:``,u=s||(typeof r==`string`?r.trim():``)||l;return!a.name&&u&&(a.name=u),{type:`Feature`,geometry:e,properties:a}}function u(e,t,n,r,a){let c=Array.isArray(e?.geometries)?e.geometries:[],d=r;for(let e=0;e<c.length;e+=1){let r=c[e];if(r){if(o(r)&&r.type===`GeometryCollection`){d=u(r,t,n,d,a);continue}if(s(r)){if(r.coordinates==null&&r.type!==`GeometryCollection`){i&&(a.push(l({geometry:null,properties:t,fallbackName:n,featureIndex:d})),d+=1);continue}a.push(l({geometry:r,properties:t,fallbackName:n,featureIndex:d})),d+=1}}}return d}function d(e,t,n=0){let r=n;if(e==null)return r;if(Array.isArray(e)){for(let n of e)r=d(n,t,r);return r}if(!o(e)||typeof e.type!=`string`)return r;if(e.type===`FeatureCollection`){let n=Array.isArray(e.features)?e.features:[];for(let e of n)r=d(e,t,r);return r}if(e.type===`Feature`){let n=o(e.properties)?e.properties:{},a=c(n),d=e.geometry??null;return d==null?(i&&(t.push(l({geometry:null,properties:n,fallbackName:a,featureIndex:r})),r+=1),r):o(d)&&d.type===`GeometryCollection`?u(d,n,a,r,t):(s(d)&&(t.push(l({geometry:d,properties:n,fallbackName:a,featureIndex:r})),r+=1),r)}return e.type===`GeometryCollection`?u(e,{},``,r,t):(s(e)&&(t.push(l({geometry:e,properties:{},fallbackName:``,featureIndex:r})),r+=1),r)}let f=[];return d(e,f,0),{...a,features:f}}function xt(e){let t=Array.isArray(e?.features)?e.features:[];function n(e){if(!e||typeof e!=`object`)return``;let t=[e.name,e.nom,e.admin,e.NAME,e.label,e.title,e.description,e.DESCRIPTION,e.NAME_1,e.NAME_2,e.NAME_3,e.NAME_EN,e[`name:en`],e.name_en,e.localname,e.local_name];for(let e of t)if(typeof e==`string`&&e.trim())return e.trim();for(let t of Object.values(e))if(typeof t==`string`&&t.trim())return t.trim();return``}return t.filter(e=>e&&e.type===`Feature`&&e.geometry).map((e,t)=>{let r=e.properties||{},i=n(r);return{feature:e,geometry:e.geometry,properties:r,name:i,uid:`map-feature-${D.value}-${t}`,index:t}})}let St=g(()=>bt(gt.value,{defaultName:``,includeNullGeometries:!1})),Ct=g(()=>xt(St.value));function wt(e){if(!e||typeof e.type!=`string`)return``;if(e.type===`GeometryCollection`)return(Array.isArray(e.geometries)?e.geometries:[]).map(e=>wt(e)).filter(Boolean).join(` `);let t=e=>{if(!Array.isArray(e)||e.length<2)return null;let t=Number(e[0]),n=Number(e[1]);if(!Number.isFinite(t)||!Number.isFinite(n))return null;let r=W([t,n]);if(!Array.isArray(r)||r.length<2)return null;let i=Number(r[0]),a=Number(r[1]);return!Number.isFinite(i)||!Number.isFinite(a)?null:[i,a]},n=e=>{let n=(e||[]).map(t).filter(Boolean);return n.length<2?``:`M`+n.map(([e,t])=>`${e},${t}`).join(`L`)},r=e=>(e||[]).map(e=>{let t=n(e);return t?t+`Z`:``}).filter(Boolean).join(` `);return e.type===`Polygon`?r(e.coordinates):e.type===`MultiPolygon`?(e.coordinates||[]).map(r).filter(Boolean).join(` `):e.type===`LineString`?n(e.coordinates):e.type===`MultiLineString`?(e.coordinates||[]).map(n).filter(Boolean).join(` `):``}function Tt(e){return e?e.type===`GeometryCollection`?(Array.isArray(e.geometries)?e.geometries:[]).flatMap(e=>Tt(e)):e.type===`Point`?Array.isArray(e.coordinates)?[e.coordinates]:[]:e.type===`MultiPoint`&&Array.isArray(e.coordinates)?e.coordinates:[]:[]}function Et(e){return!e||typeof e.type!=`string`?!1:e.type===`GeometryCollection`?(Array.isArray(e.geometries)?e.geometries:[]).some(e=>Et(e)):e.type===`Point`||e.type===`MultiPoint`}let Dt=g(()=>Ct.value.filter(e=>{let t=e.geometry;return t?t.type===`GeometryCollection`?(Array.isArray(t.geometries)?t.geometries:[]).some(e=>e?.type===`Polygon`||e?.type===`MultiPolygon`):t.type===`Polygon`||t.type===`MultiPolygon`:!1})),Ot=g(()=>Ct.value.filter(e=>{let t=e.geometry;return t?t.type===`GeometryCollection`?(Array.isArray(t.geometries)?t.geometries:[]).some(e=>e?.type===`LineString`||e?.type===`MultiLineString`):t.type===`LineString`||t.type===`MultiLineString`:!1})),kt=g(()=>Ct.value.filter(e=>{let t=e.geometry;return t?Et(t):!1})),At=g(()=>Dt.value.map(e=>{let t=wt(e.geometry);return t?{...e,path:t}:null}).filter(Boolean)),jt=g(()=>Ot.value.map(e=>{let t=wt(e.geometry);return t?{...e,path:t}:null}).filter(Boolean)),Mt=g(()=>{let e=[];function t(e={}){let t=e?.style&&typeof e.style==`object`?e.style:{},n=e.radius??e.r??t.radius??t.r,r=e.color??e.fill??t.color??t.fill,i=e.stroke??t.stroke,a=e.strokeWidth??e.stroke_width??t.strokeWidth??t.stroke_width;return{radius:Number.isFinite(Number(n))?Number(n):Number(F.value.style.chart.points.radius),fill:r!=null&&String(r).trim()?ie(String(r).trim()):F.value.style.chart.points.fill,stroke:i!=null&&String(i).trim()?ie(String(i).trim()):F.value.style.chart.points.stroke,strokeWidth:Number.isFinite(Number(a))?Number(a):Number(F.value.style.chart.points.strokeWidth)}}for(let n of kt.value){let r=Tt(n.geometry);for(let i=0;i<r.length;i+=1){let a=r[i];if(!Array.isArray(a)||a.length<2)continue;let o=Number(a[0]),s=Number(a[1]);if(!Number.isFinite(o)||!Number.isFinite(s))continue;let c=W([o,s]),l=c?.[0],u=c?.[1];if(!Number.isFinite(l)||!Number.isFinite(u))continue;let d=t(n?.feature?.properties&&typeof n.feature.properties==`object`?n.feature.properties:{});e.push({uid:`${n.uid}-geojson-point-${i}`,name:n.name||``,x:l,y:u,...d,originalFeature:n.feature,featureIndex:n.index,pointIndex:i})}}return e});function Nt(e){if(!e||typeof e.type!=`string`)return[];let t=[],n=e=>{if(!Array.isArray(e)||e.length<2)return;let n=Number(e[0]),r=Number(e[1]);if(!Number.isFinite(n)||!Number.isFinite(r))return;let i=W([n,r]),a=i?.[0],o=i?.[1];!Number.isFinite(a)||!Number.isFinite(o)||t.push([a,o])},r=e=>{if(Array.isArray(e)){if(e.length>=2&&typeof e[0]==`number`&&typeof e[1]==`number`){n(e);return}for(let t of e)r(t)}};if(e.type===`GeometryCollection`&&Array.isArray(e.geometries)){for(let n of e.geometries)t.push(...Nt(n));return t}return e.type===`Point`?(n(e.coordinates),t):e.type===`MultiPoint`?((e.coordinates||[]).forEach(n),t):(r(e.coordinates),t)}function Pt(e){let t=[];for(let n of e)t.push(...Nt(n.geometry));if(!t.length)return null;let n=1/0,r=1/0,i=-1/0,a=-1/0;for(let[e,o]of t)e<n&&(n=e),o<r&&(r=o),e>i&&(i=e),o>a&&(a=o);let o=i-n,s=a-r;return!(o>0)||!(s>0)?null:{minX:n,minY:r,maxX:i,maxY:a,width:o,height:s}}let Ft=g(()=>Pt(Ct.value));function It({bounds:e,targetWidth:t,targetHeight:n,padding:r}){if(!e||!(e.width>0)||!(e.height>0))return{scale:1,translateX:0,translateY:0,transform:``};let i=Number.isFinite(Number(r))?Number(r):0,a=Math.max(1,t-i*2),o=Math.max(1,n-i*2),s=a/e.width,c=o/e.height,l=Math.min(s,c),u=e.width*l,d=e.height*l,f=i+(a-u)/2,p=i+(o-d)/2,m=f-e.minX*l,h=p-e.minY*l;return{scale:l,translateX:m,translateY:h,transform:`translate(${m} ${h}) scale(${l})`}}let Lt=g(()=>{let e=Ft.value;if(!e)return{scale:1,translateX:0,translateY:0,transform:``};let t=F.value?.map?.fitPadding,n=Number.isFinite(Number(t))?Number(t):0;return It({bounds:e,targetWidth:U.value.width,targetHeight:U.value.height,padding:n})}),Rt=g(()=>`0 0 ${U.value.width} ${U.value.height}`),{viewBox:G,resetZoom:zt,setInitialViewBox:Bt,scale:Vt,zoomByFactor:Ht}=be(L,{x:0,y:0,width:U.value.width,height:U.value.height},1,B);function Ut(){B.value=!B.value}function Wt(e){let t=Lt.value,n=Number(t?.scale)||1,r=Number(t?.translateX)||0,i=Number(t?.translateY)||0;return{x:e.x*n+r,y:e.y*n+i}}function Gt(){let e=F.value?.map?.center,t=Number(e?.[0]),n=Number(e?.[1]),r=Array.isArray(e)&&e.length===2&&Number.isFinite(t)&&Number.isFinite(n)&&(t!==0||n!==0),i=U.value.width,a=U.value.height;if(!r)return{x:0,y:0,width:i,height:a};let o=W([t,n]),s=o?.[0],c=o?.[1];if(!Number.isFinite(s)||!Number.isFinite(c))return{x:0,y:0,width:i,height:a};let l=Wt({x:s,y:c});return{x:l.x-i/2,y:l.y-a/2,width:i,height:a}}function Kt(){Bt(Gt(),{overwriteCurrentIfNotZoomed:!0}),A.value=!0}let qt=g(()=>{let e=G.value;return e?`${e.x} ${e.y} ${e.width} ${e.height}`:Rt.value});function Jt(){Ht(Ve,!0)}function Yt(){Ht(1/Ve,!0)}async function Xt(){Bt(Gt(),{overwriteCurrentIfNotZoomed:!0}),zt(!0)}b(()=>[F.value.projection,F.value.map.center?.[0],F.value.map.center?.[1],F.value.map.fitPadding,gt.value],async()=>{A.value=!1,await w(),requestAnimationFrame(()=>{A.value||Kt()})},{deep:!1}),b(()=>[V.value,H.value,R.value],async()=>{R.value&&(await w(),Bt({x:0,y:0,width:U.value.width,height:U.value.height},{overwriteCurrentIfNotZoomed:!0}),A.value=!1,requestAnimationFrame(()=>{A.value||Kt()}))},{flush:`post`});function Zt(e){return e?e.type===`FeatureCollection`&&Array.isArray(e.features)?e.features.filter(e=>e?.type===`Feature`&&e.geometry?.type===`Point`).map((e,t)=>{let n=e.properties||{},r=n.name||n.label||n.title||`Point ${t+1}`,i=e.geometry.coordinates;return{uid:`map-point-${D.value}-${t}`,name:r,coordinates:i,color:n.color??null,radius:n.radius??null,hoverRadiusRatio:F.value.style.chart.points.hoverRadiusRatio,description:n.description??null,original:e,index:t}}):Array.isArray(e)?e.map((e,t)=>{let n=null,r=`Point ${t+1}`,i=null,a=null,o=null;Array.isArray(e)&&e.length>=2?n=[Number(e[0]),Number(e[1])]:e&&typeof e==`object`&&(Array.isArray(e.coordinates)&&e.coordinates.length>=2?n=[Number(e.coordinates[0]),Number(e.coordinates[1])]:Number.isFinite(Number(e.lon))&&Number.isFinite(Number(e.lat))&&(n=[Number(e.lon),Number(e.lat)]),typeof e.name==`string`&&e.name.trim()&&(r=e.name),e.description!=null&&(i=e.description),e.color!=null&&(a=e.color),e.radius!=null&&(o=e.radius));let s=n?n[0]:NaN,c=n?n[1]:NaN;return!Number.isFinite(s)||!Number.isFinite(c)?null:{uid:`map-point-${D.value}-${t}`,name:r,coordinates:[s,c],color:a,radius:o,hoverRadiusRatio:F.value.style.chart.points.hoverRadiusRatio,description:i,original:e,index:t}}).filter(Boolean):typeof e==`object`?Object.entries(e).map(([e,t],n)=>{if(!t||typeof t!=`object`)return null;let r=Array.isArray(t.coordinates)?t.coordinates:null;if(!r||r.length<2)return null;let i=Number(r[0]),a=Number(r[1]);return!Number.isFinite(i)||!Number.isFinite(a)?null:{uid:`map-point-${D.value}-${n}-${e}`,name:t.name||e,coordinates:[i,a],color:t.color??null,radius:t.radius??null,hoverRadiusRatio:F.value.style.chart.points.hoverRadiusRatio,description:t.description??null,original:t,index:n}}).filter(Boolean):[]:[]}let Qt=g(()=>Zt(it.value)),$t=g(()=>Qt.value.map(e=>{let t=W(e.coordinates),n=t?.[0],r=t?.[1];return!Number.isFinite(n)||!Number.isFinite(r)?null:{...e,x:n,y:r,fill:e.color?ie(e.color):F.value.style.chart.points.fill,radius:Number.isFinite(Number(e.radius))?Number(e.radius):F.value.style.chart.points.radius}}).filter(Boolean)),en=C(!1),tn=C(``),K=C(!1),q=C(null),J=C(null);function nn(e){tn.value=e,en.value=!0}function Y(){en.value=!1,tn.value=``}function rn(e){return String(e??``).replaceAll(`&`,`&amp;`).replaceAll(`<`,`&lt;`).replaceAll(`>`,`&gt;`).replaceAll(`"`,`&quot;`).replaceAll(`'`,`&#039;`)}function an(e){j.value={datapoint:e,seriesIndex:e.index,series:Qt.value,config:F.value},K.value=!1;let t=F.value.style.chart.tooltip.customFormat;if(te(t))try{let e=t(j.value);if(typeof e==`string`)return K.value=!0,e}catch{console.warn(`Custom format cannot be applied.`),K.value=!1}return`<div><div style="font-weight:600">${rn(e.name)}</div>${e.description==null?``:`<div style="margin-top:6px">${rn(e.description)}</div>`}</div>`}function on(e){K.value=!1;let t=F.value.style.chart.tooltip.customFormat;if(te(t))try{let n=t({datapoint:e,config:F.value});if(typeof n==`string`)return K.value=!0,n}catch{console.warn(`Custom format cannot be applied.`),K.value=!1}let n=typeof e?.name==`string`?e.name.trim():``;return n?`<div><div style="font-weight:600">${rn(n)}</div></div>`:(K.value=!1,``)}function sn(e){if(F.value.events.territoryEnter&&F.value.events.territoryEnter({datapoint:e,seriesIndex:e.index}),!(typeof e?.name==`string`&&e.name.trim())&&!F.value.style.chart.territory.hover.enabledWhenEmpty){J.value=null,Y();return}J.value=e.uid,nn(on(e))}function cn(e){J.value=null,Y(),F.value.events.territoryLeave&&F.value.events.territoryLeave({datapoint:e,seriesIndex:e.index})}function ln(e){F.value.events.territoryClick&&F.value.events.territoryClick({datapoint:e,seriesIndex:e.index})}function un(e){q.value=e.uid,nn(an(e)),F.value.events.datapointEnter&&F.value.events.datapointEnter({datapoint:e,seriesIndex:e.index})}function dn(e){q.value=null,Y(),F.value.events.datapointLeave&&F.value.events.datapointLeave({datapoint:e,seriesIndex:e.index})}let fn=g(()=>!!F.value.events.datapointClick&&typeof F.value.events.datapointClick==`function`);function pn(e){fn.value&&F.value.events.datapointClick({datapoint:e,seriesIndex:e.index})}let X=g(()=>F.value.style.chart.territory),mn=g(()=>F.value.style.chart.points);function hn(e){let t=typeof e?.name==`string`?e.name.trim():``;if(!t){J.value=null,Y();return}let n={name:t,uid:e.uid,index:e.featureIndex,properties:{}};J.value=e.uid,nn(on(n))}function gn(){J.value=null,Y()}let Z=C(!1);function _n(){Z.value=!Z.value}b(()=>Z.value,e=>{B.value=!e});function vn(){z.value.showTooltip=!z.value.showTooltip}let yn=g(()=>F.value.style.chart.backgroundColor),{exportSvg:bn,getSvg:xn}=fe({svg:L,title:g(()=>F.value.style.chart.title),legend:void 0,legendItems:void 0,backgroundColor:yn});async function Sn({isCb:e}){O.value=!0,await w();try{if(e){let{blob:e,url:t,text:n,dataUrl:r}=await xn();await Promise.resolve(F.value.userOptions.callbacks.svg({blob:e,url:t,text:n,dataUrl:r}))}else await Promise.resolve(bn())}finally{O.value=!1}}function Cn(e){if(e?.stage===`start`){Ke.value=!0;return}if(e?.stage===`end`){Ke.value=!1;return}ct()}async function wn({scale:e=2}={}){if(!k.value)return;let{width:t,height:n}=k.value.getBoundingClientRect(),r=t/n,{imageUri:i,base64:a}=await me({domElement:k.value,base64:!0,img:!0,scale:e});return{imageUri:i,base64:a,title:F.value.style.chart.title.text,width:t,height:n,aspectRatio:r}}let Q=C(!1),$=null;function Tn(){B.value&&(Q.value=!0)}function En(){Q.value=!1}function Dn(){B.value&&(Q.value=!0,$&&clearTimeout($),$=setTimeout(()=>{Q.value=!1,$=null},140))}i(()=>{$&&clearTimeout($)});async function On([e,t],{animated:n=!0}={}){let r=Number(e),i=Number(t);if(!Number.isFinite(r)||!Number.isFinite(i))return;let a=W([r,i]),o=a?.[0],s=a?.[1];if(!Number.isFinite(o)||!Number.isFinite(s))return;let c=Wt({x:o,y:s}),l=G.value?{...G.value}:{x:0,y:0,width:U.value.width,height:U.value.height},u={x:c.x-l.width/2,y:c.y-l.height/2,width:l.width,height:l.height};if(!n){G.value=u;return}let d={...l},f={...u},p=null,m=e=>{p??=e;let t=Math.min((e-p)/250,1);G.value={x:d.x+(f.x-d.x)*t,y:d.y+(f.y-d.y)*t,width:d.width+(f.width-d.width)*t,height:d.height+(f.height-d.height)*t},t<1&&requestAnimationFrame(m)};requestAnimationFrame(m)}r(async()=>{dt(),await w(),requestAnimationFrame(()=>{A.value||(Kt(),(F.value.map.center?.[0]||F.value.map.center?.[1])&&On(F.value.map.center,{animated:!1}))})}),i(()=>{ut()});async function kn(){if(ke(`copyAlt`,{config:F.value,dataset:it.value}),!F.value.userOptions.callbacks.altCopy){console.warn("Vue Data UI - A callback must be set for `altCopy` in userOptions.");return}await Promise.resolve(F.value.userOptions.callbacks.altCopy({config:F.value,dataset:it.value}))}return Ce({getImage:wn,generatePdf:st,generateImage:ct,generateSvg:Sn,toggleTooltip:vn,toggleAnnotator:_n,toggleFullscreen:Qe,zoomIn:Jt,zoomOut:Yt,resetZoom:zt,focusLocation:On,copyAlt:kn}),(r,i)=>(a(),x(`div`,{class:e(`vue-data-ui-component vue-ui-geo ${P.value?`vue-data-ui-wrapper-fullscreen`:``} ${R.value?`vue-ui-geo-responsive`:``} ${Q.value?`vue-ui-geo-interacting`:``}`),ref_key:`geoChart`,ref:k,id:`map_${D.value}`,dir:`auto`,style:s({fontFamily:F.value.style.fontFamily,width:`100%`,backgroundColor:F.value.style.chart.backgroundColor,height:R.value?`${H.value}px`:void 0})},[ft.value?(a(),x(`div`,{key:0,ref_key:`noTitle`,ref:Je,class:`vue-data-ui-no-title-space`,style:`height:36px; width: 100%;background:transparent`},null,512)):t(``,!0),F.value.style.chart.title.text?(a(),x(`div`,{key:1,ref_key:`chartTitle`,ref:qe,style:`width:100%;background:transparent;padding-bottom:12px`},[(a(),f(he,{key:`title_${Ge.value}`,config:{title:{cy:`geo-title`,...F.value.style.chart.title},subtitle:{cy:`geo-subtitle`,...F.value.style.chart.title.subtitle}}},null,8,[`config`]))],512)):t(``,!0),F.value.userOptions.buttons.annotator?(a(),f(n(De),{key:2,svgRef:n(L),backgroundColor:F.value.style.chart.backgroundColor,color:F.value.style.chart.color,active:Z.value,isCursorPointer:I.value,onClose:_n},{"annotator-action-close":v(()=>[u(r.$slots,`annotator-action-close`,{},void 0,!0)]),"annotator-action-color":v(({color:e})=>[u(r.$slots,`annotator-action-color`,_(o({color:e})),void 0,!0)]),"annotator-action-draw":v(({mode:e})=>[u(r.$slots,`annotator-action-draw`,_(o({mode:e})),void 0,!0)]),"annotator-action-undo":v(({disabled:e})=>[u(r.$slots,`annotator-action-undo`,_(o({disabled:e})),void 0,!0)]),"annotator-action-redo":v(({disabled:e})=>[u(r.$slots,`annotator-action-redo`,_(o({disabled:e})),void 0,!0)]),"annotator-action-delete":v(({disabled:e})=>[u(r.$slots,`annotator-action-delete`,_(o({disabled:e})),void 0,!0)]),_:3},8,[`svgRef`,`backgroundColor`,`color`,`active`,`isCursorPointer`])):t(``,!0),F.value.userOptions.show&&(n(tt)||n(et))?(a(),f(n(Ee),{ref:`userOptionsRef`,key:`user_options_${We.value}`,backgroundColor:F.value.style.chart.backgroundColor,color:F.value.style.chart.color,isPrinting:n(at),isImaging:n(ot),uid:D.value,hasXls:!1,hasTable:!1,hasTooltip:F.value.userOptions.buttons.tooltip&&F.value.style.chart.tooltip.show,hasPdf:F.value.userOptions.buttons.pdf,hasImg:F.value.userOptions.buttons.img,hasSvg:F.value.userOptions.buttons.svg,hasFullscreen:F.value.userOptions.buttons.fullscreen,hasAltCopy:F.value.userOptions.buttons.altCopy,hasAnnotator:F.value.userOptions.buttons.annotator,hasZoom:F.value.userOptions.buttons.zoom,isZoom:B.value,isFullscreen:P.value,isTooltip:z.value.showTooltip,titles:{...F.value.userOptions.buttonTitles},chartElement:k.value,position:F.value.userOptions.position,isAnnotation:Z.value,callbacks:F.value.userOptions.callbacks,printScale:F.value.userOptions.print.scale,isCursorPointer:I.value,onToggleFullscreen:Qe,onGeneratePdf:n(st),onGenerateImage:Cn,onGenerateSvg:Sn,onToggleTooltip:vn,onToggleAnnotator:_n,onToggleZoom:Ut,onCopyAlt:kn,style:s({visibility:n(tt)?n(et)?`visible`:`hidden`:`visible`})},p({_:2},[r.$slots.menuIcon?{name:`menuIcon`,fn:v(({isOpen:e,color:t})=>[u(r.$slots,`menuIcon`,_(o({isOpen:e,color:t})),void 0,!0)]),key:`0`}:void 0,r.$slots.optionTooltip?{name:`optionTooltip`,fn:v(()=>[u(r.$slots,`optionTooltip`,{},void 0,!0)]),key:`1`}:void 0,r.$slots.optionPdf?{name:`optionPdf`,fn:v(()=>[u(r.$slots,`optionPdf`,{},void 0,!0)]),key:`2`}:void 0,r.$slots.optionImg?{name:`optionImg`,fn:v(()=>[u(r.$slots,`optionImg`,{},void 0,!0)]),key:`3`}:void 0,r.$slots.optionSvg?{name:`optionSvg`,fn:v(()=>[u(r.$slots,`optionSvg`,{},void 0,!0)]),key:`4`}:void 0,r.$slots.optionFullscreen?{name:`optionFullscreen`,fn:v(({toggleFullscreen:e,isFullscreen:t})=>[u(r.$slots,`optionFullscreen`,_(o({toggleFullscreen:e,isFullscreen:t})),void 0,!0)]),key:`5`}:void 0,r.$slots.optionAnnotator?{name:`optionAnnotator`,fn:v(({toggleAnnotator:e,isAnnotator:t})=>[u(r.$slots,`optionAnnotator`,_(o({toggleAnnotator:e,isAnnotator:t})),void 0,!0)]),key:`6`}:void 0,r.$slots.optionZoom?{name:`optionZoom`,fn:v(({toggleZoom:e,isZoomLocked:t})=>[u(r.$slots,`optionZoom`,_(o({toggleZoom:e,isZoomLocked:t})),void 0,!0)]),key:`7`}:void 0,r.$slots.optionAltCopy?{name:`optionAltCopy`,fn:v(({altCopy:e})=>[u(r.$slots,`optionAltCopy`,_(o({altCopy:e})),void 0,!0)]),key:`8`}:void 0]),1032,[`backgroundColor`,`color`,`isPrinting`,`isImaging`,`uid`,`hasTooltip`,`hasPdf`,`hasImg`,`hasSvg`,`hasFullscreen`,`hasAltCopy`,`hasAnnotator`,`hasZoom`,`isZoom`,`isFullscreen`,`isTooltip`,`titles`,`chartElement`,`position`,`isAnnotation`,`callbacks`,`printScale`,`isCursorPointer`,`onGeneratePdf`,`style`])):t(``,!0),F.value.style.chart.controls.position===`top`&&F.value.style.chart.controls.show&&!n(rt)?(a(),f(xe,{key:4,ref_key:`zoomControlsTop`,ref:Xe,config:F.value,scale:n(Vt),isFullscreen:P.value,isCursorPointer:I.value,onZoomIn:Jt,onZoomOut:Yt,onResetZoom:Xt},null,8,[`config`,`scale`,`isFullscreen`,`isCursorPointer`])):t(``,!0),(a(),x(`svg`,{ref_key:`svgRef`,ref:L,xmlns:n(ae),viewBox:qt.value,preserveAspectRatio:`xMidYMid meet`,style:s({display:`block`,width:`100%`,height:R.value?`${H.value}px`:`auto`,background:F.value.style.chart.backgroundColor,touchAction:B.value?`none`:`auto`,cursor:B.value?Q.value?`grabbing`:`grab`:`default`}),id:`vue-ui-geo_${D.value}`,onPointerdown:Tn,onPointerup:En,onPointercancel:En,onPointerleave:En,onWheel:Dn},[l(n(Oe)),S(`g`,{transform:Lt.value.transform,style:s({pointerEvents:Q.value?`none`:`auto`})},[S(`g`,null,[(a(!0),x(y,null,h(At.value,e=>(a(),x(`path`,{class:`vue-ui-geo-territory`,key:e.uid,d:e.path,fill:J.value===e.uid?X.value.hover.fill:X.value.fill,stroke:J.value===e.uid?X.value.hover.stroke:X.value.stroke,"stroke-width":J.value===e.uid?X.value.hover.strokeWidth:X.value.strokeWidth,"vector-effect":`non-scaling-stroke`,onMouseenter:t=>sn(e),onMouseleave:t=>cn(e),onClick:t=>ln(e)},null,40,Fe))),128))]),S(`g`,null,[(a(!0),x(y,null,h(jt.value,e=>(a(),x(`path`,{class:`vue-ui-geo-territory`,key:e.uid,d:e.path,fill:`none`,stroke:J.value===e.uid?X.value.hover.stroke:X.value.stroke,"stroke-width":J.value===e.uid?X.value.hover.strokeWidth:X.value.strokeWidth,"vector-effect":`non-scaling-stroke`,onMouseenter:t=>sn(e),onMouseleave:t=>cn(e),onClick:t=>ln(e)},null,40,Ie))),128))]),S(`g`,null,[(a(!0),x(y,null,h(Mt.value,e=>(a(),x(`circle`,{key:e.uid,cx:e.x,cy:e.y,r:e.radius,fill:e.fill,stroke:e.stroke,"stroke-width":e.strokeWidth,"vector-effect":`non-scaling-stroke`,onMouseenter:t=>hn(e),onMouseleave:gn},null,40,Le))),128))]),(a(!0),x(y,null,h($t.value,n=>(a(),x(`g`,{key:n.uid},[u(r.$slots,`datapoint`,d({ref_for:!0},{point:n,onPointEnter:un,onPointLeave:dn,onPointClick:pn,highlighted:q.value===n.uid}),()=>[S(`circle`,{class:e({"vue-ui-geo-point":!0,"vue-ui-geo-point-with-event":fn.value&&I.value}),cx:n.x,cy:n.y,r:q.value===n.uid?n.radius*n.hoverRadiusRatio:n.radius,fill:n.fill,stroke:mn.value.stroke,"stroke-width":mn.value.strokeWidth,"vector-effect":`non-scaling-stroke`,onMouseenter:e=>un(n),onMouseleave:e=>dn(n),onClick:e=>pn(n)},null,42,Re)],!0),F.value.style.chart.points.labels.show?(a(),x(`text`,{key:0,class:`vue-ui-geo-point-label`,x:n.x,y:n.y+(q.value===n.uid?n.radius*n.hoverRadiusRatio:n.radius)+F.value.style.chart.points.labels.offsetY+1*F.value.style.chart.points.labels.fontSizeRatio,"text-anchor":`middle`,fill:F.value.style.chart.points.labels.color,"font-size":1*F.value.style.chart.points.labels.fontSizeRatio},c(n.name),9,ze)):t(``,!0)]))),128)),u(r.$slots,`svg`,{svg:{drawingArea:qt.value,isPrintingImg:n(at)|n(ot)|Ke.value,isPrintingSvg:O.value,data:{areaPaths:At.value,linePaths:jt.value,geoJsonPoints:Mt.value,projectedPoints:$t.value}}},void 0,!0)],12,Pe)],44,Ne)),r.$slots.watermark?(a(),x(`div`,Be,[u(r.$slots,`watermark`,_(o({isPrinting:n(at)||n(ot)||Ke.value||O.value})),void 0,!0)])):t(``,!0),F.value.style.chart.controls.position===`bottom`&&F.value.style.chart.controls.show&&!n(rt)?(a(),f(xe,{key:6,ref_key:`zoomControlsBottom`,ref:Ze,config:F.value,scale:n(Vt),isFullscreen:P.value,isCursorPointer:I.value,onZoomIn:Jt,onZoomOut:Yt,onResetZoom:Xt},null,8,[`config`,`scale`,`isFullscreen`,`isCursorPointer`])):t(``,!0),l(n(Te),{teleportTo:F.value.style.chart.tooltip.teleportTo,show:z.value.showTooltip&&en.value,backgroundColor:F.value.style.chart.tooltip.backgroundColor,color:F.value.style.chart.tooltip.color,fontSize:F.value.style.chart.tooltip.fontSize,borderRadius:F.value.style.chart.tooltip.borderRadius,borderColor:F.value.style.chart.tooltip.borderColor,borderWidth:F.value.style.chart.tooltip.borderWidth,backgroundOpacity:F.value.style.chart.tooltip.backgroundOpacity,position:F.value.style.chart.tooltip.position,offsetY:F.value.style.chart.tooltip.offsetY,parent:k.value,content:tn.value,isCustom:K.value,isFullscreen:P.value,smooth:F.value.style.chart.tooltip.smooth,backdropFilter:F.value.style.chart.tooltip.backdropFilter,smoothForce:F.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:F.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":v(()=>[u(r.$slots,`tooltip-before`,_(o({...j.value})),void 0,!0)]),"tooltip-after":v(()=>[u(r.$slots,`tooltip-after`,_(o({...j.value})),void 0,!0)]),_:3},8,[`teleportTo`,`show`,`backgroundColor`,`color`,`fontSize`,`borderRadius`,`borderColor`,`borderWidth`,`backgroundOpacity`,`position`,`offsetY`,`parent`,`content`,`isCustom`,`isFullscreen`,`smooth`,`backdropFilter`,`smoothForce`,`smoothSnapThreshold`]),r.$slots.source?(a(),x(`div`,{key:7,ref_key:`source`,ref:Ye,dir:`auto`},[u(r.$slots,`source`,{},void 0,!0)],512)):t(``,!0),u(r.$slots,`skeleton`,{},()=>[n(rt)?(a(),f(ue,{key:0})):t(``,!0)],!0)],14,Me))}},[[`__scopeId`,`data-v-753cf3dd`]]),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:`Module`}));export{je as a,Ue as b};