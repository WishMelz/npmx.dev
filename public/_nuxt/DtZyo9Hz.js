const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CBD7ngdF.js","./BLt7TXlb.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,D as n,Dt as r,G as i,J as a,Mt as o,Nt as s,O as c,Q as l,S as u,Tt as d,Z as f,b as p,k as m,m as h,o as ee,ot as g,w as _,x as v,yt as y,z as b}from"./BLt7TXlb.js";import{t as te}from"./YZkb6lnT.js";import{Mt as x,Nt as ne,P as S,V as re,bt as ie,h as C,m as ae,rt as w,vt as T,wt as E}from"./Cf-0F-2c.js";import{n as D,t as oe}from"./8DvoFuCx.js";import{t as O}from"./CWNsAIol.js";import{n as se,t as ce}from"./D4ushAer.js";import{t as le}from"./BwaPX4qL.js";import{t as ue}from"./C0O4I1kb.js";import{a as de,n as fe}from"./D4v1zV2y.js";import{t as pe}from"./BEpjx3T_.js";import{t as me}from"./BZeAYpmu.js";var k={},A={style:{backgroundColor:`#1A1A1A`,labels:{value:{color:`#CCCCCC`},valueLabel:{color:`#CCCCCC`},timeLabel:{color:`#CCCCCC`}},selector:{stroke:`#5A5A5A`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}}}},j={style:{backgroundColor:`#1A1A1A`,labels:{value:{color:`#CCCCCC`},valueLabel:{color:`#CCCCCC`},timeLabel:{color:`#CCCCCC`}},selector:{stroke:`#5A5A5A`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}}}},M={style:{backgroundColor:`#FFF8E1`,bars:{colors:{positive:`#D32F2F`,negative:`#F57C00`}},labels:{value:{color:`#424242`},valueLabel:{color:`#424242`},timeLabel:{color:`#757575`}},selector:{stroke:`#D32F2F`},title:{color:`#424242`,subtitle:{color:`#757575`}}}},N={style:{backgroundColor:`#1E1E1E`,bars:{colors:{positive:`#D32F2F`,negative:`#F57C00`}},labels:{value:{color:`#BDBDBD`},valueLabel:{color:`#BDBDBD`},timeLabel:{color:`#BDBDBD`}},selector:{stroke:`#D32F2F`},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}}}},P={style:{backgroundColor:`#1A1A1A`,bars:{colors:{positive:`#66CC66`}},labels:{value:{color:`#AACCAA`},valueLabel:{color:`#99CC99`},timeLabel:{color:`#99AA99`}},selector:{stroke:`#00FF00`},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}}}},F={style:{backgroundColor:`#fbfafa`,bars:{colors:{positive:`#B9B99D`,negative:`#C09E85`}},labels:{value:{color:`#A0AC94`},valueLabel:{color:`#A0AC94`},timeLabel:{color:`#8A9892`}},selector:{stroke:`#BBC4D3`},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}}}},I={style:{backgroundColor:`#f6f6fb`,bars:{colors:{positive:`#4A6A75`}},labels:{value:{color:`#61747E`},valueLabel:{color:`#8A9892`},timeLabel:{color:`#50606C`}},selector:{stroke:`#404C4D`},title:{color:`#50606C`,subtitle:{color:`#718890`}}}},L={default:{},minimal:k,minimalDark:A,dark:j,celebration:M,celebrationNight:N,hack:P,zen:F,concrete:I},R=Object.freeze(Object.defineProperty({__proto__:null,celebration:M,celebrationNight:N,concrete:I,dark:j,default:L,hack:P,minimal:k,minimalDark:A,zen:F},Symbol.toStringTag,{value:`Module`})),he={key:0},ge={key:1},_e=[`xmlns`,`viewBox`],ve=[`width`,`height`],ye=[`id`],be=[`stop-color`],xe=[`stop-color`],Se=[`id`],Ce=[`stop-color`],we=[`stop-color`],Te=[`id`],Ee=[`stop-color`],De=[`stop-color`],Oe=[`height`,`width`,`fill`,`x`,`stroke`,`stroke-width`,`rx`,`stroke-dasharray`],ke={key:1},Ae=[`x`,`y`,`height`,`width`,`fill`,`stroke`,`stroke-width`,`rx`],je={key:2},Me=[`x`,`y`,`font-size`,`font-weight`,`fill`],Ne=[`x`,`y`,`font-size`,`fill`],Pe=[`x`,`y`,`font-size`,`fill`],Fe=[`height`,`width`,`x`,`onMouseover`,`onMouseleave`,`onClick`],z=O({__name:`vue-ui-sparkhistogram`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:[`selectDatapoint`],setup(O,{emit:k}){ee(e=>({v028d39bc:Ge.value}));let A=m(()=>te(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([0,1]),import.meta.url)),{vue_ui_sparkhistogram:j}=oe(),{isThemeValid:M,warnInvalidTheme:N}=le(),P=O,F=y(ne()),I=y(null),R=y(null),z=y(null),B=y(null),V=y(null),H=y(J()),Ie=p(()=>S({defaultConfig:{style:{animation:{show:!1},backgroundColor:`#99999930`}},userConfig:H.value.skeletonConfig??{}})),{loading:U,FINAL_DATASET:W}=ce({...d(P),FINAL_CONFIG:H,prepareConfig:J,skeletonDataset:P.config?.skeletonDataset??[{value:1,intensity:.2,color:`#CACACA`},{value:2,intensity:.3,color:`#CACACA`},{value:3,intensity:.5,color:`#CACACA`},{value:5,intensity:.7,color:`#CACACA`},{value:8,intensity:.9,color:`#CACACA`},{value:13,intensity:.95,color:`#CACACA`},{value:21,intensity:1,color:`#CACACA`},{value:13,intensity:.95,color:`#CACACA`},{value:8,intensity:.9,color:`#CACACA`},{value:5,intensity:.7,color:`#CACACA`},{value:3,intensity:.5,color:`#CACACA`},{value:2,intensity:.3,color:`#CACACA`},{value:1,intensity:.2,color:`#CACACA`}],skeletonConfig:S({defaultConfig:H.value,userConfig:Ie.value})}),G=y(H.value.style.layout.width),K=y(H.value.style.layout.height),{svgRef:q}=pe({config:H.value.style.title});function J(){let e=D({userConfig:P.config,defaultConfig:j}),t=e.theme;if(!t)return e;if(!M.value(e))return N(e),e;let n=D({userConfig:L[t]||P.config,defaultConfig:e});return D({userConfig:P.config,defaultConfig:n})}i(()=>{Y()});let Le=p(()=>!!H.value.debug);function Y(){if(re(P.dataset)?C({componentName:`VueUiSparkHistogram`,type:`dataset`,debug:Le.value}):P.dataset.forEach((e,t)=>{ae({datasetObject:e,requiredAttributes:[`value`]}).forEach(e=>{C({componentName:`VueUiSparkHistogram`,type:`datasetSerieAttribute`,property:e,index:t,debug:Le.value})})}),H.value.responsive){let e=fe(()=>{let{width:e,height:t}=de({chart:z.value,title:H.value.style.title.text?R.value:null,source:I.value}),n=H.value.style.labels.timeLabel.show?H.value.style.labels.timeLabel.fontSize*2:0,r=H.value.style.labels.valueLabel.show?H.value.style.labels.valueLabel.fontSize*2:0;requestAnimationFrame(()=>{G.value=Math.max(10,e),K.value=Math.max(10,t-12-n-r)})});B.value&&(V.value&&B.value.unobserve(V.value),B.value.disconnect()),B.value=new ResizeObserver(e),V.value=z.value.parentNode,B.value.observe(V.value)}}g(()=>P.config,e=>{H.value=J(),Y()},{deep:!0});let X=p(()=>{let e=H.value.style.labels.timeLabel.show?H.value.style.labels.timeLabel.fontSize*2:0,t=H.value.style.labels.valueLabel.show?H.value.style.labels.valueLabel.fontSize*2:0,n=K.value+e+t,r=G.value,i=H.value.style.layout.padding.top,a=n-H.value.style.layout.padding.bottom,o=H.value.style.layout.padding.left,s=r-H.value.style.layout.padding.right;return{bottom:a,centerY:i+(n-i-H.value.style.layout.padding.bottom)/2,drawingHeight:n-H.value.style.layout.padding.top-H.value.style.layout.padding.bottom-e-t,drawingWidth:r-H.value.style.layout.padding.left-H.value.style.layout.padding.right,height:n,left:o,right:s,top:i,width:r}}),Re=p(()=>Math.max(...W.value.map(e=>Math.abs(e.value||0))));function ze(e){return Math.abs(e)/Re.value}let Z=p(()=>W.value.map((e,t)=>{let n=ze(e.value||0),r=X.value.drawingHeight*n,i=X.value.drawingWidth/W.value.length,a=i*(H.value.style.bars.gap/100),o=i-a,s=X.value.centerY-r/2,c=X.value.left+(a/2+t*i),l=X.value.left+t*i,u=typeof e.intensity>`u`?100:Math.round(e.intensity*100),d=e.color?e.color:e.value>=0?T(H.value.style.bars.colors.positive,u):T(H.value.style.bars.colors.negative,u),f=e.color?e.color:e.value>=0?H.value.style.bars.colors.positive:H.value.style.bars.colors.negative,p=e.color?`url(#gradient_datapoint_${t}_${F.value})`:e.value>=0?`url(#gradient_positive_${t}_${F.value})`:`url(#gradient_negative_${t}_${F.value})`,m=c+o/2;return{...e,color:d,gradient:p,height:r,intensity:u,proportion:n,stroke:f,textAnchor:m,trapX:l,unitWidth:i,width:o,x:c,y:s}}));function Be(e,t){return E(H.value.style.labels.value.formatter,e.value,x({p:H.value.style.labels.value.prefix,v:e.value,s:H.value.style.labels.value.suffix,r:H.value.style.labels.value.rounding}),{datapoint:e,seriesIndex:t})}let Q=y(null),Ve=k;function He(e,t){Ve(`selectDatapoint`,{datapoint:e,index:t}),H.value.events.datapointClick&&H.value.events.datapointClick({datapoint:e,seriesIndex:t})}function Ue(e,t){Q.value=t,H.value.events.datapointEnter&&H.value.events.datapointEnter({datapoint:e,seriesIndex:t})}function We(e,t){Q.value=null,H.value.events.datapointLeave&&H.value.events.datapointLeave({datapoint:e,seriesIndex:t})}let Ge=p(()=>`${H.value.style.animation.speedMs}ms`),{fitText:$}=me({svgRef:q,unitWidth:p(()=>X.value.drawingWidth/W.value.length*.9)});return i(async()=>{await b(),$(`.vue-ui-sparkhistogram-top-label`,H.value.style.labels.value.minFontSize),$(`.vue-ui-sparkhistogram-bottom-label`,H.value.style.labels.valueLabel.minFontSize),$(`.vue-ui-sparkhistogram-time-label`,H.value.style.labels.timeLabel.minFontSize)}),g([G,K,()=>W.value],async()=>{await b(),$(`.vue-ui-sparkhistogram-top-label`,H.value.style.labels.value.minFontSize),$(`.vue-ui-sparkhistogram-bottom-label`,H.value.style.labels.valueLabel.minFontSize),$(`.vue-ui-sparkhistogram-time-label`,H.value.style.labels.timeLabel.minFontSize)}),(i,d)=>(a(),_(`div`,{class:`vue-data-ui-component vue-ui-spark-histogram`,ref_key:`histogramChart`,ref:z,style:o(`width:100%;background:${H.value.style.backgroundColor};font-family:${H.value.style.fontFamily}`),onMouseleave:d[0]||=e=>Q.value=null},[H.value.style.title.text?(a(),_(`div`,{key:0,ref_key:`chartTitle`,ref:R,style:o(`width:calc(100% - 12px);background:transparent;margin:0 auto;margin:${H.value.style.title.margin};padding: 0 6px;text-align:${H.value.style.title.textAlign}`)},[v(`div`,{style:o(`font-size:${H.value.style.title.fontSize}px;color:${H.value.style.title.color};font-weight:${H.value.style.title.bold?`bold`:`normal`}`)},[n(s(H.value.style.title.text)+` `,1),Q.value===null?t(``,!0):(a(),_(`span`,he,`- `+s(Z.value[Q.value].timeLabel||``)+` `+s(r(E)(H.value.style.labels.value.formatter,Z.value[Q.value].value,r(x)({p:H.value.style.labels.value.prefix,v:Z.value[Q.value].value,s:H.value.style.labels.value.suffix,r:H.value.style.labels.value.rounding}),{datapoint:Z.value[Q.value],seriesIndex:Q.value})),1)),![void 0,null].includes(Q.value)&&![null,void 0].includes(Z.value[Q.value].valueLabel)?(a(),_(`span`,ge,s(` (${Z.value[Q.value].valueLabel||0})`),1)):t(``,!0)],4),H.value.style.title.subtitle.text?(a(),_(`div`,{key:0,style:o(`font-size:${H.value.style.title.subtitle.fontSize}px;color:${H.value.style.title.subtitle.color};font-weight:${H.value.style.title.subtitle.bold?`bold`:`normal`}`)},s(H.value.style.title.subtitle.text),5)):t(``,!0)],4)):t(``,!0),(a(),_(`svg`,{ref_key:`svgRef`,ref:q,xmlns:r(ie),viewBox:`0 0 ${X.value.width} ${X.value.height}`,style:{overflow:`visible`}},[c(r(A)),i.$slots[`chart-background`]?(a(),_(`foreignObject`,{key:0,x:0,y:0,width:X.value.width,height:X.value.height,style:{pointerEvents:`none`}},[l(i.$slots,`chart-background`,{},void 0,!0)],8,ve)):t(``,!0),v(`defs`,null,[(a(!0),_(h,null,f(Z.value,(e,t)=>(a(),_(`radialGradient`,{id:`gradient_positive_${t}_${F.value}`,cy:`50%`,cx:`50%`,r:`50%`,fx:`50%`,fy:`50%`},[v(`stop`,{offset:`0%`,"stop-color":r(T)(r(w)(H.value.style.bars.colors.positive,.05),e.intensity)},null,8,be),v(`stop`,{offset:`100%`,"stop-color":r(T)(H.value.style.bars.colors.positive,e.intensity)},null,8,xe)],8,ye))),256)),(a(!0),_(h,null,f(Z.value,(e,t)=>(a(),_(`radialGradient`,{id:`gradient_negative_${t}_${F.value}`,cy:`50%`,cx:`50%`,r:`50%`,fx:`50%`,fy:`50%`},[v(`stop`,{offset:`0%`,"stop-color":r(T)(r(w)(H.value.style.bars.colors.negative,.05),e.intensity)},null,8,Ce),v(`stop`,{offset:`100%`,"stop-color":r(T)(H.value.style.bars.colors.negative,e.intensity)},null,8,we)],8,Se))),256)),(a(!0),_(h,null,f(Z.value,(e,t)=>(a(),_(`radialGradient`,{id:`gradient_datapoint_${t}_${F.value}`,cy:`50%`,cx:`50%`,r:`50%`,fx:`50%`,fy:`50%`},[v(`stop`,{offset:`0%`,"stop-color":r(T)(r(w)(e.color,.05),e.intensity)},null,8,Ee),v(`stop`,{offset:`100%`,"stop-color":r(T)(e.color,e.intensity)},null,8,De)],8,Te))),256))]),(a(!0),_(h,null,f(Z.value,(e,n)=>(a(),_(`g`,null,[Q.value!==null&&Q.value===n?(a(),_(`rect`,{key:0,height:X.value.height,width:e.unitWidth,fill:H.value.style.selector.fill,x:e.trapX,y:0,stroke:H.value.style.selector.stroke,"stroke-width":H.value.style.selector.strokeWidth,rx:H.value.style.selector.borderRadius,"stroke-dasharray":H.value.style.selector.strokeDasharray},null,8,Oe)):t(``,!0)]))),256)),!H.value.style.bars.shape||H.value.style.bars.shape===`square`?(a(),_(`g`,ke,[(a(!0),_(h,null,f(Z.value,(t,n)=>(a(),_(`rect`,{x:t.x,y:t.y,height:t.height,width:t.width,fill:H.value.style.bars.colors.gradient.show?t.gradient:t.color,stroke:t.stroke,"stroke-width":H.value.style.bars.strokeWidth,rx:`${H.value.style.bars.borderRadius*t.proportion/12}%`,class:e({"vue-ui-sparkhistogram-shape":H.value.style.animation.show})},null,10,Ae))),256))])):(a(),_(`g`,je,[(a(!0),_(h,null,f(Z.value,(t,n)=>(a(),u(ue,{plot:{x:t.x+t.width/2,y:t.y+t.height/2},color:H.value.style.bars.colors.gradient.show?t.gradient:t.color,shape:H.value.style.bars.shape,radius:Math.min(t.height*.4,t.width*.4),class:e({"vue-ui-sparkhistogram-shape":H.value.style.animation.show})},null,8,[`plot`,`color`,`shape`,`radius`,`class`]))),256))])),r(U)?t(``,!0):(a(),_(h,{key:3},[(a(!0),_(h,null,f(Z.value,(e,n)=>(a(),_(`g`,null,[H.value.style.labels.value.show?(a(),_(`text`,{key:0,class:`vue-ui-sparkhistogram-top-label`,"text-anchor":`middle`,x:e.textAnchor,y:e.y-H.value.style.labels.value.fontSize/3+H.value.style.labels.value.offsetY,"font-size":H.value.style.labels.value.fontSize,"font-weight":H.value.style.labels.value.bold?`bold`:`normal`,fill:H.value.style.labels.value.color},s(Be(e,n)),9,Me)):t(``,!0)]))),256)),(a(!0),_(h,null,f(Z.value,(e,n)=>(a(),_(`g`,null,[e.valueLabel&&H.value.style.labels.valueLabel.show?(a(),_(`text`,{key:0,class:`vue-ui-sparkhistogram-bottom-label`,x:e.textAnchor,y:e.y+e.height+H.value.style.labels.valueLabel.fontSize,"font-size":H.value.style.labels.valueLabel.fontSize,"text-anchor":`middle`,fill:H.value.style.labels.valueLabel.color},s(e.valueLabel),9,Ne)):t(``,!0)]))),256)),(a(!0),_(h,null,f(Z.value,(e,n)=>(a(),_(`g`,null,[e.timeLabel&&H.value.style.labels.timeLabel.show?(a(),_(`text`,{key:0,class:`vue-ui-sparkhistogram-time-label`,x:e.textAnchor,y:X.value.height,"font-size":H.value.style.labels.timeLabel.fontSize,fill:H.value.style.labels.timeLabel.color,"text-anchor":`middle`},s(e.timeLabel),9,Pe)):t(``,!0)]))),256))],64)),(a(!0),_(h,null,f(Z.value,(e,t)=>(a(),_(`g`,null,[v(`rect`,{height:X.value.height,width:e.unitWidth,fill:`transparent`,x:e.trapX,y:0,onMouseover:n=>Ue(e,t),onMouseleave:n=>We(e,t),onClick:()=>He(e,t)},null,40,Fe)]))),256))],8,_e)),i.$slots.source?(a(),_(`div`,{key:1,ref_key:`source`,ref:I,dir:`auto`},[l(i.$slots,`source`,{},void 0,!0)],512)):t(``,!0),l(i.$slots,`skeleton`,{},()=>[r(U)?(a(),u(se,{key:0})):t(``,!0)],!0)],36))}},[[`__scopeId`,`data-v-4e8765cf`]]),B=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:`Module`}));export{R as a,B as b};