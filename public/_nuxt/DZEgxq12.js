const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CbFHGlY2.js","./BLt7TXlb.js","./Cf-0F-2c.js","./B9jcbJ_P.js","./xh7dz5-d.js","./CWNsAIol.js","./ByvxprxI.js","./CRSLCJ2m.js","./8DvoFuCx.js","./CH8pva4p.js","./C0O4I1kb.js","./DdyLBgN8.js","./C66xQW7K.js","./DuIAB7Tu.js","./DHC76net.js","./BDmUravP.js","./D7-tWLRc.js","./CBD7ngdF.js","./BIodG7vT.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,D as n,Dt as r,G as i,J as a,M as o,Mt as s,Nt as c,O as l,Q as u,R as d,S as f,T as p,Tt as m,Z as h,_ as g,b as _,et as v,f as y,jt as b,k as x,lt as S,m as C,ot as w,p as T,w as E,x as D,yt as O,z as k}from"./BLt7TXlb.js";import{t as A}from"./YZkb6lnT.js";import{D as ee,F as te,Mt as j,N as ne,Nt as re,P as ie,St as ae,V as oe,_t as se,a as ce,bt as le,dt as ue,h as de,it as M,u as N,wt as P,y as fe}from"./Cf-0F-2c.js";import{n as pe,t as me}from"./8DvoFuCx.js";import{t as he}from"./Cme7ewGR.js";import{t as ge}from"./CWNsAIol.js";import{n as _e,t as ve}from"./D4ushAer.js";import{t as ye}from"./CLl0-3D6.js";import{t as be}from"./BwaPX4qL.js";import{t as xe}from"./BDmUravP.js";import{t as Se}from"./BIZzPpPz.js";import{a as Ce,n as we}from"./D4v1zV2y.js";import{t as Te}from"./BEpjx3T_.js";import{t as Ee}from"./DMqKe8aR.js";import{t as De}from"./CMjlbb0z.js";var Oe={userOptions:{show:!1}},ke={userOptions:{show:!1},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#3A3A3A`},legend:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},nodes:{stroke:`#1A1A1A`},links:{stroke:`#5A5A5A`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},Ae={style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#5A5A5A`},legend:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},nodes:{stroke:`#1A1A1A`},links:{stroke:`#5A5A5A`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},je={style:{chart:{backgroundColor:`#FFF8E1`,color:`#424242`,tooltip:{backgroundColor:`#FFECB3`,backgroundOpacity:30,color:`#424242`,borderColor:`#FF8A65`},legend:{backgroundColor:`#FFF8E1`,color:`#424242`},title:{color:`#424242`,subtitle:{color:`#757575`}},nodes:{stroke:`#3A3A3A`},links:{stroke:`#3A3A3A`}}},table:{th:{backgroundColor:`#FFF8E1`,color:`#424242`},td:{backgroundColor:`#FFF8E1`,color:`#424242`}}},Me={style:{chart:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,tooltip:{backgroundColor:`#1E1E1E`,backgroundOpacity:30,color:`#FFF8E1`,borderColor:`#FF8A65`},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}},legend:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`},nodes:{stroke:`#1E1E1E`},links:{stroke:`#1E1E1E`}}},table:{th:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`},td:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`}}},Ne={style:{chart:{backgroundColor:`#1A1A1A`,color:`#99AA99`,tooltip:{backgroundColor:`#2A2F2A`,color:`#AACCAA`,borderColor:`#66CC66`},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}},legend:{backgroundColor:`#1A1A1A`,color:`#99AA99`},nodes:{stroke:`#1A1A1A`},links:{stroke:`#1A1A1A`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#99AA99`},td:{backgroundColor:`#1A1A1A`,color:`#AACCAA`}}},Pe={style:{chart:{backgroundColor:`#fbfafa`,color:`#8A9892`,tooltip:{backgroundColor:`#fbfafa`,color:`#8A9892`},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}},legend:{backgroundColor:`#fbfafa`,color:`#99AA99`},nodes:{stroke:`#fbfafa`},links:{stroke:`#fbfafa`}}},table:{th:{backgroundColor:`#fbfafa`,color:`#8F837A`},td:{backgroundColor:`#fbfafa`,color:`#8F837A`}}},Fe={style:{chart:{backgroundColor:`#f6f6fb`,color:`#50606C`,tooltip:{backgroundColor:`#f6f6fb`,color:`#50606C`},title:{color:`#50606C`,subtitle:{color:`#718890`}},legend:{backgroundColor:`#f6f6fb`,color:`#61747E`},nodes:{stroke:`#f6f6fb`},links:{stroke:`#f6f6fb`}}},table:{th:{backgroundColor:`#f6f6fb`,color:`#50606C`},td:{backgroundColor:`#f6f6fb`,color:`#50606C`}}},Ie={default:{},minimal:Oe,minimalDark:ke,dark:Ae,celebration:je,celebrationNight:Me,hack:Ne,zen:Pe,concrete:Fe},Le=Object.freeze(Object.defineProperty({__proto__:null,celebration:je,celebrationNight:Me,concrete:Fe,dark:Ae,default:Ie,hack:Ne,minimal:Oe,minimalDark:ke,zen:Pe},Symbol.toStringTag,{value:`Module`})),Re=[`id`],ze={key:1,ref:`noTitle`,class:`vue-data-ui-no-title-space`,style:`height:36px; width: 100%;background:transparent`},Be=[`id`],Ve=[`xmlns`,`viewBox`],He=[`width`,`height`],Ue=[`id`],We=[`stop-color`],Ge=[`stop-color`],Ke=[`d`,`fill`,`stroke`,`stroke-width`],qe=[`x`,`y`,`height`,`width`,`fill`,`stroke`,`stroke-width`,`rx`,`aria-label`,`onMouseenter`,`onMouseleave`,`onClick`,`onKeydown`,`onFocus`,`onBlur`],Je={key:1},Ye=[`x`,`y`,`font-size`,`fill`],Xe=[`x`,`y`,`font-size`,`fill`],Ze={key:4,class:`vue-data-ui-watermark`},Qe=[`id`],$e=[`onClick`],et=[`innerHTML`],tt=ge({__name:`vue-ui-flow`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:[`copyAlt`],setup(ge,{expose:Oe,emit:ke}){let Ae=x(()=>A(()=>import(`./CbFHGlY2.js`),__vite__mapDeps([0,1,2]),import.meta.url)),je=x(()=>A(()=>import(`./B9jcbJ_P.js`),__vite__mapDeps([3,4,1,5,2]),import.meta.url)),Me=x(()=>A(()=>import(`./ByvxprxI.js`),__vite__mapDeps([6,7,1,4,5,2,8]),import.meta.url)),Ne=x(()=>A(()=>import(`./CH8pva4p.js`),__vite__mapDeps([9,1,4,5,2,10]),import.meta.url)),Pe=x(()=>A(()=>import(`./DdyLBgN8.js`),__vite__mapDeps([11,1,4,5,2,12,13]),import.meta.url)),Fe=x(()=>A(()=>import(`./DHC76net.js`),__vite__mapDeps([14,1,4,5,2,15,16,13]),import.meta.url)),Le=x(()=>A(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([17,1]),import.meta.url)),tt=x(()=>A(()=>import(`./BIodG7vT.js`),__vite__mapDeps([18,1,4,5,2]),import.meta.url)),{vue_ui_flow:nt}=me(),{isThemeValid:rt,warnInvalidTheme:it}=be(),F=ge,at=ke,I=O(re()),L=O(null),ot=O(0),st=O(0),ct=O(!1),lt=O(``),ut=O(null),dt=O(null),ft=O(null),R=O(null),z=O(null),pt=O(!1),B=O(null),mt=O(null),ht=O(null),V=O(!1),gt=O(!1),_t=_(()=>!!F.dataset&&F.dataset.length);i(()=>{pt.value=!0,wt()});let H=O(!1);function vt(e){H.value=e,ot.value+=1}let U=O(kt()),W=_(()=>U.value.userOptions.useCursorPointer),yt=_(()=>ie({defaultConfig:{userOptions:{show:!1},nodeCategories:{B:`A`,C:`B`},nodeCategoryColors:{A:`#CACACA`,B:`#AAAAAA`},table:{show:!1},style:{chart:{backgroundColor:`#99999930`,legend:{backgroundColor:`transparent`},nodes:{labels:{show:!1},stroke:`#666666`},links:{stroke:`#666666`}}}},userConfig:U.value.skeletonConfig??{}})),{loading:bt,FINAL_DATASET:xt,manualLoading:St}=ve({...m(F),FINAL_CONFIG:U,prepareConfig:kt,skeletonDataset:F.config?.skeletonDataset??[[`A`,`B`,2,`#CACACA`],[`B`,`C`,1,`#CACACA`],[`C`,`D`,.5,`#CACACA`],[`E`,`F`,1,`#AAAAAA`],[`F`,`G`,.5,`#AAAAAA`],[`G`,`H`,.25,`#AAAAAA`]],skeletonConfig:ie({defaultConfig:U.value,userConfig:yt.value})}),Ct=_(()=>!!U.value.debug);function wt(){if(oe(F.dataset)&&(de({componentName:`VueUiFlow`,type:`dataset`,debug:Ct.value}),St.value=!0),oe(F.dataset)||(St.value=U.value.loading),U.value.responsive){let e=we(()=>{let{width:e,height:t}=Ce({chart:L.value,title:U.value.style.chart.title.text?dt.value:null,legend:U.value.style.chart.legend.show?ut.value:null,source:ft.value});requestAnimationFrame(()=>{At.value=e,jt.value=t})});R.value&&(z.value&&R.value.unobserve(z.value),R.value.disconnect()),R.value=new ResizeObserver(e),z.value=L.value.parentNode,R.value.observe(z.value)}}let{userOptionsVisible:Tt,setUserOptionsVisibility:Et,keepUserOptionState:Dt}=Ee({config:U.value}),{svgRef:Ot}=Te({config:U.value.style.chart.title});function kt(){let e=pe({userConfig:F.config,defaultConfig:nt}),t=e,n=e.theme;if(n)if(!rt.value(e))it(e),t=e;else{let r=pe({userConfig:Ie[n]||F.config,defaultConfig:e});t={...pe({userConfig:F.config,defaultConfig:r}),customPalette:e.customPalette.length?e.customPalette:ue[n]||M}}else t=e;return t.nodeCategories=F.config.nodeCategories||{},t.nodeCategoryColors=F.config.nodeCategoryColors||{},t}let At=O(U.value.style.chart.width),jt=O(U.value.style.chart.height);w(()=>F.config,e=>{bt.value||(U.value=kt()),Tt.value=!U.value.userOptions.showOnChartHover,wt(),st.value+=1,G.value.showTable=U.value.table.show},{deep:!0}),w(()=>F.dataset,e=>{Array.isArray(e)&&e.length>0&&(St.value=!1)},{deep:!0});let{isPrinting:Mt,isImaging:Nt,generatePdf:Pt,generateImage:Ft}=he({elementId:`flow_${I.value}`,fileName:U.value.style.chart.title.text||`vue-ui-flow`,options:U.value.userOptions.print}),It=_(()=>U.value.userOptions.show&&!U.value.style.chart.title.text),Lt=_(()=>fe(U.value.customPalette)),Rt=_(()=>U.value.style.chart.nodes.width),G=O({showTable:U.value.table.show,showTooltip:U.value.style.chart.tooltip.show});w(U,()=>{G.value={showTable:U.value.table.show,showTooltip:U.value.style.chart.tooltip.show}},{immediate:!0});let zt=_(()=>!xt.value||!xt.value.length?[]:xt.value.map((e,t)=>[e[0],e[1],N(e[2]),e[3]?se(e[3]):Lt.value[t]||Lt.value[t%Lt.value.length]||M[t]||M[t%M.length]]));function Bt(e){let t={},n={};function r(e,r){t[e]||(t[e]={level:null,inflow:0,outflow:0,children:[],color:null,uid:re()}),t[e].level===null&&(t[e].level=r),n[r]||(n[r]=[]),n[r].includes(e)||n[r].push(e)}e.forEach(([e,n,i])=>{let a=t[e]?.level??0,o=a+1;r(e,a),r(n,o),t[e].children.push({target:n,value:i}),t[e].outflow+=i,t[n].inflow+=i});let i=new Set(e.map(([e])=>e)),a=new Set(e.map(([,e])=>e)),o=Array.from(i).filter(e=>!a.has(e)),s={};o.forEach((e,t)=>{s[e]=Lt.value[t]||M[t%M.length]});let c={};e.forEach(([e,t,n,r])=>{r&&(c[e]=r,c[t]=r)}),Object.keys(t).forEach((e,n)=>{let r=U.value.nodeCategories?.[e],i=r?U.value.nodeCategoryColors?.[r]:null;t[e].color=c[e]||i||(o.includes(e)?s[e]:null)||M[n%M.length]}),Object.keys(t).forEach(e=>{t[e].value=Math.max(t[e].inflow,t[e].outflow)});let l=q.value,u=Ut.value.width,d=Ut.value.height,f=Object.keys(n).map(Number).sort((e,t)=>e-t),p=f.length||1,m=p>1?u/(p-1):0,h=Number(Rt.value),g=Number(U.value.style.chart.nodes.gapPx??U.value.style.chart.nodes.gap??8),_=Number(U.value.style.chart.nodes.minHeight||0);function v(e){let r=n[e],i=r.length;if(!i)return 1/0;let a=Math.max(0,(i-1)*g),o=Math.max(0,d-a),s=Math.min(_,i?o/i:0),c=0,l=r.map(e=>t[e].value||0),u=l.reduce((e,t)=>e+t,0);for(let e=0;e<12;e+=1){let e=u>0?(o-c)/u:0,t=[];for(let n=0;n<l.length;n+=1){let r=l[n];r<0||r*e<s&&t.push(n)}if(!t.length)return Math.max(0,e);for(let e of t)c+=s,u-=l[e],l[e]=-1;if(u<=0)return 0}return u>0?Math.max(0,(o-c)/u):0}let y=f.map(v),b=y.length?Math.min(...y):0,x={};f.forEach(e=>{let r=n[e],i=r.length,a=Math.max(0,(i-1)*g),o=Math.max(0,d-a),s=Math.min(_,i?o/i:0),c=r.map(e=>Math.max(s,(t[e].value||0)*b)),u=c.reduce((e,t)=>e+t,0)+a,f=Math.max(0,(d-u)/2);r.forEach((n,r)=>{let a=c[r],o=l.left+e*m,s=f;x[n]={x:o,y:s,absoluteY:s,height:a,i:r,color:t[n].color,value:t[n].value,id:re()},f+=a,r<i-1&&(f+=g)})});let S=[],C=l.top,w={},T={};Object.keys(t).forEach(e=>{w[e]=x[e]?.y??0,T[e]=0});let E=!!U.value.style.chart.links.smooth,D=.5;return f.forEach(e=>{n[e].forEach(e=>{let n=t[e],r=x[e];if(!n.children||!n.children.length)return;let i=r.y;n.children.forEach(({target:a,value:o})=>{let s=x[a],c=t[a],l=n.outflow>0?o/n.outflow:0,u=c.inflow>0?o/c.inflow:0,d=N(i+C),f=N(i+l*r.height+C),p=w[a],m=p+u*s.height;T[a]+=o;let g=c.inflow>0&&T[a]>=c.inflow-1e-6,_=s.y+s.height;(g||m>_-.25)&&(m=_);let v=N(p+C),y=N(m+C),b=N(r.x+h),O=N(s.x),k;if(!E||O<=b)k=`M ${b} ${d} L ${b} ${f} L ${O} ${y} L ${O} ${v} Z`;else{let e=O-b,t=N(b+e*D),n=N(O-e*D),r=d,i=v,a=f,o=y;k=`M ${b} ${r} C ${t} ${r}, ${n} ${i}, ${O} ${i} L ${O} ${o} C ${n} ${o}, ${t} ${a}, ${b} ${a} Z`}S.push({id:re(),source:e,target:a,path:k,value:o,sourceColor:n.color,targetColor:t[a].color}),i=f-C,w[a]=m})})}),{nodeCoordinates:x,links:S}}let K=_(()=>{let e=Bt(xt.value);return{nodes:Object.keys(e.nodeCoordinates).map((t,n)=>({...e.nodeCoordinates[t],name:t})),links:e.links}}),Vt=_(()=>At.value),Ht=_(()=>jt.value),q=_(()=>U.value.style.chart.padding),Ut=_(()=>({width:Math.max(0,Vt.value-40-q.value.right-q.value.left),height:Math.max(0,Ht.value-q.value.top-q.value.bottom)})),J=_(()=>({width:Vt.value,height:Ht.value}));function Wt(e){let t={},n={},r=new Set;return zt.value.forEach(([e,r,i])=>{t[e]||(t[e]=[]),n[r]||(n[r]=[]),t[e].push(r),n[r].push(e)}),t[e]&&t[e].forEach(e=>r.add(e)),n[e]&&n[e].forEach(e=>r.add(e)),Array.from(r).concat(e)}let Y=O(null),X=O(null),Z=O(null),Gt=O(!1),Kt=O(null);function qt(e,t){Q.value=[],Y.value=Wt(e.name),X.value=e.name,Kt.value=e.id;let n=e.name,r=zt.value,i=0,a=0,o=[],s=[],c=new Set(r.map(([e])=>e)),l=new Set(r.map(([,e])=>e)),u=Array.from(c).filter(e=>!l.has(e)),d=r.filter(([e])=>u.includes(e)).reduce((e,[t,n,r])=>e+r,0),f={};K.value.nodes.forEach(e=>{f[e.name]=e.color}),r.forEach(([e,t,r])=>{t===n&&(i+=r,o.push({source:e,value:r,color:f[e]})),e===n&&(a+=r,s.push({target:t,value:r,color:f[t]}))});let p=d>0?Math.max(i,a)/d*100:0,m={name:n,inflow:i,outflow:a,from:o,to:s,percentOfTotal:p,color:f[n]||`#000000`};U.value.events.datapointEnter&&U.value.events.datapointEnter({datapoint:m,seriesIndex:t}),Z.value={datapoint:m},ct.value=!0;let h=``,g=U.value.style.chart.tooltip.customFormat;if(Gt.value=!1,te(g))try{let e=g({datapoint:m,series:K.value,config:U.value});typeof e==`string`&&(lt.value=e,Gt.value=!0)}catch{console.warn(`Custom format cannot be applied.`)}if(!Gt.value){let e=U.value.style.chart.tooltip.showPercentage?`<div>${j({p:U.value.style.chart.tooltip.translations.percentOfTotal,v:m.percentOfTotal,s:`%`,r:U.value.style.chart.tooltip.roundingPercentage})}</div>`:``;h+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${U.value.style.chart.tooltip.borderColor};padding-bottom:6px;margin-bottom:3px;"><span style="margin-right:4px; color:${m.color}">⏹</span>${m.name}${e}</div>`,m.from.length&&(h+=`<div>${U.value.style.chart.tooltip.translations.from}</div>`,m.from.forEach(e=>{h+=`<div><span style="color:${e.color}">⏹←</span> ${e.source}: ${P(U.value.style.chart.nodes.labels.formatter,e.value,j({p:U.value.style.chart.nodes.labels.prefix,v:e.value,s:U.value.style.chart.nodes.labels.suffix,r:U.value.style.chart.nodes.labels.rounding}))}</div>`})),m.to.length&&(h+=`<div style="margin-top:6px;">${U.value.style.chart.tooltip.translations.to}</div>`,m.to.forEach(e=>{h+=`<div><span style="color:${e.color}">⏹→</span> ${e.target}: ${P(U.value.style.chart.nodes.labels.formatter,e.value,j({p:U.value.style.chart.nodes.labels.prefix,v:e.value,s:U.value.style.chart.nodes.labels.suffix,r:U.value.style.chart.nodes.labels.rounding}))}</div>`})),lt.value=h}}function Jt(e){Kt.value=null;let t=Z.value;U.value.events.datapointLeave&&U.value.events.datapointLeave({datapoint:t,seriesIndex:e}),Y.value=null,X.value=null,ct.value=!1}function Yt(e){let t=Z.value;U.value.events.datapointClick&&U.value.events.datapointClick({datapoint:t,seriesIndex:e})}let Xt=_(()=>K.value.links.map(({source:e,target:t,sourceColor:n,targetColor:r,value:i})=>({source:e,target:t,sourceColor:n,targetColor:r,value:i})));function Zt(e=null){k(()=>{let t=Xt.value.map((e,t)=>[[e.source],[e.target],[e.value]]),n=ce([[U.value.style.chart.title.text],[U.value.style.chart.title.subtitle.text],[[U.value.table.columnNames.source],[U.value.table.columnNames.target],[U.value.table.columnNames.value]]].concat(t));e?e(n):ne({csvContent:n,title:U.value.style.chart.title.text||`vue-ui-flow`})})}let Qt=_(()=>{let e=[U.value.table.columnNames.source,U.value.table.columnNames.target,U.value.table.columnNames.value],t=Xt.value.map((e,t)=>[{color:e.sourceColor,name:e.source,shape:`square`},{color:e.targetColor,name:e.target,shape:`square`},j({p:U.value.style.chart.nodes.labels.prefix,v:e.value,s:U.value.style.chart.nodes.labels.suffix,r:U.value.style.chart.nodes.labels.rounding})]),n={th:{backgroundColor:U.value.table.th.backgroundColor,color:U.value.table.th.color,outline:U.value.table.th.outline},td:{backgroundColor:U.value.table.td.backgroundColor,color:U.value.table.td.color,outline:U.value.table.td.outline},breakpoint:U.value.table.responsiveBreakpoint};return{colNames:[U.value.table.columnNames.source,U.value.table.columnNames.target,U.value.table.columnNames.value],head:e,body:t,config:n}});function $t(){return K.value}function en(){G.value.showTable=!G.value.showTable}let tn=O(!1);function nn(){tn.value=!tn.value}function rn(){G.value.showTooltip=!G.value.showTooltip}let an=_(()=>{let e=new Set(K.value.nodes.map(e=>U.value.nodeCategories[e.name]||`__uncategorized__`));return Array.from(e).map(e=>({name:e,color:U.value.nodeCategoryColors[e]||M[0],shape:`square`,count:K.value.nodes.filter(t=>(U.value.nodeCategories[t.name]||`__uncategorized__`)===e).length})).map((e,t)=>({...e,segregate:()=>sn({legend:e,i:t}),opacity:Q.value.length?Q.value.includes(t)?1:.5:1,display:`${e.name} (${e.count})`}))}),on=_(()=>an.value.filter(e=>e.name!==`__uncategorized__`)),Q=O([]);function sn({legend:e,i:t}){let n=e.name;if(Y.value?.every(e=>U.value.nodeCategories[e]===n)){Y.value=null,X.value=null,Q.value=[];return}Q.value=[t],Y.value=K.value.nodes.filter(e=>U.value.nodeCategories[e.name]===n).map(e=>e.name),X.value=null}let cn=_(()=>({cy:`flow-legend`,backgroundColor:U.value.style.chart.legend.backgroundColor,color:U.value.style.chart.legend.color,fontSize:U.value.style.chart.legend.fontSize,paddingBottom:U.value.style.chart.legend.paddingBottom,fontWeight:U.value.style.chart.legend.bold?`bold`:`normal`}));async function ln({scale:e=2}={}){if(!L.value)return;let{width:t,height:n}=L.value.getBoundingClientRect(),r=t/n,{imageUri:i,base64:a}=await xe({domElement:L.value,base64:!0,img:!0,scale:e});return{imageUri:i,base64:a,title:U.value.style.chart.title.text,width:t,height:n,aspectRatio:r}}let $=_(()=>{let e=U.value.table.useDialog&&!U.value.table.show,t=G.value.showTable;return{component:e?tt:Me,title:`${U.value.style.chart.title.text}${U.value.style.chart.title.subtitle.text?`: ${U.value.style.chart.title.subtitle.text}`:``}`,props:e?{backgroundColor:U.value.table.th.backgroundColor,color:U.value.table.th.color,headerColor:U.value.table.th.color,headerBg:U.value.table.th.backgroundColor,isFullscreen:H.value,fullscreenParent:L.value,forcedWidth:Math.min(800,window.innerWidth*.8),isCursorPointer:W.value}:{hideDetails:!0,config:{open:t,maxHeight:1e4,body:{backgroundColor:U.value.style.chart.backgroundColor,color:U.value.style.chart.color},head:{backgroundColor:U.value.style.chart.backgroundColor,color:U.value.style.chart.color}}}}});w(()=>G.value.showTable,e=>{U.value.table.show||(e&&U.value.table.useDialog&&B.value?B.value.open():`close`in B.value&&B.value.close())});function un(){G.value.showTable=!1,mt.value&&mt.value.setTableIconState(!1)}let dn=_(()=>on.value.map(e=>({...e,name:e.display}))),fn=_(()=>U.value.style.chart.backgroundColor),pn=_(()=>U.value.style.chart.legend),{exportSvg:mn,getSvg:hn}=ye({svg:Ot,title:_(()=>U.value.style.chart.title),legend:pn,legendItems:dn,backgroundColor:fn});async function gn({isCb:e}){gt.value=!0,await k();try{if(e){let{blob:e,url:t,text:n,dataUrl:r}=await hn();await Promise.resolve(U.value.userOptions.callbacks.svg({blob:e,url:t,text:n,dataUrl:r}))}else await Promise.resolve(mn())}finally{gt.value=!1}}async function _n(e,t){if(qt(e,t),G.value.showTooltip&&(await k(),L.value&&ht.value)){let{left:e,top:t}=L.value.getBoundingClientRect();ht.value.placeTooltip({x:(e??0)+12,y:(t??0)+12})}}function vn(e){if(e?.stage===`start`){V.value=!0;return}if(e?.stage===`end`){V.value=!1;return}Ft()}async function yn(){if(at(`copyAlt`,{config:U.value,dataset:K.value}),!U.value.userOptions.callbacks.altCopy){console.warn("Vue Data UI - A callback must be set for `altCopy` in userOptions.");return}await Promise.resolve(U.value.userOptions.callbacks.altCopy({config:U.value,dataset:K.value}))}return Oe({getData:$t,getImage:ln,generateCsv:Zt,generateImage:Ft,generateSvg:gn,generatePdf:Pt,toggleTable:en,toggleAnnotator:nn,toggleTooltip:rn,drillCategory:sn,unselectNode:Jt,toggleFullscreen:vt,copyAlt:yn}),(i,m)=>(a(),E(`div`,{ref_key:`flowChart`,ref:L,class:e(`vue-data-ui-component vue-ui-flow ${H.value?`vue-data-ui-wrapper-fullscreen`:``}`),style:s(`font-family:${U.value.style.fontFamily};width:100%; text-align:center;background:${U.value.style.chart.backgroundColor}`),id:`flow_${I.value}`,onMouseenter:m[2]||=()=>r(Et)(!0),onMouseleave:m[3]||=()=>r(Et)(!1)},[U.value.userOptions.buttons.annotator?(a(),f(r(Pe),{key:0,svgRef:r(Ot),backgroundColor:U.value.style.chart.backgroundColor,color:U.value.style.chart.color,active:tn.value,onClose:nn,isCursorPointer:W.value},{"annotator-action-close":S(()=>[u(i.$slots,`annotator-action-close`,{},void 0,!0)]),"annotator-action-color":S(({color:e})=>[u(i.$slots,`annotator-action-color`,b(o({color:e})),void 0,!0)]),"annotator-action-draw":S(({mode:e})=>[u(i.$slots,`annotator-action-draw`,b(o({mode:e})),void 0,!0)]),"annotator-action-undo":S(({disabled:e})=>[u(i.$slots,`annotator-action-undo`,b(o({disabled:e})),void 0,!0)]),"annotator-action-redo":S(({disabled:e})=>[u(i.$slots,`annotator-action-redo`,b(o({disabled:e})),void 0,!0)]),"annotator-action-delete":S(({disabled:e})=>[u(i.$slots,`annotator-action-delete`,b(o({disabled:e})),void 0,!0)]),_:3},8,[`svgRef`,`backgroundColor`,`color`,`active`,`isCursorPointer`])):t(``,!0),It.value?(a(),E(`div`,ze,null,512)):t(``,!0),U.value.style.chart.title.text?(a(),E(`div`,{key:2,ref_key:`chartTitle`,ref:dt,style:`width:100%;background:transparent;padding-bottom:24px`},[(a(),f(Se,{key:`title_${st.value}`,config:{title:{cy:`flow-title`,...U.value.style.chart.title},subtitle:{cy:`flow-subtitle`,...U.value.style.chart.title.subtitle}}},null,8,[`config`]))],512)):t(``,!0),D(`div`,{id:`legend-top-${I.value}`},null,8,Be),U.value.userOptions.show&&_t.value&&(r(Dt)||r(Tt))?(a(),f(r(Fe),{ref_key:`userOptionsRef`,ref:mt,key:`user_option_${ot.value}`,backgroundColor:U.value.style.chart.backgroundColor,color:U.value.style.chart.color,isPrinting:r(Mt),isImaging:r(Nt),uid:I.value,hasPdf:U.value.userOptions.buttons.pdf,hasXls:U.value.userOptions.buttons.csv,hasImg:U.value.userOptions.buttons.img,hasSvg:U.value.userOptions.buttons.svg,hasTable:U.value.userOptions.buttons.table,callbacks:U.value.userOptions.callbacks,hasFullscreen:U.value.userOptions.buttons.fullscreen,hasAltCopy:U.value.userOptions.buttons.altCopy,isFullscreen:H.value,titles:{...U.value.userOptions.buttonTitles},chartElement:L.value,position:U.value.userOptions.position,hasAnnotator:U.value.userOptions.buttons.annotator,printScale:U.value.userOptions.print.scale,isAnnotation:tn.value,hasTooltip:U.value.style.chart.tooltip.show&&U.value.userOptions.buttons.tooltip,isTooltip:G.value.showTooltip,tableDialog:U.value.table.useDialog,isCursorPointer:W.value,onToggleTooltip:rn,onToggleFullscreen:vt,onGeneratePdf:r(Pt),onGenerateCsv:Zt,onGenerateImage:vn,onGenerateSvg:gn,onToggleTable:en,onToggleAnnotator:nn,onCopyAlt:yn,style:s({visibility:r(Dt)?r(Tt)?`visible`:`hidden`:`visible`})},p({_:2},[i.$slots.menuIcon?{name:`menuIcon`,fn:S(({isOpen:e,color:t})=>[u(i.$slots,`menuIcon`,b(o({isOpen:e,color:t})),void 0,!0)]),key:`0`}:void 0,i.$slots.optionTooltip?{name:`optionTooltip`,fn:S(()=>[u(i.$slots,`optionTooltip`,{},void 0,!0)]),key:`1`}:void 0,i.$slots.optionPdf?{name:`optionPdf`,fn:S(()=>[u(i.$slots,`optionPdf`,{},void 0,!0)]),key:`2`}:void 0,i.$slots.optionCsv?{name:`optionCsv`,fn:S(()=>[u(i.$slots,`optionCsv`,{},void 0,!0)]),key:`3`}:void 0,i.$slots.optionImg?{name:`optionImg`,fn:S(()=>[u(i.$slots,`optionImg`,{},void 0,!0)]),key:`4`}:void 0,i.$slots.optionSvg?{name:`optionSvg`,fn:S(()=>[u(i.$slots,`optionSvg`,{},void 0,!0)]),key:`5`}:void 0,i.$slots.optionTable?{name:`optionTable`,fn:S(()=>[u(i.$slots,`optionTable`,{},void 0,!0)]),key:`6`}:void 0,i.$slots.optionFullscreen?{name:`optionFullscreen`,fn:S(({toggleFullscreen:e,isFullscreen:t})=>[u(i.$slots,`optionFullscreen`,b(o({toggleFullscreen:e,isFullscreen:t})),void 0,!0)]),key:`7`}:void 0,i.$slots.optionAnnotator?{name:`optionAnnotator`,fn:S(({toggleAnnotator:e,isAnnotator:t})=>[u(i.$slots,`optionAnnotator`,b(o({toggleAnnotator:e,isAnnotator:t})),void 0,!0)]),key:`8`}:void 0,i.$slots.optionAltCopy?{name:`optionAltCopy`,fn:S(({altCopy:e})=>[u(i.$slots,`optionAltCopy`,b(o({altCopy:e})),void 0,!0)]),key:`9`}:void 0]),1032,`backgroundColor.color.isPrinting.isImaging.uid.hasPdf.hasXls.hasImg.hasSvg.hasTable.callbacks.hasFullscreen.hasAltCopy.isFullscreen.titles.chartElement.position.hasAnnotator.printScale.isAnnotation.hasTooltip.isTooltip.tableDialog.isCursorPointer.onGeneratePdf.style`.split(`.`))):t(``,!0),(a(),E(`svg`,{ref_key:`svgRef`,ref:Ot,xmlns:r(le),viewBox:`0 0 ${J.value.width} ${J.value.height}`,class:e({"vue-data-ui-fullscreen--on":H.value,"vue-data-ui-fulscreen--off":!H.value}),style:s({maxWidth:`100%`,overflow:`visible`,background:`transparent`,color:U.value.style.chart.color})},[l(r(Le)),i.$slots[`chart-background`]?(a(),E(`foreignObject`,{key:0,x:0,y:0,width:J.value.width,height:J.value.height,style:{pointerEvents:`none`}},[u(i.$slots,`chart-background`,{},void 0,!0)],8,He)):t(``,!0),D(`defs`,null,[(a(!0),E(C,null,h(K.value.links,(e,t)=>(a(),E(`linearGradient`,{id:e.id,x1:`0%`,y1:`0%`,x2:`100%`,y2:`0%`},[D(`stop`,{offset:`0%`,"stop-color":e.sourceColor},null,8,We),D(`stop`,{offset:`100%`,"stop-color":e.targetColor},null,8,Ge)],8,Ue))),256))]),(a(!0),E(C,null,h(K.value.links,e=>(a(),E(`path`,{class:`vue-ui-flow-link`,d:e.path,"stroke-linejoin":`round`,"stroke-miterlimit":`1`,fill:`url(#${e.id})`,stroke:U.value.style.chart.links.stroke,"stroke-width":U.value.style.chart.links.strokeWidth,style:s(`
                    opacity:${Y.value?Y.value.includes(e.source)&&Y.value.includes(e.target)?1:.3:X.value?[e.target,e.source].includes(X.value)?1:.3:U.value.style.chart.links.opacity}
                `)},null,12,Ke))),256)),(a(!0),E(C,null,h(K.value.nodes,(e,t)=>(a(),E(`rect`,{class:`vue-ui-flow-node`,x:e.x,y:r(N)(e.absoluteY)+U.value.style.chart.padding.top,height:r(N)(e.height),width:Rt.value,fill:e.color,stroke:U.value.style.chart.nodes.stroke,"stroke-width":U.value.style.chart.nodes.strokeWidth,rx:U.value.style.chart.nodes.borderRadius,style:s({opacity:Y.value?Y.value.includes(e.name)?1:.3:1,outline:Kt.value!==null&&Kt.value===e.id?`2px solid currentColor`:void 0}),role:`button`,tabindex:`0`,"aria-label":`${e.name}: ${r(P)(U.value.style.chart.nodes.labels.formatter,e.value,r(j)({p:U.value.style.chart.nodes.labels.prefix,v:e.value,s:U.value.style.chart.nodes.labels.suffix,r:U.value.style.chart.nodes.labels.rounding}))}`,onMouseenter:n=>qt(e,t),onMouseleave:e=>Jt(t),onClick:e=>Yt(t),onKeydown:[y(T(e=>Yt(t),[`prevent`]),[`enter`]),y(T(e=>Yt(t),[`prevent`]),[`space`]),y(T(e=>Jt(t),[`prevent`]),[`esc`])],onFocus:n=>_n(e,t),onBlur:e=>Jt(t)},null,44,qe))),256)),U.value.style.chart.nodes.labels.show?(a(),E(`g`,Je,[(a(!0),E(C,null,h(K.value.nodes,(e,t)=>(a(),E(`text`,{x:e.x+Rt.value/2,y:(U.value.style.chart.nodes.labels.showValue?r(N)(e.absoluteY+e.height/2-U.value.style.chart.nodes.labels.fontSize/4):e.absoluteY+e.height/2+U.value.style.chart.nodes.labels.fontSize/3)+U.value.style.chart.padding.top,"font-size":U.value.style.chart.nodes.labels.fontSize,fill:r(ae)(e.color),"text-anchor":`middle`,style:s(`pointer-events: none; opacity:${Y.value?Y.value.includes(e.name)?1:0:1}`)},c(U.value.style.chart.nodes.labels.abbreviation.use?r(ee)({source:e.name,length:U.value.style.chart.nodes.labels.abbreviation.length}):e.name),13,Ye))),256)),U.value.style.chart.nodes.labels.showValue?(a(!0),E(C,{key:0},h(K.value.nodes,(e,t)=>(a(),E(`text`,{x:e.x+Rt.value/2,y:r(N)(e.absoluteY+e.height/2+U.value.style.chart.nodes.labels.fontSize/1.3)+U.value.style.chart.padding.top,"font-size":U.value.style.chart.nodes.labels.fontSize,fill:r(ae)(e.color),"text-anchor":`middle`,style:s(`pointer-events: none; opacity:${Y.value?Y.value.includes(e.name)?1:0:1}`)},c(r(P)(U.value.style.chart.nodes.labels.formatter,e.value,r(j)({p:U.value.style.chart.nodes.labels.prefix,v:e.value,s:U.value.style.chart.nodes.labels.suffix,r:U.value.style.chart.nodes.labels.rounding}),{datapoint:e,seriesIndex:t})),13,Xe))),256)):t(``,!0)])):t(``,!0),u(i.$slots,`svg`,{svg:{...J.value,isPrintingImg:r(Mt)|r(Nt)|V.value,isPrintingSvg:gt.value}},void 0,!0)],14,Ve)),i.$slots.watermark?(a(),E(`div`,Ze,[u(i.$slots,`watermark`,b(o({isPrinting:r(Mt)||r(Nt)||V.value||gt.value})),void 0,!0)])):t(``,!0),D(`div`,{id:`legend-bottom-${I.value}`},null,8,Qe),pt.value?(a(),f(g,{key:5,to:U.value.style.chart.legend.position===`top`?`#legend-top-${I.value}`:`#legend-bottom-${I.value}`},[D(`div`,{ref_key:`chartLegend`,ref:ut},[U.value.style.chart.legend.show&&on.value.length?(a(),f(De,{key:0,legendSet:on.value,config:cn.value,isCursorPointer:W.value,onClickMarker:m[0]||=e=>sn(e)},{item:S(({legend:e,index:n})=>[r(bt)?t(``,!0):(a(),E(`div`,{key:0,onClick:t=>e.segregate(),style:s(`opacity:${Q.value.length?Q.value.includes(n)?1:.5:1}`)},c(e.display),13,$e))]),_:1},8,[`legendSet`,`config`,`isCursorPointer`])):t(``,!0),u(i.$slots,`legend`,{legend:an.value},void 0,!0)],512)],8,[`to`])):t(``,!0),i.$slots.source?(a(),E(`div`,{key:6,ref_key:`source`,ref:ft,dir:`auto`},[u(i.$slots,`source`,{},void 0,!0)],512)):t(``,!0),l(r(Ae),{ref_key:`tooltip`,ref:ht,teleportTo:U.value.style.chart.tooltip.teleportTo,show:G.value.showTooltip&&ct.value,backgroundColor:U.value.style.chart.tooltip.backgroundColor,color:U.value.style.chart.tooltip.color,fontSize:U.value.style.chart.tooltip.fontSize,borderRadius:U.value.style.chart.tooltip.borderRadius,borderColor:U.value.style.chart.tooltip.borderColor,borderWidth:U.value.style.chart.tooltip.borderWidth,backgroundOpacity:U.value.style.chart.tooltip.backgroundOpacity,position:U.value.style.chart.tooltip.position,offsetY:U.value.style.chart.tooltip.offsetY,parent:L.value,content:lt.value,isCustom:Gt.value,isFullscreen:H.value,smooth:U.value.style.chart.tooltip.smooth,backdropFilter:U.value.style.chart.tooltip.backdropFilter,smoothForce:U.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:U.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":S(()=>[u(i.$slots,`tooltip-before`,b(o({...Z.value})),void 0,!0)]),"tooltip-after":S(()=>[u(i.$slots,`tooltip-after`,b(o({...Z.value})),void 0,!0)]),_:3},8,[`teleportTo`,`show`,`backgroundColor`,`color`,`fontSize`,`borderRadius`,`borderColor`,`borderWidth`,`backgroundOpacity`,`position`,`offsetY`,`parent`,`content`,`isCustom`,`isFullscreen`,`smooth`,`backdropFilter`,`smoothForce`,`smoothSnapThreshold`]),_t.value&&U.value.userOptions.buttons.table?(a(),f(v($.value.component),d({key:7},$.value.props,{ref_key:`tableUnit`,ref:B,onClose:un}),p({content:S(()=>[l(r(Ne),{colNames:Qt.value.colNames,head:Qt.value.head,body:Qt.value.body,config:Qt.value.config,title:U.value.table.useDialog?``:$.value.title,withCloseButton:!U.value.table.useDialog,isCursorPointer:W.value,onClose:un},{th:S(({th:e})=>[D(`div`,{innerHTML:e,style:{display:`flex`,"align-items":`center`}},null,8,et)]),td:S(({td:e})=>[n(c(e.name||e),1)]),_:1},8,[`colNames`,`head`,`body`,`config`,`title`,`withCloseButton`,`isCursorPointer`])]),_:2},[U.value.table.useDialog?{name:`title`,fn:S(()=>[n(c($.value.title),1)]),key:`0`}:void 0,U.value.table.useDialog?{name:`actions`,fn:S(()=>[D(`button`,{tabindex:`0`,class:`vue-ui-user-options-button`,onClick:m[1]||=e=>Zt(U.value.userOptions.callbacks.csv),style:s({cursor:W.value?`pointer`:`default`})},[l(r(je),{name:`fileCsv`,stroke:$.value.props.color},null,8,[`stroke`])],4)]),key:`1`}:void 0]),1040)):t(``,!0),u(i.$slots,`skeleton`,{},()=>[r(bt)?(a(),f(_e,{key:0})):t(``,!0)],!0)],46,Re))}},[[`__scopeId`,`data-v-e4271008`]]),nt=Object.freeze(Object.defineProperty({__proto__:null,default:tt},Symbol.toStringTag,{value:`Module`}));export{Le as a,nt as b};