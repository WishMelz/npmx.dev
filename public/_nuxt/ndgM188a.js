import{C as e,Dt as t,G as n,J as r,Mt as i,Nt as a,Q as o,R as s,Z as c,b as l,f as u,it as d,m as f,ot as ee,w as p,x as m,yt as h}from"./BLt7TXlb.js";import{Mt as g,Nt as te,V as ne,bt as _,et as v,h as re,rt as y,wt as b}from"./Cf-0F-2c.js";import{n as x,t as S}from"./8DvoFuCx.js";import{t as C}from"./CWNsAIol.js";var w={key:0,class:`vue-ui-rating-title`,style:{width:`100%`}},T={key:0,style:{position:`relative`}},E={key:0,style:{position:`absolute`,top:`0`,left:`0`,width:`100%`,height:`100%`}},D={key:1,style:{position:`absolute`,top:`0`,left:`0`,width:`100%`,height:`100%`}},ie=[`src`,`height`,`width`],ae=[`xmlns`,`height`,`width`],oe=[`id`],se=[`stop-color`],ce=[`stop-color`],le=[`points`,`fill`,`stroke`,`stroke-width`],ue=[`src`,`alt`,`height`,`width`,`id`],O=[`xmlns`,`viewBox`,`height`,`id`],k=[`id`],A=[`stop-color`],j=[`stop-color`],M=[`points`,`fill`,`stroke`],N=[`xmlns`,`height`],P=[`onClick`,`onMouseenter`,`onFocus`,`onKeyup`],F=[`onMouseenter`,`onFocus`],I=C({__name:`vue-ui-rating`,props:{config:{type:Object,default(){return{}}},dataset:{type:Object,default(){return{}}}},emits:[`rate`],setup(C,{expose:I,emit:L}){let{vue_ui_rating:R}=S(),z=C,B=h(te()),V=h(!1),H=h(void 0),U=h(void 0),W=h([]),de=d();n(()=>{de[`chart-background`]&&console.warn(`VueUiRating does not support the #chart-background slot.`)});let fe=L,G=l({get:()=>K(),set:e=>e}),pe=l(()=>G.value.useCursorPointer);function K(){return x({userConfig:z.config,defaultConfig:R})}ee(()=>z.config,e=>{G.value=K(),X()},{deep:!0});let me=l(()=>typeof z.dataset.rating==`object`&&!Array.isArray(z.dataset.rating)?ge(z.dataset.rating):z.dataset.rating),he=l(()=>typeof z.dataset.rating==`object`&&!Array.isArray(z.dataset.rating)),q=h(me.value),J=l(()=>G.value.type===`image`),Y=l(()=>G.value.readonly);function ge(e){let t=0,n=0;for(let r in e){let i=parseInt(r),a=e[r];t+=i*a,n+=a}if(n===0)return 0;let r=t/n;return Math.min(G.value.to,Math.max(G.value.from,r))}n(()=>{X()});function X(){(!Object.hasOwn(z.dataset,`rating`)||ne(z.dataset))&&re({componentName:`VueUiRating`,type:`datasetAttribute`,property:`rating`}),W.value=[];for(let e=G.value.from;e<=G.value.to;e+=1)W.value.push(e)}function Z(e,t=!1){return e>H.value||Y.value?t?G.value.style.image.inactiveOpacity:G.value.style.star.inactiveColor:t?1:G.value.style.star.useGradient?`url(#star_gradient_under_${B.value})`:G.value.style.star.activeColor}function Q(e,t=!1){let n=q.value-e,r=t?1:100;switch(!0){case n<=0:return .001;case n>1:return 1*r;default:return n*r}}function $(e){Y.value||(q.value=e,fe(`rate`,e))}function _e(){return q.value}function ve(e=!0){Y.value=e}return I({getData:_e,toggleReadonly:ve}),(n,l)=>(r(),p(`div`,{style:i(`background:${G.value.style.backgroundColor};font-family:${G.value.style.fontFamily};width:100%`),class:`vue-data-ui-component vue-ui-rating`,onMouseover:l[4]||=e=>V.value=!0,onMouseleave:l[5]||=e=>{V.value=!1,H.value=void 0}},[G.value.style.title.text?(r(),p(`div`,w,[m(`div`,{style:i(`color:${G.value.style.title.color};font-weight:${G.value.style.title.bold?`bold`:`normal`};text-align:${G.value.style.title.textAlign};margin-bottom:${G.value.style.title.offsetY}px;font-size:${G.value.style.title.fontSize}px`)},a(G.value.style.title.text),5),G.value.style.title.subtitle.text?(r(),p(`div`,{key:0,style:i(`color:${G.value.style.title.subtitle.color};font-size:${G.value.style.title.subtitle.fontSize}px;text-align:${G.value.style.title.textAlign};margin-bottom:${G.value.style.title.subtitle.offsetY}px;font-weight:${G.value.style.title.subtitle.bold?`bold`:`normal`}`)},a(G.value.style.title.subtitle.text),5)):e(``,!0)])):e(``,!0),G.value.style.rating.show&&G.value.style.rating.position===`top`?(r(),p(`div`,{key:1,style:i(`width:100%;text-align:center;margin-bottom:${G.value.style.rating.offsetY}px;font-size:${G.value.style.rating.fontSize}px;font-weight:${G.value.style.rating.bold?`bold`:`normal`};margin-left:${G.value.style.rating.offsetX}px`)},a(t(b)(G.value.style.rating.formatter,q.value,t(g)({v:q.value,r:G.value.style.rating.roundingValue}),G.value)),5)):e(``,!0),m(`div`,{class:`vue-ui-rating-wrapper`,style:i(`height:${G.value.style.itemSize}px;width:100%;display:flex;align-items:center;justify-content:center`)},[G.value.style.rating.show&&G.value.style.rating.position===`left`?(r(),p(`div`,{key:0,style:i(`width:fit-content;text-align:center;margin-bottom:${G.value.style.rating.offsetY}px;font-size:${G.value.style.rating.fontSize}px;font-weight:${G.value.style.rating.bold?`bold`:`normal`};padding-right:${G.value.style.rating.offsetX}px`)},a(t(b)(G.value.style.rating.formatter,q.value,t(g)({v:q.value,r:G.value.style.rating.roundingValue}),G.value)),5)):e(``,!0),(r(!0),p(f,null,c(W.value,(c,d)=>(r(),p(`div`,{class:`vue-ui-rating-unit-container`,style:i(`position:relative;height:${G.value.style.itemSize}px;width:${G.value.style.itemSize}px`)},[n.$slots[`layer-under`]||n.$slots[`layer-above`]?(r(),p(`div`,T,[n.$slots[`layer-under`]?(r(),p(`div`,E,[o(n.$slots,`layer-under`,s({ref_for:!0},{value:c,size:G.value.style.itemSize,hoveredValue:H.value,focusedValue:U.value}),void 0,!0)])):e(``,!0),n.$slots[`layer-above`]?(r(),p(`div`,D,[o(n.$slots,`layer-above`,s({ref_for:!0},{value:c,size:G.value.style.itemSize,hoveredValue:H.value,focusedValue:U.value}),void 0,!0)])):e(``,!0)])):(r(),p(f,{key:1},[J.value?(r(),p(`img`,{key:0,src:G.value.style.image.src,height:G.value.style.itemSize,width:G.value.style.itemSize,class:`vue-ui-rating-unit`,style:i(`position:absolute;top:0;left:0;opacity:${isNaN(H.value)?G.value.style.image.inactiveOpacity:Z(c,!0)}`)},null,12,ie)):(r(),p(`svg`,{key:1,xmlns:t(_),viewBox:`0 0 100 100`,height:G.value.style.itemSize,width:G.value.style.itemSize,class:`vue-ui-rating-unit`},[m(`defs`,null,[m(`radialGradient`,{cx:`50%`,cy:`50%`,r:`50%`,fx:`50%`,fy:`50%`,id:`star_gradient_under_${B.value}`},[m(`stop`,{offset:`0%`,"stop-color":`${t(y)(G.value.style.star.activeColor,.05)}`},null,8,se),m(`stop`,{offset:`100%`,"stop-color":G.value.style.star.activeColor},null,8,ce)],8,oe)]),m(`polygon`,{points:t(v)({plot:{x:50,y:50},radius:30,apexes:G.value.style.star.apexes}),fill:isNaN(H.value)?G.value.style.star.inactiveColor:Z(c),stroke:G.value.style.star.borderColor?G.value.style.star.borderColor:H.value?Z(c):G.value.style.star.inactiveColor,"stroke-width":G.value.style.star.borderWidth,"stroke-linecap":`round`,"stroke-linejoin":`round`},null,8,le)],8,ae)),J.value?(r(),p(`img`,{key:2,src:G.value.style.image.src,alt:`${G.value.style.image.alt} ${c}`,height:G.value.style.itemSize,width:G.value.style.itemSize,id:`active_${B.value}_${c}`,class:`vue-ui-rating-unit`,style:i(`position:absolute;top:0;left:0;clip:rect(0px,${Q(d,!0)*G.value.style.itemSize}px,${G.value.style.itemSize}px,0px`)},null,12,ue)):(r(),p(`svg`,{key:3,xmlns:t(_),viewBox:`0 0 ${Q(d)} 100`,height:G.value.style.itemSize,class:`vue-ui-rating-unit`,id:`active_${B.value}_${c}`,style:{position:`absolute`,top:`0`,left:`0`}},[m(`defs`,null,[m(`radialGradient`,{cx:`50%`,cy:`50%`,r:`50%`,fx:`50%`,fy:`50%`,id:`star_gradient_over_${B.value}`},[m(`stop`,{offset:`0%`,"stop-color":`${t(y)(G.value.style.star.activeColor,.05)}`},null,8,A),m(`stop`,{offset:`100%`,"stop-color":G.value.style.star.activeColor},null,8,j)],8,k)]),m(`polygon`,{points:t(v)({plot:{x:50,y:50},radius:30,apexes:G.value.style.star.apexes}),fill:G.value.style.star.useGradient?`url(#star_gradient_over_${B.value})`:G.value.style.star.activeColor,stroke:G.value.style.star.activeColor},null,8,M)],8,O))],64)),(r(),p(`svg`,{xmlns:t(_),viewBox:`0 0 100 100`,height:G.value.style.itemSize,class:`vue-ui-rating-unit`,style:i(`position:absolute;top:0;left:0;${Y.value?``:pe.value?`cursor:pointer`:``}`)},[Y.value?e(``,!0):(r(),p(`rect`,{key:0,class:`vue-ui-rating-mouse-trap`,x:0,y:0,width:100,height:100,fill:`transparent`,onClick:e=>$(c),onMouseenter:e=>H.value=c,onMouseleave:l[0]||=e=>H.value=void 0,onFocus:e=>U.value=c,onBlur:l[1]||=e=>U.value=void 0,tabindex:`0`,onKeyup:u(e=>$(c),[`enter`])},null,40,P)),Y.value?(r(),p(`rect`,{key:1,class:`vue-ui-rating-mouse-trap`,x:0,y:0,width:100,height:100,fill:`transparent`,onMouseenter:e=>H.value=c,onMouseleave:l[2]||=e=>H.value=void 0,onFocus:e=>U.value=c,onBlur:l[3]||=e=>U.value=void 0},null,40,F)):e(``,!0)],12,N)),G.value.style.tooltip.show&&he.value&&Y.value?(r(),p(`div`,{key:2,class:`vue-ui-rating-tooltip`,style:i(`border:1px solid ${G.value.style.tooltip.borderColor};position:absolute;top:${-48+G.value.style.tooltip.offsetY}px;left:50%;transform:translateX(-50%);width:fit-content;text-align:center;background:${G.value.style.tooltip.backgroundColor};display:${H.value===c?`block`:`none`};padding:2px 12px;border-radius:${G.value.style.tooltip.borderRadius}px;box-shadow:${G.value.style.tooltip.boxShadow}`)},[m(`div`,{style:i(`width:100%;display:flex;flex-direction:row;gap:6px;position:relative;text-align:center;color:${G.value.style.tooltip.color}`)},[m(`span`,{style:i(`font-size:${G.value.style.tooltip.fontSize}px`)},a(c)+`:`,5),m(`span`,{style:i(`font-weight:${G.value.style.tooltip.bold?`bold`:`normal`};font-size:${G.value.style.tooltip.fontSize}px`)},a(t(b)(G.value.style.tooltip.formatter,z.dataset.rating[c],t(g)({v:z.dataset.rating[c],r:G.value.style.tooltip.roundingValue}),G.value)),5),m(`div`,{style:i(`font-family:Arial !important;position:absolute;top:calc(100% - 4px);left:50%;transform:translateX(-50%);color:${G.value.style.tooltip.borderColor}`)},` â–¼ `,4)],4)],4)):e(``,!0)],4))),256)),G.value.style.rating.show&&G.value.style.rating.position===`right`?(r(),p(`div`,{key:1,style:i(`width:fit-content;text-align:center;margin-bottom:${G.value.style.rating.offsetY}px;font-size:${G.value.style.rating.fontSize}px;font-weight:${G.value.style.rating.bold?`bold`:`normal`};padding-left:${G.value.style.rating.offsetX}px`)},a(t(b)(G.value.style.rating.formatter,q.value,t(g)({v:q.value,r:G.value.style.rating.roundingValue}),G.value)),5)):e(``,!0)],4),G.value.style.rating.show&&G.value.style.rating.position===`bottom`?(r(),p(`div`,{key:2,style:i(`width:100%;text-align:center;margin-top:${G.value.style.rating.offsetY}px;font-size:${G.value.style.rating.fontSize}px;font-weight:${G.value.style.rating.bold?`bold`:`normal`};margin-left:${G.value.style.rating.offsetX}px`)},a(t(b)(G.value.style.rating.formatter,q.value,t(g)({v:q.value,r:G.value.style.rating.roundingValue}),G.value)),5)):e(``,!0)],36))}},[[`__scopeId`,`data-v-d8f7266f`]]);export{I as default};