import{At as e,C as t,G as n,J as r,K as i,Mt as a,Q as o,S as s,_ as c,b as l,ot as u,w as d,x as f,yt as p,z as m}from"./BLt7TXlb.js";import{vt as h}from"./Cf-0F-2c.js";function g({tooltip:e,chart:t,clientPosition:n,positionPreference:r=`center`,defaultOffsetY:i=24,blockShiftY:a=!1}){let o=p(0),s=p(i);if(e&&t){let{width:c,height:l}=e.getBoundingClientRect(),{right:u,left:d,bottom:f}=t.getBoundingClientRect();r===`center`&&(n.x+c/2>u?o.value=-c+(u-n.x):n.x-c/2<d?o.value=-c+(c-(n.x-d)):o.value=-c/2),r===`right`&&(n.x+c>u?o.value=-c+(u-n.x):o.value=0),r===`left`&&(n.x<d+c?o.value=-c+(c-(n.x-d)):o.value=-c),n.y+l>f&&!a&&(s.value=-l-i)}return{top:n.y+s.value,left:n.x+o.value}}function _(e,t,r){n(()=>e.addEventListener(t,r)),i(()=>e.removeEventListener(t,r))}function v(){let e=p(0),t=p(0);return _(window,`mousemove`,n=>{e.value=n.clientX,t.value=n.clientY}),{x:e,y:t}}var y=[`aria-hidden`],b=[`innerHTML`],x={__name:`Tooltip`,props:{teleportTo:{type:String,default:`body`},backgroundColor:{type:String,default:`#FFFFFF`},color:{type:String,default:`#000000`},content:String,maxWidth:{type:String,default:`300px`},parent:{type:Object},show:{type:Boolean,default:!1},isCustom:{type:Boolean,default:!1},fontSize:{type:[Number,String],default:14},borderRadius:{type:Number,default:4},borderColor:{type:String,default:`#e1e5e8`},borderWidth:{type:Number,default:1},backgroundOpacity:{type:Number,default:100},position:{type:String,default:`center`},offsetY:{type:Number,default:24},blockShiftY:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},smooth:{type:Boolean,default:!0},backdropFilter:{type:Boolean,default:!0},smoothForce:{type:Number,default:.18},smoothSnapThreshold:{type:Number,default:.25}},setup(n,{expose:_}){let x=n,S=p(null),{x:C,y:w}=v(x.parent),T=p({x:0,y:0}),E=p({x:0,y:0}),D=p(null),O=p(null),k=p({scaleX:1,scaleY:1}),A=p(null);function j(){let e=N(S.value);if(D.value=e,!e){O.value=null,k.value={scaleX:1,scaleY:1},A.value=null;return}O.value=e.getBoundingClientRect(),k.value=P(e),A.value=x.parent?.getBoundingClientRect?.()||null}function M(e){return e?!!(e.transform&&e.transform!==`none`||e.perspective&&e.perspective!==`none`||e.filter&&e.filter!==`none`||e.backdropFilter&&e.backdropFilter!==`none`||e.contain&&e.contain.includes(`paint`)||e.willChange&&(e.willChange.includes(`transform`)||e.willChange.includes(`filter`))):!1}function N(e){let t=e?.parentElement||null;for(;t&&t!==document.documentElement;){if(M(getComputedStyle(t)))return t;t=t.parentElement}return null}function P(e){if(!e)return{scaleX:1,scaleY:1};let t=getComputedStyle(e).transform;if(!t||t===`none`)return{scaleX:1,scaleY:1};try{let e=new DOMMatrixReadOnly(t),n=Math.hypot(e.a,e.b),r=Math.hypot(e.c,e.d);return{scaleX:n||1,scaleY:r||1}}catch{return{scaleX:1,scaleY:1}}}function F({x:e,y:t}){C.value=e,w.value=t}let I=null;function L(){if(!x.show){z();return}if(!x.smooth){E.value.x=T.value.x,E.value.y=T.value.y,z();return}let e=T.value.x-E.value.x,t=T.value.y-E.value.y;if(Math.abs(e)<=x.smoothSnapThreshold&&Math.abs(t)<=x.smoothSnapThreshold){E.value.x=T.value.x,E.value.y=T.value.y,z();return}E.value.x+=e*x.smoothForce,E.value.y+=t*x.smoothForce,I=requestAnimationFrame(L)}function R(){I==null&&x.show&&x.smooth&&(I=requestAnimationFrame(L))}function z(){I!=null&&(cancelAnimationFrame(I),I=null)}u([C,w],([e,t])=>{T.value.x=e,T.value.y=t,x.smooth?R():(E.value.x=e,E.value.y=t)}),u(()=>x.show,async e=>{if(!e){z();return}let t=C.value,n=w.value;T.value.x=t,T.value.y=n,E.value.x=t,E.value.y=n,await m(),j(),R()}),i(()=>{z()});let B=l(()=>{let e=O.value;if(!e)return{x:E.value.x,y:E.value.y};let{scaleX:t,scaleY:n}=k.value;return{x:(E.value.x-e.left)/t,y:(E.value.y-e.top)/n}}),V=l(()=>{let e=O.value,t=A.value;if(!e||!t)return x.parent;let{scaleX:n,scaleY:r}=k.value;return{...x.parent,getBoundingClientRect(){let i=t;return{left:(i.left-e.left)/n,top:(i.top-e.top)/r,right:(i.right-e.left)/n,bottom:(i.bottom-e.top)/r,width:i.width/n,height:i.height/r,x:(i.left-e.left)/n,y:(i.top-e.top)/r}}}}),H=l(()=>{let e=g({tooltip:S.value,chart:V.value,clientPosition:B.value,positionPreference:x.position,defaultOffsetY:x.offsetY,blockShiftY:x.blockShiftY});return{top:Math.round(e.top),left:Math.round(e.left)}}),U=l(()=>h(x.backgroundColor,x.backgroundOpacity)),W=l(()=>{let e={pointerEvents:`none`,position:`fixed`,top:`0px`,left:`0px`,transform:`translate3d(${H.value.left}px, ${H.value.top}px, 0)`,borderRadius:`${x.borderRadius}px`,border:`${x.borderWidth}px solid ${x.borderColor}`,zIndex:2147483647};return x.isCustom||Object.assign(e,{background:U.value,color:x.color,maxWidth:x.maxWidth,fontSize:`${x.fontSize}px`}),e});return _({placeTooltip:F}),(i,l)=>(r(),s(c,{to:n.isFullscreen?n.parent:n.teleportTo},[n.show?(r(),d(`div`,{key:0,ref_key:`tooltip`,ref:S,role:`tooltip`,"aria-hidden":!n.show,"aria-live":`polite`,class:e({"vue-data-ui-custom-tooltip":n.isCustom,"vue-data-ui-tooltip":!n.isCustom,"vue-data-ui-tooltip-backdrop":n.backdropFilter}),style:a(W.value)},[o(i.$slots,`tooltip-before`),o(i.$slots,`default`),f(`div`,{innerHTML:n.content},null,8,b),o(i.$slots,`tooltip-after`)],14,y)):t(``,!0)],8,[`to`]))}};export{x as default};