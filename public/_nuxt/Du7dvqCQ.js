const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DdyLBgN8.js","./BLt7TXlb.js","./xh7dz5-d.js","./CWNsAIol.js","./Cf-0F-2c.js","./C66xQW7K.js","./DuIAB7Tu.js","./DHC76net.js","./BDmUravP.js","./D7-tWLRc.js","./CBD7ngdF.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,D as n,Dt as r,G as i,H as a,J as o,M as s,Mt as c,Nt as l,O as u,Q as d,R as f,S as p,T as m,Tt as h,Z as g,_,b as v,jt as y,k as ee,lt as b,m as x,n as te,ot as ne,p as re,st as ie,w as S,x as C,yt as w,z as ae}from"./BLt7TXlb.js";import{t as oe}from"./YZkb6lnT.js";import{Nt as se,P as ce,V as le,_t as ue,bt as de,ft as fe,h as pe,w as me}from"./Cf-0F-2c.js";import{n as he,t as ge}from"./8DvoFuCx.js";import{t as _e}from"./Cme7ewGR.js";import{t as ve}from"./CWNsAIol.js";import{n as ye,t as be}from"./D4ushAer.js";import{t as xe}from"./CLl0-3D6.js";import{t as Se}from"./BwaPX4qL.js";import{t as Ce}from"./BDmUravP.js";import{t as we}from"./BIZzPpPz.js";import{a as Te,n as Ee}from"./D4v1zV2y.js";import{t as De}from"./BEpjx3T_.js";import{t as Oe}from"./DMqKe8aR.js";import{t as ke}from"./BbYzlGL7.js";import{t as Ae}from"./jf4h7JaU.js";var je=`\0`,T=`\0`,Me=``,E=class{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(e){e&&(this._isDirected=Object.hasOwn(e,`directed`)?e.directed:!0,this._isMultigraph=Object.hasOwn(e,`multigraph`)?e.multigraph:!1,this._isCompound=Object.hasOwn(e,`compound`)?e.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[T]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,typeof e!=`function`&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){let e=this;return this.nodes().filter(t=>Object.keys(e._in[t]).length===0)}sinks(){let e=this;return this.nodes().filter(t=>Object.keys(e._out[t]).length===0)}setNodes(e,t){let n=arguments,r=this;return e.forEach(e=>{n.length>1?r.setNode(e,t):r.setNode(e)}),this}setNode(e,t){return Object.hasOwn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=T,this._children[e]={},this._children[T][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){let t=this;if(Object.hasOwn(this._nodes,e)){let n=e=>t.removeEdge(t._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(e=>{t.setParent(e)}),delete this._children[e]),Object.keys(this._in[e]).forEach(n),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw Error(`Cannot set parent in a non-compound graph`);if(t===void 0)t=T;else{t+=``;for(let n=t;n!==void 0;n=this.parent(n))if(n===e)throw Error(`Setting `+t+` as parent of `+e+` would create a cycle`);this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){let t=this._parent[e];if(t!==T)return t}}children(e=T){if(this._isCompound){let t=this._children[e];if(t)return Object.keys(t)}else{if(e===T)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){let t=this._preds[e];if(t)return Object.keys(t)}successors(e){let t=this._sucs[e];if(t)return Object.keys(t)}neighbors(e){let t=this.predecessors(e);if(t){let n=new Set(t);for(let t of this.successors(e))n.add(t);return Array.from(n.values())}}isLeaf(e){let t;return t=this.isDirected()?this.successors(e):this.neighbors(e),t.length===0}filterNodes(e){let t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());let n=this;Object.entries(this._nodes).forEach(([n,r])=>{e(n)&&t.setNode(n,r)}),Object.values(this._edgeObjs).forEach(e=>{t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))});let r={};function i(e){let a=n.parent(e);return a===void 0||t.hasNode(a)?(r[e]=a,a):a in r?r[a]:i(a)}return this._isCompound&&t.nodes().forEach(e=>t.setParent(e,i(e))),t}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,typeof e!=`function`&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,t){let n=this,r=arguments;return e.reduce((e,i)=>(r.length>1?n.setEdge(e,i,t):n.setEdge(e,i),i)),this}setEdge(){let e,t,n,r,i=!1,a=arguments[0];typeof a==`object`&&a&&`v`in a?(e=a.v,t=a.w,n=a.name,arguments.length===2&&(r=arguments[1],i=!0)):(e=a,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),e=``+e,t=``+t,n!==void 0&&(n=``+n);let o=D(this._isDirected,e,t,n);if(Object.hasOwn(this._edgeLabels,o))return i&&(this._edgeLabels[o]=r),this;if(n!==void 0&&!this._isMultigraph)throw Error(`Cannot set a named edge when isMultigraph = false`);this.setNode(e),this.setNode(t),this._edgeLabels[o]=i?r:this._defaultEdgeLabelFn(e,t,n);let s=Fe(this._isDirected,e,t,n);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[o]=s,Ne(this._preds[t],e),Ne(this._sucs[e],t),this._in[t][o]=s,this._out[e][o]=s,this._edgeCount++,this}edge(e,t,n){let r=arguments.length===1?O(this._isDirected,arguments[0]):D(this._isDirected,e,t,n);return this._edgeLabels[r]}edgeAsObj(){let e=this.edge(...arguments);return typeof e==`object`?e:{label:e}}hasEdge(e,t,n){let r=arguments.length===1?O(this._isDirected,arguments[0]):D(this._isDirected,e,t,n);return Object.hasOwn(this._edgeLabels,r)}removeEdge(e,t,n){let r=arguments.length===1?O(this._isDirected,arguments[0]):D(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],Pe(this._preds[t],e),Pe(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this}inEdges(e,t){let n=this._in[e];if(n){let e=Object.values(n);return t?e.filter(e=>e.v===t):e}}outEdges(e,t){let n=this._out[e];if(n){let e=Object.values(n);return t?e.filter(e=>e.w===t):e}}nodeEdges(e,t){let n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}};function Ne(e,t){e[t]?e[t]++:e[t]=1}function Pe(e,t){--e[t]||delete e[t]}function D(e,t,n,r){let i=``+t,a=``+n;if(!e&&i>a){let e=i;i=a,a=e}return i+Me+a+Me+(r===void 0?je:r)}function Fe(e,t,n,r){let i=``+t,a=``+n;if(!e&&i>a){let e=i;i=a,a=e}let o={v:i,w:a};return r&&(o.name=r),o}function O(e,t){return D(e,t.v,t.w,t.name)}var k=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return Ie(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&Ie(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,n=t._prev;for(;n!==t;)e.push(JSON.stringify(n,Le)),n=n._prev;return`[`+e.join(`, `)+`]`}};function Ie(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Le(e,t){if(e!==`_next`&&e!==`_prev`)return t}var Re=()=>1;function ze(e,t){if(e.nodeCount()<=1)return[];let n=He(e,t||Re);return Be(n.graph,n.buckets,n.zeroIndex).flatMap(t=>e.outEdges(t.v,t.w))}function Be(e,t,n){let r=[],i=t[t.length-1],a=t[0],o;for(;e.nodeCount();){for(;o=a.dequeue();)Ve(e,t,n,o);for(;o=i.dequeue();)Ve(e,t,n,o);if(e.nodeCount()){for(let i=t.length-2;i>0;--i)if(o=t[i].dequeue(),o){r=r.concat(Ve(e,t,n,o,!0));break}}}return r}function Ve(e,t,n,r,i){let a=i?[]:void 0;return e.inEdges(r.v).forEach(r=>{let o=e.edge(r),s=e.node(r.v);i&&a.push({v:r.v,w:r.w}),s.out-=o,A(t,n,s)}),e.outEdges(r.v).forEach(r=>{let i=e.edge(r),a=e.node(r.w);a.in-=i,A(t,n,a)}),e.removeNode(r.v),a}function He(e,t){let n=new E,r=0,i=0;e.nodes().forEach(e=>{n.setNode(e,{v:e,in:0,out:0})}),e.edges().forEach(e=>{let a=n.edge(e.v,e.w)||0,o=t(e),s=a+o;n.setEdge(e.v,e.w,s),i=Math.max(i,n.node(e.v).out+=o),r=Math.max(r,n.node(e.w).in+=o)});let a=Ue(i+r+3).map(()=>new k),o=r+1;return n.nodes().forEach(e=>{A(a,o,n.node(e))}),{graph:n,buckets:a,zeroIndex:o}}function A(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function Ue(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t}function j(e,t,n,r){let i=r;for(;e.hasNode(i);)i=B(r);return n.dummy=t,e.setNode(i,n),i}function M(e){let t=new E().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{let r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function N(e){let t=new E({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function We(e){let t=e.nodes().map(t=>{let n={};return e.outEdges(t).forEach(t=>{n[t.w]=(n[t.w]||0)+e.edge(t).weight}),n});return $e(e.nodes(),t)}function Ge(e){let t=e.nodes().map(t=>{let n={};return e.inEdges(t).forEach(t=>{n[t.v]=(n[t.v]||0)+e.edge(t).weight}),n});return $e(e.nodes(),t)}function P(e,t){let n=e.x,r=e.y,i=t.x-n,a=t.y-r,o=e.width/2,s=e.height/2;if(!i&&!a)throw Error(`Not possible to find intersection inside of the rectangle`);let c,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),c=s*i/a,l=s):(i<0&&(o=-o),c=o,l=o*a/i),{x:n+c,y:r+l}}function F(e){let t=V(Ye(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let r=e.node(n),i=r.rank;i!==void 0&&(t[i][r.order]=n)}),t}function I(e){let t=e.nodes().map(t=>{let n=e.node(t).rank;return n===void 0?Number.MAX_VALUE:n}),n=R(Math.min,t);e.nodes().forEach(t=>{let r=e.node(t);Object.hasOwn(r,`rank`)&&(r.rank-=n)})}function Ke(e){let t=e.nodes().map(t=>e.node(t).rank).filter(e=>e!==void 0),n=R(Math.min,t),r=[];e.nodes().forEach(t=>{let i=e.node(t).rank-n;r[i]||(r[i]=[]),r[i].push(t)});let i=0,a=e.graph().nodeRankFactor;Array.from(r).forEach((t,n)=>{t===void 0&&n%a!==0?--i:t!==void 0&&i&&t.forEach(t=>{e.node(t).rank+=i})})}function qe(e,t,n,r){let i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),j(e,`border`,i,t)}var Je=65535;function L(e,t=Je){let n=[];for(let r=0;r<e.length;r+=t){let i=e.slice(r,r+t);n.push(i)}return n}function R(e,t){if(t.length>Je){let n=L(t);return e.apply(null,n.map(t=>e.apply(null,t)))}else return e.apply(null,t)}function Ye(e){let t=e.nodes().map(t=>{let n=e.node(t).rank;return n===void 0?Number.MIN_VALUE:n});return R(Math.max,t)}function z(e,t){let n={lhs:[],rhs:[]};return e.forEach(e=>{t(e)?n.lhs.push(e):n.rhs.push(e)}),n}function Xe(e,t){let n=Date.now();try{return t()}finally{console.log(e+` time: `+(Date.now()-n)+`ms`)}}function Ze(e,t){return t()}var Qe=0;function B(e){let t=++Qe;return e+String(t)}function V(e,t,n=1){t??(t=e,e=0);let r=e=>e<t;n<0&&(r=e=>t<e);let i=[];for(let t=e;r(t);t+=n)i.push(t);return i}function H(e,t){let n={};for(let r of t)e[r]!==void 0&&(n[r]=e[r]);return n}function U(e,t){let n=t;if(typeof t==`string`){let e=t;n=t=>t[e]}return Object.entries(e).reduce((e,[t,r])=>(e[t]=n(r,t),e),{})}function $e(e,t){return e.reduce((e,n,r)=>(e[n]=t[r],e),{})}var et={addBorderNode:qe,addDummyNode:j,applyWithChunking:R,asNonCompoundGraph:N,buildLayerMatrix:F,intersectRect:P,mapValues:U,maxRank:Ye,normalizeRanks:I,notime:Ze,partition:z,pick:H,predecessorWeights:Ge,range:V,removeEmptyRanks:Ke,simplify:M,successorWeights:We,time:Xe,uniqueId:B,zipObject:$e};function W(e){(e.graph().acyclicer===`greedy`?ze(e,t(e)):nt(e)).forEach(t=>{let n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,B(`rev`))});function t(e){return t=>e.edge(t).weight}}function tt(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}function nt(e){let t=[],n={},r={};function i(a){Object.hasOwn(r,a)||(r[a]=!0,n[a]=!0,e.outEdges(a).forEach(e=>{Object.hasOwn(n,e.w)?t.push(e):i(e.w)}),delete n[a])}return e.nodes().forEach(i),t}function rt(e){e.graph().dummyChains=[],e.edges().forEach(t=>it(e,t))}function it(e,t){let n=t.v,r=e.node(n).rank,i=t.w,a=e.node(i).rank,o=t.name,s=e.edge(t),c=s.labelRank;if(a===r+1)return;e.removeEdge(t);let l,u,d;for(d=0,++r;r<a;++d,++r)s.points=[],u={width:0,height:0,edgeLabel:s,edgeObj:t,rank:r},l=j(e,`edge`,u,`_d`),r===c&&(u.width=s.width,u.height=s.height,u.dummy=`edge-label`,u.labelpos=s.labelpos),e.setEdge(n,l,{weight:s.weight},o),d===0&&e.graph().dummyChains.push(l),n=l;e.setEdge(n,i,{weight:s.weight},o)}function at(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),r=n.edgeLabel;e.setEdge(n.edgeObj,r);let i;for(;n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy===`edge-label`&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}function ot(e){function t(n){let r=e.node(n);if(r&&Object.prototype.hasOwnProperty.call(r,`rank`))return r.rank;let i=e.outEdges(n)||[];if(!i.length)return r&&(r.rank=0),0;let a=i.map(n=>e.node(n.w)?t(n.w)-e.edge(n).minlen:1/0),o=R(Math.min,a);return o===1/0&&(o=0),r&&(r.rank=o),o}(e.sources()||[]).forEach(t)}function st(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}function ct(e){lt(e);let t=new E;e.nodes().forEach(e=>{t.setNode(e,{})});let n=e.nodes();if(!n.length)return t;let r=n[0],i=new Set([r]);for(;i.size<n.length;){let r=ut(e,i);if(!r){let e=n.find(e=>!i.has(e));i.add(e),t.setNode(e,{});continue}let{edgeObject:a,delta:o,attachFrom:s,attachTo:c}=r;dt(e,i,s,o),t.setEdge(a.v,a.w,{}),i.add(c)}return t}function lt(e){e.nodes().forEach(t=>{let n=e.node(t)||{};Object.prototype.hasOwnProperty.call(n,`rank`)||(n.rank=0,e.setNode(t,n))})}function ut(e,t){let n=null;return e.edges().forEach(r=>{let i=t.has(r.v);if(i===t.has(r.w))return;let a=st(e,r),o=Math.abs(a);if(!n||o<n.absoluteSlack){let e=i?r.v:r.w,t=i?r.w:r.v;n={edgeObject:r,delta:i?a:-a,attachFrom:e,attachTo:t,absoluteSlack:o}}}),n}function dt(e,t,n,r){r&&e.nodes().forEach(n=>{if(!t.has(n)){let t=e.node(n);t.rank+=r}})}function G(e){let t=M(e);return ot(t),t.nodes().forEach(n=>{let r=t.node(n),i=e.node(n)||{};i.rank=r.rank,e.setNode(n,i)}),e}function ft(e,t){}function pt(e,t){}function mt(e,t,n){return 0}function ht(e){return null}function gt(e,t){return null}G.initLowLimValues=ft,G.initCutValues=pt,G.calcCutValue=mt,G.leaveEdge=ht,G.enterEdge=gt;var K=ot;function _t(e){let t=e.graph().ranker;if(t instanceof Function)return t(e);switch(e.graph().ranker){case`network-simplex`:bt(e);break;case`tight-tree`:yt(e);break;case`longest-path`:vt(e);break;case`none`:break;default:bt(e)}}var vt=K;function yt(e){K(e),ct(e)}function bt(e){G(e)}function q(e){let t=xt(e);e.graph().dummyChains.forEach(n=>{let r=e.node(n),i=r.edgeObj,a=J(e,t,i.v,i.w),o=a.path,s=a.lca,c=0,l=o[c],u=!0,d=n;for(;d!==i.w;){if(r=e.node(d),u){for(;(l=o[c])!==s&&e.node(l).maxRank<r.rank;)c++;l===s&&(u=!1)}if(!u){for(;c<o.length-1&&e.node(l=o[c+1]).minRank<=r.rank;)c++;l=o[c]}e.setParent(d,l),d=e.successors(d)[0]}})}function J(e,t,n,r){let i=[],a=[],o=Math.min(t[n].low,t[r].low),s=Math.max(t[n].lim,t[r].lim),c,l;c=n;do c=e.parent(c),i.push(c);while(c&&(t[c].low>o||s>t[c].lim));for(l=c,c=r;(c=e.parent(c))!==l;)a.push(c);return{path:i.concat(a.reverse()),lca:l}}function xt(e){let t={},n=0;function r(i){let a=n;e.children(i).forEach(r),t[i]={low:a,lim:n++}}return e.children().forEach(r),t}function St(e){let t=et.addDummyNode(e,`root`,{},`_root`),n=wt(e),r=Object.values(n),i=et.applyWithChunking(Math.max,r)-1,a=2*i+1;e.graph().nestingRoot=t,e.edges().forEach(t=>{e.edge(t).minlen*=a});let o=Tt(e)+1;e.children().forEach(r=>{Ct(e,t,a,o,i,n,r)}),e.graph().nodeRankFactor=a}function Ct(e,t,n,r,i,a,o){let s=e.children(o);if(!s.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:n});return}let c=et.addBorderNode(e,`_bt`),l=et.addBorderNode(e,`_bb`),u=e.node(o);e.setParent(c,o),u.borderTop=c,e.setParent(l,o),u.borderBottom=l,s.forEach(s=>{Ct(e,t,n,r,i,a,s);let u=e.node(s),d=u.borderTop?u.borderTop:s,f=u.borderBottom?u.borderBottom:s,p=u.borderTop?r:2*r,m=d===f?i-a[o]+1:1;e.setEdge(c,d,{weight:p,minlen:m,nestingEdge:!0}),e.setEdge(f,l,{weight:p,minlen:m,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,c,{weight:0,minlen:i+a[o]})}function wt(e){let t={};function n(r,i){let a=e.children(r);a&&a.length&&a.forEach(e=>n(e,i+1)),t[r]=i}return e.children().forEach(e=>n(e,1)),t}function Tt(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function Et(e){let t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(t=>{e.edge(t).nestingEdge&&e.removeEdge(t)})}function Dt(e){function t(n){let r=e.children(n),i=e.node(n);if(r.length&&r.forEach(t),Object.hasOwn(i,`minRank`)){i.borderLeft=[],i.borderRight=[];for(let t=i.minRank,r=i.maxRank+1;t<r;++t)Y(e,`borderLeft`,`_bl`,n,i,t),Y(e,`borderRight`,`_br`,n,i,t)}}e.children().forEach(t)}function Y(e,t,n,r,i,a){let o={width:0,height:0,rank:a,borderType:t},s=i[t][a-1],c=j(e,`border`,o,n);i[t][a]=c,e.setParent(c,r),s&&e.setEdge(s,c,{weight:1})}function Ot(e){let t=e.graph().rankdir.toLowerCase();(t===`lr`||t===`rl`)&&At(e)}function kt(e){let t=e.graph().rankdir.toLowerCase();(t===`bt`||t===`rl`)&&Mt(e),(t===`lr`||t===`rl`)&&(Pt(e),At(e))}function At(e){e.nodes().forEach(t=>{jt(e.node(t))}),e.edges().forEach(t=>{jt(e.edge(t))})}function jt(e){let t=e.width;e.width=e.height,e.height=t}function Mt(e){e.nodes().forEach(t=>{Nt(e.node(t))}),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Nt),Object.hasOwn(n,`y`)&&Nt(n)})}function Nt(e){e.y=-e.y}function Pt(e){e.nodes().forEach(t=>{Ft(e.node(t))}),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(Ft),Object.hasOwn(n,`x`)&&Ft(n)})}function Ft(e){let t=e.x;e.x=e.y,e.y=t}var X={adjust:Ot,undo:kt};function It(e){let t={},n=e.nodes().filter(t=>e.children(t).length===0),r=n.map(t=>e.node(t).rank),i=V(R(Math.max,r)+1).map(()=>[]);function a(n){t[n]||(t[n]=!0,i[e.node(n).rank].push(n),e.successors(n).forEach(a))}return n.sort((t,n)=>e.node(t).rank-e.node(n).rank).forEach(a),i}function Lt(e,t){let n=0;for(let r=1;r<t.length;++r)n+=Rt(e,t[r-1],t[r]);return n}function Rt(e,t,n){let r=$e(n,n.map((e,t)=>t)),i=t.flatMap(t=>e.outEdges(t).map(t=>({pos:r[t.w],weight:e.edge(t).weight})).sort((e,t)=>e.pos-t.pos)),a=1;for(;a<n.length;)a<<=1;let o=2*a-1;--a;let s=Array(o).fill(0),c=0;return i.forEach(e=>{let t=e.pos+a;s[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=s[t+1]),t=t-1>>1,s[t]+=e.weight;c+=e.weight*n}),c}function zt(e,t=[]){return t.map(t=>{let n=e.inEdges(t);if(!n.length)return{v:t};let r=n.reduce((t,n)=>{let r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}},{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}})}function Bt(e,t){let n={};return e.forEach((e,t)=>{let r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};e.barycenter!==void 0&&(r.barycenter=e.barycenter,r.weight=e.weight)}),t.edges().forEach(e=>{let t=n[e.v],r=n[e.w];t!==void 0&&r!==void 0&&(r.indegree++,t.out.push(r))}),Vt(Object.values(n).filter(e=>!e.indegree))}function Vt(e){let t=[];function n(e){return t=>{t.merged||(t.barycenter===void 0||e.barycenter===void 0||t.barycenter>=e.barycenter)&&Ht(e,t)}}function r(t){return n=>{n.in.push(t),--n.indegree===0&&e.push(n)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(n(i)),i.out.forEach(r(i))}return t.filter(e=>!e.merged).map(e=>H(e,[`vs`,`i`,`barycenter`,`weight`]))}function Ht(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}function Ut(e,t){let n=z(e,e=>Object.hasOwn(e,`barycenter`)),r=n.lhs,i=n.rhs.sort((e,t)=>t.i-e.i),a=[],o=0,s=0,c=0;r.sort(Gt(!!t)),c=Wt(a,i,c),r.forEach(e=>{c+=e.vs.length,a.push(e.vs),o+=e.barycenter*e.weight,s+=e.weight,c=Wt(a,i,c)});let l={vs:a.flat(!0)};return s&&(l.barycenter=o/s,l.weight=s),l}function Wt(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}function Gt(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}function Kt(e,t,n,r){let i=e.children(t),a=e.node(t),o=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,c={};o&&(i=i.filter(e=>e!==o&&e!==s));let l=zt(e,i);l.forEach(t=>{if(e.children(t.v).length){let i=Kt(e,t.v,n,r);c[t.v]=i,Object.hasOwn(i,`barycenter`)&&Jt(t,i)}});let u=Bt(l,n);qt(u,c);let d=Ut(u,r);if(o&&(d.vs=[o,d.vs,s].flat(!0),e.predecessors(o).length)){let t=e.node(e.predecessors(o)[0]),n=e.node(e.predecessors(s)[0]);Object.hasOwn(d,`barycenter`)||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+t.order+n.order)/(d.weight+2),d.weight+=2}return d}function qt(e,t){e.forEach(e=>{e.vs=e.vs.flatMap(e=>t[e]?t[e].vs:e)})}function Jt(e,t){e.barycenter===void 0?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}function Yt(e,t,n,r){r||=e.nodes();let i=Z(e),a=new E({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(t=>e.node(t));return r.forEach(r=>{let o=e.node(r),s=e.parent(r);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(a.setNode(r),a.setParent(r,s||i),e[n](r).forEach(t=>{let n=t.v===r?t.w:t.v,i=a.edge(n,r),o=i?i.weight:0;a.setEdge(n,r,{weight:e.edge(t).weight+o})}),Object.hasOwn(o,`minRank`)&&a.setNode(r,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),a}function Z(e){let t;for(;e.hasNode(t=B(`_root`)););return t}function Xt(e,t,n){let r={},i;n.forEach(n=>{let a=e.parent(n),o,s;for(;a;){if(o=e.parent(a),o?(s=r[o],r[o]=a):(s=i,i=a),s&&s!==a){t.setEdge(s,a);return}a=o}})}function Q(e,t={}){if(typeof t.customOrder==`function`){t.customOrder(e,Q);return}let n=Ye(e),r=$(e,V(1,n+1),`inEdges`),i=$(e,V(n-1,-1,-1),`outEdges`),a=It(e);if(Qt(e,a),t.disableOptimalOrderHeuristic)return;let o=1/0,s,c=t.constraints||[];for(let t=0,n=0;n<4;++t,++n){Zt(t%2==0?r:i,t%4>=2,c),a=F(e);let l=Lt(e,a);l<o?(o=l,n=0,s=structuredClone(a)):l===o&&(s=structuredClone(a))}Qt(e,s)}function $(e,t,n){let r=new Map;function i(e,t){r.has(e)||r.set(e,[]),r.get(e).push(t)}for(let t of e.nodes()){let n=e.node(t);if(typeof n.rank==`number`&&i(n.rank,t),typeof n.minRank==`number`&&typeof n.maxRank==`number`)for(let e=n.minRank;e<=n.maxRank;e++)e!==n.rank&&i(e,t)}return t.map(t=>Yt(e,t,n,r.get(t)||[]))}function Zt(e,t,n){let r=new E;e.forEach(e=>{n.forEach(e=>r.setEdge(e.left,e.right));let i=e.graph().root,a=Kt(e,i,r,t);a.vs.forEach((t,n)=>{e.node(t).order=n}),Xt(e,r,a.vs)})}function Qt(e,t){Object.values(t).forEach(t=>{t.forEach((t,n)=>{e.node(t).order=n})})}function $t(e,t){let n={};function r(t,r){let i=0,a=0,o=t.length,s=r[r.length-1];return r.forEach((t,c)=>{let l=tn(e,t),u=l?e.node(l).order:o;(l||t===s)&&(r.slice(a,c+1).forEach(t=>{e.predecessors(t).forEach(r=>{let a=e.node(r),o=a.order;(o<i||u<o)&&!(a.dummy&&e.node(t).dummy)&&nn(n,r,t)})}),a=c+1,i=u)}),r}return t.length&&t.reduce(r),n}function en(e,t){let n={};function r(t,r,i,a,o){let s;V(r,i).forEach(r=>{s=t[r],e.node(s).dummy&&e.predecessors(s).forEach(t=>{let r=e.node(t);r.dummy&&(r.order<a||r.order>o)&&nn(n,t,s)})})}function i(t,n){let i=-1,a,o=0;return n.forEach((s,c)=>{if(e.node(s).dummy===`border`){let t=e.predecessors(s);t.length&&(a=e.node(t[0]).order,r(n,o,c,i,a),o=c,i=a)}r(n,o,n.length,a,t.length)}),n}return t.length&&t.reduce(i),n}function tn(e,t){if(e.node(t).dummy)return e.predecessors(t).find(t=>e.node(t).dummy)}function nn(e,t,n){if(t>n){let e=t;t=n,n=e}let r=e[t];r||(e[t]=r={}),r[n]=!0}function rn(e,t,n){if(t>n){let e=t;t=n,n=e}return!!e[t]&&Object.hasOwn(e[t],n)}function an(e,t,n,r){let i={},a={},o={};return t.forEach(e=>{e.forEach((e,t)=>{i[e]=e,a[e]=e,o[e]=t})}),t.forEach(e=>{let t=-1;e.forEach(e=>{let s=r(e);if(s.length){s=s.sort((e,t)=>o[e]-o[t]);let r=(s.length-1)/2;for(let c=Math.floor(r),l=Math.ceil(r);c<=l;++c){let r=s[c];a[e]===e&&t<o[r]&&!rn(n,e,r)&&(a[r]=e,a[e]=i[e]=i[r],t=o[r])}}})}),{root:i,align:a}}function on(e,t,n,r,i){let a={},o=sn(e,t,n,i),s=i?`borderLeft`:`borderRight`;function c(e,t){let n=o.nodes().slice(),r={},i=n.pop();for(;i;){if(r[i])e(i);else{r[i]=!0,n.push(i);for(let e of t(i))n.push(e)}i=n.pop()}}function l(e){a[e]=o.inEdges(e).reduce((e,t)=>Math.max(e,a[t.v]+o.edge(t)),0)}function u(t){let n=o.outEdges(t).reduce((e,t)=>Math.min(e,a[t.w]-o.edge(t)),1/0),r=e.node(t);n!==1/0&&r.borderType!==s&&(a[t]=Math.max(a[t],n))}return c(l,o.predecessors.bind(o)),c(u,o.successors.bind(o)),Object.keys(r).forEach(e=>{a[e]=a[n[e]]}),a}function sn(e,t,n,r){let i=new e.constructor,a=e.graph(),o=fn(a.nodesep,a.edgesep,r);return t.forEach(t=>{let r;t.forEach(t=>{let a=n[t];if(i.setNode(a),r){let s=n[r],c=i.edge(s,a);i.setEdge(s,a,Math.max(o(e,t,r),c||0))}r=t})}),i}function cn(e,t){return Object.values(t).reduce((t,n)=>{let r=-1/0,i=1/0;Object.entries(n).forEach(([t,n])=>{let a=pn(e,t)/2;r=Math.max(n+a,r),i=Math.min(n-a,i)});let a=r-i;return a<t[0]&&(t=[a,n]),t},[1/0,null])[1]}function ln(e,t){let n=Object.values(t),r=R(Math.min,n),i=R(Math.max,n);[`u`,`d`].forEach(n=>{[`l`,`r`].forEach(a=>{let o=n+a,s=e[o];if(s===t)return;let c=Object.values(s),l=r-R(Math.min,c);a!==`l`&&(l=i-R(Math.max,c)),l&&(s=U(s,e=>e+l),e[o]=s)})})}function un(e,t){return U(e.ul,(n,r)=>{if(t)return e[t.toLowerCase()][r];let i=Object.values(e).map(e=>e[r]).sort((e,t)=>e-t);return(i[1]+i[2])/2})}function dn(e){let t=F(e),n=Object.assign($t(e,t),en(e,t)),r={},i;return[`u`,`d`].forEach(a=>{i=a===`u`?t:Object.values(t).reverse(),[`l`,`r`].forEach(t=>{let o=i;t===`r`&&(o=o.map(e=>Object.values(e).reverse()));let s=(a===`u`?e.predecessors:e.successors).bind(e),c=an(e,o,n,s),l=on(e,o,c.root,c.align,t===`r`);t===`r`&&(l=U(l,e=>-e)),r[a+t]=l})}),ln(r,cn(e,r)),un(r,e.graph().align)}function fn(e,t,n){return(r,i,a)=>{let o=r.node(i),s=r.node(a),c=0,l;if(c+=o.width/2,Object.hasOwn(o,`labelpos`))switch(o.labelpos.toLowerCase()){case`l`:l=-o.width/2;break;case`r`:l=o.width/2;break}if(l&&(c+=n?l:-l),l=0,c+=(o.dummy?t:e)/2,c+=(s.dummy?t:e)/2,c+=s.width/2,Object.hasOwn(s,`labelpos`))switch(s.labelpos.toLowerCase()){case`l`:l=s.width/2;break;case`r`:l=-s.width/2;break}return l&&(c+=n?l:-l),l=0,c}}function pn(e,t){return e.node(t).width}function mn(e){let t=N(e);hn(t);let n=dn(t);Object.entries(n).forEach(([t,n])=>{e.node(t).x=n})}function hn(e){let t=F(e),n=e.graph().ranksep,r=0;t.forEach(t=>{let i=t.reduce((t,n)=>{let r=e.node(n).height;return t>r?t:r},0);t.forEach(t=>{e.node(t).y=r+i/2}),r+=i+n})}function gn(e,t={}){let n=t.debugTiming?Xe:Ze;return n(`layout`,()=>{let r=n(`  buildLayoutGraph`,()=>Dn(e));return n(`  runLayout`,()=>_n(r,n,t)),n(`  updateInputGraph`,()=>vn(e,r)),r})}function _n(e,t,n){t(`    makeSpaceForEdgeLabels`,()=>On(e)),t(`    removeSelfEdges`,()=>Rn(e)),t(`    acyclic`,()=>W(e)),t(`    nestingGraph.run`,()=>St(e)),t(`    rank`,()=>_t(N(e))),t(`    injectEdgeLabelProxies`,()=>kn(e)),t(`    removeEmptyRanks`,()=>Ke(e)),t(`    nestingGraph.cleanup`,()=>Et(e)),t(`    normalizeRanks`,()=>I(e)),t(`    assignRankMinMax`,()=>An(e)),t(`    removeEdgeLabelProxies`,()=>jn(e)),t(`    normalize.run`,()=>rt(e)),t(`    parentDummyChains`,()=>q(e)),t(`    addBorderSegments`,()=>Dt(e)),t(`    order`,()=>Q(e,n)),t(`    insertSelfEdges`,()=>zn(e)),t(`    adjustCoordinateSystem`,()=>X.adjust(e)),t(`    position`,()=>mn(e)),t(`    positionSelfEdges`,()=>Bn(e)),t(`    removeBorderNodes`,()=>Ln(e)),t(`    normalize.undo`,()=>at(e)),t(`    fixupEdgeLabelCoords`,()=>Fn(e)),t(`    undoCoordinateSystem`,()=>X.undo(e)),t(`    translateGraph`,()=>Mn(e)),t(`    assignNodeIntersects`,()=>Pn(e)),t(`    reversePoints`,()=>In(e)),t(`    acyclic.undo`,()=>tt(e))}function vn(e,t){e.nodes().forEach(n=>{let r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,r.order=i.order,r.rank=i.rank,t.children(n).length&&(r.width=i.width,r.height=i.height))}),e.edges().forEach(n=>{let r=e.edge(n),i=t.edge(n);r.points=i.points,Object.hasOwn(i,`x`)&&(r.x=i.x,r.y=i.y)});let n=t.graph(),r=e.graph();r.width=n.width,r.height=n.height}var yn=[`nodesep`,`edgesep`,`ranksep`,`marginx`,`marginy`],bn={ranksep:50,edgesep:20,nodesep:50,rankdir:`tb`},xn=[`acyclicer`,`ranker`,`rankdir`,`align`],Sn=[`width`,`height`,`rank`],Cn={width:0,height:0},wn=[`minlen`,`weight`,`width`,`height`,`labeloffset`],Tn={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:`r`},En=[`labelpos`,`arrowshape`];function Dn(e){let t=Hn(e.graph()),n={...bn,...Vn(t,yn),...H(t,xn)},r=new E({multigraph:!0,compound:!0});return r.setGraph(n),e.nodes().forEach(t=>{let n=Vn(Hn(e.node(t)),Sn);Object.keys(Cn).forEach(e=>{n[e]===void 0&&(n[e]=Cn[e])}),r.setNode(t,n),r.setParent(t,e.parent(t))}),e.edges().forEach(t=>{let n=Hn(e.edge(t));r.setEdge(t,{...Tn,...Vn(n,wn),...H(n,En)})}),r}function On(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!==`c`&&(t.rankdir===`TB`||t.rankdir===`BT`?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function kn(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let n=e.node(t.v);j(e,`edge-proxy`,{rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t},`_ep`)}})}function An(e){let t=0;e.nodes().forEach(n=>{let r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Math.max(t,r.maxRank))}),e.graph().maxRank=t}function jn(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy===`edge-proxy`&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function Mn(e){let t=1/0,n=0,r=1/0,i=0,a=e.graph(),o=a.marginx||0,s=a.marginy||0;function c(e){let a=e.x,o=e.y,s=e.width,c=e.height;t=Math.min(t,a-s/2),n=Math.max(n,a+s/2),r=Math.min(r,o-c/2),i=Math.max(i,o+c/2)}e.nodes().forEach(t=>c(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);Object.hasOwn(n,`x`)&&c(n)}),t-=o,r-=s,e.nodes().forEach(n=>{let i=e.node(n);i.x-=t,i.y-=r}),e.edges().forEach(n=>{let i=e.edge(n);i.points.forEach(e=>{e.x-=t,e.y-=r}),Object.hasOwn(i,`x`)&&(i.x-=t),Object.hasOwn(i,`y`)&&(i.y-=r)}),a.width=n-t+o,a.height=i-r+s}function Nn(e,t,n){if(!t)return e;let r=t.x-e.x,i=t.y-e.y,a=Math.sqrt(r*r+i*i);if(!a||a<=n)return e;let o=n/a;return{x:e.x+r*o,y:e.y+i*o}}function Pn(e){e.edges().forEach(t=>{let n=e.edge(t),r=e.node(t.v),i=e.node(t.w),a,o;!n.points||!n.points.length?(n.points=[],a=i,o=r):(a=n.points[0],o=n.points[n.points.length-1]);let s=P(r,a),c=P(i,o),l=n.points.length?n.points[0]:a,u=n.points.length?n.points[n.points.length-1]:o,d=n.arrowshape,f=d===`normal`||d===`vee`,p=!!n.reversed,m=s,h=c;f&&(p?m=Nn(s,l,4):h=Nn(c,u,4)),n.points.unshift(m),n.points.push(h)})}function Fn(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,`x`))switch((n.labelpos===`l`||n.labelpos===`r`)&&(n.width-=n.labeloffset),n.labelpos){case`l`:n.x-=n.width/2+n.labeloffset;break;case`r`:n.x+=n.width/2+n.labeloffset;break}})}function In(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function Ln(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),a=e.node(n.borderLeft[n.borderLeft.length-1]),o=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(o.x-a.x),n.height=Math.abs(i.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy===`border`&&e.removeNode(t)})}function Rn(e){e.edges().forEach(t=>{if(t.v===t.w){let n=e.node(t.v);n.selfEdges||=[],n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function zn(e){F(e).forEach(t=>{let n=0;t.forEach((t,r)=>{let i=e.node(t);i.order=r+n,(i.selfEdges||[]).forEach(t=>{j(e,`selfedge`,{width:t.label.width,height:t.label.height,rank:i.rank,order:r+ ++n,e:t.e,label:t.label},`_se`)}),delete i.selfEdges})})}function Bn(e){e.nodes().forEach(t=>{let n=e.node(t);if(n.dummy===`selfedge`){let r=e.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,s=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}function Vn(e,t){return U(H(e,t),Number)}function Hn(e){let t={};return e&&Object.entries(e).forEach(([e,n])=>{let r=e;typeof r==`string`&&(r=r.toLowerCase()),t[r]=n}),t}var Un={rankDirection:`TB`,nodeSeparation:50,rankSeparation:50,edgeSeparation:10,align:void 0,nodeWidth:100,nodeHeight:40,curvedEdges:!1,padding:20,arrowShape:`normal`,arrowSize:10};function Wn(e){return e.length?e.map((e,t)=>`${t===0?`M`:`L`} ${e.x} ${e.y}`).join(` `):``}function Gn(e){if(!e.length)return``;if(e.length===1){let t=e[0];return`M ${t.x} ${t.y}`}if(e.length===2)return`M ${e[0].x} ${e[0].y} L ${e[1].x} ${e[1].y}`;let[t]=e,n=`M ${t.x} ${t.y}`;for(let t=1;t<e.length-1;t+=1){e[t-1];let r=e[t],i=e[t+1],a=r.x,o=r.y,s=(r.x+i.x)/2,c=(r.y+i.y)/2;n+=` Q ${a} ${o} ${s} ${c}`}let r=e[e.length-1];return n+=` L ${r.x} ${r.y}`,n}function Kn(e){let{nodes:t,edges:n,configuration:i}=e,a=w(null),o=w(null),s=`dag-arrow-${se()}`;function c(e,t,n){o.value=null,a.value=null;let r={...Un,...n},i=new E({multigraph:!0,compound:!0});i.setGraph({rankdir:r.rankDirection,nodesep:r.nodeSeparation,ranksep:r.rankSeparation,edgesep:r.edgeSeparation,align:r.align}),e.forEach(e=>{i.setNode(e.id,{label:e.label,width:e.width??r.nodeWidth,height:e.height??r.nodeHeight})}),t.forEach(e=>{i.setEdge(e.from,e.to,{weight:e.weight??1,minlen:e.minLength??1,arrowShape:r.arrowShape??`normal`})}),gn(i);let c=e.map(e=>{let t=i.node(e.id);return{id:e.id,label:e.label,x:t.x,y:t.y,width:t.width,height:t.height,original:e}}),l=i.edges().map(e=>{let n=i.edge(e),a=n.points||[];if(!a.length)return null;let o=r.curvedEdges?Gn(a):Wn(a),c=r.arrowShape===`undirected`?null:`url(#${s})`,l=t.find(t=>t?.from===e.v&&t?.to===e.w);return{id:`${e.v}->${e.w}->${se()}`,from:e.v,to:e.w,points:a,pathData:o,markerEnd:c,original:{...l,...n}}}).filter(Boolean),u=r.padding;if(!c.length){a.value={nodes:[],edges:l,viewBox:`0 0 0 0`,arrowShape:r.arrowShape,arrowSize:r.arrowSize};return}let d=c.flatMap(e=>[e.x-e.width/2,e.x+e.width/2]),f=c.flatMap(e=>[e.y-e.height/2,e.y+e.height/2]),p=Math.min(...d)-u,m=Math.max(...d)+u,h=Math.min(...f)-u,g=Math.max(...f)+u;a.value={nodes:c,edges:l.map(e=>({...e,midpoint:e.pathData?me(e.pathData):{x:0,y:0}})),viewBox:`${p} ${h} ${m-p} ${g-h}`,arrowShape:r.arrowShape,arrowSize:r.arrowSize}}return ie(()=>{try{c(r(t)||[],r(n)||[],r(i)||{})}catch(e){console.error(`[useDag] layout error:`,e),o.value=e,a.value=null}}),{layoutData:a,lastError:o,arrowMarkerIdentifier:s,recomputeLayout:()=>{c(r(t)||[],r(n)||[],r(i)||{})}}}var qn={userOptions:{show:!1}},Jn={userOptions:{show:!1},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,backgroundPattern:{dotColor:`#3A3A3A`},nodes:{stroke:`#6A6A6A`,backgroundColor:`#2A2A2A`,labels:{color:`#CCCCCC`},tooltip:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},edges:{stroke:`#6A6A6A`},midpoints:{stroke:`#6A6A6A`,fill:`#1A1A1A`,tooltip:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},controls:{backgroundColor:`#2A2A2A`,buttonColor:`#2A2A2A`,color:`#CCCCCC`,border:`1px solid #4A4A4A`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}}}}},Yn={style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,backgroundPattern:{dotColor:`#3A3A3A`},nodes:{stroke:`#6A6A6A`,backgroundColor:`#2A2A2A`,labels:{color:`#CCCCCC`},tooltip:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},edges:{stroke:`#6A6A6A`},midpoints:{stroke:`#6A6A6A`,fill:`#1A1A1A`,tooltip:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},controls:{backgroundColor:`#2A2A2A`,buttonColor:`#2A2A2A`,color:`#CCCCCC`,border:`1px solid #4A4A4A`},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}}}}},Xn={style:{chart:{backgroundColor:`#FFF8E1`,color:`#424242`,backgroundPattern:{dotColor:`#edc7bb`},nodes:{stroke:`#5D4037`,backgroundColor:`#fcf9f0`,labels:{color:`#424242`},tooltip:{backgroundColor:`#5D4037`,color:`#FFF8E1`}},edges:{stroke:`#5D4037`},midpoints:{stroke:`#5D4037`,fill:`#FFF8E1`,tooltip:{backgroundColor:`#5D4037`,color:`#FFF8E1`}},controls:{backgroundColor:`#FFF8E1`,buttonColor:`#FFF8E1`,color:`#424242`,border:`1px solid #d9bbb2`},title:{color:`#424242`,subtitle:{color:`#757575`}}}}},Zn={style:{chart:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,backgroundPattern:{dotColor:`#3E3E3E`},nodes:{stroke:`#965039`,backgroundColor:`#2A2A2A`,labels:{color:`#BDBDBD`},tooltip:{backgroundColor:`#3A3A3A`,color:`#FFF8E1`}},edges:{stroke:`#965039`},midpoints:{stroke:`#965039`,fill:`#1E1E1E`,tooltip:{backgroundColor:`#3A3A3A`,color:`#FFF8E1`}},controls:{backgroundColor:`#1E1E1E`,buttonColor:`#1E1E1E`,color:`#BDBDBD`,border:`1px solid #3A3A3A`},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}}}}},Qn={style:{chart:{backgroundColor:`#1A1A1A`,color:`#99AA99`,backgroundPattern:{dotColor:`#2f3d2f`},nodes:{stroke:`#66CC66`,backgroundColor:`#2A2A2A`,labels:{color:`#99AA99`},tooltip:{backgroundColor:`#3A3A3A`,color:`#99AA99`}},edges:{stroke:`#66CC66`},midpoints:{stroke:`#66CC66`,fill:`#1A1A1A`,tooltip:{backgroundColor:`#3A3A3A`,color:`#99AA99`}},controls:{backgroundColor:`#1A1A1A`,buttonColor:`#1A1A1A`,color:`#99AA99`,border:`1px solid #1e361e`},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}}}}},$n={style:{chart:{backgroundColor:`#fbfafa`,color:`#8A9892`,backgroundPattern:{dotColor:`#dbcfc5`},nodes:{stroke:`#8F837A`,backgroundColor:`#ffffff`,labels:{color:`#8A9892`},tooltip:{backgroundColor:`#8F837A`,color:`#fbfafa`}},edges:{stroke:`#8F837A`},midpoints:{stroke:`#8F837A`,fill:`#fbfafa`,tooltip:{backgroundColor:`#8F837A`,color:`#fbfafa`}},controls:{backgroundColor:`#fbfafa`,buttonColor:`#fbfafa`,color:`#99AA99`,border:`1px solid #ebded3`},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}}}}},er={style:{chart:{backgroundColor:`#f6f6fb`,color:`#50606C`,backgroundPattern:{dotColor:`#c3cfd9`},layout:{arrowShape:`normal`,curvedEdges:!1},nodes:{stroke:`#50606C`,backgroundColor:`#ffffff`,borderRadius:0,labels:{color:`#50606C`},tooltip:{backgroundColor:`#50606C`,color:`#f6f6fb`}},edges:{stroke:`#50606C`},midpoints:{stroke:`#50606C`,fill:`#fbfafa`,tooltip:{backgroundColor:`#50606C`,color:`#f6f6fb`}},controls:{backgroundColor:`#f6f6fb`,buttonColor:`#f6f6fb`,color:`#50606C`,border:`1px solid #98aab8`,borderRadius:`0`},title:{color:`#50606C`,subtitle:{color:`#718890`}}}}},tr={default:{},minimal:qn,minimalDark:Jn,dark:Yn,celebration:Xn,celebrationNight:Zn,hack:Qn,zen:$n,concrete:er},nr=Object.freeze(Object.defineProperty({__proto__:null,celebration:Xn,celebrationNight:Zn,concrete:er,dark:Yn,default:tr,hack:Qn,minimal:qn,minimalDark:Jn,zen:$n},Symbol.toStringTag,{value:`Module`})),rr=[`id`],ir={key:0,class:`dag-chart-error`},ar=[`viewBox`,`xmlns`],or={key:0},sr=[`id`,`width`,`height`],cr=[`cx`,`cy`,`r`,`fill`],lr=[`x`,`y`,`width`,`height`,`fill`],ur={key:2},dr=[`id`,`markerWidth`,`markerHeight`,`refX`,`refY`],fr=[`d`,`fill`,`stroke`],pr=[`d`,`fill`,`stroke`],mr={class:`vue-ui-dag-edges`},hr=[`onMouseenter`],gr={class:`vue-ui-dag-nodes`},_r=[`onClick`,`onMouseenter`,`onMouseleave`],vr=[`x`,`y`,`width`,`height`],yr={class:`vue-ui-dag-edges`},br=[`d`,`stroke-width`,`marker-end`],xr={class:`vue-ui-dag-node-labels`},Sr=[`onClick`,`onMouseenter`,`onMouseleave`],Cr=[`x`,`y`,`font-size`,`fill`,`font-weight`],wr=[`x`,`y`,`font-size`,`fill`,`font-weight`,`innerHTML`],Tr={key:1},Er={key:6,class:`vue-data-ui-watermark`},Dr=[`data-position`],Or={key:0},kr=[`data-position`],Ar={key:0},jr=1.5,Mr=ve({__name:`vue-ui-dag`,props:{dataset:{type:Object,default(){return{nodes:[],edges:[]}}},config:{type:Object,default(){return{}}}},emits:[`onNodeClick`,`onMidpointEnter`,`onMidpointLeave`,`copyAlt`],setup(ie,{expose:me,emit:ve}){let je=ee(()=>oe(()=>import(`./DdyLBgN8.js`),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),T=ee(()=>oe(()=>import(`./DHC76net.js`),__vite__mapDeps([7,1,2,3,4,8,9,6]),import.meta.url)),Me=ee(()=>oe(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([10,1]),import.meta.url)),{vue_ui_dag:E}=ge(),{isThemeValid:Ne,warnInvalidTheme:Pe}=Se(),D=ie,Fe=ve,O=w(null),k=w(se()),Ie=w(null),Le=w(null),Re=w(null),ze=w(0),Be=w(0),Ve=w(!1),He=w(!1),A=w(!1),Ue=w(!1),j=w(null),M=w(null),N=w(at()),We=v(()=>N.value.userOptions.useCursorPointer),Ge=w(N.value.style.chart.width),P=w(N.value.style.chart.height),F=w({x:0,y:0}),I=w(null),Ke=w(null),qe=w({left:`0px`,top:`0px`}),Je=w(`top`),L=w(!1),R=w({x:0,y:0}),Ye=w({x:0,y:0}),z=w(null),Xe=w(null),Ze=w({left:`0px`,top:`0px`}),Qe=w(`top`),B=w(!1),V=w(!1),{svgRef:H}=De({config:N.value.style.chart.title}),{userOptionsVisible:U,setUserOptionsVisibility:$e,keepUserOptionState:et}=Oe({config:N.value}),W=w(N.value.style.chart.layout.rankDirection),tt=v(()=>ce({defaultConfig:{userOptions:{show:!1},style:{chart:{backgroundColor:`#99999930`,nodes:{stroke:`#CCCCCC`,backgroundColor:`#DDDDDD50`},edges:{stroke:`#CCCCCC`},midpoints:{stroke:`#CCCCCC`,fill:`#CCCCCC`}}}},userConfig:N.value.skeletonConfig??{}})),{loading:nt,FINAL_DATASET:rt,manualLoading:it}=be({...h(D),FINAL_CONFIG:N,prepareConfig:at,skeletonDataset:D.config?.skeletonDataset??{nodes:[{id:`A`,label:``},{id:`B`,label:``},{id:`C`,label:``}],edges:[{from:`A`,to:`B`},{from:`A`,to:`C`}]},skeletonConfig:ce({defaultConfig:N.value,userConfig:tt.value})});function at(){let e=he({userConfig:D.config,defaultConfig:E}),t=e.theme;if(!t)return e;if(!Ne.value(e))return Pe(e),e;let n=he({userConfig:tr[t]||D.config,defaultConfig:e});return he({userConfig:D.config,defaultConfig:n})}let ot=v(()=>!!N.value.debug);i(async()=>{le(D.dataset)&&(pe({componentName:`VueUiDag`,type:`dataset`,debug:ot.value}),He.value=!1,it.value=!0),D.dataset.nodes||(pe({componentName:`VueUiDag`,type:`datasetAttributeEmpty`,property:`nodes`,index:0,debug:ot.value}),He.value=!1,it.value=!0),He.value=!0,await ae(),Ht()}),ne(()=>D.config,async e=>{nt.value||(N.value=at()),U.value=!N.value.userOptions.showOnChartHover,ze.value+=1,W.value=N.value.style.chart.layout.rankDirection,Ge.value=N.value.style.chart.width,P.value=N.value.style.chart.height,q.value=N.value.style.chart.zoom.active,await ae(),Ht()},{deep:!0});let{isPrinting:st,isImaging:ct,generatePdf:lt,generateImage:ut}=_e({elementId:`dag_${k.value}`,fileName:N.value.style.chart.title.text||`vue-ui-dag`,options:N.value.userOptions.print}),dt=v(()=>N.value.style.chart.backgroundColor),{exportSvg:G,getSvg:ft}=xe({svg:H,title:v(()=>N.value.style.chart.title),legend:void 0,legendItems:void 0,backgroundColor:dt});async function pt({isCb:e}){Ue.value=!0,await ae();try{if(e){let{blob:e,url:t,text:n,dataUrl:r}=await ft();await Promise.resolve(N.value.userOptions.callbacks.svg({blob:e,url:t,text:n,dataUrl:r}))}else await Promise.resolve(G())}finally{Ue.value=!1}}function mt(){Ve.value=!0,$e(!0)}function ht(){$e(!1),Ve.value=!1}function gt({tooltipRef:e,isVisibleRef:t,anchorRef:n,styleRef:r,placementRef:i,offsetRef:a,margin:o=24}){return function(){let s=e.value;if(!s||!t.value)return;let c=s.getBoundingClientRect(),l=window.innerWidth,u=window.innerHeight,d=n.value.x,f=n.value.y,p=a?.value?.x??0,m=a?.value?.y??0,h=f-m-c.height-o,g=d-c.width/2,_=`top`;if(h<o){let e=f+m+o;e+c.height<=u-o?(h=e,_=`bottom`):(h=f-c.height/2,h<o&&(h=o),h+c.height>u-o&&(h=u-c.height-o),_=`center`)}g<o&&(g=o),g+c.width>l-o&&(g=l-c.width-o);let v=g<=o,y=g+c.width>=l-o;if((v||y)&&_!==`center`){let e,t,n=d-p-o;l-(d+p)-o>=n?(e=`right`,t=d+p+o):(e=`left`,t=d-p-o-c.width),t>=o&&t+c.width<=l-o&&(g=t,h=f-c.height/2,h<o&&(h=o),h+c.height>u-o&&(h=u-c.height-o),_=e)}i.value=_,r.value={left:`${g}px`,top:`${h}px`}}}let{layoutData:K,lastError:_t,arrowMarkerIdentifier:vt}=Kn({nodes:v(()=>rt.value.nodes.map(e=>({...e,backgroundColor:e.backgroundColor?ue(e.backgroundColor):N.value.style.chart.nodes.backgroundColor,color:e.color?ue(e.color):N.value.style.chart.nodes.labels.color}))),edges:v(()=>rt.value.edges),configuration:v(()=>({...N.value.style.chart.layout,rankDirection:W.value}))});function yt(e){return K.value?K.value.nodes.find(t=>t.id===e):null}v(()=>{if(!K.value)return[];let e=N.value.style.chart.edges.stroke,t=new Set;return K.value.edges.forEach(n=>{t.add({id:n.id,from:n.from,to:n.to,color:n.original?.color||e})}),Array.from(t)});let bt=v(()=>{let e=Ge.value,t=P.value,n=Number(e),r=Number(t),i=Number.isFinite(n)&&n>0,a=Number.isFinite(r)&&r>0;return!i&&!a?null:{width:i?n:null,height:a?r:null}}),q=w(N.value.style.chart.zoom.active),{viewBox:J,resetZoom:xt,setInitialViewBox:St,scale:Ct,zoomByFactor:wt}=ke(H,{x:0,y:0,width:100,height:100},1,q,()=>{L.value=!1});function Tt(){q.value=!q.value}function Et(){let e=K.value&&K.value.viewBox;if(!e)return;let t=String(e).split(` `).map(Number);if(t.length!==4)return;let[n,r,i,a]=t;if(!Number.isFinite(n)||!Number.isFinite(r)||!Number.isFinite(i)||!Number.isFinite(a))return;let o=i,s=a,c=n,l=r,u=bt.value;u&&(u.width!==null&&(o=u.width),u.height!==null&&(s=u.height),c=n-(o-i)/2,l=r-(s-a)/2),St({x:c,y:l,width:o,height:s},{overwriteCurrentIfNotZoomed:!0})}ne(()=>K.value&&K.value.viewBox,()=>{Et()},{immediate:!0}),ne(()=>bt.value,()=>{Et()}),ne(()=>V.value,e=>{q.value=!e});let Dt=v(()=>{let e=J.value;return e?`${e.x} ${e.y} ${e.width} ${e.height}`:`0 0 0 0`}),Y=w(!1);function Ot(e){Y.value=e,Be.value+=1}function kt(){V.value=!V.value}function At(){wt(jr,!0)}function jt(){wt(1/jr,!0)}let Mt=[`TB`,`RL`,`BT`,`LR`];function Nt(){W.value=Mt[(Mt.indexOf(W.value)+1)%Mt.length],xt()}let Pt=gt({tooltipRef:Ke,isVisibleRef:B,anchorRef:F,styleRef:qe,placementRef:Je}),Ft=gt({tooltipRef:Xe,isVisibleRef:L,anchorRef:R,styleRef:Ze,placementRef:Qe,offsetRef:Ye}),X=w(null);async function It(e){Fe(`onMidpointEnter`,e);let t=H.value;if(!t||!e?.midpoint)return;let n=t.createSVGPoint();n.x=e.midpoint.x,n.y=e.midpoint.y;let r=t.getScreenCTM();if(!r)return;let i=n.matrixTransform(r);F.value={x:i.x,y:i.y},I.value=e,B.value=!0,N.value.style.chart.midpoints.selectedEdge.animated===!0&&(X.value=e.id,Jt()),await ae(),Pt()}function Lt(){B.value=!1,I.value=null,Fe(`onMidpointLeave`),N.value.style.chart.midpoints.selectedEdge.animated===!0&&(X.value=null,Jt())}async function Rt(e){if(Fe(`onNodeClick`,e),!N.value.style.chart.nodes.tooltip.showOnClick)return;let t=H.value;if(!t)return;let n=t.createSVGPoint();n.x=e.x,n.y=e.y;let r=t.getScreenCTM();if(!r)return;let i=n.matrixTransform(r),a=N.value.style.chart.layout.nodeWidth,o=N.value.style.chart.layout.nodeHeight,s=r.a,c=r.d,l=a*s,u=o*c;Ye.value={x:l/2,y:u/2},R.value={x:i.x,y:i.y},z.value=e,L.value=!0,await ae(),Ft()}function zt(){L.value=!1,z.value=null}function Bt(e){if(!L.value)return;let t=Xe.value;if(t&&t.contains(e.target))return;let n=H.value;n&&n.contains(e.target)&&e.target.closest(`.vue-ui-dag-node`)||zt()}function Vt(e){e.key===`Escape`&&L.value&&zt()}i(()=>{document.addEventListener(`mousedown`,Bt),document.addEventListener(`keydown`,Vt)}),a(()=>{document.removeEventListener(`mousedown`,Bt),document.removeEventListener(`keydown`,Vt),j.value&&(M.value&&j.value.unobserve(M.value),j.value.disconnect())});function Ht(){if(!N.value.responsive){j.value&&(M.value&&j.value.unobserve(M.value),j.value.disconnect(),j.value=null,M.value=null);return}let e=Ee(()=>{if(!O.value)return;let{width:e,height:t}=Te({chart:O.value,title:N.value.style.chart.title.text?Ie.value:null,legend:N.value.style.chart.controls.show?Re.value?.$el:null,source:Le.value});requestAnimationFrame(()=>{Ge.value=Math.max(.1,e),P.value=Math.max(.1,t-12)})});j.value&&(M.value&&j.value.unobserve(M.value),j.value.disconnect()),j.value=new ResizeObserver(e),M.value=O.value?O.value.parentNode:null,M.value&&j.value.observe(M.value),e()}function Ut(e,t={}){let{direction:n=-1,mode:r=`oneLapNearest`,dasharray:i=null}=t;if(!e||typeof e.getTotalLength!=`function`)return ot.value&&console.warn(`VueUiDag @getIdealDashoffsetDelta: invalid path element`,e),0;let a=e.getTotalLength(),o=d(i??e.getAttribute(`stroke-dasharray`)??(typeof getComputedStyle==`function`?getComputedStyle(e).strokeDasharray:``));if(!Number.isFinite(o)||o<=0)return n*a;let s=Math.max(1,Math.round(a/o)),c=Math.max(1,Math.ceil(a/o)),l=Math.max(1,Math.floor(a/o)),u;return u=r===`pattern`?o:r===`oneLapCeil`?c*o:r===`oneLapFloor`?l*o:s*o,n*u;function d(e){if(!e||e===`none`)return NaN;let t=String(e).replace(/,/g,` `).trim().split(/\s+/).map(e=>Number.parseFloat(e)).filter(e=>Number.isFinite(e));if(!t.length)return NaN;let n=t.reduce((e,t)=>e+t,0);return t.length%2==1?n*2:n}}let Wt=w(new Map),Gt=w(new Map);function Kt(e){return function(t){t?Wt.value.set(e,t):Wt.value.delete(e)}}function qt(){Gt.value.forEach(e=>{try{e.cancel()}catch{}}),Gt.value.clear()}function Jt(){qt();let e=K.value?.edges??[];if(!e.length)return;let t=N.value.style.chart.edges.animations,n=Number(t.referenceDistance)>0?Number(t.referenceDistance):24;e.forEach(e=>{let r=N.value.style.chart.midpoints.selectedEdge.animated===!0&&X.value!=null&&e.id===X.value,i=!!e?.original?.animated||!!e?.animated||r,a=Wt.value.get(e.id);if(!a)return;if(!i){a.style.strokeDasharray=`0`,a.style.strokeDashoffset=`0`;return}let o=e?.original?.dasharray??t.dasharray;a.style.strokeDasharray=String(o),a.style.strokeDashoffset=`0`;let s=![void 0,null].includes(e?.original?.animationDirection),c=![void 0,null].includes(t.animationDirection),l=Ut(a,{direction:s?Number(e.original.animationDirection):c?Number(t.animationDirection):-1,mode:`oneLapNearest`,dasharray:String(o)}),u=e?.original?.animationDurationMs??t.animationDurationMs??1e3,d=Number(u),f=Number.isFinite(d)&&d>0?n/d:n/1e3,p=Math.max(1,Math.round(Math.abs(l)/Math.max(1e-9,f))),m=a.animate([{strokeDashoffset:0},{strokeDashoffset:l}],{duration:p,iterations:1/0,easing:`linear`});Gt.value.set(e.id,m)})}ne(()=>K.value&&K.value.edges,async()=>{await ae(),Jt()},{deep:!0,immediate:!0}),a(()=>{qt()});async function Yt({scale:e=2}={}){if(!O.value)return;let{width:t,height:n}=O.value.getBoundingClientRect(),r=t/n,{imageUri:i,base64:a}=await Ce({domElement:O.value,base64:!0,img:!0,scale:e});return{imageUri:i,base64:a,title:N.value.style.chart.title.text??`vue-ui-dag`,width:t,height:n,aspectRatio:r}}let Z=v(()=>{let e=Number(N.value.style.chart.layout.nodeHeight);return Number.isFinite(e)&&e>0?e/N.value.style.chart.backgroundPattern.spacingRatio:12}),Xt=v(()=>Z.value*(N.value.style.chart.backgroundPattern.dotRadiusRatio/100)),Q=w(null),$=null,Zt=0;function Qt(e){$&&=(clearTimeout($),null),Q.value!==e&&(Q.value=e,(N.value.style.chart.nodes.selected.downstreamEdges.animated===!0||N.value.style.chart.nodes.selected.upstreamEdges.animated===!0)&&Jt())}function $t(e){let t=++Zt;$&&clearTimeout($),$=setTimeout(()=>{t===Zt&&Q.value===e&&(Q.value=null,(N.value.style.chart.nodes.selected.downstreamEdges.animated===!0||N.value.style.chart.nodes.selected.upstreamEdges.animated===!0)&&Jt())},20)}function en(e){let t=e.from===Q.value,n=e.to===Q.value,r=e.original.color??N.value.style.chart.edges.stroke;return(X.value===e.id||I.value?.id===e.id)&&N.value.style.chart.midpoints.selectedEdge.stroke!=null?r=N.value.style.chart.midpoints.selectedEdge.stroke:t&&N.value.style.chart.nodes.selected.downstreamEdges.stroke!=null?r=N.value.style.chart.nodes.selected.downstreamEdges.stroke:n&&N.value.style.chart.nodes.selected.upstreamEdges.stroke!=null&&(r=N.value.style.chart.nodes.selected.upstreamEdges.stroke),t&&N.value.style.chart.nodes.selected.downstreamEdges.animated===!0||n&&N.value.style.chart.nodes.selected.upstreamEdges.animated===!0?e.animated=!0:e.animated=(K.value?.edges.find(t=>t.id===e.id))?.original?.animated??!1,{d:e.pathData,fill:`none`,stroke:r,"stroke-width":N.value.style.chart.edges.strokeWidth*(X.value===e.id||e.from===Q.value||e.id===I.value?.id?2:1),"stroke-linecap":`round`,"stroke-linejoin":`round`}}function tn(e){let t=Q.value===e.id,n=t&&N.value.style.chart.nodes.selected.backgroundColor!=null?N.value.style.chart.nodes.selected.backgroundColor:e.original.backgroundColor,r=t&&N.value.style.chart.nodes.selected.stroke!=null?N.value.style.chart.nodes.selected.stroke:N.value.style.chart.nodes.stroke,i=t&&N.value.style.chart.nodes.selected.strokeWidth!=null?N.value.style.chart.nodes.selected.strokeWidth:N.value.style.chart.nodes.strokeWidth;return{x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height,rx:N.value.style.chart.nodes.borderRadius,fill:n,stroke:r,"stroke-width":i}}function nn(e){let t=e.from===Q.value,n=e.to===Q.value,r=e.original.color??N.value.style.chart.edges.stroke;return(X.value===e.id||I.value?.id===e.id)&&N.value.style.chart.midpoints.selectedEdge.stroke!=null?r=N.value.style.chart.midpoints.selectedEdge.stroke:t&&N.value.style.chart.nodes.selected.downstreamEdges.stroke!=null?r=N.value.style.chart.nodes.selected.downstreamEdges.stroke:n&&N.value.style.chart.nodes.selected.upstreamEdges.stroke!=null&&(r=N.value.style.chart.nodes.selected.upstreamEdges.stroke),{cx:e.midpoint.x,cy:e.midpoint.y,r:N.value.style.chart.midpoints.radius,fill:N.value.style.chart.midpoints.fill,stroke:r,"stroke-width":N.value.style.chart.edges.strokeWidth*(e.from===Q.value||e.id===I.value?.id?2:1)}}function rn(e){let t=e.from===Q.value,n=e.to===Q.value,r=e.color??e.original?.color??N.value.style.chart.edges.stroke;return(X.value===e.id||I.value?.id===e.id)&&N.value.style.chart.midpoints.selectedEdge.stroke!=null?r=N.value.style.chart.midpoints.selectedEdge.stroke:t&&N.value.style.chart.nodes.selected.downstreamEdges.stroke!=null?r=N.value.style.chart.nodes.selected.downstreamEdges.stroke:n&&N.value.style.chart.nodes.selected.upstreamEdges.stroke!=null&&(r=N.value.style.chart.nodes.selected.upstreamEdges.stroke),r}function an(e){return`${vt}-${String(e).replace(/[^a-zA-Z0-9_-]/g,`_`)}`}function on(){return K.value}function sn(e){if(e?.stage===`start`){A.value=!0;return}if(e?.stage===`end`){A.value=!1;return}ut()}async function cn(){if(Fe(`copyAlt`,{config:N.value,dataset:rt.value}),!N.value.userOptions.callbacks.altCopy){console.warn("Vue Data UI - A callback must be set for `altCopy` in userOptions.");return}await Promise.resolve(N.value.userOptions.callbacks.altCopy({config:N.value,dataset:rt.value}))}return me({getData:on,getImage:Yt,generatePdf:lt,generateSvg:pt,generateImage:ut,toggleAnnotator:kt,toggleFullscreen:Ot,zoomIn:At,zoomOut:jt,resetZoom:xt,switchDirection:Nt,copyAlt:cn}),(i,a)=>(o(),S(`div`,{class:e(`vue-data-ui-component vue-ui-dag ${Y.value?`vue-data-ui-wrapper-fullscreen`:``} ${N.value.responsive?`vue-ui-dag-responsive`:``}`),id:`dag_${k.value}`,ref_key:`dagChart`,ref:O,style:c({fontFamily:N.value.style.fontFamily,backgroundColor:N.value.style.chart.backgroundColor,padding:`0.5rem`}),onMouseenter:mt,onMouseleave:ht},[r(_t)?(o(),S(`div`,ir,l(String(r(_t))),1)):t(``,!0),N.value.userOptions.buttons.annotator?(o(),p(r(je),{key:1,svgRef:r(H),backgroundColor:N.value.style.chart.backgroundColor,color:N.value.style.chart.color,active:V.value,isCursorPointer:We.value,onClose:kt},{"annotator-action-close":b(()=>[d(i.$slots,`annotator-action-close`,{},void 0,!0)]),"annotator-action-color":b(({color:e})=>[d(i.$slots,`annotator-action-color`,y(s({color:e})),void 0,!0)]),"annotator-action-draw":b(({mode:e})=>[d(i.$slots,`annotator-action-draw`,y(s({mode:e})),void 0,!0)]),"annotator-action-undo":b(({disabled:e})=>[d(i.$slots,`annotator-action-undo`,y(s({disabled:e})),void 0,!0)]),"annotator-action-redo":b(({disabled:e})=>[d(i.$slots,`annotator-action-redo`,y(s({disabled:e})),void 0,!0)]),"annotator-action-delete":b(({disabled:e})=>[d(i.$slots,`annotator-action-delete`,y(s({disabled:e})),void 0,!0)]),_:3},8,[`svgRef`,`backgroundColor`,`color`,`active`,`isCursorPointer`])):t(``,!0),N.value.userOptions.show&&He.value&&(r(et)||r(U))?(o(),p(r(T),{ref:`userOptionsRef`,key:`user_option_${Be.value}`,backgroundColor:N.value.style.chart.backgroundColor,color:N.value.style.chart.color,isPrinting:r(st),isImaging:r(ct),uid:k.value,hasTooltip:!1,hasTable:!1,hasXls:!1,hasLabel:!1,hasPdf:N.value.userOptions.buttons.pdf,hasImg:N.value.userOptions.buttons.img,hasSvg:N.value.userOptions.buttons.svg,hasFullscreen:N.value.userOptions.buttons.fullscreen,hasAltCopy:N.value.userOptions.buttons.altCopy,isFullscreen:Y.value,chartElement:O.value,position:N.value.userOptions.position,titles:{...N.value.userOptions.buttonTitles},hasAnnotator:N.value.userOptions.buttons.annotator,isAnnotation:V.value,callbacks:N.value.userOptions.callbacks,printScale:N.value.userOptions.print.scale,hasZoom:N.value.userOptions.buttons.zoom,isZoom:q.value,isCursorPointer:We.value,onToggleFullscreen:Ot,onGeneratePdf:r(lt),onGenerateImage:sn,onGenerateSvg:pt,onToggleAnnotator:kt,onToggleZoom:Tt,onCopyAlt:cn,style:c({visibility:r(et)?r(U)?`visible`:`hidden`:`visible`})},m({_:2},[i.$slots.menuIcon?{name:`menuIcon`,fn:b(({isOpen:e,color:t})=>[d(i.$slots,`menuIcon`,y(s({isOpen:e,color:t})),void 0,!0)]),key:`0`}:void 0,i.$slots.optionPdf?{name:`optionPdf`,fn:b(()=>[d(i.$slots,`optionPdf`,{},void 0,!0)]),key:`1`}:void 0,i.$slots.optionImg?{name:`optionImg`,fn:b(()=>[d(i.$slots,`optionImg`,{},void 0,!0)]),key:`2`}:void 0,i.$slots.optionSvg?{name:`optionSvg`,fn:b(()=>[d(i.$slots,`optionSvg`,{},void 0,!0)]),key:`3`}:void 0,i.$slots.optionFullscreen?{name:`optionFullscreen`,fn:b(({toggleFullscreen:e,isFullscreen:t})=>[d(i.$slots,`optionFullscreen`,y(s({toggleFullscreen:e,isFullscreen:t})),void 0,!0)]),key:`4`}:void 0,i.$slots.optionAnnotator?{name:`optionAnnotator`,fn:b(({toggleAnnotator:e,isAnnotator:t})=>[d(i.$slots,`optionAnnotator`,y(s({toggleAnnotator:e,isAnnotator:t})),void 0,!0)]),key:`5`}:void 0,i.$slots.optionZoom?{name:`optionZoom`,fn:b(({toggleZoom:e,isZoomLocked:t})=>[d(i.$slots,`optionZoom`,y(s({toggleZoom:e,isZoomLocked:t})),void 0,!0)]),key:`6`}:void 0,i.$slots.optionAltCopy?{name:`optionAltCopy`,fn:b(({altCopy:e})=>[d(i.$slots,`optionAltCopy`,y(s({altCopy:e})),void 0,!0)]),key:`7`}:void 0]),1032,[`backgroundColor`,`color`,`isPrinting`,`isImaging`,`uid`,`hasPdf`,`hasImg`,`hasSvg`,`hasFullscreen`,`hasAltCopy`,`isFullscreen`,`chartElement`,`position`,`titles`,`hasAnnotator`,`isAnnotation`,`callbacks`,`printScale`,`hasZoom`,`isZoom`,`isCursorPointer`,`onGeneratePdf`,`style`])):t(``,!0),N.value.style.chart.title.text?(o(),S(`div`,{key:3,ref_key:`chartTitle`,ref:Ie,style:`width:100%;background:transparent;`},[(o(),p(we,{key:`title_${ze.value}`,config:{title:{cy:`dag-title`,...N.value.style.chart.title},subtitle:{cy:`dag-subtitle`,...N.value.style.chart.title.subtitle}}},null,8,[`config`]))],512)):t(``,!0),N.value.style.chart.controls.position===`top`&&!r(nt)&&N.value.style.chart.controls.show?(o(),p(Ae,{key:4,ref_key:`zoomControls`,ref:Re,config:N.value,scale:r(Ct),isFullscreen:Y.value,withDirection:``,onZoomIn:At,onZoomOut:jt,onResetZoom:a[0]||=()=>r(xt)(!0),onSwitchDirection:Nt},null,8,[`config`,`scale`,`isFullscreen`])):t(``,!0),r(K)?(o(),S(`svg`,{key:5,ref_key:`svgRef`,ref:H,class:e({"vue-ui-dag-svg":!0,"vue-data-ui-loading":r(nt)}),viewBox:Dt.value,xmlns:r(de),style:c({backgroundColor:N.value.style.chart.backgroundColor,height:`100%`,width:`100%`})},[u(r(Me)),N.value.style.chart.backgroundPattern.show?(o(),S(`defs`,or,[C(`pattern`,{id:`dag_bg_pattern_${k.value}`,patternUnits:`userSpaceOnUse`,width:Z.value,height:Z.value},[d(i.$slots,`background-pattern`,y(s({x:Z.value/2,y:Z.value/2,color:N.value.style.chart.backgroundPattern.dotColor})),()=>[C(`circle`,{cx:Z.value/2,cy:Z.value/2,r:Xt.value,fill:N.value.style.chart.backgroundPattern.dotColor},null,8,cr)],!0)],8,sr)])):t(``,!0),N.value.style.chart.backgroundPattern.show?(o(),S(`rect`,{key:1,x:r(J)?.x??0,y:r(J)?.y??0,width:r(J)?.width??0,height:r(J)?.height??0,fill:`url(#dag_bg_pattern_${k.value})`,style:c({pointerEvents:`none`,opacity:N.value.style.chart.backgroundPattern.opacity})},null,12,lr)):t(``,!0),r(K).arrowShape===`undirected`?t(``,!0):(o(),S(`defs`,ur,[(o(!0),S(x,null,g(r(K).edges,e=>(o(),S(`marker`,{key:`marker_${e.id}`,id:an(e.id),markerWidth:r(K).arrowSize,markerHeight:r(K).arrowSize,refX:r(K).arrowSize-3,refY:r(K).arrowSize/2,orient:`auto`,markerUnits:`strokeWidth`},[r(K).arrowShape===`normal`?(o(),S(`path`,{key:0,d:`M 0 0 L ${r(K).arrowSize} ${r(K).arrowSize/2} L 0 ${r(K).arrowSize} Z`,fill:rn(e),stroke:rn(e),"stroke-width":`0`,style:{transition:`stroke 0.2s ease-in-out, fill 0.2s ease-in-out, stroke-width 0.2s ease-in-out`}},null,8,fr)):(o(),S(`path`,{key:1,d:`M 0 0 L ${r(K).arrowSize} ${r(K).arrowSize/2} L 0 ${r(K).arrowSize} L ${r(K).arrowSize/3} ${r(K).arrowSize/2} Z`,fill:rn(e),stroke:rn(e),"stroke-width":`0`,style:{transition:`stroke 0.2s ease-in-out, fill 0.2s ease-in-out, stroke-width 0.2s ease-in-out`}},null,8,pr))],8,dr))),128))])),C(`g`,mr,[(o(!0),S(x,null,g(r(K).edges,e=>(o(),S(x,{key:e.id},[C(`path`,f({"data-cy-edge":``,ref_for:!0,ref:Kt(e.id)},{ref_for:!0},en(e),{style:{"pointer-events":`none`,transition:`stroke-width 0.2s ease-in-out, stroke 0.2s ease-in-out`}}),null,16),N.value.style.chart.midpoints.show?(o(),S(`circle`,f({key:0,"data-cy-midpoint":``,class:`vue-ui-dag-edge-midpoint`},{ref_for:!0},nn(e),{style:{transition:`stroke-width 0.2s ease-in-out, stroke 0.2s ease-in-out`},onMouseenter:t=>It(e),onMouseleave:Lt}),null,16,hr)):t(``,!0)],64))),128))]),C(`g`,gr,[(o(!0),S(x,null,g(r(K).nodes,e=>(o(),S(`g`,{key:e.id,class:`vue-ui-dag-node`,onClick:re(t=>N.value.style.chart.nodes.tooltip.showOnClick&&Rt(e),[`stop`]),onMouseenter:t=>Qt(e.id),onMouseleave:t=>$t(e.id)},[i.$slots.node?t(``,!0):(o(),S(`rect`,f({key:0,"data-cy-node":``},{ref_for:!0},tn(e),{style:{cursor:N.value.style.chart.nodes.tooltip.showOnClick&&We.value?`pointer`:`default`,transition:`stroke 0.2s ease-in-out, stroke-width 0.2s ease-in-out, fill 0.2s ease-in-out`}}),null,16)),i.$slots.node?(o(),S(`foreignObject`,{key:1,x:e.x-e.width/2,y:e.y-e.height/2,width:e.width,height:e.height},[d(i.$slots,`node`,f({ref_for:!0},{node:e,orientation:W.value}),void 0,!0)],8,vr)):t(``,!0)],40,_r))),128))]),C(`g`,yr,[(o(!0),S(x,null,g(r(K).edges,e=>(o(),S(`path`,{key:e.id,d:e.pathData,fill:`none`,stroke:`transparent`,"stroke-width":N.value.style.chart.edges.strokeWidth*(e.from===Q.value||e.id===I.value?.id?1.3:1),"stroke-linecap":`round`,"stroke-linejoin":`round`,"marker-end":r(K).arrowShape===`undirected`?null:`url(#${an(e.id)})`,style:{"pointer-events":`none`,transition:`stroke-width 0.2s ease-in-out, stroke 0.2s ease-in-out`}},null,8,br))),128))]),C(`g`,xr,[(o(!0),S(x,null,g(r(K).nodes,e=>(o(),S(`g`,{key:e.id,onClick:re(t=>N.value.style.chart.nodes.tooltip.showOnClick&&Rt(e),[`stop`]),onMouseenter:t=>Qt(e.id),onMouseleave:t=>$t(e.id)},[i.$slots[`free-node-label`]?t(``,!0):(o(),S(x,{key:0},[i.$slots[`node-label`]?(o(),S(`text`,{key:0,x:e.x,y:e.y+N.value.style.chart.nodes.labels.fontSize/3,"text-anchor":`middle`,"font-size":N.value.style.chart.nodes.labels.fontSize,fill:Q.value===e.id&&N.value.style.chart.nodes.selected.labelColor!=null?N.value.style.chart.nodes.selected.labelColor:e.original.color,"font-weight":N.value.style.chart.nodes.labels.bold?`bold`:`normal`,style:{transition:`fill 0.2s ease-in-out`}},[d(i.$slots,`node-label`,f({ref_for:!0},{node:e,orientation:W.value}),()=>[n(l(e.label),1)],!0)],8,Cr)):!i.$slots[`free-node-label`]&&!i.$slots.node?(o(),S(`text`,{key:1,"data-cy-node-label":``,x:e.x,y:e.y+N.value.style.chart.nodes.labels.fontSize/3,"text-anchor":`middle`,"font-size":N.value.style.chart.nodes.labels.fontSize,fill:Q.value===e.id&&N.value.style.chart.nodes.selected.labelColor!=null?N.value.style.chart.nodes.selected.labelColor:e.original.color,"font-weight":N.value.style.chart.nodes.labels.bold?`bold`:`normal`,style:{transition:`fill 0.2s ease-in-out`},innerHTML:r(fe)({content:e.label,fontSize:N.value.style.chart.nodes.labels.fontSize,fontWeight:N.value.style.chart.nodes.labels.bold?`bold`:`normal`,fill:Q.value===e.id&&N.value.style.chart.nodes.selected.labelColor!=null?N.value.style.chart.nodes.selected.labelColor:e.original.color,x:e.x,y:e.y,autoOffset:!0})},null,8,wr)):t(``,!0)],64)),i.$slots[`free-node-label`]?(o(),S(`g`,Tr,[d(i.$slots,`free-node-label`,f({ref_for:!0},{node:e,layoutData:r(K),orientation:W.value}),void 0,!0)])):t(``,!0)],40,Sr))),128))]),d(i.$slots,`svg`,{svg:{drawingArea:r(J),data:r(K),orientation:W.value,isPrintingImg:r(st)|r(ct)|A.value,isPrintingSvg:Ue.value}},void 0,!0)],14,ar)):t(``,!0),i.$slots.watermark?(o(),S(`div`,Er,[d(i.$slots,`watermark`,y(s({isPrinting:r(st)||r(ct)||A.value||Ue.value})),void 0,!0)])):t(``,!0),u(te,{name:`fade`},{default:b(()=>[B.value?(o(),p(_,{key:0,to:Y.value?O.value:`body`},[C(`div`,{"data-cy-tooltip-midpoint":``,ref_key:`tooltipRef`,ref:Ke,class:`vue-ui-dag-tooltip`,style:c({...qe.value,maxWidth:N.value.style.chart.midpoints.tooltip.maxWidth,"--vue-data-ui-dag-tooltip-background":N.value.style.chart.midpoints.tooltip.backgroundColor,"--vue-data-ui-dag-tooltip-color":N.value.style.chart.midpoints.tooltip.color}),"data-position":Je.value},[d(i.$slots,`tooltip-midpoint`,y(s({edge:I.value,layoutData:r(K)})),()=>[I.value?(o(),S(`div`,Or,l(yt(I.value.from)?.label??I.value.from)+`  `+l(yt(I.value.to)?.label??I.value.to),1)):t(``,!0)],!0)],12,Dr)],8,[`to`])):t(``,!0)]),_:3}),u(te,{name:`fade`},{default:b(()=>[L.value?(o(),p(_,{key:0,to:Y.value?O.value:`body`},[C(`div`,{"data-cy-tooltip-node":``,ref_key:`nodeTooltipRef`,ref:Xe,class:`vue-ui-dag-node-tooltip`,style:c({maxWidth:N.value.style.chart.nodes.tooltip.maxWidth,left:Ze.value.left,top:Ze.value.top,"--vue-data-ui-dag-node-tooltip-background":N.value.style.chart.nodes.tooltip.backgroundColor,"--vue-data-ui-dag-node-tooltip-color":N.value.style.chart.nodes.tooltip.color}),"data-position":Qe.value},[d(i.$slots,`tooltip-node`,y(s({node:z.value,layoutData:r(K)})),()=>[z.value?(o(),S(`div`,Ar,l(z.value.label),1)):t(``,!0)],!0)],12,kr)],8,[`to`])):t(``,!0)]),_:3}),N.value.style.chart.controls.position===`bottom`&&!r(nt)&&N.value.style.chart.controls.show?(o(),p(Ae,{key:7,ref_key:`zoomControls`,ref:Re,config:N.value,scale:r(Ct),isFullscreen:Y.value,withDirection:``,onZoomIn:At,onZoomOut:jt,onResetZoom:a[1]||=()=>r(xt)(!0),onSwitchDirection:Nt},null,8,[`config`,`scale`,`isFullscreen`])):t(``,!0),i.$slots.source?(o(),S(`div`,{key:8,ref_key:`source`,ref:Le,dir:`auto`},[d(i.$slots,`source`,{},void 0,!0)],512)):t(``,!0),d(i.$slots,`skeleton`,{},()=>[r(nt)?(o(),p(ye,{key:0})):t(``,!0)],!0)],46,rr))}},[[`__scopeId`,`data-v-7e8a0845`]]),Nr=Object.freeze(Object.defineProperty({__proto__:null,default:Mr},Symbol.toStringTag,{value:`Module`}));export{nr as a,Nr as b};