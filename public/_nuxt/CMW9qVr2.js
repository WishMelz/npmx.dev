const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CBD7ngdF.js","./BLt7TXlb.js","./CbFHGlY2.js","./Cf-0F-2c.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,Dt as n,G as r,J as i,M as a,Mt as o,Nt as s,O as ee,Q as c,S as te,Tt as ne,Z as l,b as u,it as re,jt as ie,k as ae,lt as d,m as f,ot as p,w as m,x as h,yt as g}from"./BLt7TXlb.js";import{t as _}from"./YZkb6lnT.js";import{F as oe,Mt as v,Nt as y,P as b,V as se,_t as x,bt as ce,dt as le,h as ue,it as S,m as de,rt as C,vt as fe,wt as pe,y as me}from"./Cf-0F-2c.js";import{n as w,t as he}from"./8DvoFuCx.js";import{t as ge}from"./CWNsAIol.js";import{n as _e,t as ve}from"./D4ushAer.js";import{t as ye}from"./BwaPX4qL.js";import{t as be}from"./CB2Wh4RA.js";import{t as xe}from"./BEpjx3T_.js";var T={style:{legend:{show:!1}}},E={style:{backgroundColor:`#1A1A1A`,bar:{gradient:{underlayerColor:`#FFFFFF`}},legend:{show:!1,name:{color:`#CCCCCC`},value:{color:`#CCCCCC`},percentage:{color:`#CCCCCC`},selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#3A3A3A`}}},D={style:{backgroundColor:`#1A1A1A`,bar:{gradient:{underlayerColor:`#FFFFFF`}},legend:{name:{color:`#CCCCCC`},value:{color:`#CCCCCC`},percentage:{color:`#CCCCCC`},selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#5A5A5A`}}},O={style:{backgroundColor:`#FFF8E1`,bar:{gradient:{underlayerColor:`#FFF8E1`}},legend:{name:{color:`#424242`},value:{color:`#424242`},percentage:{color:`#424242`},selectAllToggle:{backgroundColor:`#5D4037`,color:`#FFF8E1`}},title:{color:`#424242`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#FFECB3`,backgroundOpacity:30,color:`#424242`,borderColor:`#FF8A65`}}},k={style:{backgroundColor:`#1E1E1E`,bar:{gradient:{underlayerColor:`#FFF8E1`}},legend:{name:{color:`#BDBDBD`},value:{color:`#BDBDBD`},percentage:{color:`#BDBDBD`},selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#BDBDBD`}},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}},tooltip:{backgroundColor:`#1E1E1E`,backgroundOpacity:30,color:`#FFF8E1`,borderColor:`#FF8A65`}}},A={style:{backgroundColor:`#1A1A1A`,bar:{gradient:{underlayerColor:`#1A1A1A`}},legend:{name:{color:`#99AA99`},value:{color:`#AACCAA`},percentage:{color:`#99CC99`},selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#99AA99`}},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#2A2F2A`,color:`#AACCAA`,borderColor:`#66CC66`}}},j={style:{backgroundColor:`#fbfafa`,bar:{gradient:{underlayerColor:`#fbfafa`}},legend:{name:{color:`#8A9892`},value:{color:`#A0AC94`},percentage:{color:`#8A9892`},selectAllToggle:{backgroundColor:`#E0CFC3`,color:`#8F837A`}},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#fbfafa`,color:`#8A9892`}}},M={style:{backgroundColor:`#f6f6fb`,bar:{gradient:{underlayerColor:`#f6f6fb`}},legend:{name:{color:`#50606C`},value:{color:`#8A9892`},percentage:{color:`#61747E`},selectAllToggle:{backgroundColor:`#50606C`,color:`#f6f6fb`}},title:{color:`#50606C`,subtitle:{color:`#718890`}},tooltip:{backgroundColor:`#f6f6fb`,color:`#50606C`}}},Se={default:{},minimal:T,minimalDark:E,dark:D,celebration:O,celebrationNight:k,hack:A,zen:j,concrete:M},N=Object.freeze(Object.defineProperty({__proto__:null,celebration:O,celebrationNight:k,concrete:M,dark:D,default:Se,hack:A,minimal:T,minimalDark:E,zen:j},Symbol.toStringTag,{value:`Module`})),Ce=[`xmlns`,`viewBox`],we=[`id`],Te=[`stop-color`],Ee=[`stop-color`],De=[`stop-color`],Oe={id:`stackPill`,clipPathUnits:`objectBoundingBox`},ke=[`fill`],Ae={key:0,"clip-path":`url(#stackPill)`},je=[`x`,`width`,`height`,`fill`],Me=[`x`,`width`,`height`,`fill`,`stroke`],Ne=[`x`,`width`,`height`,`onClick`,`onMouseenter`,`onMouseleave`],Pe=[`width`,`height`,`rx`],Fe=[`onClick`],Ie={style:{display:`flex`,"flex-direction":`row`,"align-items":`center`,gap:`4px`,"justify-content":`center`}},Le=[`height`,`width`],Re=[`id`],ze=[`stop-color`],Be=[`stop-color`],Ve=[`fill`],He={key:2,ref:`source`,dir:`auto`},P=ge({__name:`vue-ui-sparkstackbar`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:[`selectDatapoint`],setup(ge,{expose:T,emit:E}){let D=ae(()=>_(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([0,1]),import.meta.url)),O=ae(()=>_(()=>import(`./CbFHGlY2.js`),__vite__mapDeps([2,1,3]),import.meta.url)),{vue_ui_sparkstackbar:k}=he(),{isThemeValid:A,warnInvalidTheme:j}=ye(),M=ge,N=re();r(()=>{N[`chart-background`]&&console.warn(`VueUiSparkStackbar does not support the #chart-background slot.`)});let P=g(null),F=g(y()),I=g(!1),L=g(``),R=g(V()),Ue=u(()=>R.value.useCursorPointer),We=u(()=>b({defaultConfig:{style:{backgroundColor:`#99999930`,animation:{show:!1},bar:{gradient:{inderlayerColor:`#6A6A6A`}},title:{backgroundColor:`transparent`}}},userConfig:R.value.skeletonConfig??{}})),{loading:z,FINAL_DATASET:B}=ve({...ne(M),FINAL_CONFIG:R,prepareConfig:V,skeletonDataset:M.config?.skeletonDataset??[{name:`_`,value:8,color:`#808080`},{name:`_`,value:5,color:`#ADADAD`},{name:`_`,value:3,color:`#DBDBDB`}],skeletonConfig:b({defaultConfig:R.value,userConfig:We.value})}),{svgRef:Ge}=xe({config:R.value.style.title});function V(){let e=w({userConfig:M.config,defaultConfig:k}),t=e.theme;if(!t)return e;if(!A.value(e))return j(e),e;let n=w({userConfig:Se[t]||M.config,defaultConfig:e}),r=w({userConfig:M.config,defaultConfig:n});return{...r,customPalette:r.customPalette.length?r.customPalette:le[t]||S}}p(()=>M.config,e=>{R.value=V(),Je()},{deep:!0}),p(()=>B.value,e=>{U.value=B.value.map((e,t)=>({...e,color:e.color?x(e.color):H.value[t]||S[t]||S[t%S.length]})),Ke()},{deep:!0});let H=u(()=>me(R.value.customPalette)),U=g(B.value.map((e,t)=>({...e,value:R.value.style.animation.show?0:e.value||0,color:e.color?x(e.color):H.value[t]||S[t]||S[t%S.length]}))),W=g(!0);function Ke(){if(!R.value.style.animation.show){W.value=!1;return}let e=R.value.style.animation.animationFrames,t=B.value.map(e=>e.value||0),n=t.map(t=>t/e),r=t.reduce((e,t)=>e+t,0),i=0;W.value=!0,U.value=B.value.map((e,t)=>({...e,value:0,color:e.color?x(e.color):H.value[t]||S[t]||S[t%S.length]}));function a(){i+=r/e,i<r?(U.value=U.value.map((e,r)=>({...e,value:Math.min(e.value+n[r],t[r]),color:e.color?x(e.color):H.value[r]||S[r]||S[r%S.length]})),requestAnimationFrame(a)):(W.value=!1,U.value=B.value.map((e,n)=>({...e,value:t[n],color:e.color?x(e.color):H.value[n]||S[n]||S[n%S.length],id:y()})))}a()}r(()=>{Je()});let qe=u(()=>R.value.debug);function Je(){se(M.dataset)?ue({componentName:`VueUiSparkStackbar`,type:`dataset`,debug:qe.value}):M.dataset.forEach((e,t)=>{de({datasetObject:e,requiredAttributes:[`name`,`value`]}).forEach(e=>{ue({componentName:`VueUiSparkStackbar`,type:`datasetSerieAttribute`,property:e,index:t,debug:qe.value})})}),Ke()}let G=g({width:500,height:16}),K=g([]),Ye=u(()=>B.value.map(e=>e.value||0).filter((e,t)=>!K.value.includes(t)).reduce((e,t)=>e+t,0)),q=u(()=>U.value.map((e,t)=>{let n=e.value||0,r=n/Ye.value,i=isNaN(r)?0:r,a=i*G.value.width;return{...e,color:x(B.value[t]?.color?B.value[t]?.color:H.value[t]||S[t]||S[t%S.length]),value:n,proportion:i,width:a,seriesIndex:t,proportionLabel:v({v:i*100,s:`%`,r:R.value.style.legend.percentage.rounding})}})),J=u(()=>q.value.filter((e,t)=>!K.value.includes(t)));function Xe(){K.value.length?K.value=[]:q.value.forEach((e,t)=>{K.value.push(t)})}function Y(e){K.value.includes(e)?K.value=K.value.filter(t=>t!==e):K.value.length<U.value.length-1&&K.value.push(e)}function Ze(e){return q.value.length?q.value.find(t=>t.name===e)||(R.value.debug&&console.warn(`VueUiSparkStackbar - Series name not found "${e}"`),null):(R.value.debug&&console.warn(`VueUiSparkStackbar - There are no series to show.`),null)}function Qe(e){let t=Ze(e);t!==null&&K.value.includes(t.id)&&Y(t.seriesIndex)}function $e(e){let t=Ze(e);t!==null&&(K.value.includes(t.id)||Y(t.seriesIndex))}let X=u(()=>{let e=0,t=[];for(let n=0;n<J.value.length;n+=1)t.push({...J.value[n],start:e}),e+=J.value[n].width;return t}),et=E;function tt(e,t,n=!1){et(`selectDatapoint`,{datapoint:e,index:t}),R.value.events.datapointClick&&!n&&R.value.events.datapointClick({datapoint:e,seriesIndex:e.seriesIndex})}let Z=g(null),Q=g(!1),$=g(null);function nt({datapoint:e,seriesIndex:t}){I.value=!1,$.value=null,R.value.events.datapointLeave&&R.value.events.datapointLeave({datapoint:e,seriesIndex:e.seriesIndex})}function rt({datapoint:e,seriesIndex:t}){if(R.value.events.datapointEnter&&R.value.events.datapointEnter({datapoint:e,seriesIndex:e.seriesIndex}),!R.value.style.tooltip.show)return;Z.value={datapoint:e,seriesIndex:t,config:R.value,series:q.value},I.value=!0,$.value=t;let n=R.value.style.tooltip.customFormat;if(oe(n))try{let t=n({seriesIndex:e.seriesIndex,datapoint:e,series:q.value,config:R.value});typeof t==`string`&&(L.value=t,Q.value=!0)}catch{console.warn(`Custom format cannot be applied.`),Q.value=!1}if(!Q.value){let n=``;n+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${R.value.style.tooltip.borderColor};padding-bottom:6px;margin-bottom:3px;">${e.name}</div>`,n+=`<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 12 12" height="14" width="14"><circle cx="6" cy="6" r="6" stroke="none" fill="${e.color}"/></svg>`,n+=`<b>${e.proportionLabel}</b>`,n+=`<span>(${pe(R.value.style.legend.value.formatter,e.value,v({p:R.value.style.legend.value.prefix,v:e.value,s:R.value.style.legend.value.suffix,r:R.value.style.legend.value.rounding}),{datapoint:e,seriesIndex:t})})</span>`,L.value=`<div>${n}</div>`}}return T({hideSeries:$e,showSeries:Qe}),(r,ne)=>(i(),m(`div`,{class:`vue-data-ui-component vue-ui-spark-stackbar`,ref_key:`sparkstackbarChart`,ref:P,style:o(`width:100%; background:${R.value.style.backgroundColor}`)},[R.value.style.title.text?(i(),m(`div`,{key:0,style:o(`width:calc(100% - 12px);background:transparent;margin:0 auto;margin:${R.value.style.title.margin};padding: 0 6px;text-align:${R.value.style.title.textAlign}`)},[h(`div`,{class:`atom-title`,style:o(`font-size:${R.value.style.title.fontSize}px;color:${R.value.style.title.color};font-weight:${R.value.style.title.bold?`bold`:`normal`}`)},s(R.value.style.title.text),5),R.value.style.title.subtitle.text?(i(),m(`div`,{key:0,class:`atom-subtitle`,style:o(`font-size:${R.value.style.title.subtitle.fontSize}px;color:${R.value.style.title.subtitle.color};font-weight:${R.value.style.title.subtitle.bold?`bold`:`normal`}`)},s(R.value.style.title.subtitle.text),5)):t(``,!0)],4)):t(``,!0),(i(),m(`svg`,{ref_key:`svgRef`,ref:Ge,xmlns:n(ce),width:`100%`,viewBox:`0 0 ${G.value.width} ${G.value.height}`},[ee(n(D)),h(`defs`,null,[(i(!0),m(f,null,l(X.value,(e,t)=>(i(),m(`linearGradient`,{key:`stack_gradient_${t}`,gradientTransform:`rotate(90)`,id:`stack_gradient_${t}_${F.value}`},[h(`stop`,{offset:`0%`,"stop-color":e.color},null,8,Te),h(`stop`,{offset:`50%`,"stop-color":n(fe)(n(C)(e.color,.05),100-R.value.style.bar.gradient.intensity)},null,8,Ee),h(`stop`,{offset:`100%`,"stop-color":e.color},null,8,De)],8,we))),128)),h(`clipPath`,Oe,[h(`rect`,{x:`0.005`,y:`-2`,width:`0.99`,height:`5`,rx:`3`,ry:`3`,fill:R.value.style.backgroundColor},null,8,ke)])]),Ye.value>0?(i(),m(`g`,Ae,[(i(!0),m(f,null,l(X.value,(t,r)=>(i(),m(`rect`,{key:`stack_underlayer_${r}`,x:t.start,y:0,width:t.width,height:G.value.height,fill:R.value.style.bar.gradient.underlayerColor,class:e({animated:!W.value&&!n(z)}),style:o({opacity:$.value!==null&&R.value.style.tooltip.show?$.value===r?1:.5:1})},null,14,je))),128)),(i(!0),m(f,null,l(X.value,(t,r)=>(i(),m(`rect`,{key:`stack_${r}`,x:t.start,y:0,width:t.width,height:G.value.height,fill:R.value.style.bar.gradient.show?`url(#stack_gradient_${r}_${F.value})`:t.color,stroke:R.value.style.backgroundColor,"stroke-linecap":`round`,class:e({animated:!W.value&&!n(z)}),style:o({opacity:$.value!==null&&R.value.style.tooltip.show?$.value===r?1:.5:1})},null,14,Me))),128)),(i(!0),m(f,null,l(X.value,(t,r)=>(i(),m(`rect`,{key:`stack_trap_${r}`,x:t.start,y:0,width:t.width,height:G.value.height,fill:`transparent`,stroke:`none`,class:e({animated:!W.value&&!n(z)}),onClick:()=>tt(t,r),onMouseenter:()=>rt({datapoint:t,seriesIndex:r}),onMouseleave:e=>nt({datapoint:t,seriesIndex:r})},null,42,Ne))),128))])):(i(),m(`rect`,{key:1,x:2,y:1,width:G.value.width-4,height:G.value.height-2,stroke:`#CCCCCC`,"stroke-width":`2`,fill:`transparent`,rx:(G.value.height-4)/2},null,8,Pe))],8,Ce)),R.value.style.legend.show?(i(),m(`div`,{key:1,style:o(`background:transparent;margin:0 auto;margin:${R.value.style.legend.margin};justify-content:${R.value.style.legend.textAlign===`left`?`flex-start`:R.value.style.legend.textAlign===`right`?`flex-end`:`center`}`),class:`vue-ui-sparkstackbar-legend`},[R.value.style.legend.selectAllToggle.show&&q.value.length>2&&!n(z)?(i(),te(be,{key:0,backgroundColor:R.value.style.legend.selectAllToggle.backgroundColor,color:R.value.style.legend.selectAllToggle.color,fontSize:R.value.style.legend.fontSize,checked:K.value.length>0,isCursorPointer:Ue.value,onToggle:Xe},null,8,[`backgroundColor`,`color`,`fontSize`,`checked`,`isCursorPointer`])):t(``,!0),(i(!0),m(f,null,l(q.value,(r,a)=>(i(),m(`div`,{style:o(`font-size:${R.value.style.legend.fontSize}px;cursor:${Ue.value?`pointer`:`default`}`),class:e({"vue-ui-sparkstackbar-legend-item":!0,"vue-ui-sparkstackbar-legend-item-unselected":K.value.includes(a)}),onClick:e=>{Y(a),tt(r,a,!0)}},[h(`div`,Ie,[(i(),m(`svg`,{height:`${R.value.style.legend.fontSize}px`,width:`${R.value.style.legend.fontSize}px`,viewBox:`0 0 10 10`},[h(`defs`,null,[h(`radialGradient`,{id:`legend_grad_${a}-${F.value}`},[h(`stop`,{offset:`0%`,"stop-color":n(z)?`#FFFFFF`:n(fe)(n(C)(r.color,.05),100-R.value.style.bar.gradient.intensity)},null,8,ze),h(`stop`,{offset:`100%`,"stop-color":r.color},null,8,Be)],8,Re)]),h(`circle`,{cx:5,cy:5,r:5,fill:R.value.style.bar.gradient.show?`url(#legend_grad_${a}-${F.value})`:r.color},null,8,Ve)],8,Le)),n(z)?t(``,!0):(i(),m(f,{key:0},[h(`span`,{style:o(`color:${R.value.style.legend.name.color}; font-weight:${R.value.style.legend.name.bold?`bold`:`normal`}`)},s(r.name),5),W.value?t(``,!0):(i(),m(f,{key:0},[R.value.style.legend.percentage.show?(i(),m(`span`,{key:0,style:o(`font-weight:${R.value.style.legend.percentage.bold?`bold`:`normal`};color:${R.value.style.legend.percentage.color}`)},s(K.value.includes(a)?` - `:r.proportionLabel),5)):t(``,!0),R.value.style.legend.value.show?(i(),m(`span`,{key:1,style:o(`font-weight:${R.value.style.legend.value.bold?`bold`:`normal`};color:${R.value.style.legend.value.color}`)},` (`+s(n(pe)(R.value.style.legend.value.formatter,r.value,n(v)({p:R.value.style.legend.value.prefix,v:r.value,s:R.value.style.legend.value.suffix,r:R.value.style.legend.value.rounding}),{datapoint:r,seriesIndex:a}))+`) `,5)):t(``,!0)],64))],64))])],14,Fe))),256))],4)):t(``,!0),ee(n(O),{teleportTo:R.value.style.tooltip.teleportTo,show:I.value&&R.value.style.tooltip.show,parent:P.value,backgroundColor:R.value.style.tooltip.backgroundColor,color:R.value.style.tooltip.color,fontSize:R.value.style.tooltip.fontSize,borderRadius:R.value.style.tooltip.borderRadius,borderColor:R.value.style.tooltip.borderColor,borderWidth:R.value.style.tooltip.borderWidth,backgroundOpacity:R.value.style.tooltip.backgroundOpacity,position:R.value.style.tooltip.position,content:L.value,isCustom:Q.value,offsetY:-124+R.value.style.tooltip.offsetY,blockShiftY:!0,smooth:R.value.style.tooltip.smooth,backdropFilter:R.value.style.tooltip.backdropFilter,smoothForce:R.value.style.tooltip.smoothForce,smoothSnapThreshold:R.value.style.tooltip.smoothSnapThreshold},{"tooltip-before":d(()=>[c(r.$slots,`tooltip-before`,ie(a({...Z.value})),void 0,!0)]),"tooltip-after":d(()=>[c(r.$slots,`tooltip-after`,ie(a({...Z.value})),void 0,!0)]),_:3},8,[`teleportTo`,`show`,`parent`,`backgroundColor`,`color`,`fontSize`,`borderRadius`,`borderColor`,`borderWidth`,`backgroundOpacity`,`position`,`content`,`isCustom`,`offsetY`,`smooth`,`backdropFilter`,`smoothForce`,`smoothSnapThreshold`]),r.$slots.source?(i(),m(`div`,He,[c(r.$slots,`source`,{},void 0,!0)],512)):t(``,!0),c(r.$slots,`skeleton`,{},()=>[n(z)?(i(),te(_e,{key:0})):t(``,!0)],!0)],4))}},[[`__scopeId`,`data-v-2d316e9c`]]),F=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:`Module`}));export{N as a,F as b};