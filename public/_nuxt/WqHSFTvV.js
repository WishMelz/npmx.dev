const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CbFHGlY2.js","./BLt7TXlb.js","./Cf-0F-2c.js","./B9jcbJ_P.js","./xh7dz5-d.js","./CWNsAIol.js","./ByvxprxI.js","./CRSLCJ2m.js","./8DvoFuCx.js","./CH8pva4p.js","./C0O4I1kb.js","./DHC76net.js","./BDmUravP.js","./D7-tWLRc.js","./DuIAB7Tu.js","./DdyLBgN8.js","./C66xQW7K.js","./CBD7ngdF.js","./BIodG7vT.js"])))=>i.map(i=>d[i]);
import{At as e,C as t,D as n,Dt as r,G as i,H as a,J as o,M as s,Mt as c,Nt as l,O as ee,Q as u,R as te,S as d,St as ne,T as re,Tt as ie,Z as f,_ as ae,b as p,et as oe,jt as m,k as h,lt as g,m as _,ot as v,w as y,x as b,yt as x,z as S}from"./BLt7TXlb.js";import{t as C}from"./YZkb6lnT.js";import{F as se,Mt as w,N as ce,Nt as le,P as ue,V as de,_t as fe,a as pe,bt as me,dt as he,h as ge,it as _e,pt as ve,wt as ye,y as be}from"./Cf-0F-2c.js";import{n as xe,t as Se}from"./8DvoFuCx.js";import{t as Ce}from"./Cme7ewGR.js";import{t as we}from"./CWNsAIol.js";import{n as Te,t as Ee}from"./D4ushAer.js";import{t as De}from"./CLl0-3D6.js";import{t as Oe}from"./BwaPX4qL.js";import{t as ke}from"./BDmUravP.js";import{t as Ae}from"./BIZzPpPz.js";import{a as je,n as Me}from"./D4v1zV2y.js";import{t as Ne}from"./CB2Wh4RA.js";import{t as Pe}from"./BEpjx3T_.js";import{t as Fe}from"./DMqKe8aR.js";import{t as Ie}from"./CHaYztGl.js";import{t as Le}from"./CMjlbb0z.js";import{t as Re}from"./QQhzZQ_8.js";var ze={userOptions:{show:!1},style:{chart:{useGradient:!1,legend:{show:!1}}}},Be={userOptions:{show:!1},style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,useGradient:!1,layout:{gutter:{color:`#2A2A2A`},labels:{color:`#CCCCCC`}},legend:{show:!1,backgroundColor:`#1A1A1A`,color:`#CCCCCC`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#3A3A3A`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},Ve={style:{chart:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,layout:{gutter:{color:`#4A4A4A`},labels:{color:`#CCCCCC`}},legend:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#CCCCCC`}},title:{color:`#CCCCCC`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#1A1A1A`,backgroundOpacity:70,color:`#CCCCCC`,borderColor:`#5A5A5A`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`},td:{backgroundColor:`#1A1A1A`,color:`#CCCCCC`}}},He={style:{chart:{backgroundColor:`#FFF8E1`,color:`#424242`,useGradient:!1,layout:{gutter:{color:`#5D403730`},labels:{color:`#424242`}},legend:{backgroundColor:`#FFF8E1`,color:`#424242`,selectAllToggle:{backgroundColor:`#5D4037`,color:`#FFF8E1`}},title:{color:`#424242`,subtitle:{color:`#757575`}},tooltip:{backgroundColor:`#FFECB3`,backgroundOpacity:30,color:`#424242`,borderColor:`#FF8A65`}}},table:{th:{backgroundColor:`#FFF8E1`,color:`#424242`},td:{backgroundColor:`#FFF8E1`,color:`#424242`}}},Ue={style:{chart:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,useGradient:!1,layout:{gutter:{color:`#5D403730`},labels:{color:`#BDBDBD`}},legend:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#BDBDBD`}},title:{color:`#FFF8E1`,subtitle:{color:`#BDBDBD`}},tooltip:{backgroundColor:`#1E1E1E`,backgroundOpacity:30,color:`#FFF8E1`,borderColor:`#FF8A65`}}},table:{th:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`},td:{backgroundColor:`#1E1E1E`,color:`#BDBDBD`}}},We={style:{chart:{backgroundColor:`#1A1A1A`,useGradient:!1,color:`#99AA99`,layout:{gutter:{color:`#2A2A2A`},labels:{color:`#99CC99`}},legend:{backgroundColor:`#1A1A1A`,color:`#99AA99`,selectAllToggle:{backgroundColor:`#3A3A3A`,color:`#99AA99`}},title:{color:`#66CC66`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#2A2F2A`,color:`#AACCAA`,borderColor:`#66CC66`}}},table:{th:{backgroundColor:`#1A1A1A`,color:`#99AA99`},td:{backgroundColor:`#1A1A1A`,color:`#AACCAA`}}},Ge={style:{chart:{useGradient:!1,backgroundColor:`#fbfafa`,color:`#8A9892`,layout:{gutter:{color:`#F7EDE2`},labels:{color:`#A0AC94`}},legend:{backgroundColor:`#fbfafa`,color:`#99AA99`,selectAllToggle:{backgroundColor:`#E0CFC3`,color:`#8F837A`}},title:{color:`#8A9892`,subtitle:{color:`#99AA99`}},tooltip:{backgroundColor:`#fbfafa`,color:`#8A9892`}}},table:{th:{backgroundColor:`#fbfafa`,color:`#8F837A`},td:{backgroundColor:`#fbfafa`,color:`#8F837A`}}},Ke={style:{chart:{useGradient:!1,backgroundColor:`#f6f6fb`,color:`#50606C`,layout:{gutter:{color:`#DDDDDB`},labels:{color:`#61747E`}},legend:{backgroundColor:`#f6f6fb`,color:`#61747E`,selectAllToggle:{backgroundColor:`#50606C`,color:`#f6f6fb`}},title:{color:`#50606C`,subtitle:{color:`#718890`}},tooltip:{backgroundColor:`#f6f6fb`,color:`#50606C`}}},table:{th:{backgroundColor:`#f6f6fb`,color:`#50606C`},td:{backgroundColor:`#f6f6fb`,color:`#50606C`}}},qe={default:{},minimal:ze,minimalDark:Be,dark:Ve,celebration:He,celebrationNight:Ue,hack:We,zen:Ge,concrete:Ke},Je=Object.freeze(Object.defineProperty({__proto__:null,celebration:He,celebrationNight:Ue,concrete:Ke,dark:Ve,default:qe,hack:We,minimal:ze,minimalDark:Be,zen:Ge},Symbol.toStringTag,{value:`Module`})),Ye=[`id`],Xe=[`id`],Ze=[`xmlns`,`viewBox`],Qe=[`width`,`height`],$e=[`cx`,`cy`,`r`,`stroke`,`stroke-width`,`stroke-dasharray`,`stroke-dashoffset`],et=[`cx`,`cy`,`r`,`stroke`,`stroke-width`,`stroke-dasharray`,`stroke-dashoffset`],tt=[`id`],nt=[`stdDeviation`],rt=[`filter`],it=[`cx`,`cy`,`r`,`stroke-width`,`stroke-dasharray`,`stroke-dashoffset`],at=[`cx`,`cy`,`r`,`stroke-width`,`stroke-dasharray`,`stroke-dashoffset`,`onMouseenter`,`onMouseleave`,`onClick`],ot={key:2},st=[`onMouseenter`,`onMouseleave`,`onClick`],ct=[`x`,`y`,`font-size`,`fill`,`font-weight`],lt={key:4,class:`vue-data-ui-watermark`},ut=[`id`],dt=[`onClick`],ft=[`innerHTML`],pt=we({__name:`vue-ui-onion`,props:{config:{type:Object,default(){return{}}},dataset:{type:Array,default(){return[]}}},emits:[`selectLegend`,`copyAlt`],setup(we,{expose:ze,emit:Be}){let Ve=h(()=>C(()=>import(`./CbFHGlY2.js`),__vite__mapDeps([0,1,2]),import.meta.url)),He=h(()=>C(()=>import(`./B9jcbJ_P.js`),__vite__mapDeps([3,4,1,5,2]),import.meta.url)),Ue=h(()=>C(()=>import(`./ByvxprxI.js`),__vite__mapDeps([6,7,1,4,5,2,8]),import.meta.url)),We=h(()=>C(()=>import(`./CH8pva4p.js`),__vite__mapDeps([9,1,4,5,2,10]),import.meta.url)),Ge=h(()=>C(()=>import(`./DHC76net.js`),__vite__mapDeps([11,1,4,5,2,12,13,14]),import.meta.url)),Ke=h(()=>C(()=>import(`./DdyLBgN8.js`),__vite__mapDeps([15,1,4,5,2,16,14]),import.meta.url)),Je=h(()=>C(()=>import(`./CBD7ngdF.js`),__vite__mapDeps([17,1]),import.meta.url)),pt=h(()=>C(()=>import(`./BIodG7vT.js`),__vite__mapDeps([18,1,4,5,2]),import.meta.url)),{vue_ui_onion:mt}=Se(),{isThemeValid:ht,warnInvalidTheme:gt}=Oe(),T=we,_t=p(()=>!!T.dataset&&T.dataset.length),E=x(le()),vt=x(null),yt=x(0),bt=x(!1),xt=x(``),D=x([]),O=x(null),St=x(null),Ct=x(null),wt=x(null),Tt=x(null),Et=x(0),Dt=x(0),Ot=x(0),k=x(!1),kt=x(!1),A=x(null),j=x(!1),M=x(!1),N=x(It()),P=p(()=>N.value.userOptions.useCursorPointer),At=p(()=>ue({defaultConfig:{userOptions:{show:!1},table:{show:!1},style:{chart:{backgroundColor:`#99999930`,layout:{gutter:{color:`#99999950`},labels:{show:!1}},legend:{backgroundColor:`transparent`}}}},userConfig:N.value.skeletonConfig??{}})),{loading:F,FINAL_DATASET:jt,manualLoading:Mt}=Ee({...ie(T),FINAL_CONFIG:N,prepareConfig:It,callback:()=>{Promise.resolve().then(async()=>{await S(),Qt()})},skeletonDataset:T.config?.skeletonDataset??[{name:`_`,percentage:50,value:1,color:`#DBDBDB`},{name:`_`,percentage:50,value:1,color:`#C4C4C4`},{name:`_`,percentage:50,value:1,color:`#ADADAD`},{name:`_`,percentage:50,value:1,color:`#969696`}],skeletonConfig:ue({defaultConfig:N.value,userConfig:At.value})}),{userOptionsVisible:Nt,setUserOptionsVisibility:Pt,keepUserOptionState:Ft}=Fe({config:N.value}),{svgRef:I}=Pe({config:N.value.style.chart.title});function It(){let e=xe({userConfig:T.config,defaultConfig:mt}),t=e.theme;if(!t)return e;if(!ht.value(e))return gt(e),e;let n=xe({userConfig:qe[t]||T.config,defaultConfig:e}),r=xe({userConfig:T.config,defaultConfig:n});return{...r,customPalette:r.customPalette.length?r.customPalette:he[t]||_e}}v(()=>T.config,e=>{F.value||(N.value=It()),Nt.value=!N.value.userOptions.showOnChartHover,qt(),Et.value+=1,Dt.value+=1,Ot.value+=1,L.value.showTable=N.value.table.show,L.value.showTooltip=N.value.style.chart.tooltip.show},{deep:!0});let{isPrinting:Lt,isImaging:Rt,generatePdf:zt,generateImage:Bt}=Ce({elementId:`vue-ui-onion_${E.value}`,fileName:N.value.style.chart.title.text||`vue-ui-onion`,options:N.value.userOptions.print}),Vt=p(()=>N.value.userOptions.show&&!N.value.style.chart.title.text),Ht=p(()=>be(N.value.customPalette)),L=x({showTable:N.value.table.show,showTooltip:N.value.style.chart.tooltip.show});v(N,()=>{L.value={showTable:N.value.table.show,showTooltip:N.value.style.chart.tooltip.show}},{immediate:!0});let R=x({height:512,width:512,padding:{top:64,left:64,right:64,bottom:64},minRadius:64}),z=ne(null),B=ne(null);i(()=>{kt.value=!0,qt()});let Ut=p({get:()=>N.value.style.chart.layout.labels.fontSize,set:e=>e}),{autoSizeLabels:Wt}=Re({svgRef:I,fontSize:N.value.style.chart.layout.labels.fontSize,minFontSize:N.value.style.chart.layout.labels.minFontSize,sizeRef:Ut,labelClass:`.vue-ui-onion-label`}),Gt=p(()=>N.value.debug),Kt=null;function qt(){if(de(T.dataset)&&(ge({componentName:`VueUiOnion`,type:`dataset`,debug:Gt.value}),Mt.value=!0),de(T.dataset)||(Mt.value=N.value.loading),N.value.responsive){let e=Me(()=>{Kt&&clearTimeout(Kt),k.value=!0;let{width:e,height:t}=je({chart:O.value,title:N.value.style.chart.title.text?St.value:null,legend:N.value.style.chart.legend.show?Ct.value:null,source:wt.value,noTitle:Tt.value});t-=12,requestAnimationFrame(async()=>{R.value.width=e,R.value.height=t,R.value.padding.top=Math.max(e,t)*.125,R.value.padding.right=Math.max(e,t)*.125,R.value.padding.bottom=Math.max(e,t)*.125,R.value.padding.left=Math.max(e,t)*.125,R.value.minRadius=Math.min(e,t)*.125,Kt=setTimeout(()=>{k.value=!1,Wt()},0)})});z.value&&(B.value&&z.value.unobserve(B.value),z.value.disconnect()),z.value=new ResizeObserver(e),B.value=O.value.parentNode,z.value.observe(B.value)}requestAnimationFrame(Wt)}a(()=>{z.value&&(B.value&&z.value.unobserve(B.value),z.value.disconnect())});let V=p(()=>({top:R.value.padding.top,left:R.value.padding.left,right:R.value.width-R.value.padding.right,bottom:R.value.height-R.value.padding.bottom,centerX:R.value.width/2,centerY:R.value.height/2,width:R.value.width-R.value.padding.right-R.value.padding.left,height:R.value.height-R.value.padding.bottom-R.value.padding.top,minRadius:R.value.minRadius,maxRadius:Math.min(R.value.width,R.value.height)-R.value.padding.top*2})),H=p(()=>(jt.value.forEach((e,t)=>{[null,void 0].includes(e.name)&&ge({componentName:`VueUiOnion`,type:`datasetSerieAttribute`,property:`name`,index:t}),[void 0].includes(e.percentage)&&ge({componentName:`VueUiOnion`,type:`datasetSerieAttribute`,property:`percentage`,index:t})}),jt.value.map((e,t)=>{let n=`onion_serie_${t}_${E.value}`;return{...e,percentage:e.percentage||0,targetPercentage:e.percentage||0,color:fe(e.color)||Ht.value[t]||_e[t],id:n,shape:`circle`,opacity:D.value.includes(n)?.5:1,absoluteIndex:t,segregate:()=>q(n),isSegregated:D.value.includes(n)}}))),U=p(()=>H.value.map((e,t)=>{let n=N.value.style.chart.legend.showValue,r=N.value.style.chart.legend.showPercentage,i=pn({showVal:n,showPercentage:r,val:ye(N.value.style.chart.layout.labels.value.formatter,e.value,w({p:e.prefix||``,v:e.value,s:e.suffix||``,r:N.value.style.chart.legend.roundingValue})),percentage:w({v:e.percentage??0,s:`%`,r:N.value.style.chart.legend.roundingPercentage}),config:N.value.style.chart.legend});return{...e,display:`${e.name}${n||r?`: `:``}${i}`}})),W=x(H.value),Jt=p(()=>N.value.useStartAnimation),Yt=x(null),Xt=p(()=>Math.max(...H.value.map(e=>e.percentage))),Zt=x(!1);v(()=>H.value,Qt,{immediate:!0,deep:!0}),v(()=>T.dataset,e=>{Array.isArray(e)&&e.length>0&&(Mt.value=!1)},{deep:!0});function Qt(){if(Jt.value&&!Zt.value&&!F.value){let e=function(){t>=Xt.value?(cancelAnimationFrame(Yt.value),W.value=H.value,Zt.value=!0):(W.value=H.value.map(e=>({...e,percentage:t<e.targetPercentage?t:e.targetPercentage})),t+=1,requestAnimationFrame(e),Zt.value=!0)};W.value=H.value.map(e=>({...e,percentage:0}));let t=0;e()}else W.value=H.value}let $t=p(()=>({cy:`onion-div-legend`,backgroundColor:N.value.style.chart.legend.backgroundColor,color:N.value.style.chart.legend.color,fontSize:N.value.style.chart.legend.fontSize,paddingBottom:12,fontWeight:N.value.style.chart.legend.bold?`bold`:``})),en=p(()=>H.value.filter(e=>!D.value.includes(e.id)).length),G=p(()=>{let e=Math.min(V.value.width,V.value.height)/2/H.value.length;return{gutter:(e>N.value.style.chart.layout.maxThickness?N.value.style.chart.layout.maxThickness:e)*N.value.style.chart.layout.gutter.width,track:(e>N.value.style.chart.layout.maxThickness?N.value.style.chart.layout.maxThickness:e)*N.value.style.chart.layout.track.width}}),K=p(()=>W.value.filter(e=>!D.value.includes(e.id)).map((e,t)=>{let n=(V.value.maxRadius-G.value.track)/en.value/2*(1+t),r=V.value.centerY-n;return{percentage:e.percentage||0,...e,labelY:r,radius:n,path:tn(n,e.percentage||0)}}));function tn(e,t){let n=2*Math.PI*e,r=n*.75,i=`${r} ${n}`,a=r*(1-t/100);return{bgDashArray:`${r} ${n}`,bgDashOffset:0,dashArray:i,dashOffset:a,fullOffset:0,active:`
            M ${V.value.centerX},${V.value.centerY-e} 
            A ${e},${e} 0 1 1 
            ${V.value.centerX+e*Math.cos(Math.PI*3/4)},${V.value.centerY+e*Math.sin(Math.PI*3/4)}
        `.trim()}}let nn=Be;function rn(){D.value.length?D.value=[]:U.value.forEach(e=>{D.value.push(e.id)})}function q(e){if(D.value.includes(e))D.value=D.value.filter(t=>t!==e);else{if(D.value.length===H.value.length-1)return;D.value.push(e)}nn(`selectLegend`,K.value)}function an(e){return H.value.length?H.value.find(t=>t.name===e)||(N.value.debug&&console.warn(`VueUiOnion - Series name not found "${e}"`),null):(N.value.debug&&console.warn(`VueUiOnion - There are no series to show.`),null)}function on(e){let t=an(e);t!==null&&D.value.includes(t.id)&&q(t.id)}function sn(e){let t=an(e);t!==null&&(D.value.includes(t.id)||q(t.id))}function cn(){return K.value}let ln=p(()=>({head:[N.value.table.translations.serie,N.value.table.translations.percentage,N.value.table.translations.value],body:K.value.map(e=>[e.name,e.percentage,e.value])})),J=p(()=>{let e=ln.value.head;return{head:e,body:K.value.map(e=>[`<span style="color:${e.color}">â¬¤</span> ${e.name}`,`${Number(e.percentage??0).toFixed(N.value.table.td.roundingPercentage).toLocaleString()}%`,`${e.prefix||``}${[null,void 0,NaN,`NaN`].includes(e.value)?`-`:e.value.toFixed(N.value.table.td.roundingValue).toLocaleString()}${e.suffix||``}`]),config:{th:{backgroundColor:N.value.table.th.backgroundColor,color:N.value.table.th.color,outline:N.value.table.th.outline},td:{backgroundColor:N.value.table.td.backgroundColor,color:N.value.table.td.color,outline:N.value.table.td.outline},breakpoint:N.value.table.responsiveBreakpoint},colNames:e}});function Y(e=null){S(()=>{let t=[[N.value.style.chart.title.text],[N.value.style.chart.title.subtitle.text],[``]],n=ln.value.head,r=ln.value.body,i=pe(t.concat([n]).concat(r));e?e(i):ce({csvContent:i,title:N.value.style.chart.title.text||`vue-ui-onion`})})}let X=x(void 0),Z=x(!1);function un(e){Z.value=e,yt.value+=1}function dn({datapoint:e}){N.value.events.datapointClick&&N.value.events.datapointClick({datapoint:e,seriesIndex:e.absoluteIndex})}function fn({datapoint:e}){X.value=void 0,bt.value=!1,N.value.events.datapointLeave&&N.value.events.datapointLeave({datapoint:e,seriesIndex:e.absoluteIndex})}function pn({val:e,percentage:t,showVal:n,showPercentage:r,config:i}){return Ie({config:i,val:e,percentage:t,showVal:n,showPercentage:r})}function mn(e,t){let n=N.value.style.chart.layout.labels.value.show,r=N.value.style.chart.layout.labels.percentage.show,i=pn({config:N.value.style.chart.layout.labels,showVal:n,showPercentage:r,val:ye(N.value.style.chart.layout.labels.value.formatter,e.value,w({p:e.prefix||``,v:e.value||0,s:e.suffix||``,r:N.value.style.chart.layout.labels.roundingValue}),{datapoint:e,seriesIndex:t}),percentage:w({v:e.percentage,s:`%`,r:N.value.style.chart.layout.labels.roundingPercentage})});return`${e.name}${n||r?`: `:``}${i}`}let hn=x(null);function gn({datapoint:e,seriesIndex:t,show:n=!0}){N.value.events.datapointEnter&&N.value.events.datapointEnter({datapoint:e,seriesIndex:e.absoluteIndex});let r=e.absoluteIndex;X.value=t,hn.value={datapoint:e,seriesIndex:r,series:H.value,config:N.value},bt.value=n;let i=``,a=N.value.style.chart.tooltip.customFormat;if(se(a)&&ve(()=>a({seriesIndex:r,datapoint:e,series:H.value,config:N.value})))xt.value=a({seriesIndex:r,datapoint:e,series:H.value,config:N.value});else{let n=N.value.style.chart.tooltip.showPercentage,r=N.value.style.chart.tooltip.showValue;i+=`<div style="width:100%;text-align:center;border-bottom:1px solid ${N.value.style.chart.tooltip.borderColor};padding-bottom:6px;margin-bottom:3px;">${e.name}</div>`,i+=`<div style="display:flex;flex-direction:row;gap:6px;align-items:center;"><svg viewBox="0 0 60 60" height="14" width="14"><circle cx="30" cy="30" r="30" stroke="none" fill="${e.color}"/></svg>`,i+=`<b>${pn({config:N.value.style.chart.tooltip,showVal:r,showPercentage:n,val:`<span>${ye(N.value.style.chart.layout.labels.value.formatter,e.value,w({p:e.prefix||``,v:e.value,s:e.suffix||``,r:N.value.style.chart.tooltip.roundingValue}),{datapoint:e,seriesIndex:t})}</span>`,percentage:w({v:e.percentage,s:`%`,r:N.value.style.chart.tooltip.roundingPercentage})})}</b></div>`,xt.value=`<div>${i}</div>`}}function _n(){L.value.showTable=!L.value.showTable}function vn(){L.value.showTooltip=!L.value.showTooltip}let Q=x(!1);function yn(){Q.value=!Q.value}async function bn({scale:e=2}={}){if(!O.value)return;let{width:t,height:n}=O.value.getBoundingClientRect(),r=t/n,{imageUri:i,base64:a}=await ke({domElement:O.value,base64:!0,img:!0,scale:e});return{imageUri:i,base64:a,title:N.value.style.chart.title.text,width:t,height:n,aspectRatio:r}}let $=p(()=>{let e=N.value.table.useDialog&&!N.value.table.show,t=L.value.showTable;return{component:e?pt:Ue,title:`${N.value.style.chart.title.text}${N.value.style.chart.title.subtitle.text?`: ${N.value.style.chart.title.subtitle.text}`:``}`,props:e?{backgroundColor:N.value.table.th.backgroundColor,color:N.value.table.th.color,headerColor:N.value.table.th.color,headerBg:N.value.table.th.backgroundColor,isFullscreen:Z.value,fullscreenParent:O.value,forcedWidth:Math.min(600,window.innerWidth*.8),isCursorPointer:P.value}:{hideDetails:!0,config:{open:t,maxHeight:1e4,body:{backgroundColor:N.value.style.chart.backgroundColor,color:N.value.style.chart.color},head:{backgroundColor:N.value.style.chart.backgroundColor,color:N.value.style.chart.color}}}}});v(()=>L.value.showTable,e=>{N.value.table.show||(e&&N.value.table.useDialog&&A.value?A.value.open():`close`in A.value&&A.value.close())});let xn=p(()=>U.value.map(e=>({...e,name:e.display}))),Sn=p(()=>N.value.style.chart.backgroundColor),Cn=p(()=>N.value.style.chart.legend),{exportSvg:wn,getSvg:Tn}=De({svg:I,title:p(()=>N.value.style.chart.title),legend:Cn,legendItems:xn,backgroundColor:Sn});async function En({isCb:e}){M.value=!0,await S();try{if(e){let{blob:e,url:t,text:n,dataUrl:r}=await Tn();await Promise.resolve(N.value.userOptions.callbacks.svg({blob:e,url:t,text:n,dataUrl:r}))}else await Promise.resolve(wn())}finally{M.value=!1}}function Dn(e){if(e?.stage===`start`){j.value=!0;return}if(e?.stage===`end`){j.value=!1;return}Bt()}async function On(){if(nn(`copyAlt`,{config:N.value,dataset:K.value}),!N.value.userOptions.callbacks.altCopy){console.warn("Vue Data UI - A callback must be set for `altCopy` in userOptions.");return}await Promise.resolve(N.value.userOptions.callbacks.altCopy({config:N.value,dataset:K.value}))}return ze({getData:cn,getImage:bn,generatePdf:zt,generateCsv:Y,generateImage:Bt,generateSvg:En,hideSeries:sn,showSeries:on,toggleTable:_n,toggleTooltip:vn,toggleAnnotator:yn,toggleFullscreen:un,copyAlt:On}),(i,a)=>(o(),y(`div`,{class:e(`vue-data-ui-component vue-ui-onion ${Z.value?`vue-data-ui-wrapper-fullscreen`:``} ${N.value.useCssAnimation?``:`vue-ui-dna`}`),ref_key:`onionChart`,ref:O,id:`vue-ui-onion_${E.value}`,style:c(`font-family:${N.value.style.fontFamily};width:100%; ${N.value.responsive?`height: 100%;`:``} text-align:center;background:${N.value.style.chart.backgroundColor}`),onMouseenter:a[4]||=()=>r(Pt)(!0),onMouseleave:a[5]||=()=>r(Pt)(!1)},[N.value.userOptions.buttons.annotator?(o(),d(r(Ke),{key:0,svgRef:r(I),backgroundColor:N.value.style.chart.backgroundColor,color:N.value.style.chart.color,active:Q.value,isCursorPointer:P.value,onClose:yn},{"annotator-action-close":g(()=>[u(i.$slots,`annotator-action-close`,{},void 0,!0)]),"annotator-action-color":g(({color:e})=>[u(i.$slots,`annotator-action-color`,m(s({color:e})),void 0,!0)]),"annotator-action-draw":g(({mode:e})=>[u(i.$slots,`annotator-action-draw`,m(s({mode:e})),void 0,!0)]),"annotator-action-undo":g(({disabled:e})=>[u(i.$slots,`annotator-action-undo`,m(s({disabled:e})),void 0,!0)]),"annotator-action-redo":g(({disabled:e})=>[u(i.$slots,`annotator-action-redo`,m(s({disabled:e})),void 0,!0)]),"annotator-action-delete":g(({disabled:e})=>[u(i.$slots,`annotator-action-delete`,m(s({disabled:e})),void 0,!0)]),_:3},8,[`svgRef`,`backgroundColor`,`color`,`active`,`isCursorPointer`])):t(``,!0),Vt.value?(o(),y(`div`,{key:1,ref_key:`noTitle`,ref:Tt,class:`vue-data-ui-no-title-space`,style:`height:36px; width: 100%;background:transparent`},null,512)):t(``,!0),N.value.style.chart.title.text?(o(),y(`div`,{key:2,ref_key:`chartTitle`,ref:St,style:`width:100%;background:transparent`},[(o(),d(Ae,{key:`title_${Et.value}`,config:{title:{cy:`onion-div-title`,...N.value.style.chart.title},subtitle:{cy:`onion-div-subtitle`,...N.value.style.chart.title.subtitle}}},null,8,[`config`]))],512)):t(``,!0),b(`div`,{id:`legend-top-${E.value}`},null,8,Xe),N.value.userOptions.show&&_t.value&&(r(Ft)||r(Nt))?(o(),d(r(Ge),{ref_key:`details`,ref:vt,key:`user_options${yt.value}`,backgroundColor:N.value.style.chart.backgroundColor,color:N.value.style.chart.color,isImaging:r(Rt),isPrinting:r(Lt),uid:E.value,hasTooltip:N.value.userOptions.buttons.tooltip&&N.value.style.chart.tooltip.show,hasPdf:N.value.userOptions.buttons.pdf,hasImg:N.value.userOptions.buttons.img,hasSvg:N.value.userOptions.buttons.svg,hasXls:N.value.userOptions.buttons.csv,hasTable:N.value.userOptions.buttons.table,hasFullscreen:N.value.userOptions.buttons.fullscreen,hasAltCopy:N.value.userOptions.buttons.altCopy,isFullscreen:Z.value,isTooltip:L.value.showTooltip,titles:{...N.value.userOptions.buttonTitles},chartElement:O.value,position:N.value.userOptions.position,hasAnnotator:N.value.userOptions.buttons.annotator,isAnnotation:Q.value,callbacks:N.value.userOptions.callbacks,printScale:N.value.userOptions.print.scale,tableDialog:N.value.table.useDialog,isCursorPointer:P.value,onToggleFullscreen:un,onGeneratePdf:r(zt),onGenerateCsv:Y,onGenerateImage:Dn,onGenerateSvg:En,onToggleTable:_n,onToggleTooltip:vn,onToggleAnnotator:yn,onCopyAlt:On,style:c({visibility:r(Ft)?r(Nt)?`visible`:`hidden`:`visible`})},re({_:2},[i.$slots.menuIcon?{name:`menuIcon`,fn:g(({isOpen:e,color:t})=>[u(i.$slots,`menuIcon`,m(s({isOpen:e,color:t})),void 0,!0)]),key:`0`}:void 0,i.$slots.optionTooltip?{name:`optionTooltip`,fn:g(()=>[u(i.$slots,`optionTooltip`,{},void 0,!0)]),key:`1`}:void 0,i.$slots.optionPdf?{name:`optionPdf`,fn:g(()=>[u(i.$slots,`optionPdf`,{},void 0,!0)]),key:`2`}:void 0,i.$slots.optionCsv?{name:`optionCsv`,fn:g(()=>[u(i.$slots,`optionCsv`,{},void 0,!0)]),key:`3`}:void 0,i.$slots.optionImg?{name:`optionImg`,fn:g(()=>[u(i.$slots,`optionImg`,{},void 0,!0)]),key:`4`}:void 0,i.$slots.optionSvg?{name:`optionSvg`,fn:g(()=>[u(i.$slots,`optionSvg`,{},void 0,!0)]),key:`5`}:void 0,i.$slots.optionTable?{name:`optionTable`,fn:g(()=>[u(i.$slots,`optionTable`,{},void 0,!0)]),key:`6`}:void 0,i.$slots.optionFullscreen?{name:`optionFullscreen`,fn:g(({toggleFullscreen:e,isFullscreen:t})=>[u(i.$slots,`optionFullscreen`,m(s({toggleFullscreen:e,isFullscreen:t})),void 0,!0)]),key:`7`}:void 0,i.$slots.optionAnnotator?{name:`optionAnnotator`,fn:g(({toggleAnnotator:e,isAnnotator:t})=>[u(i.$slots,`optionAnnotator`,m(s({toggleAnnotator:e,isAnnotator:t})),void 0,!0)]),key:`8`}:void 0,i.$slots.optionAltCopy?{name:`optionAltCopy`,fn:g(({altCopy:e})=>[u(i.$slots,`optionAltCopy`,m(s({altCopy:e})),void 0,!0)]),key:`9`}:void 0]),1032,`backgroundColor.color.isImaging.isPrinting.uid.hasTooltip.hasPdf.hasImg.hasSvg.hasXls.hasTable.hasFullscreen.hasAltCopy.isFullscreen.isTooltip.titles.chartElement.position.hasAnnotator.isAnnotation.callbacks.printScale.tableDialog.isCursorPointer.onGeneratePdf.style`.split(`.`))):t(``,!0),(o(),y(`svg`,{ref_key:`svgRef`,ref:I,xmlns:r(me),class:e({"vue-data-ui-fullscreen--on":Z.value,"vue-data-ui-fulscreen--off":!Z.value,resizing:k.value}),viewBox:`0 0 ${R.value.width<=0?10:R.value.width} ${R.value.height<=0?10:R.value.height}`,style:c(`max-width:100%;overflow:visible;background:transparent;color:${N.value.style.chart.color}`)},[ee(r(Je)),i.$slots[`chart-background`]?(o(),y(`foreignObject`,{key:0,x:0,y:0,width:R.value.width<=0?10:R.value.width,height:R.value.height<=0?10:R.value.height,style:{pointerEvents:`none`}},[u(i.$slots,`chart-background`,{},void 0,!0)],8,Qe)):t(``,!0),(o(!0),y(_,null,f(K.value,(t,n)=>(o(),y(`circle`,{cx:V.value.centerX,cy:V.value.centerY,r:t.radius<=0?1e-4:t.radius,stroke:N.value.style.chart.layout.gutter.color,"stroke-width":G.value.gutter,fill:`none`,"stroke-dasharray":t.path.bgDashArray,"stroke-dashoffset":t.path.fullOffset,"stroke-linecap":`round`,class:e({"vue-ui-onion-path":!0,"vue-ui-onion-blur":N.value.useBlurOnHover&&![null,void 0].includes(X.value)&&X.value!==n}),style:c({transform:`rotate(-90deg)`,transformOrigin:`50% 50%`,transition:k.value||r(F)?`none`:`all 0.3s ease-in-out !important`,animation:k.value||r(F)?`none`:`xyAnimation 0.5s ease-in`})},null,14,$e))),256)),(o(!0),y(_,null,f(K.value,(t,n)=>(o(),y(`circle`,{cx:V.value.centerX,cy:V.value.centerY,r:t.radius<0?1e-4:t.radius,stroke:`${t.color}`,"stroke-width":G.value.track,fill:`none`,"stroke-dasharray":t.path.dashArray,"stroke-dashoffset":t.path.dashOffset,class:e({"vue-ui-onion-path":!0,"vue-ui-onion-blur":N.value.useBlurOnHover&&![null,void 0].includes(X.value)&&X.value!==n}),"stroke-linecap":`round`,style:c({transform:`rotate(-90deg)`,transformOrigin:`50% 50%`,transition:k.value||r(F)?`none`:`all 0.3s ease-in-out !important`,animation:k.value||r(F)?`none`:`xyAnimation 0.5s ease-in`})},null,14,et))),256)),b(`defs`,null,[b(`filter`,{id:`blur_${E.value}`,x:`-50%`,y:`-50%`,width:`200%`,height:`200%`},[b(`feGaussianBlur`,{in:`SourceGraphic`,stdDeviation:100/N.value.style.chart.gradientIntensity},null,8,nt)],8,tt)]),N.value.style.chart.useGradient?(o(),y(`g`,{key:1,filter:`url(#blur_${E.value})`},[(o(!0),y(_,null,f(K.value,(e,t)=>(o(),y(`circle`,{cx:V.value.centerX,cy:V.value.centerY,r:e.radius<=0?1e-4:e.radius,stroke:`white`,"stroke-width":G.value.track/3,fill:`none`,"stroke-linecap":`round`,"stroke-dasharray":e.path.dashArray,"stroke-dashoffset":e.path.dashOffset,style:c({transform:`rotate(-90deg)`,transformOrigin:`50% 50%`,transition:k.value||r(F)?`none`:`all 0.3s ease-in-out !important`,animation:k.value||r(F)?`none`:`xyAnimation 0.5s ease-in`})},null,12,it))),256))],8,rt)):t(``,!0),(o(!0),y(_,null,f(K.value,(e,t)=>(o(),y(`circle`,{cx:V.value.centerX,cy:V.value.centerY,r:e.radius<=0?1e-4:e.radius,stroke:`transparent`,"stroke-width":Math.max(G.value.track,G.value.gutter),fill:`none`,"stroke-dasharray":e.path.bgDashArray,"stroke-dashoffset":e.path.fullOffset,"stroke-linecap":`round`,class:`vue-ui-onion-path`,style:{transform:`rotate(-90deg)`,transformOrigin:`50% 50%`},onMouseenter:n=>gn({datapoint:e,show:!0,seriesIndex:t}),onMouseleave:t=>fn({datapoint:e}),onClick:t=>dn({datapoint:e})},null,40,at))),256)),N.value.style.chart.layout.labels.show?(o(),y(`g`,ot,[(o(!0),y(_,null,f(K.value,(e,n)=>(o(),y(`g`,{onMouseenter:t=>gn({datapoint:e,show:!0,seriesIndex:n}),onMouseleave:t=>fn({datapoint:e}),onClick:t=>dn({datapoint:e})},[D.value.includes(e.id)?t(``,!0):(o(),y(`text`,{key:0,class:`vue-ui-onion-label`,x:R.value.width/2-G.value.gutter*.8+N.value.style.chart.layout.labels.offsetX,y:e.labelY+N.value.style.chart.layout.labels.offsetY,"text-anchor":`end`,"font-size":N.value.style.chart.layout.labels.fontSize,fill:N.value.useBlurOnHover&&![null,void 0].includes(X.value)&&X.value===n?e.color:N.value.style.chart.layout.labels.color,"font-weight":N.value.style.chart.layout.labels.bold?`bold`:`normal`},l(mn(e,n)),9,ct))],40,st))),256))])):t(``,!0),u(i.$slots,`svg`,{svg:{...R.value,isPrintingImg:r(Lt)|r(Rt)|j.value,isPrintingSvg:M.value}},void 0,!0)],14,Ze)),i.$slots.watermark?(o(),y(`div`,lt,[u(i.$slots,`watermark`,m(s({isPrinting:r(Lt)||r(Rt)||j.value||M.value})),void 0,!0)])):t(``,!0),b(`div`,{id:`legend-bottom-${E.value}`},null,8,ut),kt.value?(o(),d(ae,{key:5,to:N.value.style.chart.legend.position===`top`?`#legend-top-${E.value}`:`#legend-bottom-${E.value}`},[b(`div`,{ref_key:`chartLegend`,ref:Ct},[N.value.style.chart.legend.show?(o(),d(Le,{key:`legend_${Ot.value}`,legendSet:U.value,config:$t.value,isCursorPointer:P.value,onClickMarker:a[0]||=({legend:e})=>q(e.id)},{item:g(({legend:e})=>[r(F)?t(``,!0):(o(),y(`div`,{key:0,"data-cy-legend-item":``,onClick:t=>e.segregate(),style:c(`opacity:${D.value.includes(e.id)?.5:1}`)},l(e.display),13,dt))]),legendToggle:g(()=>[U.value.length>2&&N.value.style.chart.legend.selectAllToggle.show&&!r(F)?(o(),d(Ne,{key:0,backgroundColor:N.value.style.chart.legend.selectAllToggle.backgroundColor,color:N.value.style.chart.legend.selectAllToggle.color,fontSize:N.value.style.chart.legend.fontSize,checked:D.value.length>0,isCursorPointer:P.value,onToggle:rn},null,8,[`backgroundColor`,`color`,`fontSize`,`checked`,`isCursorPointer`])):t(``,!0)]),_:1},8,[`legendSet`,`config`,`isCursorPointer`])):u(i.$slots,`legend`,{key:1,legend:U.value},void 0,!0)],512)],8,[`to`])):t(``,!0),i.$slots.source?(o(),y(`div`,{key:6,ref_key:`source`,ref:wt,dir:`auto`},[u(i.$slots,`source`,{},void 0,!0)],512)):t(``,!0),ee(r(Ve),{teleportTo:N.value.style.chart.tooltip.teleportTo,show:L.value.showTooltip&&bt.value,backgroundColor:N.value.style.chart.tooltip.backgroundColor,color:N.value.style.chart.tooltip.color,borderRadius:N.value.style.chart.tooltip.borderRadius,borderColor:N.value.style.chart.tooltip.borderColor,borderWidth:N.value.style.chart.tooltip.borderWidth,fontSize:N.value.style.chart.tooltip.fontSize,backgroundOpacity:N.value.style.chart.tooltip.backgroundOpacity,position:N.value.style.chart.tooltip.position,offsetY:N.value.style.chart.tooltip.offsetY,parent:O.value,content:xt.value,isFullscreen:Z.value,isCustom:r(se)(N.value.style.chart.tooltip.customFormat),smooth:N.value.style.chart.tooltip.smooth,backdropFilter:N.value.style.chart.tooltip.backdropFilter,smoothForce:N.value.style.chart.tooltip.smoothForce,smoothSnapThreshold:N.value.style.chart.tooltip.smoothSnapThreshold},{"tooltip-before":g(()=>[u(i.$slots,`tooltip-before`,m(s({...hn.value})),void 0,!0)]),"tooltip-after":g(()=>[u(i.$slots,`tooltip-after`,m(s({...hn.value})),void 0,!0)]),_:3},8,[`teleportTo`,`show`,`backgroundColor`,`color`,`borderRadius`,`borderColor`,`borderWidth`,`fontSize`,`backgroundOpacity`,`position`,`offsetY`,`parent`,`content`,`isFullscreen`,`isCustom`,`smooth`,`backdropFilter`,`smoothForce`,`smoothSnapThreshold`]),_t.value&&N.value.userOptions.buttons.table?(o(),d(oe($.value.component),te({key:7},$.value.props,{ref_key:`tableUnit`,ref:A,onClose:a[3]||=e=>L.value.showTable=!1}),re({content:g(()=>[(o(),d(r(We),{key:`table_${Dt.value}`,colNames:J.value.colNames,head:J.value.head,body:J.value.body,config:J.value.config,title:N.value.table.useDialog?``:$.value.title,withCloseButton:!N.value.table.useDialog,isCursorPointer:P.value,onClose:a[2]||=e=>L.value.showTable=!1},{th:g(({th:e})=>[n(l(e),1)]),td:g(({td:e})=>[b(`div`,{innerHTML:e},null,8,ft)]),_:1},8,[`colNames`,`head`,`body`,`config`,`title`,`withCloseButton`,`isCursorPointer`]))]),_:2},[N.value.table.useDialog?{name:`title`,fn:g(()=>[n(l($.value.title),1)]),key:`0`}:void 0,N.value.table.useDialog?{name:`actions`,fn:g(()=>[b(`button`,{tabindex:`0`,class:`vue-ui-user-options-button`,onClick:a[1]||=e=>Y(N.value.userOptions.callbacks.csv),style:c({cursor:P.value?`pointer`:`default`})},[ee(r(He),{name:`fileCsv`,stroke:$.value.props.color},null,8,[`stroke`])],4)]),key:`1`}:void 0]),1040)):t(``,!0),u(i.$slots,`skeleton`,{},()=>[r(F)?(o(),d(Te,{key:0})):t(``,!0)],!0)],46,Ye))}},[[`__scopeId`,`data-v-9f33c2d6`]]),mt=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:`Module`}));export{Je as a,mt as b};