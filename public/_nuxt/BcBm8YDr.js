var e={mercator([e,t],n,r,i){t=Math.max(Math.min(t,85.05113),-85.05113);let[a,o]=i,s=(e-a)*Math.PI/180,c=n/(2*Math.PI)*(s+Math.PI),l=e=>Math.log(Math.tan(Math.PI/4+e*Math.PI/180/2)),u=l(85.05113),d=l(-72);return[c,(l(t)-u)/(d-u)*r]},equirectangular([e,t],n,r,i){let[a,o]=i;return t=Math.max(Math.min(t,90),-80),[(e-a+180)/360*n,(90-(t-o))/170*r]},robinson([e,t],n,r,i){let a=[[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]],[o,s]=i;e-=o,t=Math.max(-89.9999,Math.min(89.9999,t));let c=Math.abs(t),l=Math.floor(c/5),u=c%5/5,[d,f]=a[l],[p,m]=a[Math.min(l+1,a.length-1)],h=d+(p-d)*u,g=f+(m-f)*u,_=e*Math.PI/180,v=n/2+n/2*h*_/Math.PI,y=r/2-r/2*Math.sign(t)*g/1;return!Number.isFinite(v)||!Number.isFinite(y)?[-9999,-9999]:[v,y]},mollweide([e,t],n,r,i){t=Math.max(Math.min(t,89.9999),-89.9999);let[a]=i,o=(e-a)*Math.PI/180,s=t*Math.PI/180,c=s,l=1,u=0;for(;Math.abs(l)>1e-10&&u<10;)l=-(2*c+Math.sin(2*c)-Math.PI*Math.sin(s))/(2+2*Math.cos(2*c)),c+=l,u++;isFinite(c)||(c=s>0?Math.PI/2:-Math.PI/2);let d=n/(2*Math.SQRT2),f=(d*(2*Math.SQRT2/Math.PI)*o*Math.cos(c)+2*d)/(4.6*d)*n,p=-d*Math.SQRT2*Math.sin(c),m=-d*Math.SQRT2,h=d*Math.SQRT2,g=(p-m)/(h-m)*r;return[isFinite(f)?f:0,isFinite(g)?g:0]},winkelTripel([e,t],n,r,i){let[a,o]=i,s=(e-a)*Math.PI/180,c=t*Math.PI/180,l=s*Math.cos(Math.PI/6),u=c,d=Math.acos(Math.cos(c)*Math.cos(s/2)),f=2*Math.cos(c)*Math.sin(s/2)/(Math.sin(d)/d||1),p=Math.sin(c)/(Math.sin(d)/d||1);return[n/2+n/(2*Math.PI)*(l+f)/2,r/2-r/(2*Math.PI)*(u+p)/2]},aitoff([e,t],n,r,i){Math.sinc||(Math.sinc=function(e){return e===0?1:Math.sin(Math.PI*e)/(Math.PI*e)});let[a,o]=i,s=(e-a)*Math.PI/180,c=t*Math.PI/180,l=Math.acos(Math.cos(c)*Math.cos(s/2)),u=0,d=0;return l!==0&&(u=2*Math.cos(c)*Math.sin(s/2)/Math.sinc(l/Math.PI),d=Math.sin(c)/Math.sinc(l/Math.PI)),u=n/2+n/4*u,d=r/2-r/2*d,[u,d]},hammer([e,t],n,r,i){let[a,o]=i,s=(e-a)*Math.PI/180,c=t*Math.PI/180,l=Math.sqrt(1+Math.cos(c)*Math.cos(s/2));return[n/2+n/2*(2*Math.SQRT2*Math.cos(c)*Math.sin(s/2)/l)/2.8284271247461903,r/2-r/2*(Math.SQRT2*Math.sin(c)/l)/1.4142135623730951]},bonne([e,t],n,r,i=[0,0]){let a=45*Math.PI/180,[o,s]=i,c=(e-o)*Math.PI/180,l=Math.max(Math.min(t,89.9),-89.9)*Math.PI/180,u=1/Math.tan(a),d=u+a-l,f=d===0?0:c*Math.cos(l)/d,p=Math.min(n,r)/2.6;return[n/2+p*d*Math.sin(f),r/2-p*(u-d*Math.cos(f))]},sinusoidal([e,t],n,r,i){let[a,o]=i,s=(e-a)*Math.PI/180,c=t*Math.PI/180;return[n/2+n/(2*Math.PI)*s*Math.cos(c),r/2-r/Math.PI*c]},gallPeters([e,t],n,r,i){let[a,o]=i;return t=Math.max(Math.min(t,89.9999),-89.9999),[(e-a+180)/360*n,r/2-r/Math.PI*Math.sin(t*Math.PI/180)]},vanDerGrinten([e,t],n,r,i=[0,0]){let a=Math.PI,o=Math.PI/2,s=1e-6,c=(e-(i[0]||0))*a/180,l=(t-(i[1]||0))*a/180,u=Math.abs(c),d=Math.abs(l),f,p;if(d<s)f=c,p=0;else if(u<s||Math.abs(d-o)<s)f=0,p=Math.sign(l)*a*Math.tan(Math.asin(d/o)/2);else{let e=d/o,t=Math.asin(e),n=Math.cos(t),r=.5*Math.abs(a/c-c/a),i=r*r,s=n/(e+n-1),u=s*(2/e-1),m=u*u,h=m+i,g=s-m,_=i+s;f=Math.sign(c)*a*(r*g+Math.sqrt(Math.max(0,i*g*g-h*(s*s-m))))/h,p=Math.sign(l)*a*(u*_-r*Math.sqrt(Math.max(0,(i+1)*h-_*_)))/h}let m=n/2/a*.98,h=n/2,g=r/2;return[h+f*m,g-p*m]},globe([e,t],n,r,i){let[a,o]=i,s=(e-a)*Math.PI/180,c=t*Math.PI/180,l=o*Math.PI/180,u=Math.min(n,r)/2*.95,d=n/2,f=r/2,p=u*Math.cos(c)*Math.sin(s)+d,m=-u*(Math.cos(l)*Math.sin(c)-Math.sin(l)*Math.cos(c)*Math.cos(s))+f;return Math.sin(l)*Math.sin(c)+Math.cos(l)*Math.cos(c)*Math.cos(s)<0?[NaN,NaN]:[p,m]},azimuthalEquidistant([e,t],n,r,i=[0,0]){let a=e=>e*Math.PI/180,[o,s]=i,c=a(e-o),l=a(t),u=a(s),d=Math.sin(u)*Math.sin(l)+Math.cos(u)*Math.cos(l)*Math.cos(c),f=Math.acos(Math.max(-1,Math.min(1,d))),p=f===0?1:f/Math.sin(f),m=p*Math.cos(l)*Math.sin(c),h=p*(Math.cos(u)*Math.sin(l)-Math.sin(u)*Math.cos(l)*Math.cos(c)),g=Math.min(n,r)/2/Math.PI,_=n/2,v=r/2;return[_+m*g,v-h*g]}};function t(e,t,n,r,i=[0,0]){let a=1/0,o=1/0,s=-1/0,c=-1/0;for(let l of t){let t=l.geometry,u=t.type===`Polygon`?[t.coordinates]:t.type===`MultiPolygon`?t.coordinates:[];for(let t of u)for(let l of t)for(let[t,u]of l){let[l,d]=e([t,u],n,r,i);!Number.isFinite(l)||!Number.isFinite(d)||(a=Math.min(a,l),s=Math.max(s,l),o=Math.min(o,d),c=Math.max(c,d))}}return{minX:Math.floor(a)-10,minY:Math.floor(o)-10,width:Math.ceil(s-a)+20,height:Math.ceil(c-o)+20}}function n(e,t,n){let r=e.find(e=>e.properties.admin===t||e.properties.name===t),i=e.find(e=>e.properties.admin===n||e.properties.name===n);return r&&i&&(r.geometry.type===`Polygon`&&(r.geometry={type:`MultiPolygon`,coordinates:[r.geometry.coordinates]}),i.geometry.type===`Polygon`?r.geometry.coordinates.push(i.geometry.coordinates):i.geometry.type===`MultiPolygon`&&r.geometry.coordinates.push(...i.geometry.coordinates),e=e.filter(e=>!(e.properties.admin===n||e.properties.name===n))),e}function r(e,t){let r=Array.isArray(t)?t.map(e=>({...e})):t.features?t.features.map(e=>({...e})):[];return e.style.chart.territory.showTaiwanAsPartOfChina&&(r=n(r,`China`,`Taiwan`)),t.type===`FeatureCollection`?{...t,features:r}:r}var i={projections:e,getProjectedBounds:t,setupTerritories:r};export{i as t};