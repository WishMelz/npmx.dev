"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RegexpSchema = void 0;
exports.regexp = regexp;
const core_js_1 = require("../core.js");
/**
 * Schema for validating strings against a regular expression pattern.
 *
 * Validates that the input is a string and matches the provided pattern.
 * The pattern is tested using RegExp.test().
 *
 * @template TValue - The string type (can be narrowed with branded types)
 *
 * @example
 * ```ts
 * const schema = new RegexpSchema(/^[a-z]+$/)
 * schema.validate('hello') // success
 * schema.validate('Hello') // fails - uppercase not allowed
 * ```
 */
class RegexpSchema extends core_js_1.Schema {
    pattern;
    type = 'regexp';
    constructor(pattern) {
        super();
        this.pattern = pattern;
    }
    validateInContext(input, ctx) {
        if (typeof input !== 'string') {
            return ctx.issueUnexpectedType(input, 'string');
        }
        if (!this.pattern.test(input)) {
            return ctx.issueInvalidFormat(input, this.pattern.toString());
        }
        return ctx.success(input);
    }
}
exports.RegexpSchema = RegexpSchema;
/**
 * Creates a regexp schema that validates strings against a pattern.
 *
 * Useful for custom string formats not covered by the built-in format
 * validators.
 *
 * @param pattern - Regular expression pattern to match against
 * @returns A new {@link RegexpSchema} instance
 *
 * @example
 * ```ts
 * // Simple pattern
 * const slugSchema = l.regexp(/^[a-z0-9-]+$/)
 *
 * // With anchors for exact match
 * const uuidSchema = l.regexp(
 *   /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i
 * )
 *
 * // Semantic versioning
 * const semverSchema = l.regexp(/^\d+\.\d+\.\d+(-[\w.]+)?(\+[\w.]+)?$/)
 *
 * // Use in object
 * const configSchema = l.object({
 *   name: l.regexp(/^[a-z][a-z0-9-]*$/), // kebab-case identifier
 *   version: semverSchema,
 * })
 * ```
 */
/*@__NO_SIDE_EFFECTS__*/
function regexp(pattern) {
    return new RegexpSchema(pattern);
}
//# sourceMappingURL=regexp.js.map